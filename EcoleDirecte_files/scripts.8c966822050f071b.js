!function(){function P(G){return G&&G.__esModule?G.default:G}function X(G){if(void 0===G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function I(G,B){if(!(G instanceof B))throw new TypeError("Cannot call a class as a function")}function y(G,B){for(var A=0;A<B.length;A++){var H=B[A];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(G,H.key,H)}}function w(G,B,A){return B&&y(G.prototype,B),A&&y(G,A),G}function E(G){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)})(G)}function R(G,B){return(R=Object.setPrototypeOf||function(A,H){return A.__proto__=H,A})(G,B)}function N(G,B){return!B||"object"!=((A=B)&&A.constructor===Symbol?"symbol":typeof A)&&"function"!=typeof B?X(G):B;var A}var x;function S(G){return Array.isArray(G)||"[object Object]"=={}.toString.call(G)}function s(G){return!G||"object"!=typeof G&&"function"!=typeof G}x=function G(){var B=[].slice.call(arguments),A=!1;"boolean"==typeof B[0]&&(A=B.shift());var H=B[0];if(s(H))throw new Error("extendee must be an object");for(var $=B.slice(1),J=$.length,Q=0;Q<J;Q++){var U=$[Q];for(var K in U)if(Object.prototype.hasOwnProperty.call(U,K)){var F=U[K];if(A&&S(F)){var L=Array.isArray(F)?[]:{};H[K]=G(!0,Object.prototype.hasOwnProperty.call(H,K)&&!s(H[K])?H[K]:L,F)}else H[K]=F}}return H};var u=function(){"use strict";function G(){I(this,G)}return w(G,[{key:"on",value:function(B,A){return this._callbacks=this._callbacks||{},this._callbacks[B]||(this._callbacks[B]=[]),this._callbacks[B].push(A),this}},{key:"emit",value:function(B){for(var A=arguments.length,H=new Array(A>1?A-1:0),$=1;$<A;$++)H[$-1]=arguments[$];this._callbacks=this._callbacks||{};var J=this._callbacks[B],Q=!0,U=!1,K=void 0;if(J)try{for(var F,L=J[Symbol.iterator]();!(Q=(F=L.next()).done);Q=!0){var ie=F.value;ie.apply(this,H)}}catch(Y){U=!0,K=Y}finally{try{Q||null==L.return||L.return()}finally{if(U)throw K}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+B,{args:H})),this}},{key:"makeEvent",value:function(B,A){var H={bubbles:!0,cancelable:!0,detail:A};if("function"==typeof window.CustomEvent)return new CustomEvent(B,H);var $=document.createEvent("CustomEvent");return $.initCustomEvent(B,H.bubbles,H.cancelable,H.detail),$}},{key:"off",value:function(B,A){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var H=this._callbacks[B];if(!H)return this;if(1===arguments.length)return delete this._callbacks[B],this;for(var $=0;$<H.length;$++){var J=H[$];if(J===A){H.splice($,1);break}}return this}}]),G}(),m={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(G,B,A){if(A)return{dzuuid:A.file.upload.uuid,dzchunkindex:A.index,dztotalfilesize:A.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:A.file.upload.totalChunkCount,dzchunkbyteoffset:A.index*this.options.chunkSize}},accept:function(G,B){return B()},chunksUploaded:function(G,B){B()},binaryBody:!1,fallback:function(){var G;this.element.className="".concat(this.element.className," dz-browser-not-supported");var B=!0,A=!1,H=void 0;try{for(var $,J=this.element.getElementsByTagName("div")[Symbol.iterator]();!(B=($=J.next()).done);B=!0){var Q=$.value;if(/(^| )dz-message($| )/.test(Q.className)){G=Q,Q.className="dz-message";break}}}catch(K){A=!0,H=K}finally{try{B||null==J.return||J.return()}finally{if(A)throw H}}G||(G=l.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(G));var U=G.getElementsByTagName("span")[0];return U&&(null!=U.textContent?U.textContent=this.options.dictFallbackMessage:null!=U.innerText&&(U.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(G,B,A,H){var $={srcX:0,srcY:0,srcWidth:G.width,srcHeight:G.height},J=G.width/G.height;null==B&&null==A?(B=$.srcWidth,A=$.srcHeight):null==B?B=A*J:null==A&&(A=B/J);var Q=(B=Math.min(B,$.srcWidth))/(A=Math.min(A,$.srcHeight));if($.srcWidth>B||$.srcHeight>A)if("crop"===H)J>Q?($.srcHeight=G.height,$.srcWidth=$.srcHeight*Q):($.srcWidth=G.width,$.srcHeight=$.srcWidth/Q);else{if("contain"!==H)throw new Error("Unknown resizeMethod '".concat(H,"'"));J>Q?A=B/J:B=A*J}return $.srcX=(G.width-$.srcWidth)/2,$.srcY=(G.height-$.srcHeight)/2,$.trgWidth=B,$.trgHeight=A,$},transformFile:function(G,B){return(this.options.resizeWidth||this.options.resizeHeight)&&G.type.match(/image.*/)?this.resizeImage(G,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,B):B(G)},previewTemplate:P('<div class="dz-file-preview dz-preview"> <div class="dz-image"><img data-dz-thumbnail=""></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size=""></span></div> <div class="dz-filename"><span data-dz-name=""></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress=""></span> </div> <div class="dz-error-message"><span data-dz-errormessage=""></span></div> <div class="dz-success-mark"> <svg width="54" height="54" fill="#fff"><path d="m10.207 29.793 4.086-4.086a1 1 0 0 1 1.414 0l5.586 5.586a1 1 0 0 0 1.414 0l15.586-15.586a1 1 0 0 1 1.414 0l4.086 4.086a1 1 0 0 1 0 1.414L22.707 42.293a1 1 0 0 1-1.414 0L10.207 31.207a1 1 0 0 1 0-1.414Z"/></svg> </div> <div class="dz-error-mark"> <svg width="54" height="54" fill="#fff"><path d="m26.293 20.293-7.086-7.086a1 1 0 0 0-1.414 0l-4.586 4.586a1 1 0 0 0 0 1.414l7.086 7.086a1 1 0 0 1 0 1.414l-7.086 7.086a1 1 0 0 0 0 1.414l4.586 4.586a1 1 0 0 0 1.414 0l7.086-7.086a1 1 0 0 1 1.414 0l7.086 7.086a1 1 0 0 0 1.414 0l4.586-4.586a1 1 0 0 0 0-1.414l-7.086-7.086a1 1 0 0 1 0-1.414l7.086-7.086a1 1 0 0 0 0-1.414l-4.586-4.586a1 1 0 0 0-1.414 0l-7.086 7.086a1 1 0 0 1-1.414 0Z"/></svg> </div> </div>'),drop:function(G){return this.element.classList.remove("dz-drag-hover")},dragstart:function(G){},dragend:function(G){return this.element.classList.remove("dz-drag-hover")},dragenter:function(G){return this.element.classList.add("dz-drag-hover")},dragover:function(G){return this.element.classList.add("dz-drag-hover")},dragleave:function(G){return this.element.classList.remove("dz-drag-hover")},paste:function(G){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(G){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){var B=this;G.previewElement=l.createElement(this.options.previewTemplate.trim()),G.previewTemplate=G.previewElement,this.previewsContainer.appendChild(G.previewElement);var A=!0,H=!1,$=void 0;try{for(var J,Q=G.previewElement.querySelectorAll("[data-dz-name]")[Symbol.iterator]();!(A=(J=Q.next()).done);A=!0){var U=J.value;U.textContent=G.name}}catch(ae){H=!0,$=ae}finally{try{A||null==Q.return||Q.return()}finally{if(H)throw $}}var K=!0,F=!1,L=void 0;try{for(var ie,Y=G.previewElement.querySelectorAll("[data-dz-size]")[Symbol.iterator]();!(K=(ie=Y.next()).done);K=!0)(U=ie.value).innerHTML=this.filesize(G.size)}catch(ae){F=!0,L=ae}finally{try{K||null==Y.return||Y.return()}finally{if(F)throw L}}this.options.addRemoveLinks&&(G._removeLink=l.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),G.previewElement.appendChild(G._removeLink));var ne=function(ae){var fe=B;if(ae.preventDefault(),ae.stopPropagation(),G.status===l.UPLOADING)return l.confirm(B.options.dictCancelUploadConfirmation,function(){return fe.removeFile(G)});var Me=B;return B.options.dictRemoveFileConfirmation?l.confirm(B.options.dictRemoveFileConfirmation,function(){return Me.removeFile(G)}):B.removeFile(G)},le=!0,ge=!1,Ee=void 0;try{for(var Le,Qe=G.previewElement.querySelectorAll("[data-dz-remove]")[Symbol.iterator]();!(le=(Le=Qe.next()).done);le=!0)Le.value.addEventListener("click",ne)}catch(ae){ge=!0,Ee=ae}finally{try{le||null==Qe.return||Qe.return()}finally{if(ge)throw Ee}}}},removedfile:function(G){return null!=G.previewElement&&null!=G.previewElement.parentNode&&G.previewElement.parentNode.removeChild(G.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(G,B){if(G.previewElement){G.previewElement.classList.remove("dz-file-preview");var A=!0,H=!1,$=void 0;try{for(var J,Q=G.previewElement.querySelectorAll("[data-dz-thumbnail]")[Symbol.iterator]();!(A=(J=Q.next()).done);A=!0){var U=J.value;U.alt=G.name,U.src=B}}catch(K){H=!0,$=K}finally{try{A||null==Q.return||Q.return()}finally{if(H)throw $}}return setTimeout(function(){return G.previewElement.classList.add("dz-image-preview")},1)}},error:function(G,B){if(G.previewElement){G.previewElement.classList.add("dz-error"),"string"!=typeof B&&B.error&&(B=B.error);var A=!0,H=!1,$=void 0;try{for(var J,Q=G.previewElement.querySelectorAll("[data-dz-errormessage]")[Symbol.iterator]();!(A=(J=Q.next()).done);A=!0)J.value.textContent=B}catch(U){H=!0,$=U}finally{try{A||null==Q.return||Q.return()}finally{if(H)throw $}}}},errormultiple:function(){},processing:function(G){if(G.previewElement&&(G.previewElement.classList.add("dz-processing"),G._removeLink))return G._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(G,B,A){var H=!0,$=!1,J=void 0;if(G.previewElement)try{for(var Q,U=G.previewElement.querySelectorAll("[data-dz-uploadprogress]")[Symbol.iterator]();!(H=(Q=U.next()).done);H=!0){var K=Q.value;"PROGRESS"===K.nodeName?K.value=B:K.style.width="".concat(B,"%")}}catch(F){$=!0,J=F}finally{try{H||null==U.return||U.return()}finally{if($)throw J}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(G){if(G.previewElement)return G.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(G){return this.emit("error",G,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(G){if(G._removeLink&&(G._removeLink.innerHTML=this.options.dictRemoveFile),G.previewElement)return G.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},l=function(G){"use strict";function B(A,H){var $,J,Q,U;if(I(this,B),($=N(this,(J=B,E(J)).call(this))).element=A,$.clickableElements=[],$.listeners=[],$.files=[],"string"==typeof $.element&&($.element=document.querySelector($.element)),!$.element||null==$.element.nodeType)throw new Error("Invalid dropzone element.");if($.element.dropzone)throw new Error("Dropzone already attached.");B.instances.push(X($)),$.element.dropzone=X($);var K=null!=(U=B.optionsForElement($.element))?U:{};if($.options=P(x)(!0,{},m,K,H??{}),$.options.previewTemplate=$.options.previewTemplate.replace(/\n*/g,""),$.options.forceFallback||!B.isBrowserSupported())return N($,$.options.fallback.call(X($)));if(null==$.options.url&&($.options.url=$.element.getAttribute("action")),!$.options.url)throw new Error("No URL provided.");if($.options.acceptedFiles&&$.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if($.options.uploadMultiple&&$.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");if($.options.binaryBody&&$.options.uploadMultiple)throw new Error("You cannot set both: binaryBody and uploadMultiple.");return $.options.acceptedMimeTypes&&($.options.acceptedFiles=$.options.acceptedMimeTypes,delete $.options.acceptedMimeTypes),null!=$.options.renameFilename&&($.options.renameFile=function(F){return $.options.renameFilename.call(X($),F.name,F)}),"string"==typeof $.options.method&&($.options.method=$.options.method.toUpperCase()),(Q=$.getExistingFallback())&&Q.parentNode&&Q.parentNode.removeChild(Q),!1!==$.options.previewsContainer&&($.previewsContainer=$.options.previewsContainer?B.getElement($.options.previewsContainer,"previewsContainer"):$.element),$.options.clickable&&($.clickableElements=!0===$.options.clickable?[$.element]:B.getElements($.options.clickable,"clickable")),$.init(),$}return function C(G,B){if("function"!=typeof B&&null!==B)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(B&&B.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),B&&R(G,B)}(B,G),w(B,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(A){return A.accepted}).map(function(A){return A})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(A){return!A.accepted}).map(function(A){return A})}},{key:"getFilesWithStatus",value:function(A){return this.files.filter(function(H){return H.status===A}).map(function(H){return H})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(B.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(B.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(B.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(A){return A.status===B.UPLOADING||A.status===B.QUEUED}).map(function(A){return A})}},{key:"init",value:function(){var A=this,H=this,$=this,J=this,Q=this,U=this,K=this,F=this,L=this,ie=this,Y=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(B.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length){var ne=this,le=function(){var je=ne;ne.hiddenFileInput&&ne.hiddenFileInput.parentNode.removeChild(ne.hiddenFileInput),ne.hiddenFileInput=document.createElement("input"),ne.hiddenFileInput.setAttribute("type","file"),(null===ne.options.maxFiles||ne.options.maxFiles>1)&&ne.hiddenFileInput.setAttribute("multiple","multiple"),ne.hiddenFileInput.className="dz-hidden-input",null!==ne.options.acceptedFiles&&ne.hiddenFileInput.setAttribute("accept",ne.options.acceptedFiles),null!==ne.options.capture&&ne.hiddenFileInput.setAttribute("capture",ne.options.capture),ne.hiddenFileInput.setAttribute("tabindex","-1"),ne.hiddenFileInput.style.visibility="hidden",ne.hiddenFileInput.style.position="absolute",ne.hiddenFileInput.style.top="0",ne.hiddenFileInput.style.left="0",ne.hiddenFileInput.style.height="0",ne.hiddenFileInput.style.width="0",B.getElement(ne.options.hiddenInputContainer,"hiddenInputContainer").appendChild(ne.hiddenFileInput),ne.hiddenFileInput.addEventListener("change",function(){var ze=je.hiddenFileInput.files,we=!0,Ce=!1,ye=void 0;if(ze.length)try{for(var $e,qe=ze[Symbol.iterator]();!(we=($e=qe.next()).done);we=!0)je.addFile($e.value)}catch(de){Ce=!0,ye=de}finally{try{we||null==qe.return||qe.return()}finally{if(Ce)throw ye}}je.emit("addedfiles",ze),le()})};le()}this.URL=null!==window.URL?window.URL:window.webkitURL;var ge=!0,Ee=!1,Le=void 0;try{for(var Qe,ae=this.events[Symbol.iterator]();!(ge=(Qe=ae.next()).done);ge=!0){var fe=Qe.value;this.on(fe,this.options[fe])}}catch(je){Ee=!0,Le=je}finally{try{ge||null==ae.return||ae.return()}finally{if(Ee)throw Le}}this.on("uploadprogress",function(){return A.updateTotalUploadProgress()}),this.on("removedfile",function(){return H.updateTotalUploadProgress()}),this.on("canceled",function(je){return $.emit("complete",je)}),this.on("complete",function(je){var ze=J;if(0===J.getAddedFiles().length&&0===J.getUploadingFiles().length&&0===J.getQueuedFiles().length)return setTimeout(function(){return ze.emit("queuecomplete")},0)});var Me=function(je){if(function(ze){if(ze.dataTransfer.types)for(var we=0;we<ze.dataTransfer.types.length;we++)if("Files"===ze.dataTransfer.types[we])return!0;return!1}(je))return je.stopPropagation(),je.preventDefault?je.preventDefault():je.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(je){return Q.emit("dragstart",je)},dragenter:function(je){return Me(je),U.emit("dragenter",je)},dragover:function(je){var ze;try{ze=je.dataTransfer.effectAllowed}catch{}return je.dataTransfer.dropEffect="move"===ze||"linkMove"===ze?"move":"copy",Me(je),K.emit("dragover",je)},dragleave:function(je){return F.emit("dragleave",je)},drop:function(je){return Me(je),L.drop(je)},dragend:function(je){return ie.emit("dragend",je)}}}],this.clickableElements.forEach(function(je){var ze=Y;return Y.listeners.push({element:je,events:{click:function(we){return(je!==ze.element||we.target===ze.element||B.elementInside(we.target,ze.element.querySelector(".dz-message")))&&ze.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,B.instances.splice(B.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var A,H=0,$=0;if(this.getActiveFiles().length){var J=!0,Q=!1,U=void 0;try{for(var K,F=this.getActiveFiles()[Symbol.iterator]();!(J=(K=F.next()).done);J=!0){var L=K.value;H+=L.upload.bytesSent,$+=L.upload.total}}catch(ie){Q=!0,U=ie}finally{try{J||null==F.return||F.return()}finally{if(Q)throw U}}A=100*H/$}else A=100;return this.emit("totaluploadprogress",A,$,H)}},{key:"_getParamName",value:function(A){return"function"==typeof this.options.paramName?this.options.paramName(A):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(A,"]"):"")}},{key:"_renameFile",value:function(A){return"function"!=typeof this.options.renameFile?A.name:this.options.renameFile(A)}},{key:"getFallbackForm",value:function(){var A,H;if(A=this.getExistingFallback())return A;var $='<div class="dz-fallback">';this.options.dictFallbackText&&($+="<p>".concat(this.options.dictFallbackText,"</p>")),$+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var J=B.createElement($);return"FORM"!==this.element.tagName?(H=B.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(J):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),H??J}},{key:"getExistingFallback",value:function(){var A=function(L){var ie=!0,Y=!1,ne=void 0;try{for(var le,ge=L[Symbol.iterator]();!(ie=(le=ge.next()).done);ie=!0){var Ee=le.value;if(/(^| )fallback($| )/.test(Ee.className))return Ee}}catch(Le){Y=!0,ne=Le}finally{try{ie||null==ge.return||ge.return()}finally{if(Y)throw ne}}},H=!0,$=!1,J=void 0;try{for(var Q,U=["div","form"][Symbol.iterator]();!(H=(Q=U.next()).done);H=!0){var K;if(K=A(this.element.getElementsByTagName(Q.value)))return K}}catch(L){$=!0,J=L}finally{try{H||null==U.return||U.return()}finally{if($)throw J}}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(A){return function(){var H=[];for(var $ in A.events)H.push(A.element.addEventListener($,A.events[$],!1));return H}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(A){return function(){var H=[];for(var $ in A.events)H.push(A.element.removeEventListener($,A.events[$],!1));return H}()})}},{key:"disable",value:function(){var A=this;return this.clickableElements.forEach(function(H){return H.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(H){return A.cancelUpload(H)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(A){return A.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(A){var H=0,$="b";if(A>0){for(var J=["tb","gb","mb","kb","b"],Q=0;Q<J.length;Q++){var U=J[Q];if(A>=Math.pow(this.options.filesizeBase,4-Q)/10){H=A/Math.pow(this.options.filesizeBase,4-Q),$=U;break}}H=Math.round(10*H)/10}return"<strong>".concat(H,"</strong> ").concat(this.options.dictFileSizeUnits[$])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(A){if(A.dataTransfer){this.emit("drop",A);for(var H=[],$=0;$<A.dataTransfer.files.length;$++)H[$]=A.dataTransfer.files[$];if(H.length){var J=A.dataTransfer.items;J&&J.length&&null!=J[0].webkitGetAsEntry?this._addFilesFromItems(J):this.handleFiles(H)}this.emit("addedfiles",H)}}},{key:"paste",value:function(A){if(H=A?.clipboardData,null!=(null!=H?H.items:void 0)){var H;this.emit("paste",A);var J=A.clipboardData.items;return J.length?this._addFilesFromItems(J):void 0}}},{key:"handleFiles",value:function(A){var H=!0,$=!1,J=void 0;try{for(var Q,U=A[Symbol.iterator]();!(H=(Q=U.next()).done);H=!0)this.addFile(Q.value)}catch(F){$=!0,J=F}finally{try{H||null==U.return||U.return()}finally{if($)throw J}}}},{key:"_addFilesFromItems",value:function(A){var H=this;return function(){var $=[],J=!0,Q=!1,U=void 0;try{for(var K,F=A[Symbol.iterator]();!(J=(K=F.next()).done);J=!0){var L,ie=K.value;null!=ie.webkitGetAsEntry&&(L=ie.webkitGetAsEntry())?$.push(L.isFile?H.addFile(ie.getAsFile()):L.isDirectory?H._addFilesFromDirectory(L,L.name):void 0):$.push(null==ie.getAsFile||null!=ie.kind&&"file"!==ie.kind?void 0:H.addFile(ie.getAsFile()))}}catch(Y){Q=!0,U=Y}finally{try{J||null==F.return||F.return()}finally{if(Q)throw U}}return $}()}},{key:"_addFilesFromDirectory",value:function(A,H){var $=this,J=A.createReader(),Q=function(K){return null!=(F=console)&&"function"==typeof F.log?F.log(K):void 0;var F},U=function(){var K=$;return J.readEntries(function(F){if(F.length>0){var L=!0,ie=!1,Y=void 0;try{for(var ne,le=F[Symbol.iterator]();!(L=(ne=le.next()).done);L=!0){var ge=ne.value,Ee=K;ge.isFile?ge.file(function(Le){if(!Ee.options.ignoreHiddenFiles||"."!==Le.name.substring(0,1))return Le.fullPath="".concat(H,"/").concat(Le.name),Ee.addFile(Le)}):ge.isDirectory&&K._addFilesFromDirectory(ge,"".concat(H,"/").concat(ge.name))}}catch(Le){ie=!0,Y=Le}finally{try{L||null==le.return||le.return()}finally{if(ie)throw Y}}U()}return null},Q)};return U()}},{key:"accept",value:function(A,H){this.options.maxFilesize&&A.size>1048576*this.options.maxFilesize?H(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(A.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):B.isValidFile(A,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(H(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",A)):this.options.accept.call(this,A,H):H(this.options.dictInvalidFileType)}},{key:"addFile",value:function(A){var H=this;A.upload={uuid:B.uuidv4(),progress:0,total:A.size,bytesSent:0,filename:this._renameFile(A)},this.files.push(A),A.status=B.ADDED,this.emit("addedfile",A),this._enqueueThumbnail(A),this.accept(A,function($){$?(A.accepted=!1,H._errorProcessing([A],$)):(A.accepted=!0,H.options.autoQueue&&H.enqueueFile(A)),H._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(A){var H=!0,$=!1,J=void 0;try{for(var Q,U=A[Symbol.iterator]();!(H=(Q=U.next()).done);H=!0)this.enqueueFile(Q.value)}catch(F){$=!0,J=F}finally{try{H||null==U.return||U.return()}finally{if($)throw J}}return null}},{key:"enqueueFile",value:function(A){if(A.status!==B.ADDED||!0!==A.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");var H=this;if(A.status=B.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return H.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(A){if(this.options.createImageThumbnails&&A.type.match(/image.*/)&&A.size<=1048576*this.options.maxThumbnailFilesize){var H=this;return this._thumbnailQueue.push(A),setTimeout(function(){return H._processThumbnailQueue()},0)}}},{key:"_processThumbnailQueue",value:function(){var A=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var H=this._thumbnailQueue.shift();return this.createThumbnail(H,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function($){return A.emit("thumbnail",H,$),A._processingThumbnail=!1,A._processThumbnailQueue()})}}},{key:"removeFile",value:function(A){if(A.status===B.UPLOADING&&this.cancelUpload(A),this.files=M(this.files,A),this.emit("removedfile",A),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(A){null==A&&(A=!1);var H=!0,$=!1,J=void 0;try{for(var Q,U=this.files.slice()[Symbol.iterator]();!(H=(Q=U.next()).done);H=!0){var K=Q.value;(K.status!==B.UPLOADING||A)&&this.removeFile(K)}}catch(F){$=!0,J=F}finally{try{H||null==U.return||U.return()}finally{if($)throw J}}return null}},{key:"resizeImage",value:function(A,H,$,J,Q){var U=this;return this.createThumbnail(A,H,$,J,!0,function(K,F){if(null==F)return Q(A);var L=U.options.resizeMimeType;null==L&&(L=A.type);var ie=F.toDataURL(L,U.options.resizeQuality);return"image/jpeg"!==L&&"image/jpg"!==L||(ie=ee.restore(A.dataURL,ie)),Q(B.dataURItoBlob(ie))})}},{key:"createThumbnail",value:function(A,H,$,J,Q,U){var K=this,F=new FileReader;F.onload=function(){A.dataURL=F.result,"image/svg+xml"!==A.type?K.createThumbnailFromUrl(A,H,$,J,Q,U):U?.(F.result)},F.readAsDataURL(A)}},{key:"displayExistingFile",value:function(A,H,$,J,Q){var U=void 0===Q||Q;if(this.emit("addedfile",A),this.emit("complete",A),U){var K=this;A.dataURL=H,this.createThumbnailFromUrl(A,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,function(F){K.emit("thumbnail",A,F),$&&$()},J)}else this.emit("thumbnail",A,H),$&&$()}},{key:"createThumbnailFromUrl",value:function(A,H,$,J,Q,U,K){var F=this,L=document.createElement("img");return K&&(L.crossOrigin=K),Q="from-image"!=getComputedStyle(document.body).imageOrientation&&Q,L.onload=function(){var ie=F,Y=function(ne){return ne(1)};return typeof EXIF<"u"&&null!==EXIF&&Q&&(Y=function(ne){return EXIF.getData(L,function(){return ne(EXIF.getTag(this,"Orientation"))})}),Y(function(ne){A.width=L.width,A.height=L.height;var le=ie.options.resize.call(ie,A,H,$,J),ge=document.createElement("canvas"),Ee=ge.getContext("2d");switch(ge.width=le.trgWidth,ge.height=le.trgHeight,ne>4&&(ge.width=le.trgHeight,ge.height=le.trgWidth),ne){case 2:Ee.translate(ge.width,0),Ee.scale(-1,1);break;case 3:Ee.translate(ge.width,ge.height),Ee.rotate(Math.PI);break;case 4:Ee.translate(0,ge.height),Ee.scale(1,-1);break;case 5:Ee.rotate(.5*Math.PI),Ee.scale(1,-1);break;case 6:Ee.rotate(.5*Math.PI),Ee.translate(0,-ge.width);break;case 7:Ee.rotate(.5*Math.PI),Ee.translate(ge.height,-ge.width),Ee.scale(-1,1);break;case 8:Ee.rotate(-.5*Math.PI),Ee.translate(-ge.height,0)}q(Ee,L,null!=le.srcX?le.srcX:0,null!=le.srcY?le.srcY:0,le.srcWidth,le.srcHeight,null!=le.trgX?le.trgX:0,null!=le.trgY?le.trgY:0,le.trgWidth,le.trgHeight);var Le=ge.toDataURL("image/png");if(null!=U)return U(Le,ge)})},null!=U&&(L.onerror=U),L.src=A.dataURL}},{key:"processQueue",value:function(){var A=this.options.parallelUploads,H=this.getUploadingFiles().length,$=H;if(!(H>=A)){var J=this.getQueuedFiles();if(J.length>0){if(this.options.uploadMultiple)return this.processFiles(J.slice(0,A-H));for(;$<A;){if(!J.length)return;this.processFile(J.shift()),$++}}}}},{key:"processFile",value:function(A){return this.processFiles([A])}},{key:"processFiles",value:function(A){var H=!0,$=!1,J=void 0;try{for(var Q,U=A[Symbol.iterator]();!(H=(Q=U.next()).done);H=!0){var K=Q.value;K.processing=!0,K.status=B.UPLOADING,this.emit("processing",K)}}catch(F){$=!0,J=F}finally{try{H||null==U.return||U.return()}finally{if($)throw J}}return this.options.uploadMultiple&&this.emit("processingmultiple",A),this.uploadFiles(A)}},{key:"_getFilesWithXhr",value:function(A){return this.files.filter(function(H){return H.xhr===A}).map(function(H){return H})}},{key:"cancelUpload",value:function(A){if(A.status===B.UPLOADING){var H=this._getFilesWithXhr(A.xhr),$=!0,J=!1,Q=void 0;try{for(var U,K=H[Symbol.iterator]();!($=(U=K.next()).done);$=!0)(le=U.value).status=B.CANCELED}catch(ge){J=!0,Q=ge}finally{try{$||null==K.return||K.return()}finally{if(J)throw Q}}void 0!==A.xhr&&A.xhr.abort();var F=!0,L=!1,ie=void 0;try{for(var Y,ne=H[Symbol.iterator]();!(F=(Y=ne.next()).done);F=!0){var le=Y.value;this.emit("canceled",le)}}catch(ge){L=!0,ie=ge}finally{try{F||null==ne.return||ne.return()}finally{if(L)throw ie}}this.options.uploadMultiple&&this.emit("canceledmultiple",H)}else A.status!==B.ADDED&&A.status!==B.QUEUED||(A.status=B.CANCELED,this.emit("canceled",A),this.options.uploadMultiple&&this.emit("canceledmultiple",[A]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(A){for(var H=arguments.length,$=new Array(H>1?H-1:0),J=1;J<H;J++)$[J-1]=arguments[J];return"function"==typeof A?A.apply(this,$):A}},{key:"uploadFile",value:function(A){return this.uploadFiles([A])}},{key:"uploadFiles",value:function(A){var H=this;this._transformFiles(A,function($){if(H.options.chunking){var J=$[0];A[0].upload.chunked=H.options.chunking&&(H.options.forceChunking||J.size>H.options.chunkSize),A[0].upload.totalChunkCount=Math.ceil(J.size/H.options.chunkSize)}if(A[0].upload.chunked){var Q=H,U=H,K=A[0];J=$[0],K.upload.chunks=[];var F=function(){for(var Y=0;void 0!==K.upload.chunks[Y];)Y++;if(!(Y>=K.upload.totalChunkCount)){var ne=Y*Q.options.chunkSize,le=Math.min(ne+Q.options.chunkSize,J.size),ge={name:Q._getParamName(0),data:J.webkitSlice?J.webkitSlice(ne,le):J.slice(ne,le),filename:K.upload.filename,chunkIndex:Y};K.upload.chunks[Y]={file:K,index:Y,dataBlock:ge,status:B.UPLOADING,progress:0,retries:0},Q._uploadData(A,[ge])}};if(K.upload.finishedChunkUpload=function(Y,ne){var le=U,ge=!0;Y.status=B.SUCCESS,Y.dataBlock=null,Y.response=Y.xhr.responseText,Y.responseHeaders=Y.xhr.getAllResponseHeaders(),Y.xhr=null;for(var Ee=0;Ee<K.upload.totalChunkCount;Ee++){if(void 0===K.upload.chunks[Ee])return F();K.upload.chunks[Ee].status!==B.SUCCESS&&(ge=!1)}ge&&U.options.chunksUploaded(K,function(){le._finished(A,ne,null)})},H.options.parallelChunkUploads)for(var L=0;L<K.upload.totalChunkCount;L++)F();else F()}else{var ie=[];for(L=0;L<A.length;L++)ie[L]={name:H._getParamName(L),data:$[L],filename:A[L].upload.filename};H._uploadData(A,ie)}})}},{key:"_getChunk",value:function(A,H){for(var $=0;$<A.upload.totalChunkCount;$++)if(void 0!==A.upload.chunks[$]&&A.upload.chunks[$].xhr===H)return A.upload.chunks[$]}},{key:"_uploadData",value:function(A,H){var $=this,J=this,Q=this,U=this,K=new XMLHttpRequest,F=!0,L=!1,ie=void 0;try{for(var Y=A[Symbol.iterator]();!(F=(we=Y.next()).done);F=!0)(Qe=we.value).xhr=K}catch(ye){L=!0,ie=ye}finally{try{F||null==Y.return||Y.return()}finally{if(L)throw ie}}A[0].upload.chunked&&(A[0].upload.chunks[H[0].chunkIndex].xhr=K);var ne=this.resolveOption(this.options.method,A,H),le=this.resolveOption(this.options.url,A,H);K.open(ne,le,!0),this.resolveOption(this.options.timeout,A)&&(K.timeout=this.resolveOption(this.options.timeout,A)),K.withCredentials=!!this.options.withCredentials,K.onload=function(ye){$._finishedUploading(A,K,ye)},K.ontimeout=function(){J._handleUploadError(A,K,"Request timedout after ".concat(J.options.timeout/1e3," seconds"))},K.onerror=function(){Q._handleUploadError(A,K)},(null!=K.upload?K.upload:K).onprogress=function(ye){return U._updateFilesUploadProgress(A,K,ye)};var ge=this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{};for(var Ee in this.options.binaryBody&&(ge["Content-Type"]=A[0].type),this.options.headers&&P(x)(ge,this.options.headers),ge){var Le=ge[Ee];Le&&K.setRequestHeader(Ee,Le)}if(this.options.binaryBody){F=!0,L=!1,ie=void 0;try{for(Y=A[Symbol.iterator]();!(F=(we=Y.next()).done);F=!0){var Qe=we.value;this.emit("sending",Qe,K)}}catch(ye){L=!0,ie=ye}finally{try{F||null==Y.return||Y.return()}finally{if(L)throw ie}}this.options.uploadMultiple&&this.emit("sendingmultiple",A,K),this.submitRequest(K,null,A)}else{var ae=new FormData;if(this.options.params){var fe=this.options.params;for(var Me in"function"==typeof fe&&(fe=fe.call(this,A,K,A[0].upload.chunked?this._getChunk(A[0],K):null)),fe){var je=fe[Me];if(Array.isArray(je))for(var ze=0;ze<je.length;ze++)ae.append(Me,je[ze]);else ae.append(Me,je)}}F=!0,L=!1,ie=void 0;try{var we;for(Y=A[Symbol.iterator]();!(F=(we=Y.next()).done);F=!0)this.emit("sending",Qe=we.value,K,ae)}catch(ye){L=!0,ie=ye}finally{try{F||null==Y.return||Y.return()}finally{if(L)throw ie}}for(this.options.uploadMultiple&&this.emit("sendingmultiple",A,K,ae),this._addFormElementData(ae),ze=0;ze<H.length;ze++){var Ce=H[ze];ae.append(Ce.name,Ce.data,Ce.filename)}this.submitRequest(K,ae,A)}}},{key:"_transformFiles",value:function(A,H){for(var $=this,J=function(F){$.options.transformFile.call($,A[F],function(L){Q[F]=L,++U===A.length&&H(Q)})},Q=[],U=0,K=0;K<A.length;K++)J(K)}},{key:"_addFormElementData",value:function(A){var H=!0,$=!1,J=void 0;if("FORM"===this.element.tagName)try{for(var Q=this.element.querySelectorAll("input, textarea, select, button")[Symbol.iterator]();!(H=(L=Q.next()).done);H=!0){var U=L.value,K=U.getAttribute("name"),F=U.getAttribute("type");if(F&&(F=F.toLowerCase()),null!=K)if("SELECT"===U.tagName&&U.hasAttribute("multiple")){H=!0,$=!1,J=void 0;try{var L;for(Q=U.options[Symbol.iterator]();!(H=(L=Q.next()).done);H=!0){var ie=L.value;ie.selected&&A.append(K,ie.value)}}catch(Y){$=!0,J=Y}finally{try{H||null==Q.return||Q.return()}finally{if($)throw J}}}else(!F||"checkbox"!==F&&"radio"!==F||U.checked)&&A.append(K,U.value)}}catch(Y){$=!0,J=Y}finally{try{H||null==Q.return||Q.return()}finally{if($)throw J}}}},{key:"_updateFilesUploadProgress",value:function(A,H,$){var J=!0,Q=!1,U=void 0;if(A[0].upload.chunked){var K=this._getChunk(Y=A[0],H);$?(K.progress=100*$.loaded/$.total,K.total=$.total,K.bytesSent=$.loaded):(K.progress=100,K.bytesSent=K.total),Y.upload.progress=0,Y.upload.total=0,Y.upload.bytesSent=0;for(var F=0;F<Y.upload.totalChunkCount;F++)Y.upload.chunks[F]&&void 0!==Y.upload.chunks[F].progress&&(Y.upload.progress+=Y.upload.chunks[F].progress,Y.upload.total+=Y.upload.chunks[F].total,Y.upload.bytesSent+=Y.upload.chunks[F].bytesSent);Y.upload.progress=Y.upload.progress/Y.upload.totalChunkCount,this.emit("uploadprogress",Y,Y.upload.progress,Y.upload.bytesSent)}else try{for(var L,ie=A[Symbol.iterator]();!(J=(L=ie.next()).done);J=!0){var Y;(Y=L.value).upload.total&&Y.upload.bytesSent&&Y.upload.bytesSent==Y.upload.total||($?(Y.upload.progress=100*$.loaded/$.total,Y.upload.total=$.total,Y.upload.bytesSent=$.loaded):(Y.upload.progress=100,Y.upload.bytesSent=Y.upload.total),this.emit("uploadprogress",Y,Y.upload.progress,Y.upload.bytesSent))}}catch(ne){Q=!0,U=ne}finally{try{J||null==ie.return||ie.return()}finally{if(Q)throw U}}}},{key:"_finishedUploading",value:function(A,H,$){var J;if(A[0].status!==B.CANCELED&&4===H.readyState){if("arraybuffer"!==H.responseType&&"blob"!==H.responseType&&(J=H.responseText,H.getResponseHeader("content-type")&&~H.getResponseHeader("content-type").indexOf("application/json")))try{J=JSON.parse(J)}catch(Q){$=Q,J="Invalid JSON response from server."}this._updateFilesUploadProgress(A,H),200<=H.status&&H.status<300?A[0].upload.chunked?A[0].upload.finishedChunkUpload(this._getChunk(A[0],H),J):this._finished(A,J,$):this._handleUploadError(A,H,J)}}},{key:"_handleUploadError",value:function(A,H,$){if(A[0].status!==B.CANCELED){if(A[0].upload.chunked&&this.options.retryChunks){var J=this._getChunk(A[0],H);if(J.retries++<this.options.retryChunksLimit)return void this._uploadData(A,[J.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(A,$||this.options.dictResponseError.replace("{{statusCode}}",H.status),H)}}},{key:"submitRequest",value:function(A,H,$){if(1==A.readyState)if(this.options.binaryBody)if($[0].upload.chunked){var J=this._getChunk($[0],A);A.send(J.dataBlock.data)}else A.send($[0]);else A.send(H);else console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(A,H,$){var J=!0,Q=!1,U=void 0;try{for(var K,F=A[Symbol.iterator]();!(J=(K=F.next()).done);J=!0){var L=K.value;L.status=B.SUCCESS,this.emit("success",L,H,$),this.emit("complete",L)}}catch(ie){Q=!0,U=ie}finally{try{J||null==F.return||F.return()}finally{if(Q)throw U}}if(this.options.uploadMultiple&&(this.emit("successmultiple",A,H,$),this.emit("completemultiple",A)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(A,H,$){var J=!0,Q=!1,U=void 0;try{for(var K,F=A[Symbol.iterator]();!(J=(K=F.next()).done);J=!0){var L=K.value;L.status=B.ERROR,this.emit("error",L,H,$),this.emit("complete",L)}}catch(ie){Q=!0,U=ie}finally{try{J||null==F.return||F.return()}finally{if(Q)throw U}}if(this.options.uploadMultiple&&(this.emit("errormultiple",A,H,$),this.emit("completemultiple",A)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=u,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(A){var H=16*Math.random()|0;return("x"===A?H:3&H|8).toString(16)})}}]),B}(u);l.initClass(),l.options={},l.optionsForElement=function(G){return G.getAttribute("id")?l.options[O(G.getAttribute("id"))]:void 0},l.instances=[],l.forElement=function(G){if("string"==typeof G&&(G=document.querySelector(G)),null==G?.dropzone)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return G.dropzone},l.discover=function(){var G;if(document.querySelectorAll)G=document.querySelectorAll(".dropzone");else{G=[];var B=function(A){return function(){var H=[],$=!0,J=!1,Q=void 0;try{for(var U,K=A[Symbol.iterator]();!($=(U=K.next()).done);$=!0){var F=U.value;/(^| )dropzone($| )/.test(F.className)?H.push(G.push(F)):H.push(void 0)}}catch(L){J=!0,Q=L}finally{try{$||null==K.return||K.return()}finally{if(J)throw Q}}return H}()};B(document.getElementsByTagName("div")),B(document.getElementsByTagName("form"))}return function(){var A=[],H=!0,$=!1,J=void 0;try{for(var Q,U=G[Symbol.iterator]();!(H=(Q=U.next()).done);H=!0){var K=Q.value;!1!==l.optionsForElement(K)?A.push(new l(K)):A.push(void 0)}}catch(F){$=!0,J=F}finally{try{H||null==U.return||U.return()}finally{if($)throw J}}return A}()},l.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],l.isBrowserSupported=function(){var G=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==l.blacklistedBrowsers&&(l.blockedBrowsers=l.blacklistedBrowsers);var B=!0,A=!1,H=void 0;try{for(var $,J=l.blockedBrowsers[Symbol.iterator]();!(B=($=J.next()).done);B=!0)$.value.test(navigator.userAgent)&&(G=!1)}catch(Q){A=!0,H=Q}finally{try{B||null==J.return||J.return()}finally{if(A)throw H}}}else G=!1;else G=!1;return G},l.dataURItoBlob=function(G){for(var B=atob(G.split(",")[1]),A=G.split(",")[0].split(":")[1].split(";")[0],H=new ArrayBuffer(B.length),$=new Uint8Array(H),J=0,Q=B.length,U=0<=Q;U?J<=Q:J>=Q;U?J++:J--)$[J]=B.charCodeAt(J);return new Blob([H],{type:A})};var M=function(G,B){return G.filter(function(A){return A!==B}).map(function(A){return A})},O=function(G){return G.replace(/[\-_](\w)/g,function(B){return B.charAt(1).toUpperCase()})};l.createElement=function(G){var B=document.createElement("div");return B.innerHTML=G,B.childNodes[0]},l.elementInside=function(G,B){if(G===B)return!0;for(;G=G.parentNode;)if(G===B)return!0;return!1},l.getElement=function(G,B){var A;if("string"==typeof G?A=document.querySelector(G):null!=G.nodeType&&(A=G),null==A)throw new Error("Invalid `".concat(B,"` option provided. Please provide a CSS selector or a plain HTML element."));return A},l.getElements=function(G,B){var H;if(G instanceof Array){H=[];try{var $=!0,J=!1,Q=void 0;try{for(var U=G[Symbol.iterator]();!($=(K=U.next()).done);$=!0)H.push(this.getElement(K.value,B))}catch(F){J=!0,Q=F}finally{try{$||null==U.return||U.return()}finally{if(J)throw Q}}}catch{H=null}}else if("string"==typeof G){H=[],$=!0,J=!1,Q=void 0;try{var K;for(U=document.querySelectorAll(G)[Symbol.iterator]();!($=(K=U.next()).done);$=!0)H.push(K.value)}catch(F){J=!0,Q=F}finally{try{$||null==U.return||U.return()}finally{if(J)throw Q}}}else null!=G.nodeType&&(H=[G]);if(null==H||!H.length)throw new Error("Invalid `".concat(B,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return H},l.confirm=function(G,B,A){return window.confirm(G)?B():A?.()},l.isValidFile=function(G,B){if(!B)return!0;B=B.split(",");var A=G.type,H=A.replace(/\/.*$/,""),$=!0,J=!1,Q=void 0;try{for(var U,K=B[Symbol.iterator]();!($=(U=K.next()).done);$=!0){var F=U.value;if("."===(F=F.trim()).charAt(0)){if(-1!==G.name.toLowerCase().indexOf(F.toLowerCase(),G.name.length-F.length))return!0}else if(/\/\*$/.test(F)){if(H===F.replace(/\/.*$/,""))return!0}else if(A===F)return!0}}catch(L){J=!0,Q=L}finally{try{$||null==K.return||K.return()}finally{if(J)throw Q}}return!1},typeof jQuery<"u"&&null!==jQuery&&(jQuery.fn.dropzone=function(G){return this.each(function(){return new l(this,G)})}),l.ADDED="added",l.QUEUED="queued",l.ACCEPTED=l.QUEUED,l.UPLOADING="uploading",l.PROCESSING=l.UPLOADING,l.CANCELED="canceled",l.ERROR="error",l.SUCCESS="success";var q=function(G,B,A,H,$,J,Q,U,K,F){var L=function(ie){var Y=ie.naturalHeight,ne=document.createElement("canvas");ne.width=1,ne.height=Y;var le=ne.getContext("2d");le.drawImage(ie,0,0);for(var ge=le.getImageData(1,0,1,Y).data,Ee=0,Le=Y,Qe=Y;Qe>Ee;)0===ge[4*(Qe-1)+3]?Le=Qe:Ee=Qe,Qe=Le+Ee>>1;var ae=Qe/Y;return 0===ae?1:ae}(B);return G.drawImage(B,A,H,$,J,Q,U,K,F/L)},ee=function(){"use strict";function G(){I(this,G)}return w(G,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(B){for(var A="",H=void 0,$=void 0,J="",Q=void 0,U=void 0,K=void 0,F="",L=0;Q=(H=B[L++])>>2,U=(3&H)<<4|($=B[L++])>>4,K=(15&$)<<2|(J=B[L++])>>6,F=63&J,isNaN($)?K=F=64:isNaN(J)&&(F=64),A=A+this.KEY_STR.charAt(Q)+this.KEY_STR.charAt(U)+this.KEY_STR.charAt(K)+this.KEY_STR.charAt(F),H=$=J="",Q=U=K=F="",L<B.length;);return A}},{key:"restore",value:function(B,A){if(!B.match("data:image/jpeg;base64,"))return A;var H=this.decode64(B.replace("data:image/jpeg;base64,","")),$=this.slice2Segments(H),J=this.exifManipulation(A,$);return"data:image/jpeg;base64,".concat(this.encode64(J))}},{key:"exifManipulation",value:function(B,A){var H=this.getExifArray(A),$=this.insertExif(B,H);return new Uint8Array($)}},{key:"getExifArray",value:function(B){for(var A=void 0,H=0;H<B.length;){if(255===(A=B[H])[0]&225===A[1])return A;H++}return[]}},{key:"insertExif",value:function(B,A){var H=B.replace("data:image/jpeg;base64,",""),$=this.decode64(H),J=$.indexOf(255,3),Q=$.slice(0,J),U=$.slice(J);return Q.concat(A).concat(U)}},{key:"slice2Segments",value:function(B){for(var A=0,H=[];!(255===B[A]&218===B[A+1]);){if(255===B[A]&216===B[A+1])A+=2;else{var $=A+(256*B[A+2]+B[A+3])+2,J=B.slice(A,$);H.push(J),A=$}if(A>B.length)break}return H}},{key:"decode64",value:function(B){var A=void 0,H=void 0,$="",J=void 0,Q=void 0,U="",K=0,F=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(B)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),B=B.replace(/[^A-Za-z0-9\+\/\=]/g,"");A=this.KEY_STR.indexOf(B.charAt(K++))<<2|(J=this.KEY_STR.indexOf(B.charAt(K++)))>>4,H=(15&J)<<4|(Q=this.KEY_STR.indexOf(B.charAt(K++)))>>2,$=(3&Q)<<6|(U=this.KEY_STR.indexOf(B.charAt(K++))),F.push(A),64!==Q&&F.push(H),64!==U&&F.push($),A=H=$="",J=Q=U="",K<B.length;);return F}}]),G}();ee.initClass(),window.Dropzone=l}();var $bu_=new function(){var P=this;this.version="3.3.44npm",this.vsakt={c:"106",f:"105",s:"15.6",e:"106",i:"12",ios:"15.6",samsung:"17.0.7",o:"89",e_a:"104",o_a:"70",y:"22.7.0",v:"5.4",uc:"13.4.0"},this.vsinsecure_below={c:"100.0.5195.102",f:"100.3",s:"11.1.1",e:16,i:11,ios:"12.3",samsung:12,o:62,o_a:52,y:"20",v:"2.7",uc:"13.1"},this.vsdefault={c:-3,f:-3,s:-1,e:17,i:11,ios:10,samsung:9.9,o:-3,o_a:-3,y:20.4,v:2.6,uc:13,a:535},this.names={c:"Chrome",f:"Firefox",s:"Safari",e:"Edge",i:"Internet Explorer",ios:"iOS",samsung:"Samsung Internet",o:"Opera",o_a:"Opera",e_a:"Edge",y:"Yandex Browser",v:"Vivaldi",uc:"UC Browser",a:"Android Browser",x:"Other",silk:"Silk"},this.get_browser=function(y){y=(y||navigator.userAgent).replace("_",".");var w={n:"x",v:0,t:"other browser",age_years:void 0,no_device_update:!1,available:P.vsakt};function E(m,l){return!!new RegExp(l,"i").test(y)&&m}w.other=E("bot","Pagespeed|pingdom|Preview|ktxn|dynatrace|Ruxit|PhantomJS|Headless|Lighthouse|bot|spider|archiver|transcoder|crawl|checker|monitoring|prerender|screenshot|python-|php|uptime|validator|fetcher|facebook|slurp|google|yahoo|node|mail.ru|github|cloudflare|addthis|thumb|proxy|feed|fetch|favicon|link|http|scrape|seo|page|search console|AOLBuild|Teoma|Expeditor")||E("TV","SMART-TV|SmartTV")||E("niche browser","motorola edge|Comodo.Dragon|OculusBrowser|Falkon|Brave|Classic Browser|Dorado|LBBROWSER|Focus|waterfox|Firefox/56.2|Firefox/56.3|Whale|MIDP|k-meleon|sparrow|wii|Chromium|Puffin|Opera Mini|maxthon|maxton|dolfin|dolphin|seamonkey|opera mini|netfront|moblin|maemo|arora|kazehakase|epiphany|konqueror|rekonq|symbian|webos|PaleMoon|Basilisk|QupZilla|Otter|Midori|qutebrowser|slimjet")||E("mobile without upgrade path or landing page","OPR/44.12.2246|cros|kindle|tizen|silk|blackberry|bb10|RIM|PlayBook|meego|nokia|ucweb|ZuneWP7|537.85.10"),w.embedded=/"QtWebEngine|Teams|Electron/i.test(y),w.mobile=/iphone|ipod|ipad|android|mobile|phone|ios|iemobile/i.test(y),w.discontinued=/netscape|greenbrowser|camino|flot|fennec|galeon|coolnovo/i.test(y);for(var R=[["CriOS.VV","c","ios"],["FxiOS.VV","f","ios"],["Trident.*rv:VV","i","i"],["Trident.VV","i","i"],["UCBrowser.VV","uc","c"],["MSIE.VV","i","i"],["Edge.VV","e","e"],["Edg.VV","e","c"],["EdgA.VV","e_a","c"],["Vivaldi.VV","v","c"],["Android.*OPR.VV","o_a","c"],["OPR.VV","o","c"],["YaBrowser.VV","y","c"],["SamsungBrowser.VV","samsung","c"],["Silk.VV","silk","c"],["Chrome.VV","c","c"],["Firefox.VV","f","f"],[" OS.VV.*Safari","ios","ios"],["Version.VV.*Safari","s","s"],["Safari.VV","s","s"],["Opera.*Version.VV","o"],["Opera.VV","o"]],C="(\\d+\\.?\\d+\\.?\\d*\\.?\\d*)",N=0;N<R.length;N++)if(y.match(new RegExp(R[N][0].replace("VV",C),"i"))){w.n=R[N][1],w.engine=R[N][2];break}if(w.fullv=RegExp.$1,w.v=parseFloat(w.fullv),/windows.nt.5|windows.nt.4|windows.nt.6.0|windows.95|windows.98|os x 10.2|os x 10.3|os x 10.4|os x 10.5/i.test(y)&&(w.no_device_update=!0,w.available={}),"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&(w.n="ios",w.engine="ios",w.fullv=w.v=13,w.no_device_update=!0),/iphone|ipod|ipad|ios/i.test(y)){y.match(new RegExp("OS."+C,"i")),w.n="ios",w.fullv=RegExp.$1,w.v=parseFloat(w.fullv),w.engine="ios";var x=P.available_ios(y,w.v);x<12&&11===Math.round(w.v)&&(x=12),w.available={ios:x},parseFloat(w.available.ios)<11&&(w.no_device_update=!0)}if(/windows.nt.5.1|windows.nt.5.2|windows.nt.6.0/i.test(y)&&(w.available={c:49.9,f:52.9},w.no_device_update=!0),/os x 10.6/i.test(y)&&(w.available={s:"5.1.10",c:49.9,f:48},w.no_device_update=!0),/os x 10.7|os x 10.8/i.test(y)&&(w.available={s:"6.2.8",c:49.9,f:48},w.no_device_update=!0),/os x 10.9/i.test(y)&&(w.available.s="9.1.3"),/os x 10.10/i.test(y)&&(w.available.s="10.1.2"),y.indexOf("Android")>-1&&"s"===w.n){var S=parseInt((/WebKit\/([0-9]+)/i.exec(y)||0)[1],10)||2e3;S<=534&&(w.n="a",w.fullv=w.v=S,w.is_insecure=!0)}w.t=P.names[w.n]+" "+w.v,w.is_supported=w.is_latest=P.vsakt[w.n]?P.less(w.fullv,P.vsakt[w.n])<=0:void 0,w.vmaj=Math.round(w.v),w.is_insecure=w.is_insecure||!P.vsinsecure_below[w.n]?void 0:1===P.less(w.fullv,P.vsinsecure_below[w.n]),("f"===w.n&&102===w.vmaj||"i"===w.n&&11===w.vmaj)&&(w.is_supported=!0,w.is_insecure=!1,"f"===w.n&&(w.esr=!0)),"ios"===w.n&&w.v>10.3&&(w.is_supported=!0),("a"===w.n||"x"===w.n)&&(w.t=P.names[w.n]),"e"===w.n&&(w.t=P.names[w.n]+" "+w.vmaj,w.is_supported=1!=P.less(w.fullv,"18.15063")),w.n in["c","f","o","e"]&&P.less(w.fullv,parseFloat(P.vsakt[w.n])-1)<=0&&(w.is_supported=!0);var s={f:7,c:8,o:8,i:1,e:1,s:1};return s[w.n]&&(w.age_years=Math.round((P.vsakt[w.n]-w.v)/s[w.n]*10)/10||0),w.engine&&(y.match(new RegExp({e:"Edge.VV",c:"Chrome.VV",f:"Firefox.VV",s:"Version.VV",i:"MSIE.VV",ios:" OS.VV"}[w.engine].replace("VV",C),"i")),w.engine_version=parseFloat(RegExp.$1)),w},this.semver=function(X){if(X instanceof Array)return X;var I=(X+".0.0.0").split(".");return[parseInt(I[0])||0,parseInt(I[1])||0,parseInt(I[2])||0,parseInt(I[3])||0]},this.less=function(X,I){X=P.semver(X),I=P.semver(I);for(var y=0;;y++){if(y>=X.length)return y>=I.length?0:1;if(y>=I.length)return-1;var w=I[y]-X[y];if(w)return w>0?1:-1}},this.available_ios=function(X,I){var y=Math.max(window.screen.height,window.screen.width),w=window.devicePixelRatio;return/ipad/i.test(X)?1024==y&&2==w?10:1112==y||1366==y?15:1024==y&&I<6?5:9:1==w?6:3==w||812==y||736==y||667==y?15:568==y?10:480==y?7:6}};window.$bu_getBrowser=$bu_.get_browser;var $buo=function(P,X){var y,I=window.navigator,w=(P=window._buorgres=P||{}).l||(I.languages?I.languages[0]:null)||I.language||I.browserLanguage||I.userLanguage||document.documentElement.getAttribute("lang")||"en";P.llfull=w.replace("_","-").toLowerCase().substr(0,5),P.ll=P.llfull.substr(0,2),P.domain=void 0!==P.domain?P.domain:(/file:/.test(location.href)?"https:":"")+"//browser-update.org",P.apiver=P.api||P.c||-1,P.jsv=$bu_.version;var E=P.apiver<2018&&{i:10,f:11,o:21,s:8,c:30}||{},R=P.notify||P.vs||{};0!==R.e&&(R.e=R.e||R.i),R.i=R.i||R.e;var C=P.required||{};for(y in 0!==C.e&&(C.e=C.e||C.i),C.i||(C.i=C.e,$bu_.vsakt.i=$bu_.vsakt.e),$bu_.vsdefault)R[y]&&(C[y]=$bu_.less(R[y],0)>=0?parseFloat($bu_.vsakt[y])+parseFloat(R[y])+.01:parseFloat(R[y])+.01),(!(y in C)||null==C[y])&&(C[y]=$bu_.vsdefault[y]),$bu_.less(C[y],0)>=0&&(C[y]=parseFloat($bu_.vsakt[y])+parseFloat(C[y])),E[y]&&1===$bu_.less(C[y],E[y])&&(C[y]=E[y]);if(C.ios=C.ios||C.s,C.i<79&&C.i>65&&(C.i=C.i-60),C.e<79&&C.e>65&&(C.e=C.e-60),P.required=C,P.reminder=P.reminder<.1?0:P.reminder||168,P.reminderClosed=P.reminderClosed<1?0:P.reminderClosed||168,P.onshow=P.onshow||function(x){},P.onclick=P.onclick||function(x){},P.onclose=P.onclose||function(x){},P.pageurl=P.pageurl||location.hostname||"x",P.newwindow=!1!==P.newwindow,P.test=X||P.test||"#test-bu"===location.hash||!1,P.ignorecookie=P.ignorecookie||"#ignorecookie-bu"===location.hash,P.reasons=[],P.hide_reasons=[],P.notified=function N(x){var S=x.browser=$bu_.get_browser(x.override_ua);return x.is_below_required=C[S.n]&&1===$bu_.less(S.fullv,C[S.n]),!1!==S.other&&x.hide_reasons.push("is other browser:"+S.other),!1!==S.embedded&&x.hide_reasons.push("is embedded browser:"+S.embedded),S.esr&&!x.notify_esr&&x.hide_reasons.push("Extended support (ESR)"),S.mobile&&!1===x.mobile&&x.hide_reasons.push("do not notify mobile"),S.is_latest&&x.hide_reasons.push("is latest version of the browser"),S.no_device_update&&x.hide_reasons.push("no device update"),x.is_below_required&&x.reasons.push("below required"),(x.insecure||x.unsecure)&&S.is_insecure&&x.reasons.push("insecure"),x.unsupported&&!S.is_supported&&x.reasons.push("no vendor support"),!(x.hide_reasons.length>0)&&x.reasons.length>0}(P),P.already_shown=document.cookie.indexOf("browserupdateorg=pause")>-1&&!P.ignorecookie,P.test||P.notified&&!P.already_shown){if(P.setCookie=function(x){document.cookie="browserupdateorg=pause; expires="+new Date((new Date).getTime()+36e5*x).toGMTString()+"; path=/; SameSite=Lax"+(/https:/.test(location.href)?"; Secure":"")},P.already_shown&&(P.ignorecookie||P.test)&&P.setCookie(-10),P.reminder>0&&P.setCookie(P.reminder),P.nomessage)return void P.onshow(P);$buo_show()}};typeof module<"u"&&(module.exports=$buo);var $buo_show=function(){var P=window._buorgres,X=$bu_getBrowser(),I=P.burl||"http"+(/MSIE/i.test(navigator.userAgent)?"":"s")+"://browser-update.org/";P.url||(P.url=I+(P.l&&P.l+"/"||"")+"update-browser.html"+(P.test?"?force_outdated=true":"")+"#"+P.jsv+":"+P.pageurl),P.url_permanent_hide=P.url_permanent_hide||I+"block-ignore-browser-update-warning.html";var E,w={en:{msg:"Your web browser ({brow_name}) is out of date.",msgmore:"Update your browser for more security, speed and the best experience on this site.",bupdate:"Update browser",bignore:"Ignore",remind:"You will be reminded in {days} days.",bnever:"Never show again"},ar:{msg:"\u0645\u062a\u0635\u0641\u062d \u0627\u0644\u0625\u0646\u062a\u0631\u0646\u062a \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 ({brow_name}) \u063a\u064a\u0631 \u0645\u064f\u062d\u062f\u0651\u062b.",msgmore:"\u0642\u0645 \u0628\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u062a\u0635\u0641\u062d \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0644\u0645\u0632\u064a\u062f \u0645\u0646 \u0627\u0644\u0623\u0645\u0627\u0646 \u0648\u0627\u0644\u0633\u0631\u0639\u0629 \u0648\u0644\u0623\u0641\u0636\u0644 \u062a\u062c\u0631\u0628\u0629 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0642\u0639.",bupdate:"\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u062a\u0635\u0641\u062d",bignore:"\u062a\u062c\u0627\u0647\u0644",remind:"\u0633\u064a\u062a\u0645 \u062a\u0630\u0643\u064a\u0631\u0643 \u0641\u064a \u063a\u0636\u0648\u0646 {days} \u0623\u064a\u0627\u0645.",bnever:"\u0644\u0627 \u062a\u0638\u0647\u0631 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649"},bg:{msg:"\u0412\u0430\u0448\u0438\u044f\u0442 \u0443\u0435\u0431 \u0431\u0440\u0430\u0443\u0437\u044a\u0440 ({brow_name}) \u0435 \u043e\u0441\u0442\u0430\u0440\u044f\u043b.",msgmore:"\u0410\u043a\u0442\u0443\u0430\u043b\u0438\u0437\u0438\u0440\u0430\u0439\u0442\u0435 \u0431\u0440\u0430\u0443\u0437\u044a\u0440\u0430 \u0441\u0438 \u0437\u0430 \u043f\u043e\u0432\u0435\u0447\u0435 \u0441\u0438\u0433\u0443\u0440\u043d\u043e\u0441\u0442, \u0431\u044a\u0440\u0437\u0438\u043d\u0430 \u0438 \u043d\u0430\u0439-\u0434\u043e\u0431\u0440\u043e\u0442\u043e \u0438\u0437\u0436\u0438\u0432\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u0442\u043e\u0437\u0438 \u0441\u0430\u0439\u0442.",bupdate:"\u0410\u043a\u0442\u0443\u0430\u043b\u0438\u0437\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u0431\u0440\u0430\u0443\u0437\u044a\u0440\u0430",bignore:"\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0430\u0439",remind:"\u0429\u0435 \u0432\u0438 \u0431\u044a\u0434\u0435 \u043d\u0430\u043f\u043e\u043c\u043d\u0435\u043d\u043e \u0441\u043b\u0435\u0434 {days} \u0434\u043d\u0438.",bnever:"\u041d\u0438\u043a\u043e\u0433\u0430 \u043f\u043e\u0432\u0435\u0447\u0435 \u0434\u0430 \u043d\u0435 \u0441\u0435 \u043f\u043e\u043a\u0430\u0437\u0432\u0430"},ca:{msg:"El teu navegador ({brow_name}) est\xe0 desactualitzat.",msgmore:"Actualitzeu el vostre navegador per obtenir m\xe9s seguretat, velocitat i una millor experi\xe8ncia en aquest lloc.",bupdate:"Actualitza el navegador",bignore:"Ignorar",remind:"T'ho recordarem d'aqu\xed a {days} dies.",bnever:"No ho tornis a mostrar"},cs:{msg:"V\xe1\u0161 prohl\xed\u017ee\u010d ({brow_name}) je zastaral\xfd.",msgmore:"Aktualizujte prohl\xed\u017ee\u010d pro lep\u0161\xed zabezpe\u010den\xed, rychlost a nejlep\u0161\xed z\xe1\u017eitek z tohoto webu.",bupdate:"Aktualizovat prohl\xed\u017ee\u010d",bignore:"Ignorovat",remind:"Znovu budete upozorn\u011bni za {days} dn\u016f.",bnever:"Ji\u017e nezobrazovat"},cy:{msg:"Mae eich porwr gwe ({brow_name}) angen ei ddiweddaru.",msgmore:"Diweddarwch eich porwr i gael mwy o ddiogelwch, cyflymder a'r profiad gorau ar y safle hwn.",bupdate:"Diweddaru porwr",bignore:"Anwybyddu",remind:"Byddwn yn eich atgoffa mewn {days} diwrnod.",bnever:"Peidiwch \xe2 dangos eto"},da:{msg:"Din web browser ({brow_name}) er for\xe6ldet",msgmore:"Opdater din browser for mere sikkerhed, hastighed og den bedste oplevelse p\xe5 denne side.",bupdate:"Opdater browser",bignore:"Ignorer",remind:"Du vil blive p\xe5mindet om {days} dage.",bnever:"Vis aldrig igen"},de:{msg:"Ihr Webbrowser ({brow_name}) ist veraltet.",msgmore:"Aktualisieren Sie Ihren Browser f\xfcr mehr Sicherheit, Geschwindigkeit und den besten Komfort auf dieser Seite.",bupdate:"Browser aktualisieren",bignore:"Ignorieren",remind:"Sie werden in {days} Tagen wieder erinnert.",bnever:"Nie wieder anzeigen"},el:{msg:"\u03a4\u03bf \u03c0\u03c1\u03cc\u03b3\u03c1\u03b1\u03bc\u03bc\u03b1 \u03c0\u03b5\u03c1\u03b9\u03ae\u03b3\u03b7\u03c3\u03ae\u03c2 \u03c3\u03b1\u03c2 ({brow_name}) \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03c7\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03bf.",msgmore:"\u0395\u03bd\u03b7\u03bc\u03b5\u03c1\u03ce\u03c3\u03c4\u03b5 \u03c4\u03bf \u03c0\u03c1\u03cc\u03b3\u03c1\u03b1\u03bc\u03bc\u03b1 \u03c0\u03b5\u03c1\u03b9\u03ae\u03b3\u03b7\u03c3\u03ae\u03c2 \u03c3\u03b1\u03c2 \u03b3\u03b9\u03b1 \u03c0\u03b5\u03c1\u03b9\u03c3\u03c3\u03cc\u03c4\u03b5\u03c1\u03b7 \u03b1\u03c3\u03c6\u03ac\u03bb\u03b5\u03b9\u03b1, \u03c4\u03b1\u03c7\u03cd\u03c4\u03b7\u03c4\u03b1 \u03ba\u03b1\u03b9 \u03c4\u03b7\u03bd \u03ba\u03b1\u03bb\u03cd\u03c4\u03b5\u03c1\u03b7 \u03b5\u03bc\u03c0\u03b5\u03b9\u03c1\u03af\u03b1 \u03c3' \u03b1\u03c5\u03c4\u03cc\u03bd \u03c4\u03bf\u03bd \u03b9\u03c3\u03c4\u03cc\u03c4\u03bf\u03c0\u03bf.",bupdate:"\u0395\u03bd\u03b7\u03bc\u03b5\u03c1\u03ce\u03c3\u03c4\u03b5 \u03c4\u03bf \u03c0\u03c1\u03cc\u03b3\u03c1\u03b1\u03bc\u03bc\u03b1 \u03c0\u03b5\u03c1\u03b9\u03ae\u03b3\u03b7\u03c3\u03b7\u03c2",bignore:"\u0391\u03b3\u03bd\u03bf\u03ae\u03c3\u03c4\u03b5",remind:"\u0398\u03b1 \u03c3\u03b1\u03c2 \u03c4\u03bf \u03c5\u03c0\u03b5\u03bd\u03b8\u03c5\u03bc\u03af\u03c3\u03bf\u03c5\u03bc\u03b5 \u03c3\u03b5 {days} \u03b7\u03bc\u03ad\u03c1\u03b5\u03c2.",bnever:"\u039d\u03b1 \u03bc\u03b7\u03bd \u03b5\u03bc\u03c6\u03b1\u03bd\u03b9\u03c3\u03c4\u03b5\u03af \u03be\u03b1\u03bd\u03ac"},es:{msg:"Su navegador web ({brow_name}) est\xe1 desactualizado.",msgmore:"Actualice su navegador para obtener m\xe1s seguridad, velocidad y para disfrutar de la mejor experiencia en este sitio.",bupdate:"Actualizar navegador",bignore:"Ignorar",remind:"Se le recordar\xe1 en {days} d\xedas.",bnever:"No mostrar de nuevo"},et:{msg:"Teie veebilehitseja ({brow_name}) on vananenud.",msgmore:"Veebilehitseja uuendamisega kaasneb nii parem turvalisus, kiirus kui ka kasutusmugavus.",bupdate:"Uuenda veebilehitsejat",bignore:"Eira",remind:"Uus meeldetuletus {days} p\xe4eva p\xe4rast.",bnever:"\xc4ra kunagi enam n\xe4ita"},fa:{msg:"\u0645\u0631\u0648\u0631\u06af\u0631 \u0634\u0645\u0627 ({brow_name}) \u0642\u062f\u06cc\u0645\u06cc \u0627\u0633\u062a.",msgmore:"\u0628\u0631\u0627\u06cc \u0627\u06cc\u0645\u0646\u06cc\u060c \u0633\u0631\u0639\u062a \u0648 \u062a\u062c\u0631\u0628\u0647 \u0628\u0647\u062a\u0631 \u0645\u0631\u0648\u0631\u06af\u0631 \u062e\u0648\u062f \u0631\u0627 \u0628\u0647\u200c\u0631\u0648\u0632 \u06a9\u0646\u06cc\u062f.",bupdate:"\u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0645\u0631\u0648\u0631\u06af\u0631",bignore:"\u0646\u0627\u062f\u06cc\u062f\u0647 \u06af\u0631\u0641\u062a\u0646",remind:"\u0628\u0647 \u0634\u0645\u0627 \u062a\u0627 {days} \u0631\u0648\u0632 \u062f\u06cc\u06af\u0631 \u062f\u0648\u0628\u0627\u0631\u0647 \u06cc\u0627\u062f\u200c\u0622\u0648\u0631\u06cc \u062e\u0648\u0627\u0647\u062f \u0634\u062f.",bnever:"\u0647\u0631\u06af\u0632 \u0646\u0645\u0627\u06cc\u0634 \u0646\u062f\u0647"},fi:{msg:"Selaimesi ({brow_name}) on vanhentunut.",msgmore:"P\xe4ivit\xe4 selaimesi saadaksesi tietoturvap\xe4ivityksi\xe4, nopeutta sek\xe4 parhaan k\xe4ytt\xf6kokemuksen sivustolla.",bupdate:"P\xe4ivit\xe4 selain",bignore:"Ohita",remind:"Saat uuden muistutuksen {days} p\xe4iv\xe4n p\xe4\xe4st\xe4.",bnever:"\xc4l\xe4 n\xe4yt\xe4 uudestaan"},fr:{msg:"Votre navigateur Web ({brow_name}) n'est pas \xe0 jour.",msgmore:"Mettez \xe0 jour votre navigateur pour plus de s\xe9curit\xe9 et de rapidit\xe9 et une meilleure exp\xe9rience sur ce site.",bupdate:"Mettre \xe0 jour le navigateur",bignore:"Ignorer",remind:"Vous serez rappel\xe9 dans {days} jours.",bnever:"Ne plus afficher"},gl:{msg:"T\xe1 an l\xedonl\xe9itheoir agat ({brow_name}) as d\xe1ta.",msgmore:"Actualiza o teu navegador para obter m\xe1is seguridade, rapidez e mellor experiencia neste sitio.",bupdate:"Actualizar navegador web",bignore:"Ignorar",remind:"Lembraralle en {days} d\xedas.",bnever:"Non volver mostrar m\xe1is"},he:{msg:"\u05d3\u05e4\u05d3\u05e4\u05df ({brow_name}) \u05e9\u05dc\u05da \u05d0\u05d9\u05e0\u05d5 \u05de\u05e2\u05d5\u05d3\u05db\u05df.",msgmore:"\u05e2\u05d3\u05db\u05df/\u05d9 \u05d0\u05ea \u05d4\u05d3\u05e4\u05d3\u05e4\u05df \u05e9\u05dc\u05da \u05dc\u05e9\u05d9\u05e4\u05d5\u05e8 \u05d4\u05d0\u05d1\u05d8\u05d7\u05d4 \u05d5\u05d4\u05de\u05d4\u05d9\u05e8\u05d5\u05ea \u05d5\u05db\u05d3\u05d9 \u05dc\u05d9\u05d4\u05e0\u05d5\u05ea \u05de\u05d4\u05d7\u05d5\u05d5\u05d9\u05d4 \u05d4\u05d8\u05d5\u05d1\u05d4 \u05d1\u05d9\u05d5\u05ea\u05e8 \u05d1\u05d0\u05ea\u05e8 \u05d6\u05d4.",bupdate:"\u05e2\u05d3\u05db\u05df \u05d3\u05e4\u05d3\u05e4\u05df",bignore:"\u05d4\u05ea\u05e2\u05dc\u05dd",remind:"\u05ea\u05e7\u05d1\u05dc/\u05d9 \u05ea\u05d6\u05db\u05d5\u05e8\u05ea \u05d1\u05e2\u05d5\u05d3  {days} \u05d9\u05de\u05d9\u05dd.",bnever:"\u05d0\u05dc \u05ea\u05e6\u05d9\u05d2 \u05e9\u05d5\u05d1"},hi:{msg:"\u0906\u092a\u0915\u093e \u0935\u0947\u092c \u092c\u094d\u0930\u093e\u0909\u091c\u093c\u0930 ({brow_name}) \u092a\u0941\u0930\u093e\u0928\u093e \u0939\u0948\u0964",msgmore:"\u0907\u0938 \u0938\u093e\u0907\u091f \u092a\u0930 \u0905\u0927\u093f\u0915 \u0938\u0941\u0930\u0915\u094d\u0937\u093e, \u0917\u0924\u093f \u0914\u0930 \u0938\u0930\u094d\u0935\u094b\u0924\u094d\u0924\u092e \u0905\u0928\u0941\u092d\u0935 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0905\u092a\u0928\u0947 \u092c\u094d\u0930\u093e\u0909\u095b\u0930 \u0915\u094b \u0905\u092a\u0921\u0947\u091f \u0915\u0930\u0947\u0902 \u0964",bupdate:"\u092c\u094d\u0930\u093e\u0909\u091c\u093c\u0930 \u0905\u092a\u0921\u0947\u091f \u0915\u0930\u0947\u0902",bignore:"\u0928\u091c\u0930\u0905\u0902\u0926\u093e\u091c \u0915\u0930\u0947\u0902",remind:"\u0906\u092a\u0915\u094b {days} \u0926\u093f\u0928\u094b\u0902 \u092e\u0947\u0902 \u092f\u093e\u0926 \u0926\u093f\u0932\u093e\u092f\u093e \u091c\u093e\u090f\u0917\u093e\u0964",bnever:"\u092b\u093f\u0930 \u0915\u092d\u0940 \u092e\u0924 \u0926\u093f\u0916\u093e\u0928\u093e"},hu:{msg:"Az \xd6n webb\xf6ng\xe9sz\u0151je ({brow_name}) elavult.",msgmore:"Friss\xedtse b\xf6ng\xe9sz\u0151j\xe9t a nagyobb biztons\xe1g, sebess\xe9g \xe9s \xe9lm\xe9ny \xe9rdek\xe9ben!",bupdate:"B\xf6ng\xe9sz\u0151 friss\xedt\xe9se",bignore:"Mell\u0151z\xe9s",remind:"\xdajra eml\xe9keztet\xfcnk {days} napon bel\xfcl.",bnever:"Ne mutassa t\xf6bbet"},id:{msg:"Peramban web ({brow_name}) Anda sudah usang.",msgmore:"Perbarui peramban Anda untuk pengalaman terbaik, lebih aman, dan cepat di situs ini.",bupdate:"Perbarui peramban",bignore:"Abaikan",remind:"Anda akan diingatkan kembali dalam {days} hari.",bnever:"Jangan pernah tampilkan lagi"},it:{msg:"Il tuo browser ({brow_name}) non \xe8 aggiornato.",msgmore:"Aggiorna il browser per una maggiore sicurezza, velocit\xe0 e la migliore esperienza su questo sito.",bupdate:"Aggiorna browser",bignore:"Ignora",remind:"Riceverai un promemoria tra {days} giorni.",bnever:"Non mostrare di nuovo"},ja:{msg:"\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\uff08{brow_name}\uff09\u306f\u6700\u65b0\u7248\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",msgmore:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3001\u30b9\u30d4\u30fc\u30c9\u3001\u305d\u3057\u3066\u3053\u306e\u30b5\u30a4\u30c8\u3067\u306e\u6700\u826f\u306e\u4f53\u9a13\u306e\u305f\u3081\u306b\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002",bupdate:"\u30d6\u30e9\u30a6\u30b6\u3092\u66f4\u65b0\u3059\u308b",bignore:"\u7121\u8996\u3059\u308b",remind:"{days} \u65e5\u5f8c\u306b\u3082\u3046\u4e00\u5ea6\u304a\u77e5\u3089\u305b\u3057\u307e\u3059\u3002",bnever:"\u6b21\u56de\u304b\u3089\u8868\u793a\u3057\u306a\u3044"},ko:{msg:"\uadc0\ud558\uc758 \uc6f9 \ube0c\ub77c\uc6b0\uc800({brow_name})\ub294 \uc624\ub798\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",msgmore:"\uc774 \uc0ac\uc774\ud2b8\uc5d0\uc11c \ubcf4\uc548, \uc18d\ub3c4\uc640 \ucd5c\uc0c1\uc758 \uacbd\ud5d8\uc744 \uc5bb\uc73c\ub824\uba74 \ube0c\ub77c\uc6b0\uc800\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\uc2ed\uc2dc\uc624.",bupdate:"\ube0c\ub77c\uc6b0\uc800 \uc5c5\ub370\uc774\ud2b8\ud558\uae30",bignore:"\ubb34\uc2dc\ud558\uae30",remind:"{days}\uc77c \ud6c4\uc5d0 \uc54c\ub824 \ub4dc\ub9bd\ub2c8\ub2e4.",bnever:"\ub2e4\uc2dc \ud45c\uc2dc\ud558\uc9c0 \uc54a\uae30"},lt:{msg:"J\u016bs\u0173 nar\u0161ykl\u0117 ({brow_name}) yra pasenusi.",msgmore:"Atsinaujinkite savo nar\u0161ykl\u0119 nor\u0117dami gauti daugiau saugumo, grei\u010dio ir pa\u010di\u0173 geriausi\u0173 patir\u010di\u0173 \u0161ioje svetain\u0117je.",bupdate:"Atnaujinti nar\u0161ykl\u0119",bignore:"Nepaisyti",remind:"Jums bus priminta po {days} dien\u0173.",bnever:"Daugiau niekada nerodyti"},lv:{msg:"J\u016bsu p\u0101rl\u016bkprogramma ({brow_name}) ir novecojusi.",msgmore:"Atjaunojiet savu p\u0101rl\u016bkprogrammu liel\u0101kai dro\u0161\u012bbai, \u0101trumam un lab\u0101kai pieredzei ar \u0161o vietni.",bupdate:"Atjaunin\u0101t p\u0101rl\u016bkprogrammu",bignore:"Ignor\u0113t",remind:"Jums tiks par\u0101d\u012bts atg\u0101din\u0101jums p\u0113c {days} dien\u0101m.",bnever:"Vairs ner\u0101d\u012bt"},ms:{msg:"Pelayar web anda ({brow_name}) sudah lapuk.",msgmore:"Kemas kini pelayar anda untuk lebih keselamatan, kelajuan dan pengalaman terbaik di laman web ini.",bupdate:"Kemas kini pelayar",bignore:"Abaikan",remind:"Anda akan diingatkan dalam {days} hari.",bnever:"Jangan tunjukkan lagi"},nl:{msg:"Uw webbrowser ({brow_name}) is verouderd.",msgmore:"Update uw browser voor meer veiligheid, snelheid en om deze site optimaal te kunnen gebruiken.",bupdate:"Browser updaten",bignore:"Negeren",remind:"We zullen u er in {days} dagen aan herinneren.",bnever:"Nooit meer tonen"}};w.no=w.nn=w.nb={msg:"Nettleseren din ({brow_name}) er utdatert.",msgmore:"Oppdater nettleseren din for \xf8kt sikkerhet, hastighet og den beste opplevelsen p\xe5 dette nettstedet.",bupdate:"Oppdater nettleser",bignore:"Ignorer",remind:"Du vil f\xe5 en p\xe5minnelse om {days} dager.",bnever:"Aldri vis igjen"},w.pl={msg:"Twoja przegl\u0105darka ({brow_name}) jest nieaktualna.",msgmore:"Zaktualizuj przegl\u0105dark\u0119, by korzysta\u0107 z tej strony bezpieczniej, szybciej i po prostu sprawniej.",bupdate:"Aktualizuj przegl\u0105dark\u0119",bignore:"Ignoruj",remind:"Przypomnimy o tym za {days} dni.",bnever:"Nie pokazuj wi\u0119cej"},w.pt={msg:"Seu navegador da web ({brow_name}) est\xe1 desatualizado.",msgmore:"Atualize seu navegador para ter mais seguran\xe7a e velocidade, al\xe9m da melhor experi\xeancia neste site.",bupdate:"Atualizar navegador",bignore:"Ignorar",remind:"Voc\xea ser\xe1 relembrado em {days} dias.",bnever:"N\xe3o mostrar novamente"},w.ro={msg:"Browserul t\u0103u ({brow_name}) nu este actualizat.",msgmore:"Actualizeaz\u0103 browserul pentru o mai mare siguran\u021b\u0103, vitez\u0103 \u0219i cea mai bun\u0103 experien\u021b\u0103 pe acest site.",bupdate:"Actualizeaz\u0103 browser",bignore:"Ignor\u0103",remind:"\u021ai se va reaminti peste {days} zile.",bnever:"Nu mai ar\u0103ta"},w.ru={msg:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 ({brow_name}) \u0443\u0441\u0442\u0430\u0440\u0435\u043b.",msgmore:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0432\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0440\u043e\u0432\u043d\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438, \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0438 \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u044d\u0442\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430.",bupdate:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0440\u0430\u0443\u0437\u0435\u0440",bignore:"\u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c",remind:"\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u043d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 {days} \u0434\u043d\u0435\u0439.",bnever:"\u0411\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c "},w.sk={msg:"V\xe1\u0161 internetov\xfd prehliada\u010d ({brow_name}) je zastaran\xfd.",msgmore:"Pre v\xe4\u010d\u0161iu bezpe\u010dnos\u0165, r\xfdchlos\u0165 a lep\u0161iu sk\xfasenos\u0165 s touto str\xe1nkou si aktualizujte svoj prehliada\u010d.",bupdate:"Aktualizova\u0165 prehliada\u010d",bignore:"Ignorova\u0165",remind:"Bude v\xe1m to pripomenut\xe9 o {days} dn\xed.",bnever:"U\u017e nikdy viac neukazova\u0165"},w.sl={msg:"Va\u0161 spletni brskalnik ({brow_name}) je zastarel.",msgmore:"Posodobite svoj brskalnik za dodatno varnost, hitrost in najbolj\u0161o izku\u0161njo na tem spletnem mestu.",bupdate:"Posodobi brskalnik",bignore:"Prezri",remind:"Opomnik boste prejeli \u010dez toliko dni: {days}.",bnever:"Ne prika\u017ei ve\u010d"},w.sq={msg:"Shfletuesi juaj ({brow_name}) \xebsht\xeb i vjetruar.",msgmore:"P\xebrdit\xebsoni shfletuesin tuaj p\xebr m\xeb tep\xebr siguri, shpejt\xebsi dhe p\xebr m\xeb t\xeb mirin e funksionimeve n\xeb k\xebt\xeb sajt.",bupdate:"P\xebrdit\xebso shfletuesin",bignore:"Shp\xebrfille",remind:"Do t\u2019ju rikujtohet pas {days} dit\xebsh.",bnever:"Mos e shfaq kurr\xeb m\xeb"},w.sr={msg:"Va\u0161 pretra\u017eiva\u010d ({brow_name}) je zastareo.",msgmore:"Ima poznate sigurnosne probleme i najverovatnije ne\u0107e prikazati sve funkcionalnisti ovog i drugih sajtova.",bupdate:"Nadogradi pretra\u017eiva\u010d",bignore:"Ignorisi",remind:"Zaboravic\u0301ete za {days} dana.",bnever:"Ne prikazuj opet"},w.sv={msg:"Din webbl\xe4sare ({brow_name}) \xe4r f\xf6r\xe5ldrad. ",msgmore:"Uppdatera din webbl\xe4sare f\xf6r mer s\xe4kerhet, hastighet och den b\xe4sta upplevelsen p\xe5 den h\xe4r sajten. ",bupdate:"Uppdatera webbl\xe4saren",bignore:"Ignorera",remind:"Du f\xe5r en p\xe5minnelse om {days} dagar.",bnever:"Visa aldrig igen"},w.th={msg:"\u0e40\u0e27\u0e47\u0e1a\u0e40\u0e1a\u0e23\u0e32\u0e27\u0e4c\u0e40\u0e0b\u0e2d\u0e23\u0e4c\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13 ({brow_name}) \u0e25\u0e49\u0e32\u0e2a\u0e21\u0e31\u0e22\u0e41\u0e25\u0e49\u0e27",msgmore:"\u0e2d\u0e31\u0e1b\u0e40\u0e14\u0e17\u0e40\u0e1a\u0e23\u0e32\u0e27\u0e4c\u0e40\u0e0b\u0e2d\u0e23\u0e4c\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e27\u0e32\u0e21\u0e1b\u0e25\u0e2d\u0e14\u0e20\u0e31\u0e22, \u0e04\u0e27\u0e32\u0e21\u0e40\u0e23\u0e47\u0e27 \u0e41\u0e25\u0e30\u0e1b\u0e23\u0e30\u0e2a\u0e1a\u0e01\u0e32\u0e23\u0e13\u0e4c\u0e17\u0e35\u0e48\u0e14\u0e35\u0e17\u0e35\u0e48\u0e2a\u0e38\u0e14\u0e1a\u0e19\u0e40\u0e27\u0e47\u0e1a\u0e44\u0e0b\u0e15\u0e4c\u0e19\u0e35\u0e49",bupdate:"\u0e2d\u0e31\u0e1b\u0e40\u0e14\u0e17\u0e40\u0e1a\u0e23\u0e32\u0e27\u0e4c\u0e40\u0e0b\u0e2d\u0e23\u0e4c",bignore:"\u0e02\u0e49\u0e32\u0e21",remind:"\u0e04\u0e38\u0e13\u0e08\u0e30\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19\u0e43\u0e19 {days} \u0e27\u0e31\u0e19",bnever:"\u0e44\u0e21\u0e48\u0e15\u0e49\u0e2d\u0e07\u0e41\u0e2a\u0e14\u0e07\u0e2d\u0e35\u0e01"},w.tr={msg:"Web taray\u0131c\u0131n\u0131z ({brow_name}) g\xfcncel de\u011fil.",msgmore:"Daha fazla g\xfcvenlik ve h\u0131z ile bu sitede en iyi deneyim i\xe7in taray\u0131c\u0131n\u0131z\u0131 g\xfcncelleyin.",bupdate:"Taray\u0131c\u0131y\u0131 g\xfcncelle",bignore:"Yok say",remind:"{days} g\xfcn sonra bir hat\u0131rlatma alacaks\u0131n\u0131z.",bnever:"Bir daha g\xf6sterme"},w.uk={msg:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 ({brow_name}) \u0437\u0430\u0441\u0442\u0430\u0440\u0456\u043b\u0438\u0439.",msgmore:"\u041e\u043d\u043e\u0432\u0456\u0442\u044c \u0441\u0432\u0456\u0439 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0434\u043b\u044f \u0431\u0456\u043b\u044c\u0448\u043e\u0457 \u0431\u0435\u0437\u043f\u0435\u043a\u0438, \u0448\u0432\u0438\u0434\u043a\u043e\u0441\u0442\u0456 \u0442\u0430 \u043f\u043e\u0432\u043d\u043e\u0446\u0456\u043d\u043d\u043e\u0457 \u0440\u043e\u0431\u043e\u0442\u0438 \u0446\u044c\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0443.",bupdate:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440",bignore:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u0438",remind:"\u0412\u0438 \u043e\u0442\u0440\u0438\u043c\u0430\u0454\u0442\u0435 \u043d\u0430\u0433\u0430\u0434\u0443\u0432\u0430\u043d\u043d\u044f \u0447\u0435\u0440\u0435\u0437 {days} \u0434\u043d\u0456\u0432.",bnever:"\u0411\u0456\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u0443\u0432\u0430\u0442\u0438"},w.uz={msg:"Sizning ({brow_name}) veb-brauzeringiz eskirgan",msgmore:"Xavfsizlik, tezkorlik va ushbu sayt imkoniyatlaridan to`liq foydalanish uchun brauzeringizni yangilang.",bupdate:"Brauzeringizni yangilang",bignore:"E\u2019tibor bermaslik",remind:"Sizga {days} kundan so`ng eslatammiz.",bnever:"Hech qachon qayta ko'rsatmang"},w.vi={msg:"Tr\xecnh duy\u1ec7t web c\u1ee7a b\u1ea1n ({brow_name}) \u0111\xe3 l\u1ed7i th\u1eddi.",msgmore:"C\u1eadp nh\u1eadt tr\xecnh duy\u1ec7t c\u1ee7a b\u1ea1n \u0111\u1ec3 c\xf3 th\xeam b\u1ea3o m\u1eadt, t\u1ed1c \u0111\u1ed9 v\xe0 tr\u1ea3i nghi\u1ec7m t\u1ed1t nh\u1ea5t tr\xean trang web n\xe0y.",bupdate:"C\u1eadp nh\u1eadt tr\xecnh duy\u1ec7t",bignore:"B\u1ecf qua",remind:"B\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c nh\u1eafc nh\u1edf sau {days} ng\xe0y.",bnever:"Kh\xf4ng bao gi\u1edd hi\u1ec3n th\u1ecb l\u1ea1i"},w.zh={msg:"\u60a8\u7684\u7f51\u9875\u6d4f\u89c8\u5668\uff08{brow_name}\uff09\u5df2\u8fc7\u671f\u3002",msgmore:"\u66f4\u65b0\u60a8\u7684\u6d4f\u89c8\u5668\uff0c\u4ee5\u4fbf\u5728\u8be5\u7f51\u7ad9\u4e0a\u83b7\u5f97\u66f4\u5b89\u5168\u3001\u66f4\u5feb\u901f\u548c\u6700\u597d\u7684\u4f53\u9a8c\u3002",bupdate:"\u66f4\u65b0\u6d4f\u89c8\u5668",bignore:"\u5ffd\u7565",remind:"\u4f1a\u5728{days}\u5929\u540e\u63d0\u9192\u60a8\u3002",bnever:"\u4e0d\u518d\u663e\u793a"},w["zh-tw"]=w["zh-hans-cn"]={msg:"\u60a8\u7684\u7db2\u8def\u700f\u89bd\u5668\uff08{brow_name}\uff09\u5df2\u904e\u820a\u3002",msgmore:"\u66f4\u65b0\u60a8\u7684\u700f\u89bd\u5668\u4ee5\u7372\u5f97\u66f4\u4f73\u7684\u5b89\u5168\u6027\u3001\u901f\u5ea6\u4ee5\u53ca\u5728\u6b64\u7db2\u7ad9\u7684\u6700\u4f73\u9ad4\u9a57\u3002",bupdate:"\u66f4\u65b0\u700f\u89bd\u5668",bignore:"\u5ffd\u7565",remind:"\u60a8\u5c07\u5728 {days} \u5929\u5f8c\u6536\u5230\u63d0\u9192\u3002",bnever:"\u4e0d\u8981\u518d\u986f\u793a"};var R=P["text_for_"+X.n+"_in_"+P.ll]||P["text_for_"+X.n]||P["text_"+P.llfull]||P["text_in_"+P.ll]||P["text_"+P.ll]||P.text;if(w=E=w[P.llfull]||w[P.ll]||w.en,R)if("string"==typeof R)w=E=R;else for(var C in R)E[C]=R[C];E.msg&&(w='<b class="buorg-mainmsg">'+w.msg+'</b> <span class="buorg-moremsg">'+w.msgmore+'</span> <span class="buorg-buttons"><a{up_but}>'+w.bupdate+"</a> <a{ignore_but}>"+w.bignore+"</a></span>");var N="";P.newwindow&&(N=' target="_blank" rel="noopener"');var x=P.div=document.createElement("div");x.id=x.className="buorg";var S="<style>.buorg-icon {width: 22px; height: 16px; vertical-align: middle; position: relative; top: -0.05em; display: inline-block; background: no-repeat 0px center url(https://browser-update.org/static/img/small/"+X.n+".png);}</style>",s="<style>.buorg {position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:center;  color:#000; background-color: #fff8ea; font: 18px Calibri,Helvetica,sans-serif; box-shadow: 0 0 5px rgba(0,0,0,0.2);animation: buorgfly 1s ease-out 0s;}.buorg-pad { padding: 9px;  line-height: 1.7em; }.buorg-buttons { display: block; text-align: center; }#buorgig,#buorgul,#buorgpermanent { color: #fff; text-decoration: none; cursor:pointer; box-shadow: 0 0 2px rgba(0,0,0,0.4); padding: 1px 10px; border-radius: 4px; font-weight: normal; background: #5ab400;    white-space: nowrap;    margin: 0 2px; display: inline-block;}#buorgig { background-color: #edbc68;}@media only screen and (max-width: 700px){.buorg div { padding:5px 12px 5px 9px; line-height: 1.3em;}}@keyframes buorgfly {from {opacity:0;transform:translateY(-50px)} to {opacity:1;transform:translateY(0px)}}.buorg-fadeout {transition: visibility 0s 8.5s, opacity 8s ease-out .5s;}</style>";E.msg&&("ar"==P.ll||"he"==P.ll||"fa"==P.ll)&&(s+="<style>.buorg {direction:RTL; unicode-bidi:embed;}</style>"),!E.msg&&w.indexOf&&-1!==w.indexOf("%s")?(w=function y(){for(var O=arguments,q=O[0],ee=1;ee<O.length;++ee)q=q.replace(/%s/,O[ee]);return q}(w,X.t,' id="buorgul" href="'+P.url+'"'+N),x.innerHTML="<div>"+w+'<div id="buorgclose"><a id="buorga">&times;</a></div></div>'+(S+="<style>.buorg {position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:left; cursor:pointer; color:#000; font: 13px Arial,sans-serif;color:#000;}.buorg div { padding:5px 36px 5px 40px; }.buorg>div>a,.buorg>div>a:visited{color:#E25600; text-decoration: underline;}#buorgclose{position:absolute;right:6px;top:0px;height:20px;width:12px;font:18px bold;padding:0;}#buorga{display:block;}@media only screen and (max-width: 700px){.buorg div { padding:5px 15px 5px 9px; }}</style>"),P.addmargin=!0):("bottom"===P.style?s+="<style>.buorg {bottom:0; top:auto; border-top:1px solid #A29330; } @keyframes buorgfly {from {opacity:0;transform:translateY(50px)} to {opacity:1;transform:translateY(0px)}}</style>":"corner"===P.style?s+="<style> .buorg { text-align: left; width:300px; top:50px; right:50px; left:auto; border:1px solid #A29330; } .buorg-buttons, .buorg-mainmsg, .buorg-moremsg { display: block; } .buorg-buttons a {margin: 4px 2px;} .buorg-icon {display: none;}</style>":P.addmargin=!0,w=w.replace("{brow_name}",X.t).replace("{up_but}",' id="buorgul" href="'+P.url+'"'+N).replace("{ignore_but}",' id="buorgig" role="button" tabindex="0"'),x.innerHTML='<div class="buorg-pad" role="status" aria-live="polite"><span class="buorg-icon"> </span>'+w+"</div>"+S+s),P.text=w,P.container?(P.container.appendChild(x),P.addmargin=!1):document.body.insertBefore(x,document.body.firstChild);var u=document.getElementById("buorgul");if(u&&(u.onclick=function(O){x.onclick=null,P.onclick(P),!P.noclose&&(P.setCookie(P.reminderClosed),P.noclose||(x.style.display="none",P.addmargin&&!1!==P.shift_page_down&&(m.style.marginTop=P.bodymt)))}),R||(x.style.cursor="pointer",x.onclick=function(){P.newwindow?window.open(P.url,"_blank"):window.location.href=P.url,P.setCookie(P.reminderClosed),P.onclick(P)}),P.addmargin&&!1!==P.shift_page_down){var m=document.getElementsByTagName("html")[0]||document.body;P.bodymt=m.style.marginTop,m.style.marginTop=x.clientHeight+"px"}var l=document.getElementById("buorga")||document.getElementById("buorgig");if(l&&(l.onclick=function(O){return x.onclick=null,P.onclose(P),P.addmargin&&!1!==P.shift_page_down&&(m.style.marginTop=P.bodymt),P.setCookie(P.reminderClosed),!P.no_permanent_hide&&E.bnever&&E.remind?(P.div.innerHTML='<div class="buorg-pad"><span class="buorg-moremsg">'+(P.reminderClosed>24?E.remind.replace("{days}",Math.round(P.reminderClosed/24)):"")+'</span> <span class="buorg-buttons"><a id="buorgpermanent" role="button" tabindex="0" href="'+P.url_permanent_hide+'"'+N+">"+E.bnever+"</a></span></div>"+S+s,x.className="buorg buorg-fadeout",document.getElementById("buorgpermanent").onclick=function(q){P.setCookie(8760),P.div.style.display="none"},P.div.style.opacity=0,P.div.style.visibility="hidden",!1):(P.div.style.display="none",!1)},(P.noclose||0==P.reminderClosed)&&l.parentNode.removeChild(l)),P.onshow(P),P.test&&!P.dont_show_debuginfo){var M=document.createElement("script");M.src=P.domain+"/update.test.js",document.body.appendChild(M)}};
/*!
* @license
* 
* dhtmlxScheduler v.6.0.3 Standard
* 
* To use dhtmlxScheduler in non-GPL projects (and get Pro version of the product), please obtain Commercial/Enterprise or Ultimate license on our site https://dhtmlx.com/docs/products/dhtmlxScheduler/#licensing or contact us at sales@dhtmlx.com
* 
* (c) XB Software Ltd.
* 
*/(function(P,X){"object"==typeof exports&&"object"==typeof module?module.exports=X():"function"==typeof define&&define.amd?define("dhtmlxscheduler",[],X):"object"==typeof exports?exports.dhtmlxscheduler=X():P.dhtmlxscheduler=X()})(window,function(){return function(P){var X={};function I(y){if(X[y])return X[y].exports;var w=X[y]={i:y,l:!1,exports:{}};return P[y].call(w.exports,w,w.exports,I),w.l=!0,w.exports}return I.m=P,I.c=X,I.d=function(y,w,E){I.o(y,w)||Object.defineProperty(y,w,{enumerable:!0,get:E})},I.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},I.t=function(y,w){if(1&w&&(y=I(y)),8&w||4&w&&"object"==typeof y&&y&&y.__esModule)return y;var E=Object.create(null);if(I.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:y}),2&w&&"string"!=typeof y)for(var R in y)I.d(E,R,function(C){return y[C]}.bind(null,R));return E},I.n=function(y){var w=y&&y.__esModule?function(){return y.default}:function(){return y};return I.d(w,"a",w),w},I.o=function(y,w){return Object.prototype.hasOwnProperty.call(y,w)},I.p="/codebase/",I(I.s=9)}([function(P,X,I){"use strict";(function(y){var w;w=typeof window<"u"?window:y,X.a=w}).call(this,I(1))},function(P,X){function I(w){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(w)}var y;y=function(){return this}();try{y=y||new Function("return this")()}catch{"object"===(typeof window>"u"?"undefined":I(window))&&(y=window)}P.exports=y},function(P,X){P.exports=function(I){return function(){var y={};for(var w in this._events){var E=this._events[w];-1==E.id.toString().indexOf("#")&&(y[E.id]=E)}return y}.bind(I)}},function(P,X){P.exports=function(I){if("string"==typeof I||"number"==typeof I)return I;var y="";for(var w in I){var E="";I.hasOwnProperty(w)&&(E=w+"="+(E="string"==typeof I[w]?encodeURIComponent(I[w]):"number"==typeof I[w]?I[w]:encodeURIComponent(JSON.stringify(I[w]))),y.length&&(E="&"+E),y+=E)}return y}},function(P,X,I){"use strict";I.r(X)},function(P,X){var I,y,w=P.exports={};function E(){throw new Error("setTimeout has not been defined")}function R(){throw new Error("clearTimeout has not been defined")}function C(O){if(I===setTimeout)return setTimeout(O,0);if((I===E||!I)&&setTimeout)return I=setTimeout,setTimeout(O,0);try{return I(O,0)}catch{try{return I.call(null,O,0)}catch{return I.call(this,O,0)}}}!function(){try{I="function"==typeof setTimeout?setTimeout:E}catch{I=E}try{y="function"==typeof clearTimeout?clearTimeout:R}catch{y=R}}();var N,x=[],S=!1,s=-1;function u(){S&&N&&(S=!1,N.length?x=N.concat(x):s=-1,x.length&&m())}function m(){if(!S){var O=C(u);S=!0;for(var q=x.length;q;){for(N=x,x=[];++s<q;)N&&N[s].run();s=-1,q=x.length}N=null,S=!1,function(ee){if(y===clearTimeout)return clearTimeout(ee);if((y===R||!y)&&clearTimeout)return y=clearTimeout,clearTimeout(ee);try{y(ee)}catch{try{return y.call(null,ee)}catch{return y.call(this,ee)}}}(O)}}function l(O,q){this.fun=O,this.array=q}function M(){}w.nextTick=function(O){var q=new Array(arguments.length-1);if(arguments.length>1)for(var ee=1;ee<arguments.length;ee++)q[ee-1]=arguments[ee];x.push(new l(O,q)),1!==x.length||S||C(m)},l.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={},w.on=M,w.addListener=M,w.once=M,w.off=M,w.removeListener=M,w.removeAllListeners=M,w.emit=M,w.prependListener=M,w.prependOnceListener=M,w.listeners=function(O){return[]},w.binding=function(O){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(O){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},function(P,X,I){(function(y,w,E){var R,N,S;function x(S){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(S)}
/* @preserve
       * The MIT License (MIT)
       * 
       * Copyright (c) 2013-2018 Petka Antonov
       * 
       * Permission is hereby granted, free of charge, to any person obtaining a copy
       * of this software and associated documentation files (the "Software"), to deal
       * in the Software without restriction, including without limitation the rights
       * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
       * copies of the Software, and to permit persons to whom the Software is
       * furnished to do so, subject to the following conditions:
       * 
       * The above copyright notice and this permission notice shall be included in
       * all copies or substantial portions of the Software.
       * 
       * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
       * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
       * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
       * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
       * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
       * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
       * THE SOFTWARE.
       * 
       */S=function(){return function m(l,M,O){function q(B,A){if(!M[B]){if(!l[B]){var H="function"==typeof _dereq_&&_dereq_;if(!A&&H)return H(B,!0);if(ee)return ee(B,!0);var $=new Error("Cannot find module '"+B+"'");throw $.code="MODULE_NOT_FOUND",$}var J=M[B]={exports:{}};l[B][0].call(J.exports,function(Q){return q(l[B][1][Q]||Q)},J,J.exports,m,l,M,O)}return M[B].exports}for(var ee="function"==typeof _dereq_&&_dereq_,G=0;G<O.length;G++)q(O[G]);return q}({1:[function(m,l,M){"use strict";var O;try{throw new Error}catch(H){O=H}var q=m("./schedule"),ee=m("./queue");function G(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new ee(16),this._normalQueue=new ee(16),this._haveDrainedQueues=!1;var H=this;this.drainQueues=function(){H._drainQueues()},this._schedule=q}function B(H){for(;H.length()>0;)A(H)}function A(H){var $=H.shift();if("function"!=typeof $)$._settlePromises();else{var J=H.shift(),Q=H.shift();$.call(J,Q)}}G.prototype.setScheduler=function(H){var $=this._schedule;return this._schedule=H,this._customScheduler=!0,$},G.prototype.hasCustomScheduler=function(){return this._customScheduler},G.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},G.prototype.fatalError=function(H,$){$?(y.stderr.write("Fatal "+(H instanceof Error?H.stack:H)+"\n"),y.exit(2)):this.throwLater(H)},G.prototype.throwLater=function(H,$){if(1===arguments.length&&($=H,H=function(){throw $}),typeof setTimeout<"u")setTimeout(function(){H($)},0);else try{this._schedule(function(){H($)})}catch{throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},G.prototype.invokeLater=function(H,$,J){this._lateQueue.push(H,$,J),this._queueTick()},G.prototype.invoke=function(H,$,J){this._normalQueue.push(H,$,J),this._queueTick()},G.prototype.settlePromises=function(H){this._normalQueue._pushOne(H),this._queueTick()},G.prototype._drainQueues=function(){B(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,B(this._lateQueue)},G.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},G.prototype._reset=function(){this._isTickUsed=!1},l.exports=G,l.exports.firstLineError=O},{"./queue":17,"./schedule":18}],2:[function(m,l,M){"use strict";l.exports=function(O,q,ee,G){var B=!1,A=function(Q,U){this._reject(U)},H=function(Q,U){U.promiseRejectionQueued=!0,U.bindingPromise._then(A,A,null,this,Q)},$=function(Q,U){0==(50397184&this._bitField)&&this._resolveCallback(U.target)},J=function(Q,U){U.promiseRejectionQueued||this._reject(Q)};O.prototype.bind=function(Q){B||(B=!0,O.prototype._propagateFrom=G.propagateFromFunction(),O.prototype._boundValue=G.boundValueFunction());var U=ee(Q),K=new O(q);K._propagateFrom(this,1);var F=this._target();if(K._setBoundTo(U),U instanceof O){var L={promiseRejectionQueued:!1,promise:K,target:F,bindingPromise:U};F._then(q,H,void 0,K,L),U._then($,J,void 0,K,L),K._setOnCancel(U)}else K._resolveCallback(F);return K},O.prototype._setBoundTo=function(Q){void 0!==Q?(this._bitField=2097152|this._bitField,this._boundTo=Q):this._bitField=-2097153&this._bitField},O.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},O.bind=function(Q,U){return O.resolve(U).bind(Q)}}},{}],3:[function(m,l,M){"use strict";var O;typeof Promise<"u"&&(O=Promise);var q=m("./promise")();q.noConflict=function(){try{Promise===q&&(Promise=O)}catch{}return q},l.exports=q},{"./promise":15}],4:[function(m,l,M){"use strict";l.exports=function(O,q,ee,G){var B=m("./util"),A=B.tryCatch,H=B.errorObj,$=O._async;O.prototype.break=O.prototype.cancel=function(){if(!G.cancellation())return this._warn("cancellation is disabled");for(var J=this,Q=J;J._isCancellable();){if(!J._cancelBy(Q)){Q._isFollowing()?Q._followee().cancel():Q._cancelBranched();break}var U=J._cancellationParent;if(null==U||!U._isCancellable()){J._isFollowing()?J._followee().cancel():J._cancelBranched();break}J._isFollowing()&&J._followee().cancel(),J._setWillBeCancelled(),Q=J,J=U}},O.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},O.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},O.prototype._cancelBy=function(J){return J===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},O.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},O.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),$.invoke(this._cancelPromises,this,void 0))},O.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},O.prototype._unsetOnCancel=function(){this._onCancelField=void 0},O.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},O.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},O.prototype._doInvokeOnCancel=function(J,Q){if(B.isArray(J))for(var U=0;U<J.length;++U)this._doInvokeOnCancel(J[U],Q);else if(void 0!==J)if("function"==typeof J){if(!Q){var K=A(J).call(this._boundValue());K===H&&(this._attachExtraTrace(K.e),$.throwLater(K.e))}}else J._resultCancelled(this)},O.prototype._invokeOnCancel=function(){var J=this._onCancel();this._unsetOnCancel(),$.invoke(this._doInvokeOnCancel,this,J)},O.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},O.prototype._resultCancelled=function(){this.cancel()}}},{"./util":21}],5:[function(m,l,M){"use strict";l.exports=function(O){var q=m("./util"),ee=m("./es5").keys,G=q.tryCatch,B=q.errorObj;return function(A,H,$){return function(J){var Q=$._boundValue();e:for(var U=0;U<A.length;++U){var K=A[U];if(K===Error||null!=K&&K.prototype instanceof Error){if(J instanceof K)return G(H).call(Q,J)}else if("function"==typeof K){var F=G(K).call(Q,J);if(F===B)return F;if(F)return G(H).call(Q,J)}else if(q.isObject(J)){for(var L=ee(K),ie=0;ie<L.length;++ie){var Y=L[ie];if(K[Y]!=J[Y])continue e}return G(H).call(Q,J)}}return O}}}},{"./es5":10,"./util":21}],6:[function(m,l,M){"use strict";l.exports=function(O){var q=!1,ee=[];function G(){this._trace=new G.CapturedTrace(B())}function B(){var A=ee.length-1;if(A>=0)return ee[A]}return O.prototype._promiseCreated=function(){},O.prototype._pushContext=function(){},O.prototype._popContext=function(){return null},O._peekContext=O.prototype._peekContext=function(){},G.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,ee.push(this._trace))},G.prototype._popContext=function(){if(void 0!==this._trace){var A=ee.pop(),H=A._promiseCreated;return A._promiseCreated=null,H}return null},G.CapturedTrace=null,G.create=function(){if(q)return new G},G.deactivateLongStackTraces=function(){},G.activateLongStackTraces=function(){var A=O.prototype._pushContext,H=O.prototype._popContext,$=O._peekContext,J=O.prototype._peekContext,Q=O.prototype._promiseCreated;G.deactivateLongStackTraces=function(){O.prototype._pushContext=A,O.prototype._popContext=H,O._peekContext=$,O.prototype._peekContext=J,O.prototype._promiseCreated=Q,q=!1},q=!0,O.prototype._pushContext=G.prototype._pushContext,O.prototype._popContext=G.prototype._popContext,O._peekContext=O.prototype._peekContext=B,O.prototype._promiseCreated=function(){var U=this._peekContext();U&&null==U._promiseCreated&&(U._promiseCreated=this)}},G}},{}],7:[function(m,l,M){"use strict";l.exports=function(O,q,ee,G){var B,A,H,$,J=O._async,Q=m("./errors").Warning,U=m("./util"),K=m("./es5"),F=U.canAttachTrace,L=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,ie=/\((?:timers\.js):\d+:\d+\)/,Y=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,ne=null,le=null,ge=!1,Ee=0!=U.env("BLUEBIRD_DEBUG"),Le=!(0==U.env("BLUEBIRD_WARNINGS")||!Ee&&!U.env("BLUEBIRD_WARNINGS")),Qe=!(0==U.env("BLUEBIRD_LONG_STACK_TRACES")||!Ee&&!U.env("BLUEBIRD_LONG_STACK_TRACES")),ae=0!=U.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Le||!!U.env("BLUEBIRD_W_FORGOTTEN_RETURN"));(function(){var me=[];function Be(){for(var De=0;De<me.length;++De)me[De]._notifyUnhandledRejection();se()}function se(){me.length=0}$=function(De){me.push(De),setTimeout(Be,1)},K.defineProperty(O,"_unhandledRejectionCheck",{value:Be}),K.defineProperty(O,"_unhandledRejectionClear",{value:se})})(),O.prototype.suppressUnhandledRejections=function(){var me=this._target();me._bitField=-1048577&me._bitField|524288},O.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),$(this))},O.prototype._notifyUnhandledRejectionIsHandled=function(){vt("rejectionHandled",B,void 0,this)},O.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},O.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},O.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var me=this._settledValue();this._setUnhandledRejectionIsNotified(),vt("unhandledRejection",A,me,this)}},O.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},O.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},O.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},O.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},O.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},O.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},O.prototype._warn=function(me,Be,se){return ct(me,Be,se||this)},O.onPossiblyUnhandledRejection=function(me){var Be=O._getContext();A=U.contextBind(Be,me)},O.onUnhandledRejectionHandled=function(me){var Be=O._getContext();B=U.contextBind(Be,me)};var fe=function(){};O.longStackTraces=function(){if(J.haveItemsQueued()&&!Ie.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Ie.longStackTraces&&gt()){var me=O.prototype._captureStackTrace,Be=O.prototype._attachExtraTrace,se=O.prototype._dereferenceTrace;Ie.longStackTraces=!0,fe=function(){if(J.haveItemsQueued()&&!Ie.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");O.prototype._captureStackTrace=me,O.prototype._attachExtraTrace=Be,O.prototype._dereferenceTrace=se,q.deactivateLongStackTraces(),Ie.longStackTraces=!1},O.prototype._captureStackTrace=Re,O.prototype._attachExtraTrace=ot,O.prototype._dereferenceTrace=pt,q.activateLongStackTraces()}},O.hasLongStackTraces=function(){return Ie.longStackTraces&&gt()};var Me={unhandledrejection:{before:function(){var me=U.global.onunhandledrejection;return U.global.onunhandledrejection=null,me},after:function(me){U.global.onunhandledrejection=me}},rejectionhandled:{before:function(){var me=U.global.onrejectionhandled;return U.global.onrejectionhandled=null,me},after:function(me){U.global.onrejectionhandled=me}}},je=function(){var me=function(se,De){if(!se)return!U.global.dispatchEvent(De);var We;try{return We=se.before(),!U.global.dispatchEvent(De)}finally{se.after(We)}};try{if("function"==typeof CustomEvent){var Be=new CustomEvent("CustomEvent");return U.global.dispatchEvent(Be),function(se,De){se=se.toLowerCase();var We=new CustomEvent(se,{detail:De,cancelable:!0});return K.defineProperty(We,"promise",{value:De.promise}),K.defineProperty(We,"reason",{value:De.reason}),me(Me[se],We)}}return"function"==typeof Event?(Be=new Event("CustomEvent"),U.global.dispatchEvent(Be),function(se,De){se=se.toLowerCase();var We=new Event(se,{cancelable:!0});return We.detail=De,K.defineProperty(We,"promise",{value:De.promise}),K.defineProperty(We,"reason",{value:De.reason}),me(Me[se],We)}):((Be=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),U.global.dispatchEvent(Be),function(se,De){se=se.toLowerCase();var We=document.createEvent("CustomEvent");return We.initCustomEvent(se,!1,!0,De),me(Me[se],We)})}catch{}return function(){return!1}}(),ze=U.isNode?function(){return y.emit.apply(y,arguments)}:U.global?function(me){var Be="on"+me.toLowerCase(),se=U.global[Be];return!!se&&(se.apply(U.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function we(me,Be){return{promise:Be}}var Ce={promiseCreated:we,promiseFulfilled:we,promiseRejected:we,promiseResolved:we,promiseCancelled:we,promiseChained:function(me,Be,se){return{promise:Be,child:se}},warning:function(me,Be){return{warning:Be}},unhandledRejection:function(me,Be,se){return{reason:Be,promise:se}},rejectionHandled:we},ye=function(me){var Be=!1;try{Be=ze.apply(null,arguments)}catch(De){J.throwLater(De),Be=!0}var se=!1;try{se=je(me,Ce[me].apply(null,arguments))}catch(De){J.throwLater(De),se=!0}return se||Be};function $e(){return!1}function qe(me,Be,se){var De=this;try{me(Be,se,function(We){if("function"!=typeof We)throw new TypeError("onCancel must be a function, got: "+U.toString(We));De._attachCancellationCallback(We)})}catch(We){return We}}function ue(me){if(!this._isCancellable())return this;var Be=this._onCancel();void 0!==Be?U.isArray(Be)?Be.push(me):this._setOnCancel([Be,me]):this._setOnCancel(me)}function de(){return this._onCancelField}function pe(me){this._onCancelField=me}function xe(){this._cancellationParent=void 0,this._onCancelField=void 0}function Xe(me,Be){if(0!=(1&Be)){this._cancellationParent=me;var se=me._branchesRemainingToCancel;void 0===se&&(se=0),me._branchesRemainingToCancel=se+1}0!=(2&Be)&&me._isBound()&&this._setBoundTo(me._boundTo)}O.config=function(me){if("longStackTraces"in(me=Object(me))&&(me.longStackTraces?O.longStackTraces():!me.longStackTraces&&O.hasLongStackTraces()&&fe()),"warnings"in me){var Be=me.warnings;Ie.warnings=!!Be,ae=Ie.warnings,U.isObject(Be)&&"wForgottenReturn"in Be&&(ae=!!Be.wForgottenReturn)}if("cancellation"in me&&me.cancellation&&!Ie.cancellation){if(J.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");O.prototype._clearCancellationData=xe,O.prototype._propagateFrom=Xe,O.prototype._onCancel=de,O.prototype._setOnCancel=pe,O.prototype._attachCancellationCallback=ue,O.prototype._execute=qe,rt=Xe,Ie.cancellation=!0}if("monitoring"in me&&(me.monitoring&&!Ie.monitoring?(Ie.monitoring=!0,O.prototype._fireEvent=ye):!me.monitoring&&Ie.monitoring&&(Ie.monitoring=!1,O.prototype._fireEvent=$e)),"asyncHooks"in me&&U.nodeSupportsAsyncResource){var De=!!me.asyncHooks;Ie.asyncHooks!==De&&(Ie.asyncHooks=De,De?ee():G())}return O},O.prototype._fireEvent=$e,O.prototype._execute=function(me,Be,se){try{me(Be,se)}catch(De){return De}},O.prototype._onCancel=function(){},O.prototype._setOnCancel=function(me){},O.prototype._attachCancellationCallback=function(me){},O.prototype._captureStackTrace=function(){},O.prototype._attachExtraTrace=function(){},O.prototype._dereferenceTrace=function(){},O.prototype._clearCancellationData=function(){},O.prototype._propagateFrom=function(me,Be){};var rt=function(me,Be){0!=(2&Be)&&me._isBound()&&this._setBoundTo(me._boundTo)};function tt(){var me=this._boundTo;return void 0!==me&&me instanceof O?me.isFulfilled()?me.value():void 0:me}function Re(){this._trace=new Ct(this._peekContext())}function ot(me,Be){if(F(me)){var se=this._trace;if(void 0!==se&&Be&&(se=se._parent),void 0!==se)se.attachExtraTrace(me);else if(!me.__stackCleaned__){var De=Ze(me);U.notEnumerableProp(me,"stack",De.message+"\n"+De.stack.join("\n")),U.notEnumerableProp(me,"__stackCleaned__",!0)}}}function pt(){this._trace=void 0}function ct(me,Be,se){if(Ie.warnings){var De,We=new Q(me);if(Be)se._attachExtraTrace(We);else if(Ie.longStackTraces&&(De=O._peekContext()))De.attachExtraTrace(We);else{var ke=Ze(We);We.stack=ke.message+"\n"+ke.stack.join("\n")}ye("warning",We)||it(We,"",!0)}}function st(me){for(var Be=[],se=0;se<me.length;++se){var De=me[se],We="    (No stack trace)"===De||ne.test(De),ke=We&&Ye(De);We&&!ke&&(ge&&" "!==De.charAt(0)&&(De="    "+De),Be.push(De))}return Be}function Ze(me){var Be=me.stack,se=me.toString();return Be="string"==typeof Be&&Be.length>0?function(De){for(var We=De.stack.replace(/\s+$/g,"").split("\n"),ke=0;ke<We.length;++ke){var Pe=We[ke];if("    (No stack trace)"===Pe||ne.test(Pe))break}return ke>0&&"SyntaxError"!=De.name&&(We=We.slice(ke)),We}(me):["    (No stack trace)"],{message:se,stack:"SyntaxError"==me.name?Be:st(Be)}}function it(me,Be,se){var De;typeof console<"u"&&(De=U.isObject(me)?Be+le(me.stack,me):Be+String(me),"function"==typeof H?H(De,se):"function"!=typeof console.log&&"object"!==x(console.log)||console.log(De))}function vt(me,Be,se,De){var We=!1;try{"function"==typeof Be&&(We=!0,"rejectionHandled"===me?Be(De):Be(se,De))}catch(ke){J.throwLater(ke)}"unhandledRejection"===me?ye(me,se,De)||We||it(se,"Unhandled rejection "):ye(me,De)}function nt(me){var Be,se;if("function"==typeof me)Be="[function "+(me.name||"anonymous")+"]";else{if(Be=me&&"function"==typeof me.toString?me.toString():U.toString(me),/\[object [a-zA-Z0-9$_]+\]/.test(Be))try{Be=JSON.stringify(me)}catch{}0===Be.length&&(Be="(empty array)")}return"(<"+((se=Be).length<41?se:se.substr(0,38)+"...")+">, no stack trace)"}function gt(){return"function"==typeof Nt}var Ye=function(){return!1},et=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Et(me){var Be=me.match(et);if(Be)return{fileName:Be[1],line:parseInt(Be[2],10)}}function Ct(me){this._parent=me,this._promisesCreated=0;var Be=this._length=1+(void 0===me?0:me._length);Nt(this,Ct),Be>32&&this.uncycle()}U.inherits(Ct,Error),q.CapturedTrace=Ct,Ct.prototype.uncycle=function(){var me=this._length;if(!(me<2)){for(var Be=[],se={},De=0,We=this;void 0!==We;++De)Be.push(We),We=We._parent;for(De=(me=this._length=De)-1;De>=0;--De){var ke=Be[De].stack;void 0===se[ke]&&(se[ke]=De)}for(De=0;De<me;++De){var Pe=se[Be[De].stack];if(void 0!==Pe&&Pe!==De){Pe>0&&(Be[Pe-1]._parent=void 0,Be[Pe-1]._length=1),Be[De]._parent=void 0,Be[De]._length=1;var ce=De>0?Be[De-1]:this;Pe<me-1?(ce._parent=Be[Pe+1],ce._parent.uncycle(),ce._length=ce._parent._length+1):(ce._parent=void 0,ce._length=1);for(var Ge=ce._length+1,dt=De-2;dt>=0;--dt)Be[dt]._length=Ge,Ge++;return}}}},Ct.prototype.attachExtraTrace=function(me){if(!me.__stackCleaned__){this.uncycle();for(var Be=Ze(me),se=Be.message,De=[Be.stack],We=this;void 0!==We;)De.push(st(We.stack.split("\n"))),We=We._parent;(function(ke){for(var Pe=ke[0],ce=1;ce<ke.length;++ce){for(var Ge=ke[ce],dt=Pe.length-1,te=Pe[dt],Ue=-1,Ke=Ge.length-1;Ke>=0;--Ke)if(Ge[Ke]===te){Ue=Ke;break}for(Ke=Ue;Ke>=0&&Pe[dt]===Ge[Ke];--Ke)Pe.pop(),dt--;Pe=Ge}})(De),function(ke){for(var Pe=0;Pe<ke.length;++Pe)(0===ke[Pe].length||Pe+1<ke.length&&ke[Pe][0]===ke[Pe+1][0])&&(ke.splice(Pe,1),Pe--)}(De),U.notEnumerableProp(me,"stack",function(ke,Pe){for(var ce=0;ce<Pe.length-1;++ce)Pe[ce].push("From previous event:"),Pe[ce]=Pe[ce].join("\n");return ce<Pe.length&&(Pe[ce]=Pe[ce].join("\n")),ke+"\n"+Pe.join("\n")}(se,De)),U.notEnumerableProp(me,"__stackCleaned__",!0)}};var Nt=function(){var me=/^\s*at\s*/,Be=function(ke,Pe){return"string"==typeof ke?ke:void 0!==Pe.name&&void 0!==Pe.message?Pe.toString():nt(Pe)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,ne=me,le=Be;var se=Error.captureStackTrace;return Ye=function(ke){return L.test(ke)},function(ke,Pe){Error.stackTraceLimit+=6,se(ke,Pe),Error.stackTraceLimit-=6}}var De,We=new Error;if("string"==typeof We.stack&&We.stack.split("\n")[0].indexOf("stackDetection@")>=0)return ne=/@/,le=Be,ge=!0,function(ke){ke.stack=(new Error).stack};try{throw new Error}catch(ke){De="stack"in ke}return"stack"in We||!De||"number"!=typeof Error.stackTraceLimit?(le=function(ke,Pe){return"string"==typeof ke?ke:"object"!==x(Pe)&&"function"!=typeof Pe||void 0===Pe.name||void 0===Pe.message?nt(Pe):Pe.toString()},null):(ne=me,le=Be,function(ke){Error.stackTraceLimit+=6;try{throw new Error}catch(Pe){ke.stack=Pe.stack}Error.stackTraceLimit-=6})}();typeof console<"u"&&void 0!==console.warn&&(H=function(me){console.warn(me)},U.isNode&&y.stderr.isTTY?H=function(me,Be){console.warn((Be?"\x1b[33m":"\x1b[31m")+me+"\x1b[0m\n")}:U.isNode||"string"!=typeof(new Error).stack||(H=function(me,Be){console.warn("%c"+me,Be?"color: darkorange":"color: red")}));var Ie={warnings:Le,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return Qe&&O.longStackTraces(),{asyncHooks:function(){return Ie.asyncHooks},longStackTraces:function(){return Ie.longStackTraces},warnings:function(){return Ie.warnings},cancellation:function(){return Ie.cancellation},monitoring:function(){return Ie.monitoring},propagateFromFunction:function(){return rt},boundValueFunction:function(){return tt},checkForgottenReturns:function(me,Be,se,De,We){if(void 0===me&&null!==Be&&ae){if(void 0!==We&&We._returnedNonUndefined()||0==(65535&De._bitField))return;se&&(se+=" ");var ke="",Pe="";if(Be._trace){for(var ce=Be._trace.stack.split("\n"),Ge=st(ce),dt=Ge.length-1;dt>=0;--dt){var te=Ge[dt];if(!ie.test(te)){var Ue=te.match(Y);Ue&&(ke="at "+Ue[1]+":"+Ue[2]+":"+Ue[3]+" ");break}}if(Ge.length>0){var Ke=Ge[0];for(dt=0;dt<ce.length;++dt)if(ce[dt]===Ke){dt>0&&(Pe="\n"+ce[dt-1]);break}}}De._warn("a promise was created in a "+se+"handler "+ke+"but was not returned from it, see http://goo.gl/rRqMUw"+Pe,!0,Be)}},setBounds:function(me,Be){if(gt()){for(var se,De,We=(me.stack||"").split("\n"),ke=(Be.stack||"").split("\n"),Pe=-1,ce=-1,Ge=0;Ge<We.length;++Ge)if(dt=Et(We[Ge])){se=dt.fileName,Pe=dt.line;break}for(Ge=0;Ge<ke.length;++Ge){var dt;if(dt=Et(ke[Ge])){De=dt.fileName,ce=dt.line;break}}Pe<0||ce<0||!se||!De||se!==De||Pe>=ce||(Ye=function(te){if(L.test(te))return!0;var Ue=Et(te);return!!(Ue&&Ue.fileName===se&&Pe<=Ue.line&&Ue.line<=ce)})}},warn:ct,deprecated:function(me,Be){var se=me+" is deprecated and will be removed in a future version.";return Be&&(se+=" Use "+Be+" instead."),ct(se)},CapturedTrace:Ct,fireDomEvent:je,fireGlobalEvent:ze}}},{"./errors":9,"./es5":10,"./util":21}],8:[function(m,l,M){"use strict";l.exports=function(O){function q(){return this.value}function ee(){throw this.reason}O.prototype.return=O.prototype.thenReturn=function(G){return G instanceof O&&G.suppressUnhandledRejections(),this._then(q,void 0,void 0,{value:G},void 0)},O.prototype.throw=O.prototype.thenThrow=function(G){return this._then(ee,void 0,void 0,{reason:G},void 0)},O.prototype.catchThrow=function(G){if(arguments.length<=1)return this._then(void 0,ee,void 0,{reason:G},void 0);var B=arguments[1];return this.caught(G,function(){throw B})},O.prototype.catchReturn=function(G){if(arguments.length<=1)return G instanceof O&&G.suppressUnhandledRejections(),this._then(void 0,q,void 0,{value:G},void 0);var B=arguments[1];return B instanceof O&&B.suppressUnhandledRejections(),this.caught(G,function(){return B})}}},{}],9:[function(m,l,M){"use strict";var O,q,ee=m("./es5"),G=ee.freeze,B=m("./util"),A=B.inherits,H=B.notEnumerableProp;function $(le,ge){function Ee(Le){if(!(this instanceof Ee))return new Ee(Le);H(this,"message","string"==typeof Le?Le:ge),H(this,"name",le),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return A(Ee,Error),Ee}var J=$("Warning","warning"),Q=$("CancellationError","cancellation error"),U=$("TimeoutError","timeout error"),K=$("AggregateError","aggregate error");try{O=TypeError,q=RangeError}catch{O=$("TypeError","type error"),q=$("RangeError","range error")}for(var F="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),L=0;L<F.length;++L)"function"==typeof Array.prototype[F[L]]&&(K.prototype[F[L]]=Array.prototype[F[L]]);ee.defineProperty(K.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),K.prototype.isOperational=!0;var ie=0;function Y(le){if(!(this instanceof Y))return new Y(le);H(this,"name","OperationalError"),H(this,"message",le),this.cause=le,this.isOperational=!0,le instanceof Error?(H(this,"message",le.message),H(this,"stack",le.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}K.prototype.toString=function(){var le=Array(4*ie+1).join(" "),ge="\n"+le+"AggregateError of:\n";ie++,le=Array(4*ie+1).join(" ");for(var Ee=0;Ee<this.length;++Ee){for(var Le=this[Ee]===this?"[Circular AggregateError]":this[Ee]+"",Qe=Le.split("\n"),ae=0;ae<Qe.length;++ae)Qe[ae]=le+Qe[ae];ge+=(Le=Qe.join("\n"))+"\n"}return ie--,ge},A(Y,Error);var ne=Error.__BluebirdErrorTypes__;ne||(ne=G({CancellationError:Q,TimeoutError:U,OperationalError:Y,RejectionError:Y,AggregateError:K}),ee.defineProperty(Error,"__BluebirdErrorTypes__",{value:ne,writable:!1,enumerable:!1,configurable:!1})),l.exports={Error,TypeError:O,RangeError:q,CancellationError:ne.CancellationError,OperationalError:ne.OperationalError,TimeoutError:ne.TimeoutError,AggregateError:ne.AggregateError,Warning:J}},{"./es5":10,"./util":21}],10:[function(m,l,M){var O=function(){"use strict";return void 0===this}();if(O)l.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:O,propertyIsWritable:function(A,H){var $=Object.getOwnPropertyDescriptor(A,H);return!($&&!$.writable&&!$.set)}};else{var q={}.hasOwnProperty,ee={}.toString,G={}.constructor.prototype,B=function(A){var H=[];for(var $ in A)q.call(A,$)&&H.push($);return H};l.exports={isArray:function(A){try{return"[object Array]"===ee.call(A)}catch{return!1}},keys:B,names:B,defineProperty:function(A,H,$){return A[H]=$.value,A},getDescriptor:function(A,H){return{value:A[H]}},freeze:function(A){return A},getPrototypeOf:function(A){try{return Object(A).constructor.prototype}catch{return G}},isES5:O,propertyIsWritable:function(){return!0}}}},{}],11:[function(m,l,M){"use strict";l.exports=function(O,q,ee){var G=m("./util"),B=O.CancellationError,A=G.errorObj,H=m("./catch_filter")(ee);function $(L,ie,Y){this.promise=L,this.type=ie,this.handler=Y,this.called=!1,this.cancelPromise=null}function J(L){this.finallyHandler=L}function Q(L,ie){return null!=L.cancelPromise&&(arguments.length>1?L.cancelPromise._reject(ie):L.cancelPromise._cancel(),L.cancelPromise=null,!0)}function U(){return F.call(this,this.promise._target()._settledValue())}function K(L){if(!Q(this,L))return A.e=L,A}function F(L){var ie=this.promise,Y=this.handler;if(!this.called){this.called=!0;var ne=this.isFinallyHandler()?Y.call(ie._boundValue()):Y.call(ie._boundValue(),L);if(ne===ee)return ne;if(void 0!==ne){ie._setReturnedNonUndefined();var le=q(ne,ie);if(le instanceof O){if(null!=this.cancelPromise){if(le._isCancelled()){var ge=new B("late cancellation observer");return ie._attachExtraTrace(ge),A.e=ge,A}le.isPending()&&le._attachCancellationCallback(new J(this))}return le._then(U,K,void 0,this,void 0)}}}return ie.isRejected()?(Q(this),A.e=L,A):(Q(this),L)}return $.prototype.isFinallyHandler=function(){return 0===this.type},J.prototype._resultCancelled=function(){Q(this.finallyHandler)},O.prototype._passThrough=function(L,ie,Y,ne){return"function"!=typeof L?this.then():this._then(Y,ne,void 0,new $(this,ie,L),void 0)},O.prototype.lastly=O.prototype.finally=function(L){return this._passThrough(L,0,F,F)},O.prototype.tap=function(L){return this._passThrough(L,1,F)},O.prototype.tapCatch=function(L){var ie=arguments.length;if(1===ie)return this._passThrough(L,1,void 0,F);var Y,ne=new Array(ie-1),le=0;for(Y=0;Y<ie-1;++Y){var ge=arguments[Y];if(!G.isObject(ge))return O.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+G.classString(ge)));ne[le++]=ge}ne.length=le;var Ee=arguments[Y];return this._passThrough(H(ne,Ee,this),1,void 0,F)},$}},{"./catch_filter":5,"./util":21}],12:[function(m,l,M){"use strict";l.exports=function(O,q,ee,G,B){m("./util"),O.join=function(){var H,$=arguments.length-1;$>0&&"function"==typeof arguments[$]&&(H=arguments[$]);var J=[].slice.call(arguments);H&&J.pop();var Q=new q(J).promise();return void 0!==H?Q.spread(H):Q}}},{"./util":21}],13:[function(m,l,M){"use strict";l.exports=function(O,q,ee,G,B){var A=m("./util"),H=A.tryCatch;O.method=function($){if("function"!=typeof $)throw new O.TypeError("expecting a function but got "+A.classString($));return function(){var J=new O(q);J._captureStackTrace(),J._pushContext();var Q=H($).apply(this,arguments),U=J._popContext();return B.checkForgottenReturns(Q,U,"Promise.method",J),J._resolveFromSyncValue(Q),J}},O.attempt=O.try=function($){if("function"!=typeof $)return G("expecting a function but got "+A.classString($));var J,Q=new O(q);if(Q._captureStackTrace(),Q._pushContext(),arguments.length>1){B.deprecated("calling Promise.try with more than 1 argument");var U=arguments[1],K=arguments[2];J=A.isArray(U)?H($).apply(K,U):H($).call(K,U)}else J=H($)();var F=Q._popContext();return B.checkForgottenReturns(J,F,"Promise.try",Q),Q._resolveFromSyncValue(J),Q},O.prototype._resolveFromSyncValue=function($){$===A.errorObj?this._rejectCallback($.e,!1):this._resolveCallback($,!0)}}},{"./util":21}],14:[function(m,l,M){"use strict";var O=m("./util"),q=O.maybeWrapAsError,ee=m("./errors").OperationalError,G=m("./es5"),B=/^(?:name|message|stack|cause)$/;function A(H){var $,K;if((K=H)instanceof Error&&G.getPrototypeOf(K)===Error.prototype){($=new ee(H)).name=H.name,$.message=H.message,$.stack=H.stack;for(var J=G.keys(H),Q=0;Q<J.length;++Q){var U=J[Q];B.test(U)||($[U]=H[U])}return $}return O.markAsOriginatingFromRejection(H),H}l.exports=function(H,$){return function(J,Q){if(null!==H){if(J){var U=A(q(J));H._attachExtraTrace(U),H._reject(U)}else if($){var K=[].slice.call(arguments,1);H._fulfill(K)}else H._fulfill(Q);H=null}}}},{"./errors":9,"./es5":10,"./util":21}],15:[function(m,l,M){"use strict";l.exports=function(){var O=function(){return new Y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},q=function(){return new ye.PromiseInspection(this._target())},ee=function(de){return ye.reject(new Y(de))};function G(){}var B={},A=m("./util");A.setReflectHandler(q);var H=function(){var de=y.domain;return void 0===de?null:de},$=function(){return{domain:H(),async:null}},J=A.isNode&&A.nodeSupportsAsyncResource?m("async_hooks").AsyncResource:null,Q=function(){return{domain:H(),async:new J("Bluebird::Promise")}},U=A.isNode?$:function(){return null};A.notEnumerableProp(ye,"_getContext",U);var K=m("./es5"),F=m("./async"),L=new F;K.defineProperty(ye,"_async",{value:L});var ie=m("./errors"),Y=ye.TypeError=ie.TypeError;ye.RangeError=ie.RangeError;var ne=ye.CancellationError=ie.CancellationError;ye.TimeoutError=ie.TimeoutError,ye.OperationalError=ie.OperationalError,ye.RejectionError=ie.OperationalError,ye.AggregateError=ie.AggregateError;var le=function(){},ge={},Ee={},Le=m("./thenables")(ye,le),Qe=m("./promise_array")(ye,le,Le,ee,G),ae=m("./context")(ye),fe=m("./debuggability")(ye,ae,function(){U=Q,A.notEnumerableProp(ye,"_getContext",Q)},function(){U=$,A.notEnumerableProp(ye,"_getContext",$)}),Me=m("./finally")(ye,Le,Ee),je=m("./catch_filter")(Ee),ze=m("./nodeback"),we=A.errorObj,Ce=A.tryCatch;function ye(de){de!==le&&function(pe,xe){if(null==pe||pe.constructor!==ye)throw new Y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof xe)throw new Y("expecting a function but got "+A.classString(xe))}(this,de),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(de),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function $e(de){this.promise._resolveCallback(de)}function qe(de){this.promise._rejectCallback(de,!1)}function ue(de){var pe=new ye(le);pe._fulfillmentHandler0=de,pe._rejectionHandler0=de,pe._promise0=de,pe._receiver0=de}return ye.prototype.toString=function(){return"[object Promise]"},ye.prototype.caught=ye.prototype.catch=function(de){var pe=arguments.length;if(pe>1){var xe,Xe=new Array(pe-1),rt=0;for(xe=0;xe<pe-1;++xe){var tt=arguments[xe];if(!A.isObject(tt))return ee("Catch statement predicate: expecting an object but got "+A.classString(tt));Xe[rt++]=tt}if(Xe.length=rt,"function"!=typeof(de=arguments[xe]))throw new Y("The last argument to .catch() must be a function, got "+A.toString(de));return this.then(void 0,je(Xe,de,this))}return this.then(void 0,de)},ye.prototype.reflect=function(){return this._then(q,q,void 0,this,void 0)},ye.prototype.then=function(de,pe){if(fe.warnings()&&arguments.length>0&&"function"!=typeof de&&"function"!=typeof pe){var xe=".then() only accepts functions but was passed: "+A.classString(de);arguments.length>1&&(xe+=", "+A.classString(pe)),this._warn(xe)}return this._then(de,pe,void 0,void 0,void 0)},ye.prototype.done=function(de,pe){this._then(de,pe,void 0,void 0,void 0)._setIsFinal()},ye.prototype.spread=function(de){return"function"!=typeof de?ee("expecting a function but got "+A.classString(de)):this.all()._then(de,void 0,void 0,ge,void 0)},ye.prototype.toJSON=function(){var de={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(de.fulfillmentValue=this.value(),de.isFulfilled=!0):this.isRejected()&&(de.rejectionReason=this.reason(),de.isRejected=!0),de},ye.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new Qe(this).promise()},ye.prototype.error=function(de){return this.caught(A.originatesFromRejection,de)},ye.getNewLibraryCopy=l.exports,ye.is=function(de){return de instanceof ye},ye.fromNode=ye.fromCallback=function(de){var pe=new ye(le);pe._captureStackTrace();var xe=arguments.length>1&&!!Object(arguments[1]).multiArgs,Xe=Ce(de)(ze(pe,xe));return Xe===we&&pe._rejectCallback(Xe.e,!0),pe._isFateSealed()||pe._setAsyncGuaranteed(),pe},ye.all=function(de){return new Qe(de).promise()},ye.cast=function(de){var pe=Le(de);return pe instanceof ye||((pe=new ye(le))._captureStackTrace(),pe._setFulfilled(),pe._rejectionHandler0=de),pe},ye.resolve=ye.fulfilled=ye.cast,ye.reject=ye.rejected=function(de){var pe=new ye(le);return pe._captureStackTrace(),pe._rejectCallback(de,!0),pe},ye.setScheduler=function(de){if("function"!=typeof de)throw new Y("expecting a function but got "+A.classString(de));return L.setScheduler(de)},ye.prototype._then=function(de,pe,xe,Xe,rt){var tt=void 0!==rt,Re=tt?rt:new ye(le),ot=this._target(),pt=ot._bitField;tt||(Re._propagateFrom(this,3),Re._captureStackTrace(),void 0===Xe&&0!=(2097152&this._bitField)&&(Xe=0!=(50397184&pt)?this._boundValue():ot===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,Re));var ct=U();if(0!=(50397184&pt)){var st,Ze,it=ot._settlePromiseCtx;0!=(33554432&pt)?(Ze=ot._rejectionHandler0,st=de):0!=(16777216&pt)?(Ze=ot._fulfillmentHandler0,st=pe,ot._unsetRejectionIsUnhandled()):(it=ot._settlePromiseLateCancellationObserver,Ze=new ne("late cancellation observer"),ot._attachExtraTrace(Ze),st=pe),L.invoke(it,ot,{handler:A.contextBind(ct,st),promise:Re,receiver:Xe,value:Ze})}else ot._addCallbacks(de,pe,Re,Xe,ct);return Re},ye.prototype._length=function(){return 65535&this._bitField},ye.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},ye.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},ye.prototype._setLength=function(de){this._bitField=-65536&this._bitField|65535&de},ye.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},ye.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},ye.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},ye.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},ye.prototype._isFinal=function(){return(4194304&this._bitField)>0},ye.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},ye.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},ye.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},ye.prototype._setAsyncGuaranteed=function(){if(!L.hasCustomScheduler()){var de=this._bitField;this._bitField=de|(536870912&de)>>2^134217728}},ye.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},ye.prototype._receiverAt=function(de){var pe=0===de?this._receiver0:this[4*de-4+3];if(pe!==B)return void 0===pe&&this._isBound()?this._boundValue():pe},ye.prototype._promiseAt=function(de){return this[4*de-4+2]},ye.prototype._fulfillmentHandlerAt=function(de){return this[4*de-4+0]},ye.prototype._rejectionHandlerAt=function(de){return this[4*de-4+1]},ye.prototype._boundValue=function(){},ye.prototype._migrateCallback0=function(de){var pe=de._fulfillmentHandler0,xe=de._rejectionHandler0,Xe=de._promise0,rt=de._receiverAt(0);void 0===rt&&(rt=B),this._addCallbacks(pe,xe,Xe,rt,null)},ye.prototype._migrateCallbackAt=function(de,pe){var xe=de._fulfillmentHandlerAt(pe),Xe=de._rejectionHandlerAt(pe),rt=de._promiseAt(pe),tt=de._receiverAt(pe);void 0===tt&&(tt=B),this._addCallbacks(xe,Xe,rt,tt,null)},ye.prototype._addCallbacks=function(de,pe,xe,Xe,rt){var tt=this._length();if(tt>=65531&&(tt=0,this._setLength(0)),0===tt)this._promise0=xe,this._receiver0=Xe,"function"==typeof de&&(this._fulfillmentHandler0=A.contextBind(rt,de)),"function"==typeof pe&&(this._rejectionHandler0=A.contextBind(rt,pe));else{var Re=4*tt-4;this[Re+2]=xe,this[Re+3]=Xe,"function"==typeof de&&(this[Re+0]=A.contextBind(rt,de)),"function"==typeof pe&&(this[Re+1]=A.contextBind(rt,pe))}return this._setLength(tt+1),tt},ye.prototype._proxy=function(de,pe){this._addCallbacks(void 0,void 0,pe,de,null)},ye.prototype._resolveCallback=function(de,pe){if(0==(117506048&this._bitField)){if(de===this)return this._rejectCallback(O(),!1);var xe=Le(de,this);if(!(xe instanceof ye))return this._fulfill(de);pe&&this._propagateFrom(xe,2);var Xe=xe._target();if(Xe!==this){var rt=Xe._bitField;if(0==(50397184&rt)){var tt=this._length();tt>0&&Xe._migrateCallback0(this);for(var Re=1;Re<tt;++Re)Xe._migrateCallbackAt(this,Re);this._setFollowing(),this._setLength(0),this._setFollowee(xe)}else if(0!=(33554432&rt))this._fulfill(Xe._value());else if(0!=(16777216&rt))this._reject(Xe._reason());else{var ot=new ne("late cancellation observer");Xe._attachExtraTrace(ot),this._reject(ot)}}else this._reject(O())}},ye.prototype._rejectCallback=function(de,pe,xe){var Xe=A.ensureErrorObject(de),rt=Xe===de;if(!rt&&!xe&&fe.warnings()){var tt="a promise was rejected with a non-error: "+A.classString(de);this._warn(tt,!0)}this._attachExtraTrace(Xe,!!pe&&rt),this._reject(de)},ye.prototype._resolveFromExecutor=function(de){if(de!==le){var pe=this;this._captureStackTrace(),this._pushContext();var xe=!0,Xe=this._execute(de,function(rt){pe._resolveCallback(rt)},function(rt){pe._rejectCallback(rt,xe)});xe=!1,this._popContext(),void 0!==Xe&&pe._rejectCallback(Xe,!0)}},ye.prototype._settlePromiseFromHandler=function(de,pe,xe,Xe){var rt=Xe._bitField;if(0==(65536&rt)){var tt;Xe._pushContext(),pe===ge?xe&&"number"==typeof xe.length?tt=Ce(de).apply(this._boundValue(),xe):(tt=we).e=new Y("cannot .spread() a non-array: "+A.classString(xe)):tt=Ce(de).call(pe,xe);var Re=Xe._popContext();0==(65536&(rt=Xe._bitField))&&(tt===Ee?Xe._reject(xe):tt===we?Xe._rejectCallback(tt.e,!1):(fe.checkForgottenReturns(tt,Re,"",Xe,this),Xe._resolveCallback(tt)))}},ye.prototype._target=function(){for(var de=this;de._isFollowing();)de=de._followee();return de},ye.prototype._followee=function(){return this._rejectionHandler0},ye.prototype._setFollowee=function(de){this._rejectionHandler0=de},ye.prototype._settlePromise=function(de,pe,xe,Xe){var rt=de instanceof ye,tt=this._bitField,Re=0!=(134217728&tt);0!=(65536&tt)?(rt&&de._invokeInternalOnCancel(),xe instanceof Me&&xe.isFinallyHandler()?(xe.cancelPromise=de,Ce(pe).call(xe,Xe)===we&&de._reject(we.e)):pe===q?de._fulfill(q.call(xe)):xe instanceof G?xe._promiseCancelled(de):rt||de instanceof Qe?de._cancel():xe.cancel()):"function"==typeof pe?rt?(Re&&de._setAsyncGuaranteed(),this._settlePromiseFromHandler(pe,xe,Xe,de)):pe.call(xe,Xe,de):xe instanceof G?xe._isResolved()||(0!=(33554432&tt)?xe._promiseFulfilled(Xe,de):xe._promiseRejected(Xe,de)):rt&&(Re&&de._setAsyncGuaranteed(),0!=(33554432&tt)?de._fulfill(Xe):de._reject(Xe))},ye.prototype._settlePromiseLateCancellationObserver=function(de){var pe=de.handler,xe=de.promise,Xe=de.receiver,rt=de.value;"function"==typeof pe?xe instanceof ye?this._settlePromiseFromHandler(pe,Xe,rt,xe):pe.call(Xe,rt,xe):xe instanceof ye&&xe._reject(rt)},ye.prototype._settlePromiseCtx=function(de){this._settlePromise(de.promise,de.handler,de.receiver,de.value)},ye.prototype._settlePromise0=function(de,pe,xe){var Xe=this._promise0,rt=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(Xe,de,rt,pe)},ye.prototype._clearCallbackDataAtIndex=function(de){var pe=4*de-4;this[pe+2]=this[pe+3]=this[pe+0]=this[pe+1]=void 0},ye.prototype._fulfill=function(de){var pe=this._bitField;if(!((117506048&pe)>>>16)){if(de===this){var xe=O();return this._attachExtraTrace(xe),this._reject(xe)}this._setFulfilled(),this._rejectionHandler0=de,(65535&pe)>0&&(0!=(134217728&pe)?this._settlePromises():L.settlePromises(this),this._dereferenceTrace())}},ye.prototype._reject=function(de){var pe=this._bitField;if(!((117506048&pe)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=de,this._isFinal())return L.fatalError(de,A.isNode);(65535&pe)>0?L.settlePromises(this):this._ensurePossibleRejectionHandled()}},ye.prototype._fulfillPromises=function(de,pe){for(var xe=1;xe<de;xe++){var Xe=this._fulfillmentHandlerAt(xe),rt=this._promiseAt(xe),tt=this._receiverAt(xe);this._clearCallbackDataAtIndex(xe),this._settlePromise(rt,Xe,tt,pe)}},ye.prototype._rejectPromises=function(de,pe){for(var xe=1;xe<de;xe++){var Xe=this._rejectionHandlerAt(xe),rt=this._promiseAt(xe),tt=this._receiverAt(xe);this._clearCallbackDataAtIndex(xe),this._settlePromise(rt,Xe,tt,pe)}},ye.prototype._settlePromises=function(){var de=this._bitField,pe=65535&de;if(pe>0){if(0!=(16842752&de)){var xe=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,xe,de),this._rejectPromises(pe,xe)}else{var Xe=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,Xe,de),this._fulfillPromises(pe,Xe)}this._setLength(0)}this._clearCancellationData()},ye.prototype._settledValue=function(){var de=this._bitField;return 0!=(33554432&de)?this._rejectionHandler0:0!=(16777216&de)?this._fulfillmentHandler0:void 0},typeof Symbol<"u"&&Symbol.toStringTag&&K.defineProperty(ye.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),ye.defer=ye.pending=function(){return fe.deprecated("Promise.defer","new Promise"),{promise:new ye(le),resolve:$e,reject:qe}},A.notEnumerableProp(ye,"_makeSelfResolutionError",O),m("./method")(ye,le,Le,ee,fe),m("./bind")(ye,le,Le,fe),m("./cancel")(ye,Qe,ee,fe),m("./direct_resolve")(ye),m("./synchronous_inspection")(ye),m("./join")(ye,Qe,Le,le,L),ye.Promise=ye,ye.version="3.7.2",A.toFastProperties(ye),A.toFastProperties(ye.prototype),ue({a:1}),ue({b:2}),ue({c:3}),ue(1),ue(function(){}),ue(void 0),ue(!1),ue(new ye(le)),fe.setBounds(F.firstLineError,A.lastLineError),ye}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21,async_hooks:void 0}],16:[function(m,l,M){"use strict";l.exports=function(O,q,ee,G,B){var A=m("./util");function H($){var J=this._promise=new O(q);$ instanceof O&&(J._propagateFrom($,3),$.suppressUnhandledRejections()),J._setOnCancel(this),this._values=$,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return A.inherits(H,B),H.prototype.length=function(){return this._length},H.prototype.promise=function(){return this._promise},H.prototype._init=function $(J,Q){var U=ee(this._values,this._promise);if(U instanceof O){var K=(U=U._target())._bitField;if(this._values=U,0==(50397184&K))return this._promise._setAsyncGuaranteed(),U._then($,this._reject,void 0,this,Q);if(0==(33554432&K))return 0!=(16777216&K)?this._reject(U._reason()):this._cancel();U=U._value()}if(null!==(U=A.asArray(U)))0!==U.length?this._iterate(U):-5===Q?this._resolveEmptyArray():this._resolve(function(L){switch(L){case-2:return[];case-3:return{};case-6:return new Map}}(Q));else{var F=G("expecting an array or an iterable object but got "+A.classString(U)).reason();this._promise._rejectCallback(F,!1)}},H.prototype._iterate=function($){var J=this.getActualLength($.length);this._length=J,this._values=this.shouldCopyValues()?new Array(J):this._values;for(var Q=this._promise,U=!1,K=null,F=0;F<J;++F){var L=ee($[F],Q);K=L instanceof O?(L=L._target())._bitField:null,U?null!==K&&L.suppressUnhandledRejections():null!==K?0==(50397184&K)?(L._proxy(this,F),this._values[F]=L):U=0!=(33554432&K)?this._promiseFulfilled(L._value(),F):0!=(16777216&K)?this._promiseRejected(L._reason(),F):this._promiseCancelled(F):U=this._promiseFulfilled(L,F)}U||Q._setAsyncGuaranteed()},H.prototype._isResolved=function(){return null===this._values},H.prototype._resolve=function($){this._values=null,this._promise._fulfill($)},H.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},H.prototype._reject=function($){this._values=null,this._promise._rejectCallback($,!1)},H.prototype._promiseFulfilled=function($,J){return this._values[J]=$,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},H.prototype._promiseCancelled=function(){return this._cancel(),!0},H.prototype._promiseRejected=function($){return this._totalResolved++,this._reject($),!0},H.prototype._resultCancelled=function(){if(!this._isResolved()){var $=this._values;if(this._cancel(),$ instanceof O)$.cancel();else for(var J=0;J<$.length;++J)$[J]instanceof O&&$[J].cancel()}},H.prototype.shouldCopyValues=function(){return!0},H.prototype.getActualLength=function($){return $},H}},{"./util":21}],17:[function(m,l,M){"use strict";function O(q){this._capacity=q,this._length=0,this._front=0}O.prototype._willBeOverCapacity=function(q){return this._capacity<q},O.prototype._pushOne=function(q){var ee=this.length();this._checkCapacity(ee+1),this[this._front+ee&this._capacity-1]=q,this._length=ee+1},O.prototype.push=function(q,ee,G){var B=this.length()+3;if(this._willBeOverCapacity(B))return this._pushOne(q),this._pushOne(ee),void this._pushOne(G);var A=this._front+B-3;this._checkCapacity(B);var H=this._capacity-1;this[A+0&H]=q,this[A+1&H]=ee,this[A+2&H]=G,this._length=B},O.prototype.shift=function(){var q=this._front,ee=this[q];return this[q]=void 0,this._front=q+1&this._capacity-1,this._length--,ee},O.prototype.length=function(){return this._length},O.prototype._checkCapacity=function(q){this._capacity<q&&this._resizeTo(this._capacity<<1)},O.prototype._resizeTo=function(q){var ee=this._capacity;this._capacity=q,function(G,B,A,H,$){for(var J=0;J<$;++J)A[J+H]=G[J+0],G[J+0]=void 0}(this,0,this,ee,this._front+this._length&ee-1)},l.exports=O},{}],18:[function(m,l,M){"use strict";var O,H,$,J,Q,q=m("./util"),ee=q.getNativePromise();if(q.isNode&&typeof MutationObserver>"u"){var G=w.setImmediate,B=y.nextTick;O=q.isRecentNode?function(H){G.call(w,H)}:function(H){B.call(y,H)}}else if("function"==typeof ee&&"function"==typeof ee.resolve){var A=ee.resolve();O=function(H){A.then(H)}}else O=typeof MutationObserver<"u"&&(typeof window>"u"||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?(H=document.createElement("div"),$={attributes:!0},J=!1,Q=document.createElement("div"),new MutationObserver(function(){H.classList.toggle("foo"),J=!1}).observe(Q,$),function(U){var K=new MutationObserver(function(){K.disconnect(),U()});K.observe(H,$),J||(J=!0,Q.classList.toggle("foo"))}):void 0!==E?function(H){E(H)}:typeof setTimeout<"u"?function(H){setTimeout(H,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};l.exports=O},{"./util":21}],19:[function(m,l,M){"use strict";l.exports=function(O){function q(J){void 0!==J?(J=J._target(),this._bitField=J._bitField,this._settledValueField=J._isFateSealed()?J._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}q.prototype._settledValue=function(){return this._settledValueField};var ee=q.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},G=q.prototype.error=q.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},B=q.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},A=q.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},H=q.prototype.isPending=function(){return 0==(50397184&this._bitField)},$=q.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};q.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},O.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},O.prototype._isCancelled=function(){return this._target().__isCancelled()},O.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},O.prototype.isPending=function(){return H.call(this._target())},O.prototype.isRejected=function(){return A.call(this._target())},O.prototype.isFulfilled=function(){return B.call(this._target())},O.prototype.isResolved=function(){return $.call(this._target())},O.prototype.value=function(){return ee.call(this._target())},O.prototype.reason=function(){var J=this._target();return J._unsetRejectionIsUnhandled(),G.call(J)},O.prototype._value=function(){return this._settledValue()},O.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},O.PromiseInspection=q}},{}],20:[function(m,l,M){"use strict";l.exports=function(O,q){var ee=m("./util"),G=ee.errorObj,B=ee.isObject,A={}.hasOwnProperty;return function(H,$){if(B(H)){if(H instanceof O)return H;var J=function(U){try{return(K=U).then}catch(K){return G.e=K,G}var K}(H);if(J===G){$&&$._pushContext();var Q=O.reject(J.e);return $&&$._popContext(),Q}if("function"==typeof J)return function(U){try{return A.call(U,"_promise0")}catch{return!1}}(H)?(Q=new O(q),H._then(Q._fulfill,Q._reject,void 0,Q,null),Q):function(U,K,F){var L=new O(q),ie=L;F&&F._pushContext(),L._captureStackTrace(),F&&F._popContext();var Y=!0,ne=ee.tryCatch(K).call(U,function(le){L&&(L._resolveCallback(le),L=null)},function(le){L&&(L._rejectCallback(le,Y,!0),L=null)});return Y=!1,L&&ne===G&&(L._rejectCallback(ne.e,!0,!0),L=null),ie}(H,J,$)}return H}}},{"./util":21}],21:[function(m,l,M){"use strict";var G,O=m("./es5"),q=typeof navigator>"u",ee={e:{}},B=typeof self<"u"?self:typeof window<"u"?window:void 0!==w?w:void 0!==this?this:null;function A(){try{var Re=G;return G=null,Re.apply(this,arguments)}catch(ot){return ee.e=ot,ee}}function J(Re){return null==Re||!0===Re||!1===Re||"string"==typeof Re||"number"==typeof Re}function L(Re,ot,pt){return J(Re)||O.defineProperty(Re,ot,{value:pt,configurable:!0,enumerable:!1,writable:!0}),Re}var Y=function(){var Re=[Array.prototype,Object.prototype,Function.prototype],ot=function(st){for(var Ze=0;Ze<Re.length;++Ze)if(Re[Ze]===st)return!0;return!1};if(O.isES5){var pt=Object.getOwnPropertyNames;return function(st){for(var Ze=[],it=Object.create(null);null!=st&&!ot(st);){var vt;try{vt=pt(st)}catch{return Ze}for(var nt=0;nt<vt.length;++nt){var gt=vt[nt];if(!it[gt]){it[gt]=!0;var Ye=Object.getOwnPropertyDescriptor(st,gt);null!=Ye&&null==Ye.get&&null==Ye.set&&Ze.push(gt)}}st=O.getPrototypeOf(st)}return Ze}}var ct={}.hasOwnProperty;return function(st){if(ot(st))return[];var Ze=[];e:for(var it in st)if(ct.call(st,it))Ze.push(it);else{for(var vt=0;vt<Re.length;++vt)if(ct.call(Re[vt],it))continue e;Ze.push(it)}return Ze}}(),ne=/this\s*\.\s*\S+\s*=/,Ee=/^[a-z$_][a-z$_0-9]*$/i;function ae(Re){try{return Re+""}catch{return"[no string representation]"}}function fe(Re){return Re instanceof Error||null!==Re&&"object"===x(Re)&&"string"==typeof Re.message&&"string"==typeof Re.name}function ze(Re){return fe(Re)&&O.propertyIsWritable(Re,"stack")}var we="stack"in new Error?function(Re){return ze(Re)?Re:new Error(ae(Re))}:function(Re){if(ze(Re))return Re;try{throw new Error(ae(Re))}catch(ot){return ot}};function Ce(Re){return{}.toString.call(Re)}var $e=function(Re){return O.isArray(Re)?Re:null};if(typeof Symbol<"u"&&Symbol.iterator){var qe="function"==typeof Array.from?function(Re){return Array.from(Re)}:function(Re){for(var ot,pt=[],ct=Re[Symbol.iterator]();!(ot=ct.next()).done;)pt.push(ot.value);return pt};$e=function(Re){return O.isArray(Re)?Re:null!=Re&&"function"==typeof Re[Symbol.iterator]?qe(Re):null}}var pe,Re,ue=void 0!==y&&"[object process]"===Ce(y).toLowerCase(),de=void 0!==y&&void 0!==y.env,tt={setReflectHandler:function(Re){pe=Re},isClass:function le(Re){try{if("function"==typeof Re){var ot=O.names(Re.prototype),pt=O.isES5&&ot.length>1,ct=ot.length>0&&!(1===ot.length&&"constructor"===ot[0]),st=ne.test(Re+"")&&O.names(Re).length>0;if(pt||ct||st)return!0}return!1}catch{return!1}},isIdentifier:function Le(Re){return Ee.test(Re)},inheritedDataKeys:Y,getDataPropertyOrDefault:function F(Re,ot,pt){if(!O.isES5)return{}.hasOwnProperty.call(Re,ot)?Re[ot]:void 0;var ct=Object.getOwnPropertyDescriptor(Re,ot);return null!=ct?null==ct.get&&null==ct.set?ct.value:pt:void 0},thrower:function ie(Re){throw Re},isArray:O.isArray,asArray:$e,notEnumerableProp:L,isPrimitive:J,isObject:function Q(Re){return"function"==typeof Re||"object"===x(Re)&&null!==Re},isError:fe,canEvaluate:q,errorObj:ee,tryCatch:function H(Re){return G=Re,A},inherits:function(Re,ot){var pt={}.hasOwnProperty;function ct(){for(var st in this.constructor=Re,this.constructor$=ot,ot.prototype)pt.call(ot.prototype,st)&&"$"!==st.charAt(st.length-1)&&(this[st+"$"]=ot.prototype[st])}return ct.prototype=ot.prototype,Re.prototype=new ct,Re.prototype},withAppended:function K(Re,ot){var pt,ct=Re.length,st=new Array(ct+1);for(pt=0;pt<ct;++pt)st[pt]=Re[pt];return st[pt]=ot,st},maybeWrapAsError:function U(Re){return J(Re)?new Error(ae(Re)):Re},toFastProperties:function ge(Re){function ot(){}ot.prototype=Re;var pt=new ot;function ct(){return x(pt.foo)}return ct(),ct(),Re},filledRange:function Qe(Re,ot,pt){for(var ct=new Array(Re),st=0;st<Re;++st)ct[st]=ot+st+pt;return ct},toString:ae,canAttachTrace:ze,ensureErrorObject:we,originatesFromRejection:function je(Re){return null!=Re&&(Re instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===Re.isOperational)},markAsOriginatingFromRejection:function Me(Re){try{L(Re,"isOperational",!0)}catch{}},classString:Ce,copyDescriptors:function ye(Re,ot,pt){for(var ct=O.names(Re),st=0;st<ct.length;++st){var Ze=ct[st];if(pt(Ze))try{O.defineProperty(ot,Ze,O.getDescriptor(Re,Ze))}catch{}}},isNode:ue,hasEnvVariables:de,env:function xe(Re){return de?y.env[Re]:void 0},global:B,getNativePromise:function Xe(){if("function"==typeof Promise)try{if("[object Promise]"===Ce(new Promise(function(){})))return Promise}catch{}},contextBind:function rt(Re,ot){if(null===Re||"function"!=typeof ot||ot===pe)return ot;null!==Re.domain&&(ot=Re.domain.bind(ot));var pt=Re.async;if(null!==pt){var ct=ot;ot=function(){var st=new Array(2).concat([].slice.call(arguments));return st[0]=ct,st[1]=this,pt.runInAsyncScope.apply(pt,st)}}return ot}};tt.isRecentNode=tt.isNode&&(y.versions&&y.versions.node?Re=y.versions.node.split(".").map(Number):y.version&&(Re=y.version.split(".").map(Number)),0===Re[0]&&Re[1]>10||Re[0]>0),tt.nodeSupportsAsyncResource=tt.isNode&&function(){var Re=!1;try{Re="function"==typeof m("async_hooks").AsyncResource.prototype.runInAsyncScope}catch{Re=!1}return Re}(),tt.isNode&&tt.toFastProperties(y);try{throw new Error}catch(Re){tt.lastLineError=Re}l.exports=tt},{"./es5":10,async_hooks:void 0}]},{},[3])(3)},"object"==x(X)&&void 0!==P?P.exports=S():void 0===(N="function"==typeof(R=S)?R.apply(X,[]):R)||(P.exports=N),typeof window<"u"&&null!==window?window.P=window.Promise:typeof self<"u"&&null!==self&&(self.P=self.Promise)}).call(this,I(5),I(1),I(7).setImmediate)},function(P,X,I){(function(y){var w=void 0!==y&&y||typeof self<"u"&&self||window,E=Function.prototype.apply;function R(C,N){this._id=C,this._clearFn=N}X.setTimeout=function(){return new R(E.call(setTimeout,w,arguments),clearTimeout)},X.setInterval=function(){return new R(E.call(setInterval,w,arguments),clearInterval)},X.clearTimeout=X.clearInterval=function(C){C&&C.close()},R.prototype.unref=R.prototype.ref=function(){},R.prototype.close=function(){this._clearFn.call(w,this._id)},X.enroll=function(C,N){clearTimeout(C._idleTimeoutId),C._idleTimeout=N},X.unenroll=function(C){clearTimeout(C._idleTimeoutId),C._idleTimeout=-1},X._unrefActive=X.active=function(C){clearTimeout(C._idleTimeoutId);var N=C._idleTimeout;N>=0&&(C._idleTimeoutId=setTimeout(function(){C._onTimeout&&C._onTimeout()},N))},I(8),X.setImmediate=typeof self<"u"&&self.setImmediate||void 0!==y&&y.setImmediate||this&&this.setImmediate,X.clearImmediate=typeof self<"u"&&self.clearImmediate||void 0!==y&&y.clearImmediate||this&&this.clearImmediate}).call(this,I(1))},function(P,X,I){(function(y,w){!function(E,R){"use strict";if(!E.setImmediate){var C,N=1,x={},S=!1,s=E.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(E);u=u&&u.setTimeout?u:E,"[object process]"==={}.toString.call(E.process)?C=function(M){w.nextTick(function(){l(M)})}:function(){if(E.postMessage&&!E.importScripts){var M=!0,O=E.onmessage;return E.onmessage=function(){M=!1},E.postMessage("","*"),E.onmessage=O,M}}()?(M="setImmediate$"+Math.random()+"$",O=function(q){q.source===E&&"string"==typeof q.data&&0===q.data.indexOf(M)&&l(+q.data.slice(M.length))},E.addEventListener?E.addEventListener("message",O,!1):E.attachEvent("onmessage",O),C=function(q){E.postMessage(M+q,"*")}):E.MessageChannel?function(){var M=new MessageChannel;M.port1.onmessage=function(O){l(O.data)},C=function(O){M.port2.postMessage(O)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var M=s.documentElement;C=function(O){var q=s.createElement("script");q.onreadystatechange=function(){l(O),q.onreadystatechange=null,M.removeChild(q),q=null},M.appendChild(q)}}():C=function(M){setTimeout(l,0,M)},u.setImmediate=function(M){"function"!=typeof M&&(M=new Function(""+M));for(var O=new Array(arguments.length-1),q=0;q<O.length;q++)O[q]=arguments[q+1];var ee={callback:M,args:O};return x[N]=ee,C(N),N++},u.clearImmediate=m}var M,O;function m(M){delete x[M]}function l(M){if(S)setTimeout(l,0,M);else{var O=x[M];if(O){S=!0;try{!function(q){var ee=q.callback,G=q.args;switch(G.length){case 0:ee();break;case 1:ee(G[0]);break;case 2:ee(G[0],G[1]);break;case 3:ee(G[0],G[1],G[2]);break;default:ee.apply(void 0,G)}}(O)}finally{m(M),S=!1}}}}}(typeof self>"u"?void 0===y?this:y:self)}).call(this,I(1),I(5))},function(P,X,I){"use strict";I.r(X),I.d(X,"scheduler",function(){return Ot}),I.d(X,"Scheduler",function(){return Mt});var y=I(0);I(4);var C=function(){function t(){(function(j,a){if(!(j instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),this._silent_mode=!1,this.listeners={}}return(a=[{key:"_silentStart",value:function(){this._silent_mode=!0}},{key:"_silentEnd",value:function(){this._silent_mode=!1}}])&&function R(t,j){for(var a=0;a<j.length;a++){var v=j[a];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(t,v.key,v)}}(t.prototype,a),t;var a}(),x=function(t){var j=new C;t.attachEvent=function(a,v,_){a="ev_"+a.toLowerCase(),j.listeners[a]||(j.listeners[a]=function(t){var j={},a=0,v=function(){var _=!0;for(var i in j){var o=j[i].apply(t,arguments);_=_&&o}return _};return v.addEvent=function(_,i){if("function"==typeof _){var o;if(i&&i.id?o=i.id:(o=a,a++),i&&i.once){var c=_;_=function(){c(),v.removeEvent(o)}}return j[o]=_,o}return!1},v.removeEvent=function(_){delete j[_]},v.clear=function(){j={}},v}(this)),_&&_.thisObject&&(v=v.bind(_.thisObject));var i=a+":"+j.listeners[a].addEvent(v,_);return _&&_.id&&(i=_.id),i},t.attachAll=function(a){this.attachEvent("listen_all",a)},t.callEvent=function(a,v){if(j._silent_mode)return!0;var _="ev_"+a.toLowerCase(),i=j.listeners;return i.ev_listen_all&&i.ev_listen_all.apply(this,[a].concat(v)),!i[_]||i[_].apply(this,v)},t.checkEvent=function(a){return!!j.listeners["ev_"+a.toLowerCase()]},t.detachEvent=function(a){if(a){var v=j.listeners;for(var _ in v)v[_].removeEvent(a);var i=a.split(":");if(v=j.listeners,2===i.length){var o=i[0];v[o]&&v[o].removeEvent(i[1])}}},t.detachAllEvents=function(){for(var a in j.listeners)j.listeners[a].clear()}};function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}var s={event:function(t,j,a){t.addEventListener?t.addEventListener(j,a,!1):t.attachEvent&&t.attachEvent("on"+j,a)},eventRemove:function(t,j,a){t.removeEventListener?t.removeEventListener(j,a,!1):t.detachEvent&&t.detachEvent("on"+j,a)}};function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}var O=Date.now();function q(t){return!(!t||"object"!==M(t)||!(t.getFullYear&&t.getMonth&&t.getDate))}var ee={uid:function(){return O++},mixin:function(t,j,a){for(var v in j)(void 0===t[v]||a)&&(t[v]=j[v]);return t},copy:function t(j){var a,v,_;if(j&&"object"==M(j))switch(!0){case q(j):v=new Date(j);break;case _=j,Array.isArray?Array.isArray(_):_&&void 0!==_.length&&_.pop&&_.push:for(v=new Array(j.length),a=0;a<j.length;a++)v[a]=t(j[a]);break;case function(_){return _&&"object"===M(_)&&"function String() { [native code] }"===Function.prototype.toString.call(_.constructor)}(j):v=new String(j);break;case function(_){return _&&"object"===M(_)&&"function Number() { [native code] }"===Function.prototype.toString.call(_.constructor)}(j):v=new Number(j);break;case function(_){return _&&"object"===M(_)&&"function Boolean() { [native code] }"===Function.prototype.toString.call(_.constructor)}(j):v=new Boolean(j);break;default:for(a in v={},j)Object.prototype.hasOwnProperty.apply(j,[a])&&(v[a]=t(j[a]))}return v||j},defined:function(t){return void 0!==t},isDate:q};function G(t){if(!t)return"";var j=t.className||"";return j.baseVal&&(j=j.baseVal),j.indexOf||(j=""),j||""}function B(t,j,a){void 0===a&&(a=!0);for(var v=t.target||t.srcElement,_="";v;){if(_=G(v)){var i=_.indexOf(j);if(i>=0){if(!a)return v;var o=0===i||!(_.charAt(i-1)||"").trim(),c=i+j.length>=_.length||!_.charAt(i+j.length).trim();if(o&&c)return v}}v=v.parentNode}return null}function A(t){var j=!1,a=!1;if(window.getComputedStyle){var v=window.getComputedStyle(t,null);j=v.display,a=v.visibility}else t.currentStyle&&(j=t.currentStyle.display,a=t.currentStyle.visibility);var _=!1,i=B({target:t},"dhx_form_repeat",!1);return i&&(_="0px"==i.style.height),_=_||!t.offsetHeight,"none"!=j&&"hidden"!=a&&!_}function H(t){return!isNaN(t.getAttribute("tabindex"))&&1*t.getAttribute("tabindex")>=0}function $(t){return!{a:!0,area:!0}[t.nodeName.loLowerCase()]||!!t.getAttribute("href")}function J(t){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[t.nodeName.toLowerCase()]||!t.hasAttribute("disabled")}function Q(){return document.head.createShadowRoot||document.head.attachShadow}function U(t){if(!t||!Q())return document.body;for(;t.parentNode&&(t=t.parentNode);)if(t instanceof ShadowRoot)return t.host;return document.body}var K,F={getAbsoluteLeft:function(t){return this.getOffset(t).left},getAbsoluteTop:function(t){return this.getOffset(t).top},getOffsetSum:function(t){for(var j=0,a=0;t;)j+=parseInt(t.offsetTop),a+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:j,left:a}},getOffsetRect:function(t){var j=t.getBoundingClientRect(),a=0,v=0;if(/Mobi/.test(navigator.userAgent)){var _=document.createElement("div");_.style.position="absolute",_.style.left="0px",_.style.top="0px",_.style.width="1px",_.style.height="1px",document.body.appendChild(_);var i=_.getBoundingClientRect();a=j.top-i.top,v=j.left-i.left,_.parentNode.removeChild(_)}else{var o=document.body,c=document.documentElement,h=window.pageYOffset||c.scrollTop||o.scrollTop,D=window.pageXOffset||c.scrollLeft||o.scrollLeft;a=j.top+h-(c.clientTop||o.clientTop||0),v=j.left+D-(c.clientLeft||o.clientLeft||0)}return{top:Math.round(a),left:Math.round(v)}},getOffset:function(t){return t.getBoundingClientRect?this.getOffsetRect(t):this.getOffsetSum(t)},closest:function(t,j){return t&&j?K(t,j):null},insertAfter:function(t,j){j.nextSibling?j.parentNode.insertBefore(t,j.nextSibling):j.parentNode.appendChild(t)},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},getFocusableNodes:function(t){for(var j=t.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),a=Array.prototype.slice.call(j,0),v=0;v<a.length;v++)a[v].$position=v;for(a.sort(function(i,o){return 0===i.tabIndex&&0!==o.tabIndex?1:0!==i.tabIndex&&0===o.tabIndex?-1:i.tabIndex===o.tabIndex?i.$position-o.$position:i.tabIndex<o.tabIndex?-1:1}),v=0;v<a.length;v++){var _=a[v];(H(_)||J(_)||$(_))&&A(_)||(a.splice(v,1),v--)}return a},getClassName:G,locateCss:B,getRootNode:U,hasShadowParent:function(t){return!!U(t)},isShadowDomSupported:Q,getActiveElement:function(){var t=document.activeElement;return t.shadowRoot&&(t=t.shadowRoot.activeElement),t===document.body&&document.getSelection&&(t=document.getSelection().focusNode||document.body),t},getRelativeEventPosition:function(t,j){var a=document.documentElement,v=function(_){var i=0,o=0,c=0,h=0;if(_.getBoundingClientRect){var D=_.getBoundingClientRect(),V=document.body,T=document.documentElement||document.body.parentNode||document.body,W=window.pageYOffset||T.scrollTop||V.scrollTop,z=window.pageXOffset||T.scrollLeft||V.scrollLeft;i=D.top+W-(T.clientTop||V.clientTop||0),o=D.left+z-(T.clientLeft||V.clientLeft||0),c=document.body.offsetWidth-D.right,h=document.body.offsetHeight-D.bottom}else{for(;_;)i+=parseInt(_.offsetTop,10),o+=parseInt(_.offsetLeft,10),_=_.offsetParent;c=document.body.offsetWidth-_.offsetWidth-o,h=document.body.offsetHeight-_.offsetHeight-i}return{y:Math.round(i),x:Math.round(o),width:_.offsetWidth,height:_.offsetHeight,right:Math.round(c),bottom:Math.round(h)}}(j);return{x:t.clientX+a.scrollLeft-a.clientLeft-v.x+j.scrollLeft,y:t.clientY+a.scrollTop-a.clientTop-v.y+j.scrollTop}}};if(Element.prototype.closest)K=function(t,j){return t.closest(j)};else{var L=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;K=function(t,j){var a=t;do{if(L.call(a,j))return a;a=a.parentElement||a.parentNode}while(null!==a&&1===a.nodeType);return null}}var ie=typeof window<"u",Y={isIE:ie&&(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0),isIE6:ie&&!XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:ie&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:ie&&navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:ie&&navigator.userAgent.indexOf("Opera")>=0,isChrome:ie&&navigator.userAgent.indexOf("Chrome")>=0,isKHTML:ie&&(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0),isFF:ie&&navigator.userAgent.indexOf("Firefox")>=0,isIPad:ie&&navigator.userAgent.search(/iPad/gi)>=0,isEdge:ie&&-1!=navigator.userAgent.indexOf("Edge"),isNode:!ie||typeof navigator>"u"},ne=I(6).Promise,le=I(3),ge=I.n(le);function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}var fe=I(2),Me=I.n(fe);function je(t){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}function ye(t){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}function $e(t){return this.serverProcessor=t,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),x(this),this}function qe(t){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}$e.prototype={setTransactionMode:function(t,j){"object"==ye(t)?(this._tMode=t.mode||this._tMode,void 0!==t.headers&&(this._headers=t.headers),void 0!==t.payload&&(this._payload=t.payload),this._tSend=!!j):(this._tMode=t,this._tSend=j),"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0),"JSON"===this._tMode||"REST-JSON"===this._tMode?(this._tSend=!1,this._endnm=!0,this._serializeAsJson=!0,this._headers=this._headers||{},this._headers["Content-Type"]="application/json"):this._headers&&!this._headers["Content-Type"]&&(this._headers["Content-Type"]="application/x-www-form-urlencoded"),"CUSTOM"===this._tMode&&(this._tSend=!1,this._endnm=!0,this._router=t.router)},escape:function(t){function j(a){return t.apply(this,arguments)}return j.toString=function(){return t.toString()},j}(function(t){return this._utf?encodeURIComponent(t):escape(t)}),enableUTFencoding:function(t){this._utf=!!t},setDataColumns:function(t){this._columns="string"==typeof t?t.split(","):t},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(t){this._endnm=!!t},enablePartialDataSend:function(t){this._changed=!!t},setUpdateMode:function(t,j){this.autoUpdate="cell"==t,this.updateMode=t,this.dnd=j},ignore:function(t,j){this._silent_mode=!0,t.call(j||window),this._silent_mode=!1},setUpdated:function(t,j,a){if(!this._silent_mode){var v=this.findRow(t);a=a||"updated";var _=this.$scheduler.getUserData(t,this.action_param);_&&"updated"==a&&(a=_),j?(this.set_invalid(t,!1),this.updatedRows[v]=t,this.$scheduler.setUserData(t,this.action_param,a),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(v,1),this.$scheduler.setUserData(t,this.action_param,"")),this.markRow(t,j,a),j&&this.autoUpdate&&this.sendData(t)}},markRow:function(t,j,a){var v="",_=this.is_invalid(t);if(_&&(v=this.styles[_],j=!0),this.callEvent("onRowMark",[t,j,a,_])&&(this.$scheduler[this._methods[0]](t,v=this.styles[j?a:"clear"]+v),_&&_.details)){v+=this.styles[_+"_cell"];for(var i=0;i<_.details.length;i++)_.details[i]&&this.$scheduler[this._methods[1]](t,i,v)}},getActionByState:function(t){return"inserted"===t?"create":"updated"===t?"update":"deleted"===t?"delete":"update"},getState:function(t){return this.$scheduler.getUserData(t,this.action_param)},is_invalid:function(t){return this._invalid[t]},set_invalid:function(t,j,a){a&&(j={value:j,details:a,toString:function(){return this.value.toString()}}),this._invalid[t]=j},checkBeforeUpdate:function(t){return!0},sendData:function(t){return this.$scheduler.editStop&&this.$scheduler.editStop(),void 0===t||this._tSend?this.sendAllData():!this._in_progress[t]&&(this.messages=[],!(!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages]))&&void this._beforeSendData(this._getRowData(t),t))},_beforeSendData:function(t,j){if(!this.callEvent("onBeforeUpdate",[j,this.getState(j),t]))return!1;this._sendData(t,j)},serialize:function(t,j){if(this._serializeAsJson)return this._serializeAsJSON(t);if("string"==typeof t)return t;if(void 0!==j)return this.serialize_one(t,"");var a=[],v=[];for(var _ in t)t.hasOwnProperty(_)&&(a.push(this.serialize_one(t[_],_+this.post_delim)),v.push(_));return a.push("ids="+this.escape(v.join(","))),this.$scheduler.security_key&&a.push("dhx_security="+this.$scheduler.security_key),a.join("&")},serialize_one:function(t,j){if("string"==typeof t)return t;var a=[],v="";for(var _ in t)if(t.hasOwnProperty(_)){if(("id"==_||_==this.action_param)&&"REST"==this._tMode)continue;v="string"==typeof t[_]||"number"==typeof t[_]?t[_]:JSON.stringify(t[_]),a.push(this.escape((j||"")+_)+"="+this.escape(v))}return a.join("&")},_applyPayload:function(t){var j=this.$scheduler.ajax;if(this._payload)for(var a in this._payload)t=t+j.urlSeparator(t)+this.escape(a)+"="+this.escape(this._payload[a]);return t},_sendData:function(t,j){if(t){if(!this.callEvent("onBeforeDataSending",j?[j,this.getState(j),t]:[null,null,t]))return!1;j&&(this._in_progress[j]=(new Date).valueOf());var a=this,v=this.$scheduler.ajax;if("CUSTOM"!==this._tMode){var _,i={callback:function(Z){var re=[];if(j)re.push(j);else if(t)for(var oe in t)re.push(oe);return a.afterUpdate(a,Z,re)},headers:a._headers},o=this.serverProcessor+(this._user?v.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.$scheduler.getUserData(0,"version")].join("&"):""),c=this._applyPayload(o);switch(this._tMode){case"GET":_=this._cleanupArgumentsBeforeSend(t),i.url=c+v.urlSeparator(c)+this.serialize(_,j),i.method="GET";break;case"POST":_=this._cleanupArgumentsBeforeSend(t),i.url=c,i.method="POST",i.data=this.serialize(_,j);break;case"JSON":_={};var h=this._cleanupItemBeforeSend(t);for(var D in h)D!==this.action_param&&"id"!==D&&"gr_id"!==D&&(_[D]=h[D]);i.url=c,i.method="POST",i.data=JSON.stringify({id:j,action:t[this.action_param],data:_});break;case"REST":case"REST-JSON":switch(c=o.replace(/(&|\?)editing=true/,""),_="",this.getState(j)){case"inserted":i.method="POST",i.data=this.serialize(t,j);break;case"deleted":i.method="DELETE",c=c+("/"===c.slice(-1)?"":"/")+j;break;default:i.method="PUT",i.data=this.serialize(t,j),c=c+("/"===c.slice(-1)?"":"/")+j}i.url=this._applyPayload(c)}return this._waitMode++,v.query(i)}var V,T=this.getState(j),W=this.getActionByState(T),z=function(Z){var re=T;if(Z&&Z.responseText&&Z.setRequestHeader){200!==Z.status&&(re="error");try{Z=JSON.parse(Z.responseText)}catch{}}re=re||"updated";var oe=j,_e=j;Z&&(re=Z.action||re,oe=Z.sid||oe,_e=Z.id||Z.tid||_e),a.afterUpdateCallback(oe,_e,re,Z)};if(this._router instanceof Function)V=this._router("event",W,t,j);else switch(T){case"inserted":V=this._router.event.create(t);break;case"deleted":V=this._router.event.delete(j);break;default:V=this._router.event.update(t,j)}if(V){if(!V.then&&void 0===V.id&&void 0===V.tid&&void 0===V.action)throw new Error("Incorrect router return value. A Promise or a response object is expected");V.then?V.then(z).catch(function(Z){z(Z&&Z.action?Z:{action:"error",value:Z})}):z(V)}else z(null)}},sendAllData:function(){if(this.updatedRows.length&&"off"!==this.updateMode){this.messages=[];var t=!0;if(this._forEachUpdatedRow(function(j){t=t&&this.checkBeforeUpdate(j)}),!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;this._tSend?this._sendData(this._getAllData()):this._forEachUpdatedRow(function(j){if(!this._in_progress[j]){if(this.is_invalid(j))return;this._beforeSendData(this._getRowData(j),j)}})}},_getAllData:function(t){var j={},a=!1;return this._forEachUpdatedRow(function(v){if(!this._in_progress[v]&&!this.is_invalid(v)){var _=this._getRowData(v);this.callEvent("onBeforeUpdate",[v,this.getState(v),_])&&(j[v]=_,a=!0,this._in_progress[v]=(new Date).valueOf())}}),a?j:null},findRow:function(t){var j=0;for(j=0;j<this.updatedRows.length&&t!=this.updatedRows[j];j++);return j},defineAction:function(t,j){this._uActions||(this._uActions={}),this._uActions[t]=j},afterUpdateCallback:function(t,j,a,v){if(this.$scheduler){var _=t,i="error"!==a&&"invalid"!==a;if(i||this.set_invalid(t,a),this._uActions&&this._uActions[a]&&!this._uActions[a](v))return delete this._in_progress[_];"wait"!==this._in_progress[_]&&this.setUpdated(t,!1);var o=t;switch(a){case"inserted":case"insert":j!=t&&(this.setUpdated(t,!1),this.$scheduler[this._methods[2]](t,j),t=j);break;case"delete":case"deleted":return this.$scheduler.setUserData(t,this.action_param,"true_deleted"),this.$scheduler[this._methods[3]](t,j),delete this._in_progress[_],this.callEvent("onAfterUpdate",[t,a,j,v])}"wait"!==this._in_progress[_]?(i&&this.$scheduler.setUserData(t,this.action_param,""),delete this._in_progress[_]):(delete this._in_progress[_],this.setUpdated(j,!0,this.$scheduler.getUserData(t,this.action_param))),this.callEvent("onAfterUpdate",[o,a,j,v])}},_errorResponse:function(t,j){return this.$scheduler&&this.$scheduler.callEvent&&this.$scheduler.callEvent("onSaveError",[j,t.xmlDoc]),this.cleanUpdate(j)},_setDefaultTransactionMode:function(){this.serverProcessor&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!==this.serverProcessor.indexOf("?")?"&":"?")+"editing=true",this._serverProcessor=this.serverProcessor)},afterUpdate:function(t,j,a){var v=this.$scheduler.ajax;if(200===j.xmlDoc.status){var _;try{_=JSON.parse(j.xmlDoc.responseText)}catch{j.xmlDoc.responseText.length||(_={})}if(_){var i=_.action||this.getState(a)||"updated",o=_.sid||a[0],c=_.tid||a[0];return t.afterUpdateCallback(o,c,i,_),void t.finalizeUpdate()}var h=v.xmltop("data",j.xmlDoc);if(!h)return this._errorResponse(j,a);var D=v.xpath("//data/action",h);if(!D.length)return this._errorResponse(j,a);for(var V=0;V<D.length;V++){var T=D[V];i=T.getAttribute("type"),o=T.getAttribute("sid"),c=T.getAttribute("tid"),t.afterUpdateCallback(o,c,i,T)}t.finalizeUpdate()}else this._errorResponse(j,a)},cleanUpdate:function(t){if(t)for(var j=0;j<t.length;j++)delete this._in_progress[t[j]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(t){if(!this._initialized){this.$scheduler=t,this.$scheduler._dp_init&&this.$scheduler._dp_init(this),this._setDefaultTransactionMode(),this._methods=this._methods||["_set_event_text_style","","_dp_change_event_id","_dp_hook_delete"],v=this,(a=this.$scheduler)._validId=function(_){return!0},a.setUserData=function(_,i,o){if(_){var c=this.getEvent(_);c&&(c[i]=o)}else this._userdata[i]=o},a.getUserData=function(_,i){if(_){var o=this.getEvent(_);return o?o[i]:null}return this._userdata[i]},a._set_event_text_style=function(_,i){if(a.getEvent(_)){this.for_rendered(_,function(c){c.style.cssText+=";"+i});var o=this.getEvent(_);o._text_style=i,this.event_updated(o)}},a._update_callback=function(_,i){var o=a._xmlNodeToJSON(_.firstChild);"none"==o.rec_type&&(o.rec_pattern="none"),o.text=o.text||o._tagvalue,o.start_date=a._helpers.parseDate(o.start_date),o.end_date=a._helpers.parseDate(o.end_date),a.addEvent(o),a._add_rec_marker&&a.setCurrentView()},a._dp_change_event_id=function(_,i){a.getEvent(_)&&a.changeEventId(_,i)},a._dp_hook_delete=function(_,i){if(a.getEvent(_))return i&&_!=i&&("true_deleted"==this.getUserData(_,v.action_param)&&this.setUserData(_,v.action_param,"updated"),this.changeEventId(_,i)),this.deleteEvent(i,!0)},a.setDp=function(){this._dp=v},a.setDp();var j=new function(a,v){this.$scheduler=a,this.$dp=v,this._dataProcessorHandlers=[],this.attach=function(){var _=this.$dp,i=this.$scheduler;this._dataProcessorHandlers.push(i.attachEvent("onEventAdded",function(o){!this._loading&&this._validId(o)&&_.setUpdated(o,!0,"inserted")})),this._dataProcessorHandlers.push(i.attachEvent("onConfirmedBeforeEventDelete",function(o){if(this._validId(o)){var c=_.getState(o);return"inserted"==c||this._new_event?(_.setUpdated(o,!1),!0):"deleted"!=c&&("true_deleted"==c||(_.setUpdated(o,!0,"deleted"),!1))}})),this._dataProcessorHandlers.push(i.attachEvent("onEventChanged",function(o){!this._loading&&this._validId(o)&&_.setUpdated(o,!0,"updated")})),this._dataProcessorHandlers.push(i.attachEvent("onClearAll",function(){_._in_progress={},_._invalid={},_.updatedRows=[],_._waitMode=0})),_.attachEvent("insertCallback",i._update_callback),_.attachEvent("updateCallback",i._update_callback),_.attachEvent("deleteCallback",function(o,c){i.getEvent(c)?(i.setUserData(c,this.action_param,"true_deleted"),i.deleteEvent(c)):i._add_rec_marker&&i._update_callback(o,c)})},this.detach=function(){for(var _ in this._dataProcessorHandlers)this.$scheduler.detachEvent(this._dataProcessorHandlers[_]);this._dataProcessorHandlers=[]}}(this.$scheduler,this);j.attach(),this.attachEvent("onDestroy",function(){delete this._getRowData,delete this.$scheduler._dp,delete this.$scheduler._dataprocessor,delete this.$scheduler._set_event_text_style,delete this.$scheduler._dp_change_event_id,delete this.$scheduler._dp_hook_delete,delete this.$scheduler,j.detach()}),this.$scheduler.callEvent("onDataProcessorReady",[this]),this._initialized=!0,t._dataprocessor=this}var a,v},setOnAfterUpdate:function(t){this.attachEvent("onAfterUpdate",t)},setOnBeforeUpdateHandler:function(t){this.attachEvent("onBeforeDataSending",t)},setAutoUpdate:function(t,j){t=t||2e3,this._user=j||(new Date).valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(v,_,i,o){this.afterAutoUpdate(v,_,i,o)}),this.attachEvent("onFullSync",function(){this.fullSync()});var a=this;y.a.setInterval(function(){a.loadUpdate()},t)},afterAutoUpdate:function(t,j,a,v){return"collision"!=j||(this._need_update=!0,!1)},fullSync:function(){return this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(t,j){var a=this.$scheduler.ajax;if(this._update_busy)return!1;this._update_busy=!0,a.get(t,j)},_getXmlNodeValue:function(t){return t.firstChild?t.firstChild.nodeValue:""},loadUpdate:function(){var t=this,j=this.$scheduler.ajax,a=this.$scheduler.getUserData(0,"version"),v=this.serverProcessor+j.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+a].join("&");v=v.replace("editing=true&",""),this.getUpdates(v,function(_){var i=j.xpath("//userdata",_);t.$scheduler.setUserData(0,"version",t._getXmlNodeValue(i[0]));var o=j.xpath("//update",_);if(o.length){t._silent_mode=!0;for(var c=0;c<o.length;c++){var h=o[c].getAttribute("status"),D=o[c].getAttribute("id"),V=o[c].getAttribute("parent");switch(h){case"inserted":this.callEvent("insertCallback",[o[c],D,V]);break;case"updated":this.callEvent("updateCallback",[o[c],D,V]);break;case"deleted":this.callEvent("deleteCallback",[o[c],D,V])}}t._silent_mode=!1}t._update_busy=!1,t=null})},destructor:function(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.updatedRows=[],this._in_progress={},this._invalid={},this._headers=null,this._payload=null,delete this._initialized},url:function(t){this.serverProcessor=this._serverProcessor=t},_serializeAsJSON:function(t){if("string"==typeof t)return t;var j=this.$scheduler.utils.copy(t);return"REST-JSON"===this._tMode&&(delete j.id,delete j[this.action_param]),JSON.stringify(j)},_cleanupArgumentsBeforeSend:function(t){var j;if(void 0===t[this.action_param])for(var a in j={},t)j[a]=this._cleanupArgumentsBeforeSend(t[a]);else j=this._cleanupItemBeforeSend(t);return j},_cleanupItemBeforeSend:function(t){var j=null;return t&&("deleted"===t[this.action_param]?((j={}).id=t.id,j[this.action_param]=t[this.action_param]):j=t),j},_forEachUpdatedRow:function(t){for(var j=this.updatedRows.slice(),a=0;a<j.length;a++){var v=j[a];this.$scheduler.getUserData(v,this.action_param)&&t.call(this,v)}},_prepareDataItem:function(t){var j={},a=this.$scheduler,v=a.utils.copy(t);for(var _ in v)0!==_.indexOf("_")&&v[_]&&(j[_]=v[_].getUTCFullYear?a._helpers.formatDate(v[_]):"object"==ye(v[_])?this._prepareDataItem(v[_]):null===v[_]?"":v[_]);return j[this.action_param]=a.getUserData(t.id,this.action_param),j},_getRowData:function(t){var j=this.$scheduler.getEvent(t);return j||(j={id:t}),this._prepareDataItem(j)}};var de={date:{month_full:["\u0643\u0627\u0646\u0648\u0646 \u0627\u0644\u062b\u0627\u0646\u064a","\u0634\u0628\u0627\u0637","\u0622\u0630\u0627\u0631","\u0646\u064a\u0633\u0627\u0646","\u0623\u064a\u0627\u0631","\u062d\u0632\u064a\u0631\u0627\u0646","\u062a\u0645\u0648\u0632","\u0622\u0628","\u0623\u064a\u0644\u0648\u0644","\u062a\u0634\u0631\u064a\u0646 \u0627\u0644\u0623\u0648\u0644","\u062a\u0634\u0631\u064a\u0646 \u0627\u0644\u062b\u0627\u0646\u064a","\u0643\u0627\u0646\u0648\u0646 \u0627\u0644\u0623\u0648\u0644"],month_short:["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"],day_full:["\u0627\u0644\u0623\u062d\u062f","\u0627\u0644\u0623\u062b\u0646\u064a\u0646","\u0623\u0644\u062b\u0644\u0627\u062b\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0623\u0644\u062d\u0645\u064a\u0633","\u0623\u0644\u062c\u0645\u0639\u0629","\u0627\u0644\u0633\u0628\u062a"],day_short:["\u0627\u062d\u062f","\u0627\u062b\u0646\u064a\u0646","\u062b\u0644\u0627\u062b\u0627\u0621","\u0627\u0631\u0628\u0639\u0627\u0621","\u062e\u0645\u064a\u0633","\u062c\u0645\u0639\u0629","\u0633\u0628\u062a"]},labels:{dhx_cal_today_button:"\u0627\u0644\u064a\u0648\u0645",day_tab:"\u064a\u0648\u0645",week_tab:"\u0623\u0633\u0628\u0648\u0639",month_tab:"\u0634\u0647\u0631",new_event:"\u062d\u062f\u062b \u062c\u062f\u064a\u062f",icon_save:"\u0627\u062e\u0632\u0646",icon_cancel:"\u0627\u0644\u063a\u0627\u0621",icon_details:"\u062a\u0641\u0627\u0635\u064a\u0644",icon_edit:"\u062a\u062d\u0631\u064a\u0631",icon_delete:"\u062d\u0630\u0641",confirm_closing:"\u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a \u0633\u0648\u0641 \u062a\u0636\u064a\u0639, \u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f\u061f",confirm_deleting:"\u0627\u0644\u062d\u062f\u062b \u0633\u064a\u062a\u0645 \u062d\u0630\u0641\u0647\u0627 \u0646\u0647\u0627\u0626\u064a\u0627 \u060c \u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f\u061f",section_description:"\u0627\u0644\u0648\u0635\u0641",section_time:"\u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064a\u0629",full_day:"\u0637\u0648\u0627\u0644 \u0627\u0644\u064a\u0648\u0645",confirm_recurring:"\u0647\u0644 \u062a\u0631\u064a\u062f \u062a\u062d\u0631\u064a\u0631 \u0645\u062c\u0645\u0648\u0639\u0629 \u0643\u0627\u0645\u0644\u0629 \u0645\u0646 \u0627\u0644\u0623\u062d\u062f\u0627\u062b \u0627\u0644\u0645\u062a\u0643\u0631\u0631\u0629\u061f",section_recurring:"\u062a\u0643\u0631\u0627\u0631 \u0627\u0644\u062d\u062f\u062b",button_recurring:"\u062a\u0639\u0637\u064a\u0644",button_recurring_open:"\u062a\u0645\u0643\u064a\u0646",button_edit_series:"\u062a\u062d\u0631\u064a\u0631 \u0633\u0644\u0633\u0644\u0629",button_edit_occurrence:"\u062a\u0639\u062f\u064a\u0644 \u0646\u0633\u062e\u0629",grid_tab:"\u062c\u062f\u0648\u0644",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},pe={date:{month_full:["\u0421\u0442\u0443\u0434\u0437\u0435\u043d\u044c","\u041b\u044e\u0442\u044b","\u0421\u0430\u043a\u0430\u0432\u0456\u043a","\u041a\u0440\u0430\u0441\u0430\u0432\u0456\u043a","Ma\u0439","\u0427\u044d\u0440\u0432\u0435\u043d\u044c","\u041b\u0456\u043f\u0435\u043d\u044c","\u0416\u043d\u0456\u0432\u0435\u043d\u044c","\u0412\u0435\u0440\u0430\u0441\u0435\u043d\u044c","\u041a\u0430\u0441\u0442\u0440\u044b\u0447\u043d\u0456\u043a","\u041b\u0456\u0441\u0442\u0430\u043f\u0430\u0434","\u0421\u043d\u0435\u0436\u0430\u043d\u044c"],month_short:["\u0421\u0442\u0443\u0434\u0437","\u041b\u044e\u0442","\u0421\u0430\u043a","\u041a\u0440\u0430\u0441","Ma\u0439","\u0427\u044d\u0440","\u041b\u0456\u043f","\u0416\u043d\u0456\u0432","\u0412\u0435\u0440","\u041a\u0430\u0441\u0442","\u041b\u0456\u0441\u0442","\u0421\u043d\u0435\u0436"],day_full:["\u041d\u044f\u0434\u0437\u0435\u043b\u044f","\u041f\u0430\u043d\u044f\u0434\u0437\u0435\u043b\u0430\u043a","\u0410\u045e\u0442\u043e\u0440\u0430\u043a","\u0421\u0435\u0440\u0430\u0434\u0430","\u0427\u0430\u0446\u0432\u0435\u0440","\u041f\u044f\u0442\u043d\u0456\u0446\u0430","\u0421\u0443\u0431\u043e\u0442\u0430"],day_short:["\u041d\u0434","\u041f\u043d","\u0410\u045e\u0442","\u0421\u0440","\u0427\u0446\u0432","\u041f\u0442","\u0421\u0431"]},labels:{dhx_cal_today_button:"\u0421\u0451\u043d\u043d\u044f",day_tab:"\u0414\u0437\u0435\u043d\u044c",week_tab:"\u0422\u044b\u0434\u0437\u0435\u043d\u044c",month_tab:"\u041c\u0435\u0441\u044f\u0446",new_event:"\u041d\u043e\u0432\u0430\u044f \u043f\u0430\u0434\u0437\u0435\u044f",icon_save:"\u0417\u0430\u0445\u0430\u0432\u0430\u0446\u044c",icon_cancel:"\u0410\u0434\u043c\u044f\u043d\u0456\u0446\u044c",icon_details:"\u0414\u044d\u0442\u0430\u043b\u0456",icon_edit:"\u0417\u043c\u044f\u043d\u0456\u0446\u044c",icon_delete:"\u0412\u044b\u0434\u0430\u043b\u0456\u0446\u044c",confirm_closing:"",confirm_deleting:"\u041f\u0430\u0434\u0437\u0435\u044f \u0431\u0443\u0434\u0437\u0435 \u0432\u044b\u0434\u0430\u043b\u0435\u043d\u0430 \u043d\u0435\u0437\u0432\u0430\u0440\u043e\u0442\u043d\u0430, \u043f\u0440\u0430\u0446\u044f\u0433\u043d\u0443\u0446\u044c?",section_description:"\u0410\u043f\u0456\u0441\u0430\u043d\u043d\u0435",section_time:"\u041f\u0435\u0440\u044b\u044f\u0434 \u0447\u0430\u0441\u0443",full_day:"\u0423\u0432\u0435\u0441\u044c \u0434\u0437\u0435\u043d\u044c",confirm_recurring:"\u0412\u044b \u0445\u043e\u0447\u0430\u0446\u0435 \u0437\u043c\u044f\u043d\u0456\u0446\u044c \u0443\u0441\u044e \u0441\u0435\u0440\u044b\u044e \u043f\u0430\u045e\u0442\u0430\u0440\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u0430\u0434\u0437\u0435\u0439?",section_recurring:"\u041f\u0430\u045e\u0442\u0430\u0440\u044d\u043d\u043d\u0435",button_recurring:"\u0410\u0434\u043a\u043b\u044e\u0447\u0430\u043d\u0430",button_recurring_open:"\u0423\u043a\u043b\u044e\u0447\u0430\u043d\u0430",button_edit_series:"\u0420\u044d\u0434\u0430\u0433\u0430\u0432\u0430\u0446\u044c \u0441\u0435\u0440\u044b\u044e",button_edit_occurrence:"\u0420\u044d\u0434\u0430\u0433\u0430\u0432\u0430\u0446\u044c \u0430\u0441\u043e\u0431\u043d\u0456\u043a",agenda_tab:"\u0421\u043f\u0456\u0441",date:"\u0414\u0430\u0442\u0430",description:"\u0410\u043f\u0456\u0441\u0430\u043d\u043d\u0435",year_tab:"\u0413\u043e\u0434",week_agenda_tab:"\u0421\u043f\u0456\u0441",grid_tab:"\u0421\u043fic",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"\u0414\u0437\u0435\u043d\u044c",repeat_radio_week:"\u0422\u044b\u0434\u0437\u0435\u043d\u044c",repeat_radio_month:"\u041c\u0435\u0441\u044f\u0446",repeat_radio_year:"\u0413\u043e\u0434",repeat_radio_day_type:"\u041a\u043e\u0436\u043d\u044b",repeat_text_day_count:"\u0434\u0437\u0435\u043d\u044c",repeat_radio_day_type2:"\u041a\u043e\u0436\u043d\u044b \u043f\u0440\u0430\u0446\u043e\u045e\u043d\u044b \u0434\u0437\u0435\u043d\u044c",repeat_week:" \u041f\u0430\u045e\u0442\u0430\u0440\u0430\u0446\u044c \u043a\u043e\u0436\u043d\u044b",repeat_text_week_count:"\u0442\u044b\u0434\u0437\u0435\u043d\u044c",repeat_radio_month_type:"\u041f\u0430\u045e\u0442\u0430\u0440\u0430\u0446\u044c",repeat_radio_month_start:"",repeat_text_month_day:" \u0447\u044b\u0441\u043b\u0430 \u043a\u043e\u0436\u043d\u0430\u0433\u0430",repeat_text_month_count:"\u043c\u0435\u0441\u044f\u0446\u0443",repeat_text_month_count2_before:"\u043a\u043e\u0436\u043d\u044b ",repeat_text_month_count2_after:"\u043c\u0435\u0441\u044f\u0446",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"\u0434\u0435\u043d\u044c",select_year_month:"",repeat_radio_end:"\u0411\u0435\u0437 \u0434\u0430\u0442\u044b \u0437\u0430\u043a\u0430\u043d\u0447\u044d\u043d\u043d\u044f",repeat_text_occurences_count:"\u043f\u0430\u045e\u0442\u043e\u0440\u0430\u045e",repeat_radio_end2:"",repeat_radio_end3:"\u0414\u0430 ",month_for_recurring:["\u0421\u0442\u0443\u0434\u0437\u0435\u043d\u044f","\u041b\u044e\u0442\u0430\u0433\u0430","\u0421\u0430\u043a\u0430\u0432\u0456\u043a\u0430","\u041a\u0440\u0430\u0441\u0430\u0432\u0456\u043a\u0430","\u041c\u0430\u044f","\u0427\u044d\u0440\u0432\u0435\u043d\u044f","\u041b\u0456\u043fe\u043d\u044f","\u0416\u043d\u0456\u045e\u043d\u044f","\u0412\u0435\u0440\u0430\u0441\u043d\u044f","\u041a\u0430\u0441\u0442\u0440\u044b\u0447\u043d\u0456\u043a\u0430","\u041b\u0456\u0441\u0442\u0430\u043f\u0430\u0434\u0430","\u0421\u043d\u0435\u0436\u043d\u044f"],day_for_recurring:["\u041d\u044f\u0434\u0437\u0435\u043b\u044e","\u041f\u0430\u043d\u044f\u0434\u0437\u0435\u043b\u0430\u043a","\u0410\u045e\u0442\u043e\u0440\u0430\u043a","\u0421\u0435\u0440\u0430\u0434\u0443","\u0427\u0430\u0446\u0432\u0435\u0440","\u041f\u044f\u0442\u043d\u0456\u0446\u0443","\u0421\u0443\u0431\u043e\u0442\u0443"]}},xe={date:{month_full:["Gener","Febrer","Mar\xe7","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],month_short:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],day_full:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],day_short:["Dg","Dl","Dm","Dc","Dj","Dv","Ds"]},labels:{dhx_cal_today_button:"Hui",day_tab:"Dia",week_tab:"Setmana",month_tab:"Mes",new_event:"Nou esdeveniment",icon_save:"Guardar",icon_cancel:"Cancel\xb7lar",icon_details:"Detalls",icon_edit:"Editar",icon_delete:"Esborrar",confirm_closing:"",confirm_deleting:"L'esdeveniment s'esborrar\xe0 definitivament, continuar ?",section_description:"Descripci\xf3",section_time:"Periode de temps",full_day:"Tot el dia",confirm_recurring:"\xbfDesitja modificar el conjunt d'esdeveniments repetits?",section_recurring:"Repeteixca l'esdeveniment",button_recurring:"Impedit",button_recurring_open:"Perm\xe9s",button_edit_series:"Edit s\xe8rie",button_edit_occurrence:"Edita Inst\xe0ncia",agenda_tab:"Agenda",date:"Data",description:"Descripci\xf3",year_tab:"Any",week_agenda_tab:"Agenda",grid_tab:"Taula",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},Xe={date:{month_full:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],month_short:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],day_full:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],day_short:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},labels:{dhx_cal_today_button:"\u4eca\u5929",day_tab:"\u65e5",week_tab:"\u5468",month_tab:"\u6708",new_event:"\u65b0\u5efa\u65e5\u7a0b",icon_save:"\u4fdd\u5b58",icon_cancel:"\u5173\u95ed",icon_details:"\u8be6\u7ec6",icon_edit:"\u7f16\u8f91",icon_delete:"\u5220\u9664",confirm_closing:"\u8bf7\u786e\u8ba4\u662f\u5426\u64a4\u9500\u4fee\u6539!",confirm_deleting:"\u662f\u5426\u5220\u9664\u65e5\u7a0b?",section_description:"\u63cf\u8ff0",section_time:"\u65f6\u95f4\u8303\u56f4",full_day:"\u6574\u5929",confirm_recurring:"\u8bf7\u786e\u8ba4\u662f\u5426\u5c06\u65e5\u7a0b\u8bbe\u4e3a\u91cd\u590d\u6a21\u5f0f?",section_recurring:"\u91cd\u590d\u5468\u671f",button_recurring:"\u7981\u7528",button_recurring_open:"\u542f\u7528",button_edit_series:"\u7f16\u8f91\u7cfb\u5217",button_edit_occurrence:"\u7f16\u8f91\u5b9e\u4f8b",agenda_tab:"\u8bae\u7a0b",date:"\u65e5\u671f",description:"\u8bf4\u660e",year_tab:"\u4eca\u5e74",week_agenda_tab:"\u8bae\u7a0b",grid_tab:"\u7535\u7f51",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"\u6309\u5929",repeat_radio_week:"\u6309\u5468",repeat_radio_month:"\u6309\u6708",repeat_radio_year:"\u6309\u5e74",repeat_radio_day_type:"\u6bcf",repeat_text_day_count:"\u5929",repeat_radio_day_type2:"\u6bcf\u4e2a\u5de5\u4f5c\u65e5",repeat_week:" \u91cd\u590d \u6bcf",repeat_text_week_count:"\u661f\u671f\u7684:",repeat_radio_month_type:"\u91cd\u590d",repeat_radio_month_start:"\u5728",repeat_text_month_day:"\u65e5 \u6bcf",repeat_text_month_count:"\u6708",repeat_text_month_count2_before:"\u6bcf",repeat_text_month_count2_after:"\u6708",repeat_year_label:"\u5728",select_year_day2:"\u7684",repeat_text_year_day:"\u65e5",select_year_month:"\u6708",repeat_radio_end:"\u65e0\u7ed3\u675f\u65e5\u671f",repeat_text_occurences_count:"\u6b21\u7ed3\u675f",repeat_radio_end2:"\u91cd\u590d",repeat_radio_end3:"\u7ed3\u675f\u4e8e",month_for_recurring:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],day_for_recurring:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"]}},rt={date:{month_full:["Leden","\xdanor","B\u0159ezen","Duben","Kv\u011bten","\u010cerven","\u010cervenec","Srpen","Z\xe1\u0159\xed","\u0158\xedjen","Listopad","Prosinec"],month_short:["Led","\xdan","B\u0159e","Dub","Kv\u011b","\u010cer","\u010cec","Srp","Z\xe1\u0159\xed","\u0158\xedj","List","Pro"],day_full:["Ned\u011ble","Pond\u011bl\xed","\xdater\xfd","St\u0159eda","\u010ctvrtek","P\xe1tek","Sobota"],day_short:["Ne","Po","\xdat","St","\u010ct","P\xe1","So"]},labels:{dhx_cal_today_button:"Dnes",day_tab:"Den",week_tab:"T\xfdden",month_tab:"M\u011bs\xedc",new_event:"Nov\xe1 ud\xe1lost",icon_save:"Ulo\u017eit",icon_cancel:"Zp\u011bt",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Smazat",confirm_closing:"",confirm_deleting:"Ud\xe1lost bude trvale smaz\xe1na, opravdu?",section_description:"Pozn\xe1mky",section_time:"Doba platnosti",confirm_recurring:"P\u0159ejete si upravit celou \u0159adu opakovan\xfdch ud\xe1lost\xed?",section_recurring:"Opakov\xe1n\xed ud\xe1losti",button_recurring:"Vypnuto",button_recurring_open:"Zapnuto",button_edit_series:"Edit series",button_edit_occurrence:"Upravit instance",agenda_tab:"Program",date:"Datum",description:"Pozn\xe1mka",year_tab:"Rok",full_day:"Full day",week_agenda_tab:"Program",grid_tab:"M\u0159\xed\u017eka",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Denn\u011b",repeat_radio_week:"T\xfddn\u011b",repeat_radio_month:"M\u011bs\xed\u010dn\u011b",repeat_radio_year:"Ro\u010dn\u011b",repeat_radio_day_type:"ka\u017ed\xfd",repeat_text_day_count:"Den",repeat_radio_day_type2:"pracovn\xed dny",repeat_week:"Opakuje ka\u017ed\xfdch",repeat_text_week_count:"T\xfddn\u016f na:",repeat_radio_month_type:"u ka\u017ed\xe9ho",repeat_radio_month_start:"na",repeat_text_month_day:"Den ka\u017ed\xe9ho",repeat_text_month_count:"M\u011bs\xedc",repeat_text_month_count2_before:"ka\u017ed\xfd",repeat_text_month_count2_after:"M\u011bs\xedc",repeat_year_label:"na",select_year_day2:"v",repeat_text_year_day:"Den v",select_year_month:"",repeat_radio_end:"bez data ukon\u010den\xed",repeat_text_occurences_count:"Ud\xe1losti",repeat_radio_end2:"po",repeat_radio_end3:"Konec",month_for_recurring:["Leden","\xdanor","B\u0159ezen","Duben","Kv\u011bten","\u010cerven","\u010cervenec","Srpen","Z\xe1\u0159\xed","\u0158\xedjen","Listopad","Prosinec"],day_for_recurring:["Ned\u011ble ","Pond\u011bl\xed","\xdater\xfd","St\u0159eda","\u010ctvrtek","P\xe1tek","Sobota"]}},tt={date:{month_full:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],day_short:["S\xf8n","Man","Tir","Ons","Tor","Fre","L\xf8r"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Uge",month_tab:"M\xe5ned",new_event:"Ny begivenhed",icon_save:"Gem",icon_cancel:"Fortryd",icon_details:"Detaljer",icon_edit:"Tilret",icon_delete:"Slet",confirm_closing:"Dine rettelser vil g\xe5 tabt.. Er dy sikker?",confirm_deleting:"Bigivenheden vil blive slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",confirm_recurring:"Vil du tilrette hele serien af gentagne begivenheder?",section_recurring:"Gentag begivenhed",button_recurring:"Frakoblet",button_recurring_open:"Tilkoblet",button_edit_series:"Rediger serien",button_edit_occurrence:"Rediger en kopi",agenda_tab:"Dagsorden",date:"Dato",description:"Beskrivelse",year_tab:"\xc5r",week_agenda_tab:"Dagsorden",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daglig",repeat_radio_week:"Ugenlig",repeat_radio_month:"M\xe5nedlig",repeat_radio_year:"\xc5rlig",repeat_radio_day_type:"Hver",repeat_text_day_count:"dag",repeat_radio_day_type2:"P\xe5 hver arbejdsdag",repeat_week:" Gentager sig hver",repeat_text_week_count:"uge p\xe5 f\xf8lgende dage:",repeat_radio_month_type:"Hver den",repeat_radio_month_start:"Den",repeat_text_month_day:" i hver",repeat_text_month_count:"m\xe5ned",repeat_text_month_count2_before:"hver",repeat_text_month_count2_after:"m\xe5ned",repeat_year_label:"Den",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"",repeat_radio_end:"Ingen slutdato",repeat_text_occurences_count:"gentagelse",repeat_radio_end2:"Efter",repeat_radio_end3:"Slut",month_for_recurring:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],day_for_recurring:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"]}},Re={date:{month_full:[" Januar"," Februar"," M\xe4rz "," April"," Mai"," Juni"," Juli"," August"," September "," Oktober"," November "," Dezember"],month_short:["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],day_full:["Sonntag","Montag","Dienstag"," Mittwoch"," Donnerstag","Freitag","Samstag"],day_short:["So","Mo","Di","Mi","Do","Fr","Sa"]},labels:{dhx_cal_today_button:"Heute",day_tab:"Tag",week_tab:"Woche",month_tab:"Monat",new_event:"neuer Eintrag",icon_save:"Speichern",icon_cancel:"Abbrechen",icon_details:"Details",icon_edit:"\xc4ndern",icon_delete:"L\xf6schen",confirm_closing:"",confirm_deleting:"Der Eintrag wird gel\xf6scht",section_description:"Beschreibung",section_time:"Zeitspanne",full_day:"Ganzer Tag",confirm_recurring:"Wollen Sie alle Eintr\xe4ge bearbeiten oder nur diesen einzelnen Eintrag?",section_recurring:"Wiederholung",button_recurring:"Aus",button_recurring_open:"An",button_edit_series:"Bearbeiten Sie die Serie",button_edit_occurrence:"Bearbeiten Sie eine Kopie",agenda_tab:"Agenda",date:"Datum",description:"Beschreibung",year_tab:"Jahre",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"T\xe4glich",repeat_radio_week:"W\xf6chentlich",repeat_radio_month:"Monatlich",repeat_radio_year:"J\xe4hrlich",repeat_radio_day_type:"jeden",repeat_text_day_count:"Tag",repeat_radio_day_type2:"an jedem Arbeitstag",repeat_week:" Wiederholt sich jede",repeat_text_week_count:"Woche am:",repeat_radio_month_type:"an jedem",repeat_radio_month_start:"am",repeat_text_month_day:"Tag eines jeden",repeat_text_month_count:"Monats",repeat_text_month_count2_before:"jeden",repeat_text_month_count2_after:"Monats",repeat_year_label:"am",select_year_day2:"im",repeat_text_year_day:"Tag im",select_year_month:"",repeat_radio_end:"kein Enddatum",repeat_text_occurences_count:"Ereignissen",repeat_radio_end3:"Schlu\xdf",repeat_radio_end2:"nach",month_for_recurring:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],day_for_recurring:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]}},ot={date:{month_full:["\u0399\u03b1\u03bd\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2","\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2","\u039c\u03ac\u03c1\u03c4\u03b9\u03bf\u03c2","\u0391\u03c0\u03c1\u03af\u03bb\u03b9\u03bf\u03c2","\u039c\u03ac\u03ca\u03bf\u03c2","\u0399\u03bf\u03cd\u03bd\u03b9\u03bf\u03c2","\u0399\u03bf\u03cd\u03bb\u03b9\u03bf\u03c2","\u0391\u03cd\u03b3\u03bf\u03c5\u03c3\u03c4\u03bf\u03c2","\u03a3\u03b5\u03c0\u03c4\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2","\u039f\u03ba\u03c4\u03ce\u03b2\u03c1\u03b9\u03bf\u03c2","\u039d\u03bf\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2","\u0394\u03b5\u03ba\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2"],month_short:["\u0399\u0391\u039d","\u03a6\u0395\u0392","\u039c\u0391\u03a1","\u0391\u03a0\u03a1","\u039c\u0391\u0399","\u0399\u039f\u03a5\u039d","\u0399\u039f\u03a5\u039b","\u0391\u03a5\u0393","\u03a3\u0395\u03a0","\u039f\u039a\u03a4","\u039d\u039f\u0395","\u0394\u0395\u039a"],day_full:["\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae","\u0394\u03b5\u03c5\u03c4\u03ad\u03c1\u03b1","\u03a4\u03c1\u03af\u03c4\u03b7","\u03a4\u03b5\u03c4\u03ac\u03c1\u03c4\u03b7","\u03a0\u03ad\u03bc\u03c0\u03c4\u03b7","\u03a0\u03b1\u03c1\u03b1\u03c3\u03ba\u03b5\u03c5\u03ae","\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae"],day_short:["\u039a\u03a5","\u0394\u0395","\u03a4\u03a1","\u03a4\u0395","\u03a0\u0395","\u03a0\u0391","\u03a3\u0391"]},labels:{dhx_cal_today_button:"\u03a3\u03ae\u03bc\u03b5\u03c1\u03b1",day_tab:"\u0397\u03bc\u03ad\u03c1\u03b1",week_tab:"\u0395\u03b2\u03b4\u03bf\u03bc\u03ac\u03b4\u03b1",month_tab:"\u039c\u03ae\u03bd\u03b1\u03c2",new_event:"\u039d\u03ad\u03bf \u03ad\u03c1\u03b3\u03bf",icon_save:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7",icon_cancel:"\u0386\u03ba\u03c5\u03c1\u03bf",icon_details:"\u039b\u03b5\u03c0\u03c4\u03bf\u03bc\u03ad\u03c1\u03b5\u03b9\u03b5\u03c2",icon_edit:"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1",icon_delete:"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae",confirm_closing:"",confirm_deleting:"\u03a4\u03bf \u03ad\u03c1\u03b3\u03bf \u03b8\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03b5\u03af \u03bf\u03c1\u03b9\u03c3\u03c4\u03b9\u03ba\u03ac. \u0398\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03c3\u03c5\u03bd\u03b5\u03c7\u03af\u03c3\u03b5\u03c4\u03b5;",section_description:"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae",section_time:"\u03a7\u03c1\u03bf\u03bd\u03b9\u03ba\u03ae \u03c0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2",full_day:"\u03a0\u03bb\u03ae\u03c1\u03b7\u03c2 \u0397\u03bc\u03ad\u03c1\u03b1",confirm_recurring:"\u0398\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03b8\u03b5\u03af\u03c4\u03b5 \u03bf\u03bb\u03cc\u03ba\u03bb\u03b7\u03c1\u03b7 \u03c4\u03b7\u03bd \u03bf\u03bc\u03ac\u03b4\u03b1 \u03c4\u03c9\u03bd \u03b5\u03c0\u03b1\u03bd\u03b1\u03bb\u03b1\u03bc\u03b2\u03b1\u03bd\u03cc\u03bc\u03b5\u03bd\u03c9\u03bd \u03ad\u03c1\u03b3\u03c9\u03bd;",section_recurring:"\u0395\u03c0\u03b1\u03bd\u03b1\u03bb\u03b1\u03bc\u03b2\u03b1\u03bd\u03cc\u03bc\u03b5\u03bd\u03bf \u03ad\u03c1\u03b3\u03bf",button_recurring:"\u0391\u03bd\u03b5\u03bd\u03b5\u03c1\u03b3\u03cc",button_recurring_open:"\u0395\u03bd\u03b5\u03c1\u03b3\u03cc",button_edit_series:"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03c4\u03b5\u03af\u03c4\u03b5 \u03c4\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac",button_edit_occurrence:"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03ad\u03bd\u03b1 \u03b1\u03bd\u03c4\u03af\u03b3\u03c1\u03b1\u03c6\u03bf",agenda_tab:"\u0397\u03bc\u03b5\u03c1\u03ae\u03c3\u03b9\u03b1 \u0394\u03b9\u03ac\u03c4\u03b1\u03be\u03b7",date:"\u0397\u03bc\u03b5\u03c1\u03bf\u03bc\u03b7\u03bd\u03af\u03b1",description:"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae",year_tab:"\u0388\u03c4\u03bf\u03c2",week_agenda_tab:"\u0397\u03bc\u03b5\u03c1\u03ae\u03c3\u03b9\u03b1 \u0394\u03b9\u03ac\u03c4\u03b1\u03be\u03b7",grid_tab:"\u03a0\u03bb\u03ad\u03b3\u03bc\u03b1",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"\u0397\u03bc\u03b5\u03c1\u03b7\u03c3\u03af\u03c9\u03c2",repeat_radio_week:"\u0395\u03b2\u03b4\u03bf\u03bc\u03b1\u03b4\u03b9\u03b1\u03af\u03c9\u03c2",repeat_radio_month:"\u039c\u03b7\u03bd\u03b9\u03b1\u03af\u03c9\u03c2",repeat_radio_year:"\u0395\u03c4\u03b7\u03c3\u03af\u03c9\u03c2",repeat_radio_day_type:"\u039a\u03ac\u03b8\u03b5",repeat_text_day_count:"\u03b7\u03bc\u03ad\u03c1\u03b1",repeat_radio_day_type2:"\u039a\u03ac\u03b8\u03b5 \u03b5\u03c1\u03b3\u03ac\u03c3\u03b9\u03bc\u03b7",repeat_week:" \u0395\u03c0\u03b1\u03bd\u03ac\u03bb\u03b7\u03c8\u03b7 \u03ba\u03ac\u03b8\u03b5",repeat_text_week_count:"\u03b5\u03b2\u03b4\u03bf\u03bc\u03ac\u03b4\u03b1 \u03c4\u03b9\u03c2 \u03b5\u03c0\u03cc\u03bc\u03b5\u03bd\u03b5\u03c2 \u03b7\u03bc\u03ad\u03c1\u03b5\u03c2:",repeat_radio_month_type:"\u0395\u03c0\u03b1\u03bd\u03ac\u03bb\u03b7\u03c8\u03b7",repeat_radio_month_start:"\u03a4\u03b7\u03bd",repeat_text_month_day:"\u03b7\u03bc\u03ad\u03c1\u03b1 \u03ba\u03ac\u03b8\u03b5",repeat_text_month_count:"\u03bc\u03ae\u03bd\u03b1",repeat_text_month_count2_before:"\u03ba\u03ac\u03b8\u03b5",repeat_text_month_count2_after:"\u03bc\u03ae\u03bd\u03b1",repeat_year_label:"\u03a4\u03b7\u03bd",select_year_day2:"\u03c4\u03bf\u03c5",repeat_text_year_day:"\u03b7\u03bc\u03ad\u03c1\u03b1",select_year_month:"\u03bc\u03ae\u03bd\u03b1",repeat_radio_end:"\u03a7\u03c9\u03c1\u03af\u03c2 \u03b7\u03bc\u03b5\u03c1\u03bf\u03bc\u03b7\u03bd\u03af\u03b1 \u03bb\u03ae\u03be\u03b5\u03c9\u03c2",repeat_text_occurences_count:"\u03b5\u03c0\u03b1\u03bd\u03b1\u03bb\u03ae\u03c8\u03b5\u03b9\u03c2",repeat_radio_end3:"\u039b\u03ae\u03b3\u03b5\u03b9 \u03c4\u03b7\u03bd",repeat_radio_end2:"\u039c\u03b5\u03c4\u03ac \u03b1\u03c0\u03cc",month_for_recurring:["\u0399\u03b1\u03bd\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2","\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2","\u039c\u03ac\u03c1\u03c4\u03b9\u03bf\u03c2","\u0391\u03c0\u03c1\u03af\u03bb\u03b9\u03bf\u03c2","\u039c\u03ac\u03ca\u03bf\u03c2","\u0399\u03bf\u03cd\u03bd\u03b9\u03bf\u03c2","\u0399\u03bf\u03cd\u03bb\u03b9\u03bf\u03c2","\u0391\u03cd\u03b3\u03bf\u03c5\u03c3\u03c4\u03bf\u03c2","\u03a3\u03b5\u03c0\u03c4\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2","\u039f\u03ba\u03c4\u03ce\u03b2\u03c1\u03b9\u03bf\u03c2","\u039d\u03bf\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2","\u0394\u03b5\u03ba\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2"],day_for_recurring:["\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae","\u0394\u03b5\u03c5\u03c4\u03ad\u03c1\u03b1","\u03a4\u03c1\u03af\u03c4\u03b7","\u03a4\u03b5\u03c4\u03ac\u03c1\u03c4\u03b7","\u03a0\u03ad\u03bc\u03c0\u03c4\u03b7","\u03a0\u03b1\u03c1\u03b1\u03c3\u03ba\u03b5\u03c5\u03ae","\u03a3\u03ac\u03b2\u03b2\u03b1\u03c4\u03bf"]}},pt={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{dhx_cal_today_button:"Today",day_tab:"Day",week_tab:"Week",month_tab:"Month",new_event:"New event",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Event will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",full_day:"Full day",confirm_recurring:"Do you want to edit the whole set of repeated events?",section_recurring:"Repeat event",button_recurring:"Disabled",button_recurring_open:"Enabled",button_edit_series:"Edit series",button_edit_occurrence:"Edit occurrence",agenda_tab:"Agenda",date:"Date",description:"Description",year_tab:"Year",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daily",repeat_radio_week:"Weekly",repeat_radio_month:"Monthly",repeat_radio_year:"Yearly",repeat_radio_day_type:"Every",repeat_text_day_count:"day",repeat_radio_day_type2:"Every workday",repeat_week:" Repeat every",repeat_text_week_count:"week next days:",repeat_radio_month_type:"Repeat",repeat_radio_month_start:"On",repeat_text_month_day:"day every",repeat_text_month_count:"month",repeat_text_month_count2_before:"every",repeat_text_month_count2_after:"month",repeat_year_label:"On",select_year_day2:"of",repeat_text_year_day:"day",select_year_month:"month",repeat_radio_end:"No end date",repeat_text_occurences_count:"occurrences",repeat_radio_end2:"After",repeat_radio_end3:"End by",month_for_recurring:["January","February","March","April","May","June","July","August","September","October","November","December"],day_for_recurring:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},ct={date:{month_full:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],month_short:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],day_full:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],day_short:["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"]},labels:{dhx_cal_today_button:"Hoy",day_tab:"D\xeda",week_tab:"Semana",month_tab:"Mes",new_event:"Nuevo evento",icon_save:"Guardar",icon_cancel:"Cancelar",icon_details:"Detalles",icon_edit:"Editar",icon_delete:"Eliminar",confirm_closing:"",confirm_deleting:"El evento se borrar\xe1 definitivamente, \xbfcontinuar?",section_description:"Descripci\xf3n",section_time:"Per\xedodo",full_day:"Todo el d\xeda",confirm_recurring:"\xbfDesea modificar el conjunto de eventos repetidos?",section_recurring:"Repita el evento",button_recurring:"Impedido",button_recurring_open:"Permitido",button_edit_series:"Editar la serie",button_edit_occurrence:"Editar este evento",agenda_tab:"D\xeda",date:"Fecha",description:"Descripci\xf3n",year_tab:"A\xf1o",week_agenda_tab:"D\xeda",grid_tab:"Reja",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Diariamente",repeat_radio_week:"Semanalmente",repeat_radio_month:"Mensualmente",repeat_radio_year:"Anualmente",repeat_radio_day_type:"Cada",repeat_text_day_count:"dia",repeat_radio_day_type2:"Cada jornada de trabajo",repeat_week:" Repetir cada",repeat_text_week_count:"semana:",repeat_radio_month_type:"Repita",repeat_radio_month_start:"El",repeat_text_month_day:"dia cada ",repeat_text_month_count:"mes",repeat_text_month_count2_before:"cada",repeat_text_month_count2_after:"mes",repeat_year_label:"El",select_year_day2:"del",repeat_text_year_day:"dia",select_year_month:"mes",repeat_radio_end:"Sin fecha de finalizaci\xf3n",repeat_text_occurences_count:"ocurrencias",repeat_radio_end3:"Fin",repeat_radio_end2:"Despu\xe9s de",month_for_recurring:["Enero","Febrero","\u041c\u0430rzo","\u0410bril","Mayo","Junio","Julio","\u0410gosto","Setiembre","Octubre","Noviembre","Diciembre"],day_for_recurring:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jeuves","Viernes","Sabado"]}},st={date:{month_full:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],month_short:["Tam","Hel","Maa","Huh","Tou","Kes","Hei","Elo","Syy","Lok","Mar","Jou"],day_full:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],day_short:["Su","Ma","Ti","Ke","To","Pe","La"]},labels:{dhx_cal_today_button:"T\xe4n\xe4\xe4n",day_tab:"P\xe4iv\xe4",week_tab:"Viikko",month_tab:"Kuukausi",new_event:"Uusi tapahtuma",icon_save:"Tallenna",icon_cancel:"Peru",icon_details:"Tiedot",icon_edit:"Muokkaa",icon_delete:"Poista",confirm_closing:"",confirm_deleting:"Haluatko varmasti poistaa tapahtuman?",section_description:"Kuvaus",section_time:"Aikajakso",full_day:"Koko p\xe4iv\xe4",confirm_recurring:"Haluatko varmasti muokata toistuvan tapahtuman kaikkia jaksoja?",section_recurring:"Toista tapahtuma",button_recurring:"Ei k&auml;yt&ouml;ss&auml;",button_recurring_open:"K&auml;yt&ouml;ss&auml;",button_edit_series:"Muokkaa sarja",button_edit_occurrence:"Muokkaa kopio",agenda_tab:"Esityslista",date:"P\xe4iv\xe4m\xe4\xe4r\xe4",description:"Kuvaus",year_tab:"Vuoden",week_agenda_tab:"Esityslista",grid_tab:"Ritil\xe4",drag_to_create:"Luo uusi vet\xe4m\xe4ll\xe4",drag_to_move:"Siirr\xe4 vet\xe4m\xe4ll\xe4",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"P&auml;ivitt&auml;in",repeat_radio_week:"Viikoittain",repeat_radio_month:"Kuukausittain",repeat_radio_year:"Vuosittain",repeat_radio_day_type:"Joka",repeat_text_day_count:"p&auml;iv&auml;",repeat_radio_day_type2:"Joka arkip&auml;iv&auml;",repeat_week:"Toista joka",repeat_text_week_count:"viikko n&auml;in&auml; p&auml;ivin&auml;:",repeat_radio_month_type:"Toista",repeat_radio_month_start:"",repeat_text_month_day:"p&auml;iv&auml;n&auml; joka",repeat_text_month_count:"kuukausi",repeat_text_month_count2_before:"joka",repeat_text_month_count2_after:"kuukausi",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"p&auml;iv&auml;",select_year_month:"kuukausi",repeat_radio_end:"Ei loppumisaikaa",repeat_text_occurences_count:"Toiston j&auml;lkeen",repeat_radio_end3:"Loppuu",repeat_radio_end2:"",month_for_recurring:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],day_for_recurring:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"]}},Ze={date:{month_full:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],month_short:["Jan","F\xe9v","Mar","Avr","Mai","Juin","Juil","Ao\xfb","Sep","Oct","Nov","D\xe9c"],day_full:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],day_short:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},labels:{dhx_cal_today_button:"Aujourd'hui",day_tab:"Jour",week_tab:"Semaine",month_tab:"Mois",new_event:"Nouvel \xe9v\xe9nement",icon_save:"Enregistrer",icon_cancel:"Annuler",icon_details:"D\xe9tails",icon_edit:"Modifier",icon_delete:"Effacer",confirm_closing:"",confirm_deleting:"L'\xe9v\xe9nement sera effac\xe9 sans appel, \xeates-vous s\xfbr ?",section_description:"Description",section_time:"P\xe9riode",full_day:"Journ\xe9e compl\xe8te",confirm_recurring:"Voulez-vous \xe9diter toute une s\xe9rie d'\xe9v\xe8nements r\xe9p\xe9t\xe9s?",section_recurring:"P\xe9riodicit\xe9",button_recurring:"D\xe9sactiv\xe9",button_recurring_open:"Activ\xe9",button_edit_series:"Modifier la s\xe9rie",button_edit_occurrence:"Modifier une copie",agenda_tab:"Jour",date:"Date",description:"Description",year_tab:"Ann\xe9e",week_agenda_tab:"Jour",grid_tab:"Grille",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Quotidienne",repeat_radio_week:"Hebdomadaire",repeat_radio_month:"Mensuelle",repeat_radio_year:"Annuelle",repeat_radio_day_type:"Chaque",repeat_text_day_count:"jour",repeat_radio_day_type2:"Chaque journ\xe9e de travail",repeat_week:" R\xe9p\xe9ter toutes les",repeat_text_week_count:"semaine:",repeat_radio_month_type:"R\xe9p\xe9ter",repeat_radio_month_start:"Le",repeat_text_month_day:"jour chaque",repeat_text_month_count:"mois",repeat_text_month_count2_before:"chaque",repeat_text_month_count2_after:"mois",repeat_year_label:"Le",select_year_day2:"du",repeat_text_year_day:"jour",select_year_month:"mois",repeat_radio_end:"Pas de date d&quot;ach\xe8vement",repeat_text_occurences_count:"occurrences",repeat_radio_end3:"Fin",repeat_radio_end2:"Apr\xe8s",month_for_recurring:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],day_for_recurring:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"]}},it={date:{month_full:["\u05d9\u05e0\u05d5\u05d0\u05e8","\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05d9\u05dc","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8","\u05e1\u05e4\u05d8\u05de\u05d1\u05e8","\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8","\u05e0\u05d5\u05d1\u05de\u05d1\u05e8","\u05d3\u05e6\u05de\u05d1\u05e8"],month_short:["\u05d9\u05e0\u05d5","\u05e4\u05d1\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0","\u05d9\u05d5\u05dc","\u05d0\u05d5\u05d2","\u05e1\u05e4\u05d8","\u05d0\u05d5\u05e7","\u05e0\u05d5\u05d1","\u05d3\u05e6\u05de"],day_full:["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"],day_short:["\u05d0","\u05d1","\u05d2","\u05d3","\u05d4","\u05d5","\u05e9"]},labels:{dhx_cal_today_button:"\u05d4\u05d9\u05d5\u05dd",day_tab:"\u05d9\u05d5\u05dd",week_tab:"\u05e9\u05d1\u05d5\u05e2",month_tab:"\u05d7\u05d5\u05d3\u05e9",new_event:"\u05d0\u05e8\u05d5\u05e2 \u05d7\u05d3\u05e9",icon_save:"\u05e9\u05de\u05d5\u05e8",icon_cancel:"\u05d1\u05d8\u05dc",icon_details:"\u05e4\u05e8\u05d8\u05d9\u05dd",icon_edit:"\u05e2\u05e8\u05d5\u05da",icon_delete:"\u05de\u05d7\u05e7",confirm_closing:"",confirm_deleting:"\u05d0\u05e8\u05d5\u05e2 \u05d9\u05de\u05d7\u05e7 \u05e1\u05d5\u05e4\u05d9\u05ea.\u05dc\u05d4\u05de\u05e9\u05d9\u05da?",section_description:"\u05ea\u05d9\u05d0\u05d5\u05e8",section_time:"\u05ea\u05e7\u05d5\u05e4\u05d4",confirm_recurring:"\u05d4\u05d0\u05dd \u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05e9\u05e0\u05d5\u05ea \u05db\u05dc \u05e1\u05d3\u05e8\u05ea \u05d0\u05e8\u05d5\u05e2\u05d9\u05dd \u05de\u05ea\u05de\u05e9\u05db\u05d9\u05dd?",section_recurring:"\u05dc\u05d4\u05e2\u05ea\u05d9\u05e7 \u05d0\u05e8\u05d5\u05e2",button_recurring:"\u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc",button_recurring_open:"\u05e4\u05e2\u05d9\u05dc",full_day:"\u05d9\u05d5\u05dd \u05e9\u05dc\u05dd",button_edit_series:"\u05e2\u05e8\u05d5\u05da \u05d0\u05ea \u05d4\u05e1\u05d3\u05e8\u05d4",button_edit_occurrence:"\u05e2\u05e8\u05d9\u05db\u05ea \u05e2\u05d5\u05ea\u05e7",agenda_tab:"\u05e1\u05d3\u05e8 \u05d9\u05d5\u05dd",date:"\u05ea\u05d0\u05e8\u05d9\u05da",description:"\u05ea\u05d9\u05d0\u05d5\u05e8",year_tab:"\u05dc\u05e9\u05e0\u05d4",week_agenda_tab:"\u05e1\u05d3\u05e8 \u05d9\u05d5\u05dd",grid_tab:"\u05e1\u05d5\u05e8\u05d2",drag_to_create:"Drag to create",drag_to_move:"\u05d2\u05e8\u05d5\u05e8 \u05db\u05d3\u05d9 \u05dc\u05d4\u05d6\u05d9\u05d6",message_ok:"OK",message_cancel:"\u05d1\u05d8\u05dc",next:"\u05d4\u05d1\u05d0",prev:"\u05d4\u05e7\u05d5\u05d3\u05dd",year:"\u05e9\u05e0\u05d4",month:"\u05d7\u05d5\u05d3\u05e9",day:"\u05d9\u05d5\u05dd",hour:"\u05e9\u05e2\u05d4",minute:"\u05d3\u05e7\u05d4",repeat_radio_day:"\u05d9\u05d5\u05de\u05d9",repeat_radio_week:"\u05e9\u05d1\u05d5\u05e2\u05d9",repeat_radio_month:"\u05d7\u05d5\u05d3\u05e9\u05d9",repeat_radio_year:"\u05e9\u05e0\u05ea\u05d9",repeat_radio_day_type:"\u05d7\u05d6\u05d5\u05e8 \u05db\u05dc",repeat_text_day_count:"\u05d9\u05de\u05d9\u05dd",repeat_radio_day_type2:"\u05d7\u05d6\u05d5\u05e8 \u05db\u05dc \u05d9\u05d5\u05dd \u05e2\u05d1\u05d5\u05d3\u05d4",repeat_week:" \u05d7\u05d6\u05d5\u05e8 \u05db\u05dc",repeat_text_week_count:"\u05e9\u05d1\u05d5\u05e2 \u05dc\u05e4\u05d9 \u05d9\u05de\u05d9\u05dd:",repeat_radio_month_type:"\u05d7\u05d6\u05d5\u05e8 \u05db\u05dc",repeat_radio_month_start:"\u05db\u05dc",repeat_text_month_day:"\u05d9\u05de\u05d9\u05dd \u05db\u05dc",repeat_text_month_count:"\u05d7\u05d5\u05d3\u05e9\u05d9\u05dd",repeat_text_month_count2_before:"\u05d7\u05d6\u05d5\u05e8 \u05db\u05dc",repeat_text_month_count2_after:"\u05d7\u05d5\u05d3\u05e9",repeat_year_label:"\u05db\u05dc",select_year_day2:"\u05d1\u05d7\u05d5\u05d3\u05e9",repeat_text_year_day:"\u05d9\u05de\u05d9\u05dd",select_year_month:"\u05d7\u05d5\u05d3\u05e9",repeat_radio_end:"\u05dc\u05e2\u05d5\u05dc\u05dd \u05dc\u05d0 \u05de\u05e1\u05ea\u05d9\u05d9\u05dd",repeat_text_occurences_count:"\u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd",repeat_radio_end3:"\u05de\u05e1\u05ea\u05d9\u05d9\u05dd \u05d1",repeat_radio_end2:"\u05d0\u05d7\u05e8\u05d9",month_for_recurring:["\u05d9\u05e0\u05d5\u05d0\u05e8","\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05d9\u05dc","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8","\u05e1\u05e4\u05d8\u05de\u05d1\u05e8","\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8","\u05e0\u05d5\u05d1\u05de\u05d1\u05e8","\u05d3\u05e6\u05de\u05d1\u05e8"],day_for_recurring:["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"]}},vt={date:{month_full:["Janu\xe1r","Febru\xe1r","M\xe1rcius","\xc1prilis","M\xe1jus","J\xfanius","J\xfalius","Augusztus","Szeptember","Okt\xf3ber","November","December"],month_short:["Jan","Feb","M\xe1r","\xc1pr","M\xe1j","J\xfan","J\xfal","Aug","Sep","Okt","Nov","Dec"],day_full:["Vas\xe1rnap","H\xe9tf\xf5","Kedd","Szerda","Cs\xfct\xf6rt\xf6k","P\xe9ntek","szombat"],day_short:["Va","H\xe9","Ke","Sze","Cs\xfc","P\xe9","Szo"]},labels:{dhx_cal_today_button:"Ma",day_tab:"Nap",week_tab:"H\xe9t",month_tab:"H\xf3nap",new_event:"\xdaj esem\xe9ny",icon_save:"Ment\xe9s",icon_cancel:"M\xe9gse",icon_details:"R\xe9szletek",icon_edit:"Szerkeszt\xe9s",icon_delete:"T\xf6rl\xe9s",confirm_closing:"",confirm_deleting:"Az esem\xe9ny t\xf6r\xf6lve lesz, biztosan folytatja?",section_description:"Le\xedr\xe1s",section_time:"Id\xf5szak",full_day:"Egesz napos",confirm_recurring:"Biztosan szerkeszteni akarod az \xf6sszes ism\xe9tl\xf5d\xf5 esem\xe9ny be\xe1ll\xedt\xe1s\xe1t?",section_recurring:"Esem\xe9ny ism\xe9tl\xe9se",button_recurring:"Tilt\xe1s",button_recurring_open:"Enged\xe9lyez\xe9s",button_edit_series:"Edit series",button_edit_occurrence:"Szerkeszt\xe9s b\xedr\xf3s\xe1g",agenda_tab:"Napirend",date:"D\xe1tum",description:"Le\xedr\xe1s",year_tab:"\xc9v",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},nt={date:{month_full:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],day_full:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],day_short:["Ming","Sen","Sel","Rab","Kam","Jum","Sab"]},labels:{dhx_cal_today_button:"Hari Ini",day_tab:"Hari",week_tab:"Minggu",month_tab:"Bulan",new_event:"Acara Baru",icon_save:"Simpan",icon_cancel:"Batal",icon_details:"Detail",icon_edit:"Edit",icon_delete:"Hapus",confirm_closing:"",confirm_deleting:"Acara akan dihapus",section_description:"Keterangan",section_time:"Periode",full_day:"Hari penuh",confirm_recurring:"Apakah acara ini akan berulang?",section_recurring:"Acara Rutin",button_recurring:"Tidak Difungsikan",button_recurring_open:"Difungsikan",button_edit_series:"Mengedit seri",button_edit_occurrence:"Mengedit salinan",agenda_tab:"Agenda",date:"Tanggal",description:"Keterangan",year_tab:"Tahun",week_agenda_tab:"Agenda",grid_tab:"Tabel",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},gt={date:{month_full:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],month_short:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],day_full:["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"],day_short:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},labels:{dhx_cal_today_button:"Oggi",day_tab:"Giorno",week_tab:"Settimana",month_tab:"Mese",new_event:"Nuovo evento",icon_save:"Salva",icon_cancel:"Chiudi",icon_details:"Dettagli",icon_edit:"Modifica",icon_delete:"Elimina",confirm_closing:"",confirm_deleting:"L'evento sar\xe0 eliminato, siete sicuri?",section_description:"Descrizione",section_time:"Periodo di tempo",full_day:"Intera giornata",confirm_recurring:"Vuoi modificare l'intera serie di eventi?",section_recurring:"Ripetere l'evento",button_recurring:"Disattivato",button_recurring_open:"Attivato",button_edit_series:"Modificare la serie",button_edit_occurrence:"Modificare una copia",agenda_tab:"Agenda",date:"Data",description:"Descrizione",year_tab:"Anno",week_agenda_tab:"Agenda",grid_tab:"Griglia",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Quotidiano",repeat_radio_week:"Settimanale",repeat_radio_month:"Mensile",repeat_radio_year:"Annuale",repeat_radio_day_type:"Ogni",repeat_text_day_count:"giorno",repeat_radio_day_type2:"Ogni giornata lavorativa",repeat_week:" Ripetere ogni",repeat_text_week_count:"settimana:",repeat_radio_month_type:"Ripetere",repeat_radio_month_start:"Il",repeat_text_month_day:"giorno ogni",repeat_text_month_count:"mese",repeat_text_month_count2_before:"ogni",repeat_text_month_count2_after:"mese",repeat_year_label:"Il",select_year_day2:"del",repeat_text_year_day:"giorno",select_year_month:"mese",repeat_radio_end:"Senza data finale",repeat_text_occurences_count:"occorenze",repeat_radio_end3:"Fine",repeat_radio_end2:"Dopo",month_for_recurring:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Jiugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],day_for_recurring:["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Joved\xec","Venerd\xec","Sabato"]}},Ye={date:{month_full:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],month_short:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],day_full:["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],day_short:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"]},labels:{dhx_cal_today_button:"\u4eca\u65e5",day_tab:"\u65e5",week_tab:"\u9031",month_tab:"\u6708",new_event:"\u65b0\u30a4\u30d9\u30f3\u30c8",icon_save:"\u4fdd\u5b58",icon_cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb",icon_details:"\u8a73\u7d30",icon_edit:"\u7de8\u96c6",icon_delete:"\u524a\u9664",confirm_closing:"",confirm_deleting:"\u30a4\u30d9\u30f3\u30c8\u5b8c\u5168\u306b\u524a\u9664\u3055\u308c\u307e\u3059\u3001\u5b9c\u3057\u3044\u3067\u3059\u304b\uff1f",section_description:"\u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3",section_time:"\u671f\u9593",confirm_recurring:"\u7e70\u308a\u8fd4\u3055\u308c\u3066\u3044\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u5168\u3066\u7de8\u96c6\u3057\u307e\u3059\u304b\uff1f",section_recurring:"\u30a4\u30d9\u30f3\u30c8\u3092\u7e70\u308a\u8fd4\u3059",button_recurring:"\u7121\u52b9",button_recurring_open:"\u6709\u52b9",full_day:"\u7d42\u65e5",button_edit_series:"\u30b7\u30ea\u30fc\u30ba\u3092\u7de8\u96c6\u3057\u307e\u3059",button_edit_occurrence:"\u30b3\u30d4\u30fc\u3092\u7de8\u96c6",agenda_tab:"\u8b70\u984c\u306f",date:"\u65e5\u4ed8",description:"\u8aac\u660e",year_tab:"\u4eca\u5e74",week_agenda_tab:"\u8b70\u984c\u306f",grid_tab:"\u30b0\u30ea\u30c3\u30c9",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}};var Et=function(){function t(j){for(var a in function(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}(this,t),this._locales={},j)this._locales[a]=j[a]}return a=[{key:"addLocale",value:function(j,a){this._locales[j]=a}},{key:"getLocale",value:function(j){return this._locales[j]}}],a&&function et(t,j){for(var a=0;a<j.length;a++){var v=j[a];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(t,v.key,v)}}(t.prototype,a),t;var a}(),Ct={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],day_short:["S\xf8n","Mon","Tir","Ons","Tor","Fre","L\xf8r"]},labels:{dhx_cal_today_button:"I dag",day_tab:"Dag",week_tab:"Uke",month_tab:"M\xe5ned",new_event:"Ny hendelse",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Rediger",icon_delete:"Slett",confirm_closing:"",confirm_deleting:"Hendelsen vil bli slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",confirm_recurring:"Vil du forandre hele dette settet av repeterende hendelser?",section_recurring:"Repeter hendelsen",button_recurring:"Av",button_recurring_open:"P\xe5",button_edit_series:"Rediger serien",button_edit_occurrence:"Redigere en kopi",agenda_tab:"Agenda",date:"Dato",description:"Beskrivelse",year_tab:"\xc5r",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daglig",repeat_radio_week:"Ukentlig",repeat_radio_month:"M\xe5nedlig",repeat_radio_year:"\xc5rlig",repeat_radio_day_type:"Hver",repeat_text_day_count:"dag",repeat_radio_day_type2:"Alle hverdager",repeat_week:" Gjentas hver",repeat_text_week_count:"uke p\xe5:",repeat_radio_month_type:"P\xe5 hver",repeat_radio_month_start:"P\xe5",repeat_text_month_day:"dag hver",repeat_text_month_count:"m\xe5ned",repeat_text_month_count2_before:"hver",repeat_text_month_count2_after:"m\xe5ned",repeat_year_label:"p\xe5",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"",repeat_radio_end:"Ingen sluttdato",repeat_text_occurences_count:"forekomst",repeat_radio_end3:"Stop den",repeat_radio_end2:"Etter",month_for_recurring:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],day_for_recurring:["Sondag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"]}},Nt={date:{month_full:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],month_short:["Jan","Feb","mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],day_short:["Zo","Ma","Di","Wo","Do","Vr","Za"]},labels:{dhx_cal_today_button:"Vandaag",day_tab:"Dag",week_tab:"Week",month_tab:"Maand",new_event:"Nieuw item",icon_save:"Opslaan",icon_cancel:"Annuleren",icon_details:"Details",icon_edit:"Bewerken",icon_delete:"Verwijderen",confirm_closing:"",confirm_deleting:"Item zal permanent worden verwijderd, doorgaan?",section_description:"Beschrijving",section_time:"Tijd periode",full_day:"Hele dag",confirm_recurring:"Wilt u alle terugkerende items bijwerken?",section_recurring:"Item herhalen",button_recurring:"Uit",button_recurring_open:"Aan",button_edit_series:"Bewerk de serie",button_edit_occurrence:"Bewerk een kopie",agenda_tab:"Agenda",date:"Datum",description:"Omschrijving",year_tab:"Jaar",week_agenda_tab:"Agenda",grid_tab:"Tabel",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Dagelijks",repeat_radio_week:"Wekelijks",repeat_radio_month:"Maandelijks",repeat_radio_year:"Jaarlijks",repeat_radio_day_type:"Elke",repeat_text_day_count:"dag(en)",repeat_radio_day_type2:"Elke werkdag",repeat_week:" Herhaal elke",repeat_text_week_count:"week op de volgende dagen:",repeat_radio_month_type:"Herhaal",repeat_radio_month_start:"Op",repeat_text_month_day:"dag iedere",repeat_text_month_count:"maanden",repeat_text_month_count2_before:"iedere",repeat_text_month_count2_after:"maanden",repeat_year_label:"Op",select_year_day2:"van",repeat_text_year_day:"dag",select_year_month:"maand",repeat_radio_end:"Geen eind datum",repeat_text_occurences_count:"keren",repeat_radio_end3:"Eindigd per",repeat_radio_end2:"Na",month_for_recurring:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],day_for_recurring:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"]}},Ie={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],day_short:["S\xf8n","Man","Tir","Ons","Tor","Fre","L\xf8r"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Uke",month_tab:"M\xe5ned",new_event:"Ny",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Endre",icon_delete:"Slett",confirm_closing:"Endringer blir ikke lagret, er du sikker?",confirm_deleting:"Oppf\xf8ringen vil bli slettet, er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",full_day:"Full dag",confirm_recurring:"Vil du endre hele settet med repeterende oppf\xf8ringer?",section_recurring:"Repeterende oppf\xf8ring",button_recurring:"Ikke aktiv",button_recurring_open:"Aktiv",button_edit_series:"Rediger serien",button_edit_occurrence:"Redigere en kopi",agenda_tab:"Agenda",date:"Dato",description:"Beskrivelse",year_tab:"\xc5r",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},me={date:{month_full:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],month_short:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Pa\u017a","Lis","Gru"],day_full:["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"],day_short:["Nie","Pon","Wto","\u015aro","Czw","Pi\u0105","Sob"]},labels:{dhx_cal_today_button:"Dzi\u015b",day_tab:"Dzie\u0144",week_tab:"Tydzie\u0144",month_tab:"Miesi\u0105c",new_event:"Nowe zdarzenie",icon_save:"Zapisz",icon_cancel:"Anuluj",icon_details:"Szczeg\xf3\u0142y",icon_edit:"Edytuj",icon_delete:"Usu\u0144",confirm_closing:"",confirm_deleting:"Zdarzenie zostanie usuni\u0119te na zawsze, kontynuowa\u0107?",section_description:"Opis",section_time:"Okres czasu",full_day:"Ca\u0142y dzie\u0144",confirm_recurring:"Czy chcesz edytowa\u0107 ca\u0142y zbi\xf3r powtarzaj\u0105cych si\u0119 zdarze\u0144?",section_recurring:"Powt\xf3rz zdarzenie",button_recurring:"Nieaktywne",button_recurring_open:"Aktywne",button_edit_series:"Edytuj seri\u0119",button_edit_occurrence:"Edytuj kopi\u0119",agenda_tab:"Agenda",date:"Data",description:"Opis",year_tab:"Rok",week_agenda_tab:"Agenda",grid_tab:"Tabela",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Codziennie",repeat_radio_week:"Co tydzie",repeat_radio_month:"Co miesic",repeat_radio_year:"Co rok",repeat_radio_day_type:"Kadego",repeat_text_day_count:"dnia",repeat_radio_day_type2:"Kadego dnia roboczego",repeat_week:" Powtarzaj kadego",repeat_text_week_count:"tygodnia w dni:",repeat_radio_month_type:"Powtrz",repeat_radio_month_start:"W",repeat_text_month_day:"dnia kadego",repeat_text_month_count:"miesica",repeat_text_month_count2_before:"kadego",repeat_text_month_count2_after:"miesica",repeat_year_label:"W",select_year_day2:"miesica",repeat_text_year_day:"dnia miesica",select_year_month:"",repeat_radio_end:"Bez daty kocowej",repeat_text_occurences_count:"wystpieniu/ach",repeat_radio_end3:"Zakocz w",repeat_radio_end2:"Po",month_for_recurring:["Stycznia","Lutego","Marca","Kwietnia","Maja","Czerwca","Lipca","Sierpnia","Wrzenia","Padziernka","Listopada","Grudnia"],day_for_recurring:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"]}},Be={date:{month_full:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],month_short:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],day_full:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"],day_short:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},labels:{dhx_cal_today_button:"Hoje",day_tab:"Dia",week_tab:"Semana",month_tab:"M\xeas",new_event:"Novo evento",icon_save:"Salvar",icon_cancel:"Cancelar",icon_details:"Detalhes",icon_edit:"Editar",icon_delete:"Deletar",confirm_closing:"",confirm_deleting:"Tem certeza que deseja excluir?",section_description:"Descri\xe7\xe3o",section_time:"Per\xedodo de tempo",full_day:"Dia inteiro",confirm_recurring:"Deseja editar todos esses eventos repetidos?",section_recurring:"Repetir evento",button_recurring:"Desabilitar",button_recurring_open:"Habilitar",button_edit_series:"Editar a s\xe9rie",button_edit_occurrence:"Editar uma c\xf3pia",agenda_tab:"Dia",date:"Data",description:"Descri\xe7\xe3o",year_tab:"Ano",week_agenda_tab:"Dia",grid_tab:"Grade",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Di\xe1rio",repeat_radio_week:"Semanal",repeat_radio_month:"Mensal",repeat_radio_year:"Anual",repeat_radio_day_type:"Cada",repeat_text_day_count:"dia(s)",repeat_radio_day_type2:"Cada trabalho di\xe1rio",repeat_week:" Repita cada",repeat_text_week_count:"semana:",repeat_radio_month_type:"Repetir",repeat_radio_month_start:"Em",repeat_text_month_day:"todo dia",repeat_text_month_count:"m\xeas",repeat_text_month_count2_before:"todo",repeat_text_month_count2_after:"m\xeas",repeat_year_label:"Em",select_year_day2:"of",repeat_text_year_day:"dia",select_year_month:"m\xeas",repeat_radio_end:"Sem data final",repeat_text_occurences_count:"ocorr\xeancias",repeat_radio_end3:"Fim",repeat_radio_end2:"Depois",month_for_recurring:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],day_for_recurring:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"]}},se={date:{month_full:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","November","December"],month_short:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],day_full:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"],day_short:["Du","Lu","Ma","Mi","Jo","Vi","Sa"]},labels:{dhx_cal_today_button:"Astazi",day_tab:"Zi",week_tab:"Saptamana",month_tab:"Luna",new_event:"Eveniment nou",icon_save:"Salveaza",icon_cancel:"Anuleaza",icon_details:"Detalii",icon_edit:"Editeaza",icon_delete:"Sterge",confirm_closing:"Schimbarile nu vor fi salvate, esti sigur?",confirm_deleting:"Evenimentul va fi sters permanent, esti sigur?",section_description:"Descriere",section_time:"Interval",full_day:"Toata ziua",confirm_recurring:"Vrei sa editezi toata seria de evenimente repetate?",section_recurring:"Repetare",button_recurring:"Dezactivata",button_recurring_open:"Activata",button_edit_series:"Editeaza serie",button_edit_occurrence:"Editeaza doar intrare",agenda_tab:"Agenda",date:"Data",description:"Descriere",year_tab:"An",week_agenda_tab:"Agenda",grid_tab:"Lista",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Zilnic",repeat_radio_week:"Saptamanal",repeat_radio_month:"Lunar",repeat_radio_year:"Anual",repeat_radio_day_type:"La fiecare",repeat_text_day_count:"zi(le)",repeat_radio_day_type2:"Fiecare zi lucratoare",repeat_week:" Repeta la fiecare",repeat_text_week_count:"saptamana in urmatoarele zile:",repeat_radio_month_type:"Repeta in",repeat_radio_month_start:"In a",repeat_text_month_day:"zi la fiecare",repeat_text_month_count:"luni",repeat_text_month_count2_before:"la fiecare",repeat_text_month_count2_after:"luni",repeat_year_label:"In",select_year_day2:"a lunii",repeat_text_year_day:"zi a lunii",select_year_month:"",repeat_radio_end:"Fara data de sfarsit",repeat_text_occurences_count:"evenimente",repeat_radio_end3:"La data",repeat_radio_end2:"Dupa",month_for_recurring:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],day_for_recurring:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"]}},De={date:{month_full:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","Ma\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","O\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],month_short:["\u042f\u043d\u0432","\u0424\u0435\u0432","Ma\u0440","A\u043f\u0440","Ma\u0439","\u0418\u044e\u043d","\u0418\u044e\u043b","A\u0432\u0433","\u0421\u0435\u043d","\u041e\u043a\u0442","\u041d\u043e\u044f","\u0414\u0435\u043a"],day_full:["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"],day_short:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"]},labels:{dhx_cal_today_button:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",day_tab:"\u0414\u0435\u043d\u044c",week_tab:"\u041d\u0435\u0434\u0435\u043b\u044f",month_tab:"\u041c\u0435\u0441\u044f\u0446",new_event:"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435",icon_save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon_cancel:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",icon_details:"\u0414\u0435\u0442\u0430\u043b\u0438",icon_edit:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",icon_delete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",confirm_closing:"",confirm_deleting:"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e, \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?",section_description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",section_time:"\u041f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438",full_day:"\u0412\u0435\u0441\u044c \u0434\u0435\u043d\u044c",confirm_recurring:"\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0441\u044e \u0441\u0435\u0440\u0438\u044e \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0438\u0445\u0441\u044f \u0441\u043e\u0431\u044b\u0442\u0438\u0439?",section_recurring:"\u041f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0435",button_recurring:"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043e",button_recurring_open:"\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e",button_edit_series:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0440\u0438\u044e",button_edit_occurrence:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440",agenda_tab:"\u0421\u043f\u0438\u0441\u043e\u043a",date:"\u0414\u0430\u0442\u0430",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",year_tab:"\u0413\u043e\u0434",week_agenda_tab:"\u0421\u043f\u0438\u0441\u043e\u043a",grid_tab:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"\u0414\u0435\u043d\u044c",repeat_radio_week:"\u041d\u0435\u0434\u0435\u043b\u044f",repeat_radio_month:"\u041c\u0435\u0441\u044f\u0446",repeat_radio_year:"\u0413\u043e\u0434",repeat_radio_day_type:"\u041a\u0430\u0436\u0434\u044b\u0439",repeat_text_day_count:"\u0434\u0435\u043d\u044c",repeat_radio_day_type2:"\u041a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0431\u043e\u0447\u0438\u0439 \u0434\u0435\u043d\u044c",repeat_week:" \u041f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c \u043a\u0430\u0436\u0434\u0443\u044e",repeat_text_week_count:"\u043d\u0435\u0434\u0435\u043b\u044e , \u0432:",repeat_radio_month_type:"\u041f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c",repeat_radio_month_start:"",repeat_text_month_day:" \u0447\u0438\u0441\u043b\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 ",repeat_text_month_count:"\u043c\u0435\u0441\u044f\u0446",repeat_text_month_count2_before:"\u043a\u0430\u0436\u0434\u044b\u0439 ",repeat_text_month_count2_after:"\u043c\u0435\u0441\u044f\u0446",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"\u0434\u0435\u043d\u044c",select_year_month:"",repeat_radio_end:"\u0411\u0435\u0437 \u0434\u0430\u0442\u044b \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",repeat_text_occurences_count:"\u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0439",repeat_radio_end3:"\u0414\u043e ",repeat_radio_end2:"",month_for_recurring:["\u042f\u043d\u0432\u0430\u0440\u044f","\u0424\u0435\u0432\u0440\u0430\u043b\u044f","\u041c\u0430\u0440\u0442\u0430","\u0410\u043f\u0440\u0435\u043b\u044f","\u041c\u0430\u044f","\u0418\u044e\u043d\u044f","\u0418\u044e\u043b\u044f","\u0410\u0432\u0433\u0443\u0441\u0442\u0430","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u041e\u043a\u0442\u044f\u0431\u0440\u044f","\u041d\u043e\u044f\u0431\u0440\u044f","\u0414\u0435\u043a\u0430\u0431\u0440\u044f"],day_for_recurring:["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0443","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0443","\u0421\u0443\u0431\u0431\u043e\u0442\u0443"]}},We={date:{month_full:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Nedelja","Ponedeljek","Torek","Sreda","\u010cetrtek","Petek","Sobota"],day_short:["Ned","Pon","Tor","Sre","\u010cet","Pet","Sob"]},labels:{dhx_cal_today_button:"Danes",day_tab:"Dan",week_tab:"Teden",month_tab:"Mesec",new_event:"Nov dogodek",icon_save:"Shrani",icon_cancel:"Prekli\u010di",icon_details:"Podrobnosti",icon_edit:"Uredi",icon_delete:"Izbri\u0161i",confirm_closing:"",confirm_deleting:"Dogodek bo izbrisan. \u017delite nadaljevati?",section_description:"Opis",section_time:"\u010casovni okvir",full_day:"Ves dan",confirm_recurring:"\u017delite urediti celoten set ponavljajo\u010dih dogodkov?",section_recurring:"Ponovi dogodek",button_recurring:"Onemogo\u010deno",button_recurring_open:"Omogo\u010deno",button_edit_series:"Edit series",button_edit_occurrence:"Edit occurrence",agenda_tab:"Zadeva",date:"Datum",description:"Opis",year_tab:"Leto",week_agenda_tab:"Zadeva",grid_tab:"Miza",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},ke={date:{month_full:["Janu\xe1r","Febru\xe1r","Marec","Apr\xedl","M\xe1j","J\xfan","J\xfal","August","September","Okt\xf3ber","November","December"],month_short:["Jan","Feb","Mar","Apr","M\xe1j","J\xfan","J\xfal","Aug","Sept","Okt","Nov","Dec"],day_full:["Nede\u013ea","Pondelok","Utorok","Streda","\u0160tvrtok","Piatok","Sobota"],day_short:["Ne","Po","Ut","St","\u0160t","Pi","So"]},labels:{dhx_cal_today_button:"Dnes",day_tab:"De\u0148",week_tab:"T\xfd\u017ede\u0148",month_tab:"Mesiac",new_event:"Nov\xe1 udalos\u0165",icon_save:"Ulo\u017ei\u0165",icon_cancel:"Sp\xe4\u0165",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Zmaza\u0165",confirm_closing:"Va\u0161e zmeny nebud\xfa ulo\u017een\xe9. Skuto\u010dne?",confirm_deleting:"Udalos\u0165 bude natrvalo vymazan\xe1. Skuto\u010dne?",section_description:"Pozn\xe1mky",section_time:"Doba platnosti",confirm_recurring:"Prajete si upravi\u0165 cel\xfa radu opakovan\xfdch udalost\xed?",section_recurring:"Opakovanie udalosti",button_recurring:"Vypnut\xe9",button_recurring_open:"Zapnut\xe9",button_edit_series:"Upravi\u0165 opakovania",button_edit_occurrence:"Upravi\u0165 in\u0161tancie",agenda_tab:"Program",date:"D\xe1tum",description:"Pozn\xe1mka",year_tab:"Rok",full_day:"Cel\xfd de\u0148",week_agenda_tab:"Program",grid_tab:"Mrie\u017eka",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Denne",repeat_radio_week:"T\xfd\u017edenne",repeat_radio_month:"Mesa\xe8ne",repeat_radio_year:"Ro\xe8ne",repeat_radio_day_type:"Ka\u017ed\xfd",repeat_text_day_count:"de\xf2",repeat_radio_day_type2:"Ka\u017ed\xfd prac. de\xf2",repeat_week:"Opakova ka\u017ed\xfd",repeat_text_week_count:"t\xfd\u017ede\xf2 v d\xf2och:",repeat_radio_month_type:"Opakova",repeat_radio_month_start:"On",repeat_text_month_day:"de\xf2 ka\u017ed\xfd",repeat_text_month_count:"mesiac",repeat_text_month_count2_before:"ka\u017ed\xfd",repeat_text_month_count2_after:"mesiac",repeat_year_label:"On",select_year_day2:"po\xe8as",repeat_text_year_day:"de\xf2",select_year_month:"mesiac",repeat_radio_end:"Bez d\xe1tumu ukon\xe8enia",repeat_text_occurences_count:"udalostiach",repeat_radio_end3:"Ukon\xe8i",repeat_radio_end2:"Po",month_for_recurring:["Janu\xe1r","Febru\xe1r","Marec","Apr\xedl","M\xe1j","J\xfan","J\xfal","August","September","Okt\xf3ber","November","December"],day_for_recurring:["Nede\xbea","Pondelok","Utorok","Streda","\u0160tvrtok","Piatok","Sobota"]}},Pe={date:{month_full:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"],day_short:["S\xf6n","M\xe5n","Tis","Ons","Tor","Fre","L\xf6r"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Vecka",month_tab:"M\xe5nad",new_event:"Ny h\xe4ndelse",icon_save:"Spara",icon_cancel:"\xc5ngra",icon_details:"Detaljer",icon_edit:"\xc4ndra",icon_delete:"Ta bort",confirm_closing:"",confirm_deleting:"\xc4r du s\xe4ker p\xe5 att du vill ta bort h\xe4ndelsen permanent?",section_description:"Beskrivning",section_time:"Tid",full_day:"Hela dagen",confirm_recurring:"Vill du redigera hela serien med repeterande h\xe4ndelser?",section_recurring:"Upprepa h\xe4ndelse",button_recurring:"Inaktiverat",button_recurring_open:"Aktiverat",button_edit_series:"Redigera serien",button_edit_occurrence:"Redigera en kopia",agenda_tab:"Dagordning",date:"Datum",description:"Beskrivning",year_tab:"\xc5r",week_agenda_tab:"Dagordning",grid_tab:"Galler",drag_to_create:"Dra f\xf6r att skapa ny",drag_to_move:"Dra f\xf6r att flytta",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Dagligen",repeat_radio_week:"Veckovis",repeat_radio_month:"M\xe5nadsvis",repeat_radio_year:"\xc5rligen",repeat_radio_day_type:"Var",repeat_text_day_count:"dag",repeat_radio_day_type2:"Varje arbetsdag",repeat_week:" Upprepa var",repeat_text_week_count:"vecka dessa dagar:",repeat_radio_month_type:"Upprepa",repeat_radio_month_start:"Den",repeat_text_month_day:"dagen var",repeat_text_month_count:"m\xe5nad",repeat_text_month_count2_before:"var",repeat_text_month_count2_after:"m\xe5nad",repeat_year_label:"Den",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"m\xe5nad",repeat_radio_end:"Inget slutdatum",repeat_text_occurences_count:"upprepningar",repeat_radio_end3:"Sluta efter",repeat_radio_end2:"Efter",month_for_recurring:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],day_for_recurring:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"]}},ce={date:{month_full:["Ocak","\xdeubat","Mart","Nisan","May\xfds","Haziran","Temmuz","A\xf0ustos","Eyl\xfcl","Ekim","Kas\xfdm","Aral\xfdk"],month_short:["Oca","\xdeub","Mar","Nis","May","Haz","Tem","A\xf0u","Eyl","Eki","Kas","Ara"],day_full:["Pazar","Pazartes,","Sal\xfd","\xc7ar\xfeamba","Per\xfeembe","Cuma","Cumartesi"],day_short:["Paz","Pts","Sal","\xc7ar","Per","Cum","Cts"]},labels:{dhx_cal_today_button:"Bug\xfcn",day_tab:"G\xfcn",week_tab:"Hafta",month_tab:"Ay",new_event:"Uygun",icon_save:"Kaydet",icon_cancel:"\xddptal",icon_details:"Detaylar",icon_edit:"D\xfczenle",icon_delete:"Sil",confirm_closing:"",confirm_deleting:"Etkinlik silinecek, devam?",section_description:"A\xe7\xfdklama",section_time:"Zaman aral\xfd\xf0\xfd",full_day:"Tam g\xfcn",confirm_recurring:"T\xfcm tekrar eden etkinlikler silinecek, devam?",section_recurring:"Etkinli\xf0i tekrarla",button_recurring:"Pasif",button_recurring_open:"Aktif",button_edit_series:"Dizi d\xfczenleme",button_edit_occurrence:"Bir kopyas\u0131n\u0131 d\xfczenleyin",agenda_tab:"Ajanda",date:"Tarih",description:"A\xe7\xfdklama",year_tab:"Y\xfdl",week_agenda_tab:"Ajanda",grid_tab:"Izgara",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},Ge={date:{month_full:["\u0421\u0456\u0447\u0435\u043d\u044c","\u041b\u044e\u0442\u0438\u0439","\u0411\u0435\u0440\u0435\u0437\u0435\u043d\u044c","\u041a\u0432\u0456\u0442\u0435\u043d\u044c","\u0422\u0440\u0430\u0432\u0435\u043d\u044c","\u0427\u0435\u0440\u0432\u0435\u043d\u044c","\u041b\u0438\u043f\u0435\u043d\u044c","\u0421\u0435\u0440\u043f\u0435\u043d\u044c","\u0412\u0435\u0440\u0435\u0441\u0435\u043d\u044c","\u0416\u043e\u0432\u0442\u0435\u043d\u044c","\u041b\u0438\u0441\u0442\u043e\u043f\u0430\u0434","\u0413\u0440\u0443\u0434\u0435\u043d\u044c"],month_short:["\u0421\u0456\u0447","\u041b\u044e\u0442","\u0411\u0435\u0440","\u041a\u0432\u0456","\u0422\u0440\u0430","\u0427\u0435\u0440","\u041b\u0438\u043f","\u0421\u0435\u0440","\u0412\u0435\u0440","\u0416\u043e\u0432","\u041b\u0438\u0441","\u0413\u0440\u0443"],day_full:["\u041d\u0435\u0434\u0456\u043b\u044f","\u041f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a","\u0412\u0456\u0432\u0442\u043e\u0440\u043e\u043a","\u0421\u0435\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440","\u041f'\u044f\u0442\u043d\u0438\u0446\u044f","\u0421\u0443\u0431\u043e\u0442\u0430"],day_short:["\u041d\u0435\u0434","\u041f\u043e\u043d","\u0412\u0456\u0432","\u0421\u0435\u0440","\u0427\u0435\u0442","\u041f\u0442\u043d","\u0421\u0443\u0431"]},labels:{dhx_cal_today_button:"\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456",day_tab:"\u0414\u0435\u043d\u044c",week_tab:"\u0422\u0438\u0436\u0434\u0435\u043d\u044c",month_tab:"\u041c\u0456\u0441\u044f\u0446\u044c",new_event:"\u041d\u043e\u0432\u0430 \u043f\u043e\u0434\u0456\u044f",icon_save:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438",icon_cancel:"\u0412\u0456\u0434\u043c\u0456\u043d\u0430",icon_details:"\u0414\u0435\u0442\u0430\u043b\u0456",icon_edit:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",icon_delete:"\u0412\u0438\u043b\u0443\u0447\u0438\u0442\u0438",confirm_closing:"",confirm_deleting:"\u041f\u043e\u0434\u0456\u044f \u0432\u0438\u043b\u0443\u0447\u0438\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0432\u0436\u0434\u0438. \u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456?",section_description:"\u041e\u043f\u0438\u0441",section_time:"\u0427\u0430\u0441\u043e\u0432\u0438\u0439 \u043f\u0440\u043e\u043c\u0456\u0436\u043e\u043a",full_day:"\u0412\u0435\u0441\u044c \u0434\u0435\u043d\u044c",confirm_recurring:"\u0425\u043e\u0447\u0435\u0442\u0435 \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0432\u0435\u0441\u044c \u043f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u0432\u0442\u043e\u0440\u044e\u0432\u0430\u043d\u0438\u0445 \u043f\u043e\u0434\u0456\u0439?",section_recurring:"\u041f\u043e\u0432\u0442\u043e\u0440\u044e\u0432\u0430\u043d\u0430 \u043f\u043e\u0434\u0456\u044f",button_recurring:"\u0412\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043e",button_recurring_open:"\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e",button_edit_series:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0441\u0435\u0440\u0456\u044e",button_edit_occurrence:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043f\u0440\u0438\u043c\u0456\u0440\u043d\u0438\u043a",agenda_tab:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a",date:"\u0414\u0430\u0442\u0430",description:"\u041e\u043f\u0438\u0441",year_tab:"\u0420\u0456\u043a",week_agenda_tab:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a",grid_tab:"\u0422\u0430\u0431\u043b\u0438\u0446\u044f",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"\u0414\u0435\u043d\u044c",repeat_radio_week:"\u0422\u0438\u0436\u0434\u0435\u043d\u044c",repeat_radio_month:"\u041c\u0456\u0441\u044f\u0446\u044c",repeat_radio_year:"\u0420\u0456\u043a",repeat_radio_day_type:"\u041a\u043e\u0436\u043d\u0438\u0439",repeat_text_day_count:"\u0434\u0435\u043d\u044c",repeat_radio_day_type2:"\u041a\u043e\u0436\u043d\u0438\u0439 \u0440\u043e\u0431\u043e\u0447\u0438\u0439 \u0434\u0435\u043d\u044c",repeat_week:" \u041f\u043e\u0432\u0442\u043e\u0440\u044e\u0432\u0430\u0442\u0438 \u043a\u043e\u0436\u0435\u043d",repeat_text_week_count:"\u0442\u0438\u0436\u0434\u0435\u043d\u044c , \u043f\u043e:",repeat_radio_month_type:"\u041f\u043e\u0432\u0442\u043e\u0440\u044e\u0432\u0430\u0442\u0438",repeat_radio_month_start:"",repeat_text_month_day:" \u0447\u0438\u0441\u043b\u0430 \u043a\u043e\u0436\u043d\u0438\u0439 ",repeat_text_month_count:"\u043c\u0456\u0441\u044f\u0446\u044c",repeat_text_month_count2_before:"\u043a\u043e\u0436\u0435\u043d ",repeat_text_month_count2_after:"\u043c\u0456\u0441\u044f\u0446\u044c",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"\u0434\u0435\u043d\u044c",select_year_month:"",repeat_radio_end:"\u0411\u0435\u0437 \u0434\u0430\u0442\u0438 \u0437\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u044f",repeat_text_occurences_count:"\u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u044c",repeat_radio_end3:"\u0414\u043e ",repeat_radio_end2:"",month_for_recurring:["\u0441\u0456\u0447\u043d\u044f","\u043b\u044e\u0442\u043e\u0433\u043e","\u0431\u0435\u0440\u0435\u0437\u043d\u044f","\u043a\u0432\u0456\u0442\u043d\u044f","\u0442\u0440\u0430\u0432\u043d\u044f","\u0447\u0435\u0440\u0432\u043d\u044f","\u043b\u0438\u043f\u043d\u044f","\u0441\u0435\u0440\u043f\u043d\u044f","\u0432\u0435\u0440\u0435\u0441\u043d\u044f","\u0436\u043e\u0432\u0442\u043d\u044f","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043d\u044f"],day_for_recurring:["\u041d\u0435\u0434\u0456\u043b\u044f\u043c","\u041f\u043e\u043d\u0435\u0434\u0456\u043b\u043a\u0430\u043c","\u0412\u0456\u0432\u0442\u043e\u0440\u043a\u0430\u043c","\u0421\u0435\u0440\u0435\u0434\u0430\u043c","\u0427\u0435\u0442\u0432\u0435\u0440\u0433\u0430\u043c","\u041f'\u044f\u0442\u043d\u0438\u0446\u044f\u043c","\u0421\u0443\u0431\u043e\u0442\u0430\u043c"]}};function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}var te=function(t){var i,o,c,j={version:"6.0.3"};o={agenda:"https://docs.dhtmlx.com/scheduler/agenda_view.html",grid:"https://docs.dhtmlx.com/scheduler/grid_view.html",map:"https://docs.dhtmlx.com/scheduler/map_view.html",unit:"https://docs.dhtmlx.com/scheduler/units_view.html",timeline:"https://docs.dhtmlx.com/scheduler/timeline_view.html",week_agenda:"https://docs.dhtmlx.com/scheduler/weekagenda_view.html",year:"https://docs.dhtmlx.com/scheduler/year_view.html",anythingElse:"https://docs.dhtmlx.com/scheduler/views.html"},c={agenda:"ext/dhtmlxscheduler_agenda_view.js",grid:"ext/dhtmlxscheduler_grid_view.js",map:"ext/dhtmlxscheduler_map_view.js",unit:"ext/dhtmlxscheduler_units.js",timeline:"ext/dhtmlxscheduler_timeline.js, ext/dhtmlxscheduler_treetimeline.js, ext/dhtmlxscheduler_daytimeline.js",week_agenda:"ext/dhtmlxscheduler_week_agenda.js",year:"ext/dhtmlxscheduler_year_view.js",limit:"ext/dhtmlxscheduler_limit.js"},(i=j)._commonErrorMessages={unknownView:function(h){var D=c[h]?"You're probably missing "+c[h]+".":"";return"`"+h+"` view is not defined. \nPlease check parameters you pass to `scheduler.init` or `scheduler.setCurrentView` in your code and ensure you've imported appropriate extensions. \nRelated docs: "+(o[h]||o.anythingElse)+"\n"+(D?D+"\n":"")},collapsedContainer:function(h){return"Scheduler container height is set to *100%* but the rendered height is zero and the scheduler is not visible. \nMake sure that the container has some initial height or use different units. For example:\n<div id='scheduler_here' class='dhx_cal_container' style='width:100%; height:600px;'> \n"}},i.createTimelineView=function(){throw new Error("scheduler.createTimelineView is not implemented. Be sure to add the required extension: "+c.timeline+"\nRelated docs: "+o.timeline)},i.createUnitsView=function(){throw new Error("scheduler.createUnitsView is not implemented. Be sure to add the required extension: "+c.unit+"\nRelated docs: "+o.unit)},i.createGridView=function(){throw new Error("scheduler.createGridView is not implemented. Be sure to add the required extension: "+c.grid+"\nRelated docs: "+o.grid)},i.addMarkedTimespan=function(){throw new Error("scheduler.addMarkedTimespan is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_limit.js\nRelated docs: https://docs.dhtmlx.com/scheduler/limits.html")},i.renderCalendar=function(){throw new Error("scheduler.renderCalendar is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_minical.js\nhttps://docs.dhtmlx.com/scheduler/minicalendar.html")},i.exportToPNG=function(){throw new Error(["scheduler.exportToPNG is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/png.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join("\n"))},i.exportToPDF=function(){throw new Error(["scheduler.exportToPDF is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/pdf.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join("\n"))},function(i){var o=function t(j,a){j=j||s.event,a=a||s.eventRemove;var v=[],_={attach:function(i,o,c,h){v.push({element:i,event:o,callback:c,capture:h}),j(i,o,c,h)},detach:function(i,o,c,h){a(i,o,c,h);for(var D=0;D<v.length;D++){var V=v[D];V.element===i&&V.event===o&&V.callback===c&&V.capture===h&&(v.splice(D,1),D--)}},detachAll:function(){for(var i=v.slice(),o=0;o<i.length;o++){var c=i[o];_.detach(c.element,c.event,c.callback,c.capture),_.detach(c.element,c.event,c.callback,void 0),_.detach(c.element,c.event,c.callback,!1),_.detach(c.element,c.event,c.callback,!0)}v.splice(0,v.length)},extend:function(){return t(this.event,this.eventRemove)}};return _}();i.event=o.attach,i.eventRemove=o.detach,i._eventRemoveAll=o.detachAll,i._createDomEventScope=o.extend,i._trim=function(c){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(c)},i._isDate=function(c){return!(!c||"object"!=m(c)||!(c.getFullYear&&c.getMonth&&c.getDate))},i._isObject=function(c){return c&&"object"==m(c)}}(j),function(i){x(i),function w(t){function j(o){var c=document.createElement("div");return(o||"").split(" ").forEach(function(h){c.classList.add(h)}),c}var a_rows_container=function(){return j("dhx_cal_navbar_rows_container")},a_row=function(){return j("dhx_cal_navbar_row")},a_view=function(o){var c=j("dhx_cal_tab");return c.setAttribute("name",o.view+"_tab"),c.setAttribute("data-tab",o.view),t.config.fix_tab_position&&(o.$firstTab?c.classList.add("dhx_cal_tab_first"):o.$lastTab?c.classList.add("dhx_cal_tab_last"):"week"!==o.view&&c.classList.add("dhx_cal_tab_standalone")),c},a_date=function(){return j("dhx_cal_date")},a_button=function(o){return j("dhx_cal_nav_button dhx_cal_nav_button_custom dhx_cal_tab")},a_builtInButton=function(o){return j("dhx_cal_"+o.view+"_button dhx_cal_nav_button")},a_spacer=function(){return j("dhx_cal_line_spacer")},a_minicalendarButton=function(o){var c=j("dhx_minical_icon");return o.click||c.$_eventAttached||t.event(c,"click",function(){t.isCalendarVisible()?t.destroyCalendar():t.renderCalendar({position:this,date:t.getState().date,navigation:!0,handler:function(h,D){t.setCurrentView(h),t.destroyCalendar()}})}),c};function v(o){var c=function(V){var T;if(V.view)switch(V.view){case"today":case"next":case"prev":T=a_builtInButton;break;case"date":T=a_date;break;case"spacer":T=a_spacer;break;case"button":T=a_button;break;case"minicalendar":T=a_minicalendarButton;break;default:T=a_view}else V.rows?T=a_rows_container:V.cols&&(T=a_row);return T}(o);if(c){var h=c(o);if(o.css&&h.classList.add(o.css),o.width&&((D=o.width)===1*D&&(D+="px"),h.style.width=D),o.height&&((D=o.height)===1*D&&(D+="px"),h.style.height=D),o.click&&h.addEventListener("click",o.click),o.html&&(h.innerHTML=o.html),o.align){var D="";"right"==o.align?D="flex-end":"left"==o.align&&(D="flex-start"),h.style.justifyContent=D}return h}}function _(o){return"string"==typeof o&&(o={view:o}),o.view||o.rows||o.cols||(o.view="button"),o}t._init_nav_bar=function(o){var c=this.$container.querySelector(".dhx_cal_navline");return c||((c=document.createElement("div")).className="dhx_cal_navline dhx_cal_navline_flex",t._update_nav_bar(o,c),c)};var i=null;t._update_nav_bar=function(o,c){if(o){var h=!1,V=o.height||t.xy.nav_height;null!==i&&i===V||(h=!0),h&&(t.xy.nav_height=V),c.innerHTML="",c.appendChild(function T(W){var z,Z=document.createDocumentFragment();z=Array.isArray(W)?W:[W];for(var re=0;re<z.length;re++){var oe,_e=_(z[re]);"day"===_e.view&&z[re+1]&&("week"!==(oe=_(z[re+1])).view&&"month"!==oe.view||(_e.$firstTab=!0)),"month"===_e.view&&z[re-1]&&("week"!==(oe=_(z[re-1])).view&&"day"!==oe.view||(_e.$lastTab=!0));var he=v(_e);Z.appendChild(he),(_e.cols||_e.rows)&&he.appendChild(T(_e.cols||_e.rows))}return Z}(o)),t.unset_actions(),t._els=[],t.get_elements(),t.set_actions(),c.style.display=0===V?"none":"",i=V}}}(i),i._detachDomEvent=function(T,W,z){T.removeEventListener?T.removeEventListener(W,z,!1):T.detachEvent&&T.detachEvent("on"+W,z)},i._init_once=function(){(function E(t){function j(i){for(var o=document.body;i&&i!=o;)i=i.parentNode;return o==i}function a(i){return{w:i.innerWidth||document.documentElement.clientWidth,h:i.innerHeight||document.documentElement.clientHeight}}function v(i,o){var c,h=a(o);i.event(o,"resize",function(){clearTimeout(c),c=setTimeout(function(){if(j(i.$container)){var D=a(o);(V=h).w==(T=D).w&&V.h==T.h||(h=D,_(i))}var V,T},150)})}function _(i){!i.$destroyed&&i.$root&&j(i.$root)&&i.callEvent("onSchedulerResize",[])&&(i.updateView(),i.callEvent("onAfterSchedulerResize",[]))}!function(i){var o=i.$container;"static"==window.getComputedStyle(o).getPropertyValue("position")&&(o.style.position="relative");var h,D,V,c=document.createElement("iframe");c.className="scheduler_container_resize_watcher",c.tabIndex=-1,i.config.wai_aria_attributes&&(c.setAttribute("role","none"),c.setAttribute("aria-hidden",!0)),window.Sfdc||window.$A||window.Aura?(D=(h=i).$root.offsetHeight,V=h.$root.offsetWidth,function T(){h.$destroyed||(h.$root&&(h.$root.offsetHeight==D&&h.$root.offsetWidth==V||_(h),D=h.$root.offsetHeight,V=h.$root.offsetWidth),setTimeout(T,200))}()):(o.appendChild(c),c.contentWindow?v(i,c.contentWindow):(o.removeChild(c),v(i,window)))}(t)})(i),i._init_once=function(){}};function D(T){return!!(T.querySelector(".dhx_cal_header")&&T.querySelector(".dhx_cal_data")&&T.querySelector(".dhx_cal_navline"))}i.init=function(T,W,z){if(!this.$destroyed){if(W=W||i._currentDate(),z=z||"week",this._obj&&this.unset_actions(),this._obj="string"==typeof T?document.getElementById(T):T,this.$container=this._obj,this.$root=this._obj,!this.$container.offsetHeight&&this.$container.offsetWidth&&"100%"===this.$container.style.height&&window.console.error(i._commonErrorMessages.collapsedContainer(),this.$container),this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&this.$container.setAttribute("role","application"),this.config.header||D(this.$container)||(this.config.header=function(Z){var re=["day","week","month"];if(Z.matrix)for(var oe in Z.matrix)re.push(oe);if(Z._props)for(var oe in Z._props)re.push(oe);if(Z._grid&&Z._grid.names)for(var oe in Z._grid.names)re.push(oe);return["map","agenda","week_agenda","year"].forEach(function(_e){Z[_e+"_view"]&&re.push(_e)}),re.concat(["date"]).concat(["prev","today","next"])}(this),window.console.log(["Required DOM elements are missing from the scheduler container and **scheduler.config.header** is not specified.","Using a default header configuration: ","scheduler.config.header = "+JSON.stringify(this.config.header,null,2),"Check this article for the details: https://docs.dhtmlx.com/scheduler/initialization.html"].join("\n"))),this.config.header)this.$container.innerHTML="",this.$container.classList.add("dhx_cal_container"),this.config.header.height&&(this.xy.nav_height=this.config.header.height),this.$container.appendChild(function(T){return i._init_nav_bar(T)}(this.config.header)),this.$container.appendChild(function(T){var W=document.createElement("div");return W.className="dhx_cal_header",W}()),this.$container.appendChild(function(T){var W=document.createElement("div");return W.className="dhx_cal_data",W}());else if(!D(this.$container))throw new Error(["Required DOM elements are missing from the scheduler container.","Be sure to either specify them manually in the markup: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviamarkup","Or to use **scheduler.config.header** setting so they could be created automatically: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviaheaderconfig"].join("\n"));this.config.rtl&&(this.$container.className+=" dhx_cal_container_rtl"),this._skin_init&&i._skin_init(),i.date.init(),this._scroll=!0,this._quirks=this.$env.isIE&&"BackCompat"==document.compatMode,this._quirks7=this.$env.isIE&&-1==navigator.appVersion.indexOf("MSIE 8"),this._els=[],this.get_elements(),this.init_templates(),this.set_actions(),this._init_once(),this._init_touch_events(),this.set_sizes(),i.callEvent("onSchedulerReady",[]),this.setCurrentView(W,z)}},i.xy={min_event_height:40,scale_width:50,scroll_width:18,scale_height:20,month_scale_height:20,menu_width:25,margin_top:0,margin_left:0,editor_width:140,month_head_height:22,event_header_height:14},i.keys={edit_save:13,edit_cancel:27},i.bind=function(T,W){return T.bind?T.bind(W):function(){return T.apply(W,arguments)}},i.set_sizes=function(){var T=this._x=this._obj.clientWidth-this.xy.margin_left,W=this._y=this._obj.clientHeight-this.xy.margin_top,z=this._table_view?0:this.xy.scale_width+this.xy.scroll_width,Z=this._table_view?-1:this.xy.scale_width,re=this.$container.querySelector(".dhx_cal_scale_placeholder");i._is_material_skin()?(re||((re=document.createElement("div")).className="dhx_cal_scale_placeholder",this.$container.insertBefore(re,this._els.dhx_cal_header[0])),re.style.display="block",this.set_xy(re,T,this.xy.scale_height+1,0,this.xy.nav_height+(this._quirks?-1:1))):re&&re.parentNode.removeChild(re),this._lightbox&&(i.$container.offsetWidth<1200||this._setLbPosition(document.querySelector(".dhx_cal_light"))),this.set_xy(this._els.dhx_cal_navline[0],T,this.xy.nav_height,0,0),this.set_xy(this._els.dhx_cal_header[0],T-z,this.xy.scale_height,Z,this.xy.nav_height+(this._quirks?-1:1));var oe=this._els.dhx_cal_navline[0].offsetHeight;oe>0&&(this.xy.nav_height=oe);var _e=this.xy.scale_height+this.xy.nav_height+(this._quirks?-2:0);this.set_xy(this._els.dhx_cal_data[0],T,W-(_e+2),0,_e+2)},i.set_xy=function(T,W,z,Z,re){var oe="left";T.style.width=Math.max(0,W)+"px",T.style.height=Math.max(0,z)+"px",arguments.length>3&&(this.config.rtl&&(oe="right"),T.style[oe]=Z+"px",T.style.top=re+"px")},i.get_elements=function(){for(var T=this._obj.getElementsByTagName("DIV"),W=0;W<T.length;W++){var z=i._getClassName(T[W]),Z=T[W].getAttribute("data-tab")||T[W].getAttribute("name")||"";z&&(z=z.split(" ")[0]),this._els[z]||(this._els[z]=[]),this._els[z].push(T[W]);var re=i.locale.labels[Z+"_tab"]||i.locale.labels[Z||z];"string"!=typeof re&&Z&&!T[W].innerHTML&&(re=Z.split("_")[0]),re&&(this._waiAria.labelAttr(T[W],re),T[W].innerHTML=re)}};var V=i._createDomEventScope();i.unset_actions=function(){V.detachAll()},i.set_actions=function(){for(var T in this._els)if(this._click[T])for(var W=0;W<this._els[T].length;W++){var z=this._els[T][W],Z=this._click[T].bind(z);V.attach(z,"click",Z)}V.attach(this._obj,"selectstart",function(re){return re.preventDefault(),!1}),V.attach(this._obj,"mousemove",function(re){i._temp_touch_block||i._on_mouse_move(re)}),V.attach(this._obj,"mousedown",function(re){i._ignore_next_click||i._on_mouse_down(re)}),V.attach(this._obj,"mouseup",function(re){i._ignore_next_click||i._on_mouse_up(re)}),V.attach(this._obj,"dblclick",function(re){i._on_dbl_click(re)}),V.attach(this._obj,"contextmenu",function(re){var oe=re;return i.callEvent("onContextMenu",[i._locate_event(oe.target||oe.srcElement),oe])})},i.select=function(T){this._select_id!=T&&(i._close_not_saved(),this.editStop(!1),this._select_id&&this.unselect(),this._select_id=T,this.updateEvent(T),this.callEvent("onEventSelected",[T]))},i.unselect=function(T){if(!T||T==this._select_id){var W=this._select_id;this._select_id=null,W&&this.getEvent(W)&&this.updateEvent(W),this.callEvent("onEventUnselected",[W])}},i.getState=function(){return{mode:this._mode,date:new Date(this._date),min_date:new Date(this._min_date),max_date:new Date(this._max_date),editor_id:this._edit_id,lightbox_id:this._lightbox_id,new_event:this._new_event,select_id:this._select_id,expanded:this.expanded,drag_id:this._drag_id,drag_mode:this._drag_mode}},i._click={dhx_cal_data:function(T){if(i._ignore_next_click)return T.preventDefault&&T.preventDefault(),T.cancelBubble=!0,i._ignore_next_click=!1,!1;var W=T.target,z=i._locate_event(W);if(z){if(!i.callEvent("onClick",[z,T])||i.config.readonly)return}else i.callEvent("onEmptyClick",[i.getActionData(T).date,T]);if(z&&i.config.select){i.select(z);var Z=i._getClassName(W);-1!=Z.indexOf("_icon")&&i._click.buttons[Z.split(" ")[1].replace("icon_","")](z)}else i._close_not_saved(),i.getState().select_id&&(new Date).valueOf()-(i._new_event||0)>500&&i.unselect()},dhx_cal_prev_button:function(){i._click.dhx_cal_next_button(0,-1)},dhx_cal_next_button:function(T,W){var z=1;i.config.rtl&&(W=-W,z=-z),i.setCurrentView(i.date.add(i.date[i._mode+"_start"](new Date(i._date)),W||z,i._mode))},dhx_cal_today_button:function(){i.callEvent("onBeforeTodayDisplayed",[])&&i.setCurrentView(i._currentDate())},dhx_cal_tab:function(){var T=this.getAttribute("data-tab"),W=this.getAttribute("name"),z=T||W.substring(0,W.search("_tab"));i.setCurrentView(i._date,z)},buttons:{delete:function(T){i._dhtmlx_confirm(i.locale.labels.confirm_deleting,i.locale.labels.title_confirm_deleting,function(){i.deleteEvent(T)})},edit:function(T){i.edit(T)},save:function(T){i.editStop(!0)},details:function(T){i.showLightbox(T)},cancel:function(T){i.editStop(!1)}}},i._dhtmlx_confirm=function(T,W,z){if(!T)return z();var Z={text:T};W&&(Z.title=W),z&&(Z.callback=function(re){re&&z()}),i.confirm(Z)},i.addEventNow=function(T,W,z){var Z={};i._isObject(T)&&!i._isDate(T)&&(Z=T,T=null);var re=6e4*(this.config.event_duration||this.config.time_step);T||(T=Z.start_date||Math.round(i._currentDate().valueOf()/re)*re);var oe=new Date(T);if(!W){var _e=this.config.first_hour;_e>oe.getHours()&&(oe.setHours(_e),T=oe.valueOf()),W=T.valueOf()+re}var he=new Date(W);oe.valueOf()==he.valueOf()&&he.setTime(he.valueOf()+re),Z.start_date=Z.start_date||oe,Z.end_date=Z.end_date||he,Z.text=Z.text||this.locale.labels.new_event,Z.id=this._drag_id=Z.id||this.uid(),this._drag_mode="new-size",this._loading=!0;var be=this.addEvent(Z);return this.callEvent("onEventCreated",[this._drag_id,z]),this._loading=!1,this._drag_event={},this._on_mouse_up(z),be},i._on_dbl_click=function(T,W){if(W=W||T.target||T.srcElement,!this.config.readonly){var z=i._getClassName(W).split(" ")[0];switch(z){case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_wa_day_data":if(!i.config.dblclick_create)break;this.addEventNow(this.getActionData(T).date,null,T);break;case"dhx_cal_event":case"dhx_wa_ev_body":case"dhx_agenda_line":case"dhx_grid_event":case"dhx_cal_event_line":case"dhx_cal_event_clear":var Z=this._locate_event(W);if(!this.callEvent("onDblClick",[Z,T]))return;this.config.details_on_dblclick||this._table_view||!this.getEvent(Z)._timed||!this.config.select?this.showLightbox(Z):this.edit(Z);break;case"dhx_time_block":case"dhx_cal_container":return;default:var re=this["dblclick_"+z];if(re)re.call(this,T);else if(W.parentNode&&W!=this)return i._on_dbl_click(T,W.parentNode)}}},i._get_column_index=function(T){var W=0;if(this._cols){for(var z=0,Z=0;z+this._cols[Z]<T&&Z<this._cols.length;)z+=this._cols[Z],Z++;if(W=Z+(this._cols[Z]?(T-z)/this._cols[Z]:0),this._ignores&&W>=this._cols.length)for(;W>=1&&this._ignores[Math.floor(W)];)W--}return W},i._week_indexes_from_pos=function(T){if(this._cols){var W=this._get_column_index(T.x);return T.x=Math.min(this._cols.length-1,Math.max(0,Math.ceil(W)-1)),T.y=Math.max(0,Math.ceil(60*T.y/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step),T}return T},i._mouse_coords=function(T){var W,z=document.body,Z=document.documentElement;W=this.$env.isIE||!T.pageX&&!T.pageY?{x:T.clientX+(z.scrollLeft||Z.scrollLeft||0)-z.clientLeft,y:T.clientY+(z.scrollTop||Z.scrollTop||0)-z.clientTop}:{x:T.pageX,y:T.pageY},this.config.rtl&&this._colsS?(W.x=this.$container.querySelector(".dhx_cal_data").offsetWidth-W.x,"month"!==this._mode&&(W.x-=this.xy.scale_width)):W.x-=this.$domHelpers.getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width);var re=this.$container.querySelector(".dhx_cal_data");W.y-=this.$domHelpers.getAbsoluteTop(re)-this._els.dhx_cal_data[0].scrollTop,W.ev=T;var oe=this["mouse_"+this._mode];if(oe)W=oe.call(this,W);else if(this._table_view){var _e=this._get_column_index(W.x);if(!this._cols||!this._colsS)return W;var he=0;for(he=1;he<this._colsS.heights.length&&!(this._colsS.heights[he]>W.y);he++);W.y=Math.ceil(24*(Math.max(0,_e)+7*Math.max(0,he-1))*60/this.config.time_step),(i._drag_mode||"month"==this._mode)&&(W.y=24*(Math.max(0,Math.ceil(_e)-1)+7*Math.max(0,he-1))*60/this.config.time_step),"move"==this._drag_mode&&i._ignores_detected&&i.config.preserve_length&&(W._ignores=!0,this._drag_event._event_length||(this._drag_event._event_length=this._get_real_event_length(this._drag_event.start_date,this._drag_event.end_date,{x_step:1,x_unit:"day"}))),W.x=0}else W=this._week_indexes_from_pos(W);return W.timestamp=+new Date,W},i._close_not_saved=function(){if((new Date).valueOf()-(i._new_event||0)>500&&i._edit_id){var T=i.locale.labels.confirm_closing;i._dhtmlx_confirm(T,i.locale.labels.title_confirm_closing,function(){i.editStop(i.config.positive_closing)}),T&&(this._drag_id=this._drag_pos=this._drag_mode=null)}},i._correct_shift=function(T,W){return T-6e4*(new Date(i._min_date).getTimezoneOffset()-new Date(T).getTimezoneOffset())*(W?-1:1)},i._is_pos_changed=function(T,W){function z(Z,re,oe){return Math.abs(Z-re)>oe}return!T||!this._drag_pos||!!(this._drag_pos.has_moved||!this._drag_pos.timestamp||W.timestamp-this._drag_pos.timestamp>100||z(T.ev.clientX,W.ev.clientX,5)||z(T.ev.clientY,W.ev.clientY,5))},i._correct_drag_start_date=function(T){var W;i.matrix&&(W=i.matrix[i._mode]),W=W||{x_step:1,x_unit:"day"},T=new Date(T);var z=1;return(W._start_correction||W._end_correction)&&(z=60*(W.last_hour||0)-(60*T.getHours()+T.getMinutes())||1),1*T+(i._get_fictional_event_length(T,z,W)-z)},i._correct_drag_end_date=function(T,W){var z;i.matrix&&(z=i.matrix[i._mode]);var Z=1*T+i._get_fictional_event_length(T,W,z=z||{x_step:1,x_unit:"day"});return new Date(1*Z-(i._get_fictional_event_length(Z,-1,z,-1)+1))},i._on_mouse_move=function(T){if(this._drag_mode){var W=this._mouse_coords(T);if(this._is_pos_changed(this._drag_pos,W)){var z,Z;if(this._edit_id!=this._drag_id&&this._close_not_saved(),!this._drag_mode)return;var re=null;if(this._drag_pos&&!this._drag_pos.has_moved&&((re=this._drag_pos).has_moved=!0),this._drag_pos=W,this._drag_pos.has_moved=!0,"create"==this._drag_mode){if(re&&(W=re),this._close_not_saved(),this.unselect(this._select_id),this._loading=!0,z=this._get_date_from_pos(W).valueOf(),!this._drag_start)return this.callEvent("onBeforeEventCreated",[T,this._drag_id])?(this._loading=!1,void(this._drag_start=z)):void(this._loading=!1);Z=z;var oe=new Date(this._drag_start),_e=new Date(Z);"day"!=this._mode&&"week"!=this._mode||oe.getHours()!=_e.getHours()||oe.getMinutes()!=_e.getMinutes()||(_e=new Date(this._drag_start+1e3)),this._drag_id=this.uid(),this.addEvent(oe,_e,this.locale.labels.new_event,this._drag_id,W.fields),this.callEvent("onEventCreated",[this._drag_id,T]),this._loading=!1,this._drag_mode="new-size"}var he,be=this.config.time_step,Ae=this.getEvent(this._drag_id);if(i.matrix&&(he=i.matrix[i._mode]),he=he||{x_step:1,x_unit:"day"},"move"==this._drag_mode)z=this._min_date.valueOf()+6e4*(W.y*this.config.time_step+24*W.x*60),!W.custom&&this._table_view&&(z+=1e3*this.date.time_part(Ae.start_date)),!this._table_view&&this._dragEventBody&&void 0===this._drag_event._move_event_shift&&(this._drag_event._move_event_shift=z-Ae.start_date),this._drag_event._move_event_shift&&(z-=this._drag_event._move_event_shift),z=this._correct_shift(z),W._ignores&&this.config.preserve_length&&this._table_view?(z=i._correct_drag_start_date(z),Z=i._correct_drag_end_date(z,this._drag_event._event_length)):Z=Ae.end_date.valueOf()-(Ae.start_date.valueOf()-z);else{if(z=Ae.start_date.valueOf(),Z=Ae.end_date.valueOf(),this._table_view){var He=this._min_date.valueOf()+W.y*this.config.time_step*6e4+(W.custom?0:864e5);if("month"==this._mode)if(He=this._correct_shift(He,!1),this._drag_from_start){var Ne=864e5;He<=i.date.date_part(new Date(Z+Ne-1)).valueOf()&&(z=He-Ne)}else Z=He;else this.config.preserve_length?W.resize_from_start?z=i._correct_drag_start_date(He):Z=i._correct_drag_end_date(He,0):W.resize_from_start?z=He:Z=He}else{var Ve=this.date.date_part(new Date(Ae.end_date.valueOf()-1)).valueOf(),Se=new Date(Ve),Oe=60/be*(this.config.last_hour-this.config.first_hour);this.config.time_step=1;var at=this._mouse_coords(T);this.config.time_step=be;var ht=W.y*be*6e4,lt=Math.min(W.y+1,Oe)*be*6e4,mt=6e4*at.y;Z=Math.abs(ht-mt)>Math.abs(lt-mt)?Ve+lt:Ve+ht,Z+=6e4*(new Date(Z).getTimezoneOffset()-Se.getTimezoneOffset()),this._els.dhx_cal_data[0].style.cursor="s-resize","week"!=this._mode&&"day"!=this._mode||(Z=this._correct_shift(Z))}if("new-size"==this._drag_mode)if(Z<=this._drag_start){var ft=W.shift||(this._table_view&&!W.custom?864e5:0);z=Z-(W.shift?0:ft),Z=this._drag_start+(ft||6e4*be)}else z=this._drag_start;else Z<=z&&(Z=z+6e4*be)}var yt=new Date(Z-1),xt=new Date(z);if("move"==this._drag_mode&&i.config.limit_drag_out&&(+xt<+i._min_date||+Z>+i._max_date)){if(+Ae.start_date<+i._min_date||+Ae.end_date>+i._max_date)xt=new Date(Ae.start_date),Z=new Date(Ae.end_date);else{var wt=Z-xt;+xt<+i._min_date?(xt=new Date(i._min_date),W._ignores&&this.config.preserve_length&&this._table_view?(xt=new Date(i._correct_drag_start_date(xt)),he._start_correction&&(xt=new Date(xt.valueOf()+he._start_correction)),Z=new Date(1*xt+this._get_fictional_event_length(xt,this._drag_event._event_length,he))):Z=new Date(+xt+wt)):(Z=new Date(i._max_date),W._ignores&&this.config.preserve_length&&this._table_view?(he._end_correction&&(Z=new Date(Z.valueOf()-he._end_correction)),Z=new Date(1*Z-this._get_fictional_event_length(Z,0,he,!0)),xt=new Date(1*Z-this._get_fictional_event_length(Z,this._drag_event._event_length,he,!0)),this._ignores_detected&&(xt=i.date.add(xt,he.x_step,he.x_unit),Z=new Date(1*Z-this._get_fictional_event_length(Z,0,he,!0)),Z=i.date.add(Z,he.x_step,he.x_unit))):xt=new Date(+Z-wt))}yt=new Date(Z-1)}if(!this._table_view&&this._dragEventBody&&!i.config.all_timed&&(!i._get_section_view()&&W.x!=this._get_event_sday({start_date:new Date(z),end_date:new Date(z)})||new Date(z).getHours()<this.config.first_hour)&&(wt=Z-xt,"move"==this._drag_mode&&(Ne=this._min_date.valueOf()+24*W.x*60*6e4,(xt=new Date(Ne)).setHours(this.config.first_hour),Z=new Date(xt.valueOf()+wt),yt=new Date(Z-1))),this._table_view||i.config.all_timed||!(!i.getView()&&W.x!=this._get_event_sday({start_date:new Date(Z),end_date:new Date(Z)})||new Date(Z).getHours()>=this.config.last_hour)||(wt=Z-xt,Ne=this._min_date.valueOf()+24*W.x*60*6e4,(Z=i.date.date_part(new Date(Ne))).setHours(this.config.last_hour),yt=new Date(Z-1),"move"==this._drag_mode&&(xt=new Date(+Z-wt))),this._table_view||yt.getDate()==xt.getDate()&&yt.getHours()<this.config.last_hour||i._allow_dnd)if(Ae.start_date=xt,Ae.end_date=new Date(Z),this.config.update_render){var Dt=i._els.dhx_cal_data[0].scrollTop;this.update_view(),i._els.dhx_cal_data[0].scrollTop=Dt}else this.updateEvent(this._drag_id);this._table_view&&this.for_rendered(this._drag_id,function(Pt){Pt.className+=" dhx_in_move dhx_cal_event_drag"}),this.callEvent("onEventDrag",[this._drag_id,this._drag_mode,T])}}else if(i.checkEvent("onMouseMove")){var Rt=this._locate_event(T.target||T.srcElement);this.callEvent("onMouseMove",[Rt,T])}},i._on_mouse_down=function(T,W){if(2!=T.button&&!this.config.readonly&&!this._drag_mode){var z=i._getClassName(W=W||T.target||T.srcElement).split(" ")[0];switch(this.config.drag_event_body&&"dhx_body"==z&&W.parentNode&&-1===W.parentNode.className.indexOf("dhx_cal_select_menu")&&(z="dhx_event_move",this._dragEventBody=!0),z){case"dhx_cal_event_line":case"dhx_cal_event_clear":this._table_view&&(this._drag_mode="move");break;case"dhx_event_move":case"dhx_wa_ev_body":this._drag_mode="move";break;case"dhx_event_resize":this._drag_mode="resize",i._drag_from_start=i._getClassName(W).indexOf("dhx_event_resize_end")<0;break;case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_matrix_cell":case"dhx_marked_timespan":this._drag_mode="create";break;case"":if(W.parentNode)return i._on_mouse_down(T,W.parentNode);break;default:if((!i.checkEvent("onMouseDown")||i.callEvent("onMouseDown",[z,T]))&&W.parentNode&&W!=this&&"dhx_body"!=z)return i._on_mouse_down(T,W.parentNode);this._drag_mode=null,this._drag_id=null}if(this._drag_mode){var Z=this._locate_event(W);if(this.config["drag_"+this._drag_mode]&&this.callEvent("onBeforeDrag",[Z,this._drag_mode,T])){if(this._drag_id=Z,(this._edit_id!=this._drag_id||this._edit_id&&"create"==this._drag_mode)&&this._close_not_saved(),!this._drag_mode)return;this._drag_event=i._lame_clone(this.getEvent(this._drag_id)||{}),this._drag_pos=this._mouse_coords(T)}else this._drag_mode=this._drag_id=0}this._drag_start=null}},i._get_private_properties=function(T){var W={};for(var z in T)0===z.indexOf("_")&&(W[z]=!0);return W},i._clear_temporary_properties=function(T,W){var z=this._get_private_properties(T),Z=this._get_private_properties(W);for(var re in Z)z[re]||delete W[re]},i._on_mouse_up=function(T){if(!T||2!=T.button||!this._mobile){if(this._drag_mode&&this._drag_id){this._els.dhx_cal_data[0].style.cursor="default";var W=this._drag_id,z=this._drag_mode,Z=!this._drag_pos||this._drag_pos.has_moved;delete this._drag_event._move_event_shift;var re=this.getEvent(this._drag_id);if(Z&&(this._drag_event._dhx_changed||!this._drag_event.start_date||re.start_date.valueOf()!=this._drag_event.start_date.valueOf()||re.end_date.valueOf()!=this._drag_event.end_date.valueOf())){var oe="new-size"==this._drag_mode;if(this.callEvent("onBeforeEventChanged",[re,T,oe,this._drag_event]))if(this._drag_id=this._drag_mode=null,oe&&this.config.edit_on_create){if(this.unselect(),this._new_event=new Date,this._table_view||this.config.details_on_create||!this.config.select||!this.isOneDayEvent(this.getEvent(W)))return i.callEvent("onDragEnd",[W,z,T]),this.showLightbox(W);this._drag_pos=!0,this._select_id=this._edit_id=W}else this._new_event||this.callEvent(oe?"onEventAdded":"onEventChanged",[W,this.getEvent(W)]);else oe?this.deleteEvent(re.id,!0):(this._drag_event._dhx_changed=!1,this._clear_temporary_properties(re,this._drag_event),i._lame_copy(re,this._drag_event),this.updateEvent(re.id))}this._drag_pos&&(this._drag_pos.has_moved||!0===this._drag_pos)&&(this._drag_id=this._drag_mode=null,this.render_view_data()),i.callEvent("onDragEnd",[W,z,T])}this._drag_id=null,this._drag_mode=null,this._drag_pos=null}},i._trigger_dyn_loading=function(){return!(!this._load_mode||!this._load()||(this._render_wait=!0,0))},i.update_view=function(){this._reset_ignores(),this._update_nav_bar(this.config.header,this.$container.querySelector(".dhx_cal_navline"));var T=this[this._mode+"_view"];if(T?T.call(this,!0):this._reset_scale(),this._trigger_dyn_loading())return!0;this.render_view_data()},i.isViewExists=function(T){return!!(i[T+"_view"]||i.date[T+"_start"]&&i.templates[T+"_date"]&&i.templates[T+"_scale_date"])},i._set_aria_buttons_attrs=function(){for(var T=["dhx_cal_next_button","dhx_cal_prev_button","dhx_cal_tab","dhx_cal_today_button"],W=0;W<T.length;W++)for(var z=this._els[T[W]],Z=0;z&&Z<z.length;Z++){var re=z[Z].getAttribute("data-tab")||z[Z].getAttribute("name"),oe=this.locale.labels[T[W]];re&&(oe=this.locale.labels[re+"_tab"]||this.locale.labels[re]||oe),"dhx_cal_next_button"==T[W]?oe=this.locale.labels.next:"dhx_cal_prev_button"==T[W]&&(oe=this.locale.labels.prev),this._waiAria.headerButtonsAttributes(z[Z],oe||"")}},i.updateView=function(T,W){if(!this.$container)throw new Error("The scheduler is not initialized. \n **scheduler.updateView** or **scheduler.setCurrentView** can be called only after **scheduler.init**");T=T||this._date;var z=this._obj,Z="dhx_scheduler_"+this._mode,re="dhx_scheduler_"+(W=W||this._mode);this._mode&&-1!=z.className.indexOf(Z)?z.className=z.className.replace(Z,re):z.className+=" "+re;var oe,_e=!(this._mode!=W||!this.config.preserve_scroll)&&this._els.dhx_cal_data[0].scrollTop;this._els.dhx_multi_day&&this._els.dhx_multi_day[0]&&(oe=this._els.dhx_multi_day[0].scrollTop),this[this._mode+"_view"]&&W&&this._mode!=W&&this[this._mode+"_view"](!1),this._close_not_saved(),this._els.dhx_multi_day&&(this._els.dhx_multi_day[0].parentNode.removeChild(this._els.dhx_multi_day[0]),this._els.dhx_multi_day=null),this._mode=W,this._date=T,this._table_view="month"==this._mode,this._dy_shift=0,this.update_view(),this._set_aria_buttons_attrs();var he=this._els.dhx_cal_tab;if(he)for(var be=0;be<he.length;be++){var Ae=he[be];Ae.getAttribute("data-tab")==this._mode||Ae.getAttribute("name")==this._mode+"_tab"?(Ae.classList.add("active"),this._waiAria.headerToggleState(Ae,!0)):(Ae.classList.remove("active"),this._waiAria.headerToggleState(Ae,!1))}"number"==typeof _e&&(this._els.dhx_cal_data[0].scrollTop=_e),"number"==typeof oe&&this._els.dhx_multi_day&&this._els.dhx_multi_day[0]&&(this._els.dhx_multi_day[0].scrollTop=oe)},i.setCurrentView=function(T,W){this.callEvent("onBeforeViewChange",[this._mode,this._date,W||this._mode,T||this._date])&&(this.updateView(T,W),this.callEvent("onViewChange",[this._mode,this._date]))},i.render=function(T,W){i.setCurrentView(T,W)},i._render_x_header=function(T,W,z,Z,re){re=re||0;var oe=document.createElement("div");oe.className="dhx_scale_bar",this.templates[this._mode+"_scalex_class"]&&(oe.className+=" "+this.templates[this._mode+"_scalex_class"](z));var _e=this._cols[T]-1;"month"==this._mode&&0===T&&this.config.left_border&&(oe.className+=" dhx_scale_bar_border",W+=1),this.set_xy(oe,_e,this.xy.scale_height-2,W,re);var he=this.templates[this._mode+"_scale_date"](z,this._mode);oe.innerHTML=he,this._waiAria.dayHeaderAttr(oe,he),Z.appendChild(oe)},i._get_columns_num=function(T,W){var z=7;if(!i._table_view){var Z=i.date["get_"+i._mode+"_end"];Z&&(W=Z(T)),z=Math.round((W.valueOf()-T.valueOf())/864e5)}return z},i._get_timeunit_start=function(){return this.date[this._mode+"_start"](new Date(this._date.valueOf()))},i._get_view_end=function(){var T=this._get_timeunit_start(),W=i.date.add(T,1,this._mode);if(!i._table_view){var z=i.date["get_"+i._mode+"_end"];z&&(W=z(T))}return W},i._calc_scale_sizes=function(T,W,z){var Z=this.config.rtl,re=T,oe=this._get_columns_num(W,z);this._process_ignores(W,oe,"day",1);for(var _e=oe-this._ignores_detected,he=0;he<oe;he++)this._ignores[he]?(this._cols[he]=0,_e++):this._cols[he]=Math.floor(re/(_e-he)),re-=this._cols[he],this._colsS[he]=(this._cols[he-1]||0)+(this._colsS[he-1]||(this._table_view?0:(Z?this.xy.scroll_width:this.xy.scale_width)+2));this._colsS.col_length=oe,this._colsS[oe]=this._cols[oe-1]+this._colsS[oe-1]||0},i._set_scale_col_size=function(T,W,z){var Z=this.config;this.set_xy(T,W-1,Z.hour_size_px*(Z.last_hour-Z.first_hour),z+this.xy.scale_width+1,0)},i._render_scales=function(T,W){var z=new Date(i._min_date),Z=new Date(i._max_date),re=this.date.date_part(i._currentDate()),oe=parseInt(T.style.width,10),_e=new Date(this._min_date),he=this._get_columns_num(z,Z);this._calc_scale_sizes(oe,z,Z);var be=0;T.innerHTML="";for(var Ae=0;Ae<he;Ae++){if(this._ignores[Ae]||this._render_x_header(Ae,be,_e,T),!this._table_view){var He=document.createElement("div"),Ne="dhx_scale_holder";_e.valueOf()==re.valueOf()&&(Ne="dhx_scale_holder_now"),He.setAttribute("data-column-index",Ae),this._ignores_detected&&this._ignores[Ae]&&(Ne+=" dhx_scale_ignore"),He.className=Ne+" "+this.templates.week_date_class(_e,re),this._waiAria.dayColumnAttr(He,_e),this._set_scale_col_size(He,this._cols[Ae],be),W.appendChild(He),this.callEvent("onScaleAdd",[He,_e])}be+=this._cols[Ae],_e=this.date.add(_e,1,"day"),_e=this.date.day_start(_e)}},i._getNavDateElement=function(){return this.$container.querySelector(".dhx_cal_date")},i._reset_scale=function(){if(this.templates[this._mode+"_date"]){var Z,re,T=this._els.dhx_cal_header[0],W=this._els.dhx_cal_data[0],z=this.config;T.innerHTML="",W.innerHTML="",W.className="dhx_cal_data"+(z.readonly||!z.drag_resize?" dhx_resize_denied":"")+(z.readonly||!z.drag_move?" dhx_move_denied":""),this._scales={},this._cols=[],this._colsS={height:0},this._dy_shift=0,this.set_sizes();var _e=this._get_timeunit_start(),he=i._get_view_end();Z=re=this._table_view?i.date.week_start(_e):_e,this._min_date=Z;var be=this.templates[this._mode+"_date"](_e,he,this._mode),Ae=this._getNavDateElement();if(Ae&&(Ae.innerHTML=be,this._waiAria.navBarDateAttr(Ae,be)),this._max_date=he,i._render_scales(T,W),this._table_view)this._reset_month_scale(W,_e,re);else if(this._reset_hours_scale(W,_e,re),z.multi_day){this._els.dhx_multi_day&&(this._els.dhx_multi_day[0].parentNode.removeChild(this._els.dhx_multi_day[0]),this._els.dhx_multi_day=null);var He=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+1,Ne=document.createElement("div");Ne.className="dhx_multi_day",Ne.style.visibility="hidden";var Fe=Math.max(this._colsS[this._colsS.col_length]+(z.rtl?this.xy.scale_width:this.xy.scroll_width)-2,0);this.set_xy(Ne,Fe,0,0,He),W.parentNode.insertBefore(Ne,W);var Oe=Ne.cloneNode(!0);Oe.className="dhx_multi_day_icon",Oe.style.visibility="hidden",this.set_xy(Oe,this.xy.scale_width,0,0,He),Ne.appendChild(Oe),this._els.dhx_multi_day=[Ne,Oe],i.event(this._els.dhx_multi_day[0],"click",this._click.dhx_cal_data)}}},i._reset_hours_scale=function(T,W,z){var Z=document.createElement("div");Z.className="dhx_scale_holder";for(var re=new Date(1980,1,1,this.config.first_hour,0,0),oe=1*this.config.first_hour;oe<this.config.last_hour;oe++){var _e=document.createElement("div");_e.className="dhx_scale_hour",_e.style.height=this.config.hour_size_px+"px";var he=this.xy.scale_width;this.config.left_border&&(_e.className+=" dhx_scale_hour_border"),_e.style.width=he+"px";var be=i.templates.hour_scale(re);_e.innerHTML=be,this._waiAria.hourScaleAttr(_e,be),Z.appendChild(_e),re=this.date.add(re,1,"hour")}T.appendChild(Z),this.config.scroll_hour&&(T.scrollTop=this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour))},i._currentDate=function(){return i.config.now_date?new Date(i.config.now_date):new Date},i._reset_ignores=function(){this._ignores={},this._ignores_detected=0},i._process_ignores=function(T,W,z,Z,re){this._reset_ignores();var oe=i["ignore_"+this._mode];if(oe)for(var _e=new Date(T),he=0;he<W;he++)oe(_e)&&(this._ignores_detected+=1,this._ignores[he]=!0,re&&W++),_e=i.date.add(_e,Z,z),i.date[z+"_start"]&&(_e=i.date[z+"_start"](_e))},i._render_month_scale=function(T,W,z,Z){var re=i.date.add(W,1,"month"),oe=new Date(z),_e=i._currentDate();this.date.date_part(_e),this.date.date_part(z),Z=Z||Math.ceil(Math.round((re.valueOf()-z.valueOf())/864e5)/7);for(var he=[],be=0;be<=7;be++){var Ae=(this._cols[be]||0)-1;0===be&&this.config.left_border&&(Ae-=1),he[be]=Ae+"px"}function He(Ft){var Lt=i._colsS.height;return void 0!==i._colsS.heights[Ft+1]&&(Lt=i._colsS.heights[Ft+1]-(i._colsS.heights[Ft]||0)),Lt}var Ne=0,Ve=document.createElement("table");Ve.setAttribute("cellpadding","0"),Ve.setAttribute("cellspacing","0");var Se=document.createElement("tbody");Ve.appendChild(Se);var Fe=[];for(be=0;be<Z;be++){var Oe=document.createElement("tr");Se.appendChild(Oe);for(var at=Math.max(He(be)-i.xy.month_head_height,0),ht=0;ht<7;ht++){var lt=document.createElement("td");Oe.appendChild(lt);var mt="";z<W?mt="dhx_before":z>=re?mt="dhx_after":z.valueOf()==_e.valueOf()&&(mt="dhx_now"),this._ignores_detected&&this._ignores[ht]&&(mt+=" dhx_scale_ignore"),lt.className=mt+" "+this.templates.month_date_class(z,_e),lt.setAttribute("data-cell-date",i.templates.format_date(z));var ft="dhx_month_body",yt="dhx_month_head";if(0===ht&&this.config.left_border&&(ft+=" dhx_month_body_border",yt+=" dhx_month_head_border"),this._ignores_detected&&this._ignores[ht])lt.appendChild(document.createElement("div")),lt.appendChild(document.createElement("div"));else{this._waiAria.monthCellAttr(lt,z);var xt=document.createElement("div");xt.className=yt,xt.innerHTML=this.templates.month_day(z),lt.appendChild(xt);var wt=document.createElement("div");wt.className=ft,wt.style.height=at+"px",wt.style.width=he[ht],lt.appendChild(wt)}Fe.push(z);var Dt=z.getDate();(z=this.date.add(z,1,"day")).getDate()-Dt>1&&(z=new Date(z.getFullYear(),z.getMonth(),Dt+1,12,0))}i._colsS.heights[be]=Ne,Ne+=He(be)}this._min_date=oe,this._max_date=z,T.innerHTML="",T.appendChild(Ve),this._scales={};var Rt=T.getElementsByTagName("div");for(be=0;be<Fe.length;be++){var Pt=Fe[be];this._scales[+Pt]=T=Rt[2*be+1]}for(be=0;be<Fe.length;be++)this.callEvent("onScaleAdd",[this._scales[+(Pt=Fe[be])],Pt]);return this._max_date},i._reset_month_scale=function(T,W,z,Z){var re=i.date.add(W,1,"month"),oe=i._currentDate();this.date.date_part(oe),this.date.date_part(z),Z=Z||Math.ceil(Math.round((re.valueOf()-z.valueOf())/864e5)/7);var _e=Math.floor(T.clientHeight/Z)-this.xy.month_head_height;return this._colsS.height=_e+this.xy.month_head_height,this._colsS.heights=[],i._render_month_scale(T,W,z,Z)},i.getView=function(T){return T||(T=i.getState().mode),i.matrix&&i.matrix[T]?i.matrix[T]:i._props&&i._props[T]?i._props[T]:null},i.getLabel=function(T,W){for(var z=this.config.lightbox.sections,Z=0;Z<z.length;Z++)if(z[Z].map_to==T)for(var re=z[Z].options,oe=0;oe<re.length;oe++)if(re[oe].key==W)return re[oe].label;return""},i.updateCollection=function(T,W){var z=i.serverList(T);return!!z&&(z.splice(0,z.length),z.push.apply(z,W||[]),i.callEvent("onOptionsLoad",[]),i.resetLightbox(),i.hideCover(),!0)},i._lame_clone=function(T,W){var z,Z,re;for(W=W||[],z=0;z<W.length;z+=2)if(T===W[z])return W[z+1];if(T&&"object"==S(T)){for(re=Object.create(T),Z=[Array,Date,Number,String,Boolean],z=0;z<Z.length;z++)T instanceof Z[z]&&(re=z?new Z[z](T):new Z[z]);for(z in W.push(T,re),T)Object.prototype.hasOwnProperty.apply(T,[z])&&(re[z]=i._lame_clone(T[z],W))}return re||T},i._lame_copy=function(T,W){for(var z in W)W.hasOwnProperty(z)&&(T[z]=W[z]);return T},i._get_date_from_pos=function(T){var W=this._min_date.valueOf()+6e4*(T.y*this.config.time_step+24*(this._table_view?0:T.x)*60);return new Date(this._correct_shift(W))},i.getActionData=function(T){var W=this._mouse_coords(T);return{date:this._get_date_from_pos(W),section:W.section}},i._focus=function(T,W){if(T&&T.focus)if(this._mobile)window.setTimeout(function(){T.focus()},10);else try{W&&T.select&&T.offsetWidth&&T.select(),T.focus()}catch{}},i._get_real_event_length=function(T,W,z){var Z,re=W-T,oe=z._start_correction+z._end_correction||0,_e=this["ignore_"+this._mode],he=0;z.render?(he=this._get_date_index(z,T),Z=this._get_date_index(z,W)):Z=Math.round(re/60/60/1e3/24);for(var be=!0;he<Z;){var Ae=i.date.add(W,-z.x_step,z.x_unit);_e&&_e(W)&&(!be||be&&_e(Ae))?re-=W-Ae:(be=!1,re-=oe),W=Ae,Z--}return re},i._get_fictional_event_length=function(T,W,z,Z){var re=new Date(T),oe=Z?-1:1;if(z._start_correction||z._end_correction){var _e;_e=Z?60*re.getHours()+re.getMinutes()-60*(z.first_hour||0):60*(z.last_hour||0)-(60*re.getHours()+re.getMinutes());var he=60*(z.last_hour-z.first_hour),be=Math.ceil((W/6e4-_e)/he);be<0&&(be=0),W+=be*(1440-he)*60*1e3}var Ae,He=new Date(1*T+W*oe),Ne=this["ignore_"+this._mode],Ve=0;for(z.render?(Ve=this._get_date_index(z,re),Ae=this._get_date_index(z,He)):Ae=Math.round(W/60/60/1e3/24);Ve*oe<=Ae*oe;){var Se=i.date.add(re,z.x_step*oe,z.x_unit);Ne&&Ne(re)&&(W+=(Se-re)*oe,Ae+=oe),re=Se,Ve+=oe}return W},i._get_section_view=function(){return this.getView()},i._get_section_property=function(){return this.matrix&&this.matrix[this._mode]?this.matrix[this._mode].y_property:this._props&&this._props[this._mode]?this._props[this._mode].map_to:null},i._is_initialized=function(){var T=this.getState();return this._obj&&T.date&&T.mode},i._is_lightbox_open=function(){return null!=this.getState().lightbox_id}}(j),function(i){!function(){var o=new RegExp("<(?:.|\n)*?>","gm"),c=new RegExp(" +","gm");function h(W){return(W+"").replace(o," ").replace(c," ")}var D=new RegExp("'","gm");function V(W){return(W+"").replace(D,"&#39;")}for(var T in i._waiAria={getAttributeString:function(W){var z=[" "];for(var Z in W)if("function"!=typeof W[Z]&&"object"!=l(W[Z])){var re=V(h(W[Z]));z.push(Z+"='"+re+"'")}return z.push(" "),z.join(" ")},setAttributes:function(W,z){for(var Z in z)W.setAttribute(Z,h(z[Z]));return W},labelAttr:function(W,z){return this.setAttributes(W,{"aria-label":z})},label:function(W){return i._waiAria.getAttributeString({"aria-label":W})},hourScaleAttr:function(W,z){this.labelAttr(W,z)},monthCellAttr:function(W,z){this.labelAttr(W,i.templates.day_date(z))},navBarDateAttr:function(W,z){this.labelAttr(W,z)},dayHeaderAttr:function(W,z){this.labelAttr(W,z)},dayColumnAttr:function(W,z){this.dayHeaderAttr(W,i.templates.day_date(z))},headerButtonsAttributes:function(W,z){return this.setAttributes(W,{role:"button","aria-label":z})},headerToggleState:function(W,z){return this.setAttributes(W,{"aria-pressed":z?"true":"false"})},getHeaderCellAttr:function(W){return i._waiAria.getAttributeString({"aria-label":W})},eventAttr:function(W,z){this._eventCommonAttr(W,z)},_eventCommonAttr:function(W,z){z.setAttribute("aria-label",h(i.templates.event_text(W.start_date,W.end_date,W))),i.config.readonly&&z.setAttribute("aria-readonly",!0),W.$dataprocessor_class&&z.setAttribute("aria-busy",!0),z.setAttribute("aria-selected",i.getState().select_id==W.id?"true":"false")},setEventBarAttr:function(W,z){this._eventCommonAttr(W,z)},_getAttributes:function(W,z){var Z={setAttribute:function(re,oe){this[re]=oe}};return W.apply(this,[z,Z]),Z},eventBarAttrString:function(W){return this.getAttributeString(this._getAttributes(this.setEventBarAttr,W))},agendaHeadAttrString:function(){return this.getAttributeString({role:"row"})},agendaHeadDateString:function(W){return this.getAttributeString({role:"columnheader","aria-label":W})},agendaHeadDescriptionString:function(W){return this.agendaHeadDateString(W)},agendaDataAttrString:function(){return this.getAttributeString({role:"grid"})},agendaEventAttrString:function(W){var z=this._getAttributes(this._eventCommonAttr,W);return z.role="row",this.getAttributeString(z)},agendaDetailsBtnString:function(){return this.getAttributeString({role:"button","aria-label":i.locale.labels.icon_details})},gridAttrString:function(){return this.getAttributeString({role:"grid"})},gridRowAttrString:function(W){return this.agendaEventAttrString(W)},gridCellAttrString:function(W,z,Z){return this.getAttributeString({role:"gridcell","aria-label":[void 0===z.label?z.id:z.label,": ",Z]})},mapAttrString:function(){return this.gridAttrString()},mapRowAttrString:function(W){return this.gridRowAttrString(W)},mapDetailsBtnString:function(){return this.agendaDetailsBtnString()},minicalHeader:function(W,z){this.setAttributes(W,{id:z+"","aria-live":"assertice","aria-atomic":"true"})},minicalGrid:function(W,z){this.setAttributes(W,{"aria-labelledby":z+"",role:"grid"})},minicalRow:function(W){this.setAttributes(W,{role:"row"})},minicalDayCell:function(W,z){var Z=z.valueOf()<i._max_date.valueOf()&&z.valueOf()>=i._min_date.valueOf();this.setAttributes(W,{role:"gridcell","aria-label":i.templates.day_date(z),"aria-selected":Z?"true":"false"})},minicalHeadCell:function(W){this.setAttributes(W,{role:"columnheader"})},weekAgendaDayCell:function(W,z){var Z=W.querySelector(".dhx_wa_scale_bar"),re=W.querySelector(".dhx_wa_day_data"),oe=i.uid()+"";this.setAttributes(Z,{id:oe}),this.setAttributes(re,{"aria-labelledby":oe})},weekAgendaEvent:function(W,z){this.eventAttr(z,W)},lightboxHiddenAttr:function(W){W.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(W){W.setAttribute("aria-hidden","false")},lightboxSectionButtonAttrString:function(W){return this.getAttributeString({role:"button","aria-label":W,tabindex:"0"})},yearHeader:function(W,z){this.setAttributes(W,{id:z+""})},yearGrid:function(W,z){this.minicalGrid(W,z)},yearHeadCell:function(W){return this.minicalHeadCell(W)},yearRow:function(W){return this.minicalRow(W)},yearDayCell:function(W){this.setAttributes(W,{role:"gridcell"})},lightboxAttr:function(W){W.setAttribute("role","dialog"),W.setAttribute("aria-hidden","true"),W.firstChild.setAttribute("role","heading")},lightboxButtonAttrString:function(W){return this.getAttributeString({role:"button","aria-label":i.locale.labels[W],tabindex:"0"})},eventMenuAttrString:function(W){return this.getAttributeString({role:"button","aria-label":i.locale.labels[W]})},lightboxHeader:function(W,z){W.setAttribute("aria-label",z)},lightboxSelectAttrString:function(W){var z="";switch(W){case"%Y":z=i.locale.labels.year;break;case"%m":z=i.locale.labels.month;break;case"%d":z=i.locale.labels.day;break;case"%H:%i":z=i.locale.labels.hour+" "+i.locale.labels.minute}return i._waiAria.getAttributeString({"aria-label":z})},messageButtonAttrString:function(W){return"tabindex='0' role='button' aria-label='"+W+"'"},messageInfoAttr:function(W){W.setAttribute("role","alert")},messageModalAttr:function(W,z){W.setAttribute("role","dialog"),z&&W.setAttribute("aria-labelledby",z)},quickInfoAttr:function(W){W.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' "},quickInfoHeader:function(W,z){W.setAttribute("aria-label",z)},quickInfoButtonAttrString:function(W){return i._waiAria.getAttributeString({role:"button","aria-label":W,tabindex:"0"})},tooltipAttr:function(W){W.setAttribute("role","tooltip")},tooltipVisibleAttr:function(W){W.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(W){W.setAttribute("aria-hidden","true")}},i._waiAria)i._waiAria[T]=function(W){return function(){return i.config.wai_aria_attributes?W.apply(this,arguments):" "}}(i._waiAria[T])}()}(j),j.utils=ee,j.$domHelpers=F,j.utils.dom=F,j.uid=ee.uid,j.mixin=ee.mixin,j.defined=ee.defined,j.assert=function(i){return function(o,c){o||i.config.show_errors&&!1!==i.callEvent("onError",[c])&&(i.message?i.message({type:"error",text:c,expire:-1}):console.log(c))}}(j),j.copy=ee.copy,j._getFocusableNodes=F.getFocusableNodes,j._getClassName=F.getClassName,j._locate_css=F.locateCss;var a=function(t){var j="data-dhxbox",a=null;function v(he,be){var Ae=he.callback;re.hide(he.box),a=he.box=null,Ae&&Ae(be)}function _(he){if(a){var be=he.which||he.keyCode,Ae=!1;if(oe.keyboard){if(13==be||32==be){var He=he.target||he.srcElement;F.getClassName(He).indexOf("scheduler_popup_button")>-1&&He.click?He.click():(v(a,!0),Ae=!0)}27==be&&(v(a,!1),Ae=!0)}return Ae?(he.preventDefault&&he.preventDefault(),!(he.cancelBubble=!0)):void 0}}function i(he){i.cover||(i.cover=document.createElement("div"),t.event(i.cover,"keydown",_),i.cover.className="dhx_modal_cover",document.body.appendChild(i.cover)),i.cover.style.display=he?"inline-block":"none"}function o(he,be,Ae){var He=t._waiAria.messageButtonAttrString(he),Ne=(be||"").toLowerCase().replace(/ /g,"_"),Ve="scheduler_".concat(Ne,"_button dhtmlx_").concat(Ne,"_button");return"<div ".concat(He," class='scheduler_popup_button dhtmlx_popup_button ").concat(Ve,"' data-result='").concat(Ae,"' result='").concat(Ae,"' ><div>").concat(he,"</div></div>")}function c(he){oe.area||(oe.area=document.createElement("div"),oe.area.className="scheduler_message_area dhtmlx_message_area",oe.area.style[oe.position]="5px",document.body.appendChild(oe.area)),oe.hide(he.id);var be=document.createElement("div");return be.innerHTML="<div>"+he.text+"</div>",be.className="scheduler-info dhtmlx-info scheduler-"+he.type+" dhtmlx-"+he.type,t.event(be,"click",function(){oe.hide(he.id),he=null}),t._waiAria.messageInfoAttr(be),"bottom"==oe.position&&oe.area.firstChild?oe.area.insertBefore(be,oe.area.firstChild):oe.area.appendChild(be),he.expire>0&&(oe.timers[he.id]=window.setTimeout(function(){oe&&oe.hide(he.id)},he.expire)),oe.pull[he.id]=be,be=null,he.id}function h(){for(var he=[].slice.apply(arguments,[0]),be=0;be<he.length;be++)if(he[be])return he[be]}function D(he,be,Ae){var He=he.tagName?he:function(Se,Fe,Oe){var at=document.createElement("div"),ht=ee.uid();t._waiAria.messageModalAttr(at,ht),at.className=" scheduler_modal_box dhtmlx_modal_box scheduler-"+Se.type+" dhtmlx-"+Se.type,at.setAttribute(j,1);var lt="";if(Se.width&&(at.style.width=Se.width),Se.height&&(at.style.height=Se.height),Se.title&&(lt+='<div class="scheduler_popup_title dhtmlx_popup_title">'+Se.title+"</div>"),lt+='<div class="scheduler_popup_text dhtmlx_popup_text" id="'+ht+'"><span>'+(Se.content?"":Se.text)+'</span></div><div  class="scheduler_popup_controls dhtmlx_popup_controls">',Fe&&(lt+=o(h(Se.ok,t.locale.labels.message_ok,"OK"),"ok",!0)),Oe&&(lt+=o(h(Se.cancel,t.locale.labels.message_cancel,"Cancel"),"cancel",!1)),Se.buttons)for(var mt=0;mt<Se.buttons.length;mt++){var ft=Se.buttons[mt];"object"==qe(ft)?lt+=o(ft.label,ft.css||"scheduler_"+ft.label.toLowerCase()+"_button dhtmlx_"+ft.label.toLowerCase()+"_button",ft.value||mt):lt+=o(ft,ft,mt)}if(at.innerHTML=lt+="</div>",Se.content){var yt=Se.content;"string"==typeof yt&&(yt=document.getElementById(yt)),"none"==yt.style.display&&(yt.style.display=""),at.childNodes[Se.title?1:0].appendChild(yt)}return t.event(at,"click",function(xt){var wt=xt.target||xt.srcElement;if(wt.className||(wt=wt.parentNode),F.closest(wt,".scheduler_popup_button")){var Dt=wt.getAttribute("data-result");v(Se,Dt="true"==Dt||"false"!=Dt&&Dt)}}),Se.box=at,(Fe||Oe)&&(a=Se),at}(he,be,Ae);he.hidden||i(!0),document.body.appendChild(He);var Ne=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-He.offsetWidth)/2)),Ve=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-He.offsetHeight)/2));return He.style.top="top"==he.position?"-3px":Ve+"px",He.style.left=Ne+"px",t.event(He,"keydown",_),re.focus(He),he.hidden&&re.hide(He),t.callEvent("onMessagePopup",[He]),He}function V(he){return D(he,!0,!1)}function T(he){return D(he,!0,!0)}function W(he){return D(he)}function z(he,be,Ae){return"object"!=qe(he)&&("function"==typeof be&&(Ae=be,be=""),he={text:he,type:be,callback:Ae}),he}function Z(he,be,Ae,He){return"object"!=qe(he)&&(he={text:he,type:be,expire:Ae,id:He}),he.id=he.id||ee.uid(),he.expire=he.expire||oe.expire,he}t.event(document,"keydown",_,!0);var re=function(){var he=z.apply(this,arguments);return he.type=he.type||"alert",W(he)};re.hide=function(he){for(;he&&he.getAttribute&&!he.getAttribute(j);)he=he.parentNode;he&&(he.parentNode.removeChild(he),i(!1),t.callEvent("onAfterMessagePopup",[he]))},re.focus=function(he){setTimeout(function(){var be=F.getFocusableNodes(he);be.length&&be[0].focus&&be[0].focus()},1)};var oe=function(he,be,Ae,He){switch((he=Z.apply(this,arguments)).type=he.type||"info",he.type.split("-")[0]){case"alert":return V(he);case"confirm":return T(he);case"modalbox":return W(he);default:return c(he)}};oe.seed=(new Date).valueOf(),oe.uid=ee.uid,oe.expire=4e3,oe.keyboard=!0,oe.position="top",oe.pull={},oe.timers={},oe.hideAll=function(){for(var he in oe.pull)oe.hide(he)},oe.hide=function(he){var be=oe.pull[he];be&&be.parentNode&&(window.setTimeout(function(){be.parentNode.removeChild(be),be=null},2e3),be.className+=" hidden",oe.timers[he]&&window.clearTimeout(oe.timers[he]),delete oe.pull[he])};var _e=[];return t.attachEvent("onMessagePopup",function(he){_e.push(he)}),t.attachEvent("onAfterMessagePopup",function(he){for(var be=0;be<_e.length;be++)_e[be]===he&&(_e.splice(be,1),be--)}),t.attachEvent("onDestroy",function(){i.cover&&i.cover.parentNode&&i.cover.parentNode.removeChild(i.cover);for(var he=0;he<_e.length;he++)_e[he].parentNode&&_e[he].parentNode.removeChild(_e[he]);_e=null,oe.area&&oe.area.parentNode&&oe.area.parentNode.removeChild(oe.area),oe=null}),{alert:function(){var he=z.apply(this,arguments);return he.type=he.type||"confirm",V(he)},confirm:function(){var he=z.apply(this,arguments);return he.type=he.type||"alert",T(he)},message:oe,modalbox:re}}(j);j.utils.mixin(j,a),j.env=j.$env=Y,j.Promise=ne,function(i){i.destructor=function(){for(var o in i.callEvent("onDestroy",[]),this.clearAll(),this.$container&&(this.$container.innerHTML=""),this._eventRemoveAll&&this._eventRemoveAll(),this.resetLightbox&&this.resetLightbox(),this._dp&&this._dp.destructor&&this._dp.destructor(),this.detachAllEvents(),this)0===o.indexOf("$")&&delete this[o];i.$destroyed=!0}}(j),function(i){function o(c,h){var D={method:c};if(0===h.length)throw new Error("Arguments list of query is wrong.");if(1===h.length)return"string"==typeof h[0]?(D.url=h[0],D.async=!0):(D.url=h[0].url,D.async=h[0].async||!0,D.callback=h[0].callback,D.headers=h[0].headers),D.data=h[0].data?"string"!=typeof h[0].data?ge()(h[0].data):h[0].data:"",D;switch(D.url=h[0],c){case"GET":case"DELETE":D.callback=h[1],D.headers=h[2];break;case"POST":case"PUT":D.data=h[1]?"string"!=typeof h[1]?ge()(h[1]):h[1]:"",D.callback=h[2],D.headers=h[3]}return D}i.Promise=ne,i.ajax={cache:!0,method:"get",serializeRequestParams:ge.a,parse:function(c){return"string"!=typeof c?c:(c=c.replace(/^[\s]+/,""),typeof DOMParser>"u"||i.$env.isIE?void 0!==window.ActiveXObject&&((h=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",h.loadXML(c)):h=(new DOMParser).parseFromString(c,"text/xml"),h);var h},xmltop:function(c,h,D){if(void 0===h.status||h.status<400){var V=h.responseXML?h.responseXML||h:this.parse(h.responseText||h);if(V&&null!==V.documentElement&&!V.getElementsByTagName("parsererror").length)return V.getElementsByTagName(c)[0]}return-1!==D&&i.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],D]),document.createElement("DIV")},xpath:function(c,h){if(h.nodeName||(h=h.responseXML||h),i.$env.isIE)return h.selectNodes(c)||[];for(var D,V=[],T=(h.ownerDocument||h).evaluate(c,h,null,XPathResult.ANY_TYPE,null);D=T.iterateNext();)V.push(D);return V},query:function(c){return this._call(c.method||"GET",c.url,c.data||"",c.async||!0,c.callback,c.headers)},get:function(c,h,D){var V=o("GET",arguments);return this.query(V)},getSync:function(c,h){var D=o("GET",arguments);return D.async=!1,this.query(D)},put:function(c,h,D,V){var T=o("PUT",arguments);return this.query(T)},del:function(c,h,D){var V=o("DELETE",arguments);return this.query(V)},post:function(c,h,D,V){(1==arguments.length||2==arguments.length&&"function"==typeof h)&&(h="");var T=o("POST",arguments);return this.query(T)},postSync:function(c,h,D){h=null===h?"":String(h);var V=o("POST",arguments);return V.async=!1,this.query(V)},_call:function(c,h,D,V,T,W){return new i.Promise(function(z,Z){var re=void 0===(typeof XMLHttpRequest>"u"?"undefined":Ee(XMLHttpRequest))||i.$env.isIE?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,oe=null!==navigator.userAgent.match(/AppleWebKit/)&&null!==navigator.userAgent.match(/Qt/)&&null!==navigator.userAgent.match(/Safari/);if(V&&re.addEventListener("readystatechange",function(){if(4==re.readyState||oe&&3==re.readyState){if((200!=re.status||""===re.responseText)&&!i.callEvent("onAjaxError",[re]))return;setTimeout(function(){"function"==typeof T&&T.apply(window,[{xmlDoc:re,filePath:h}]),z(re),"function"==typeof T&&(T=null,re=null)},0)}}),"GET"!=c||this.cache||(h+=(h.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),re.open(c,h,V),W)for(var _e in W)re.setRequestHeader(_e,W[_e]);else"POST"==c.toUpperCase()||"PUT"==c||"DELETE"==c?re.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==c&&(D=null);if(re.setRequestHeader("X-Requested-With","XMLHttpRequest"),re.send(D),!V)return{xmlDoc:re,filePath:h}}.bind(this))},urlSeparator:function(c){return-1!=c.indexOf("?")?"&":"?"}},i.$ajax=i.ajax}(j),function Le(t){var j=function(i,o){for(var c="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",h=i.match(/%[a-zA-Z]/g),D=0;D<h.length;D++)switch(h[D]){case"%j":case"%d":c+="set[2]=temp["+D+"]||1;";break;case"%n":case"%m":c+="set[1]=(temp["+D+"]||1)-1;";break;case"%y":c+="set[0]=temp["+D+"]*1+(temp["+D+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":c+="set[3]=temp["+D+"]||0;";break;case"%i":c+="set[4]=temp["+D+"]||0;";break;case"%Y":c+="set[0]=temp["+D+"]||0;";break;case"%a":case"%A":c+="set[3]=set[3]%12+((temp["+D+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":c+="set[5]=temp["+D+"]||0;";break;case"%M":c+="set[1]=this.locale.date.month_short_hash[temp["+D+"]]||0;";break;case"%F":c+="set[1]=this.locale.date.month_full_hash[temp["+D+"]]||0;"}var V="set[0],set[1],set[2],set[3],set[4],set[5]";return o&&(V=" Date.UTC("+V+")"),new Function("date","var set=[0,0,1,0,0,0]; "+c+" return new Date("+V+");")},a=function(i,o){return function(c){for(var h=[0,0,1,0,0,0],D=c.match(/[a-zA-Z]+|[0-9]+/g),V=i.match(/%[a-zA-Z]/g),T=0;T<V.length;T++)switch(V[T]){case"%j":case"%d":h[2]=D[T]||1;break;case"%n":case"%m":h[1]=(D[T]||1)-1;break;case"%y":h[0]=1*D[T]+(D[T]>50?1900:2e3);break;case"%g":case"%G":case"%h":case"%H":h[3]=D[T]||0;break;case"%i":h[4]=D[T]||0;break;case"%Y":h[0]=D[T]||0;break;case"%a":case"%A":h[3]=h[3]%12+("am"==(D[T]||"").toLowerCase()?0:12);break;case"%s":h[5]=D[T]||0;break;case"%M":h[1]=t.locale.date.month_short_hash[D[T]]||0;break;case"%F":h[1]=t.locale.date.month_full_hash[D[T]]||0}return o?new Date(Date.UTC(h[0],h[1],h[2],h[3],h[4],h[5])):new Date(h[0],h[1],h[2],h[3],h[4],h[5])}},v=!1;function _(){return"auto"===t.config.csp?v:t.config.csp}(function(){try{new Function("canUseCsp = false;")}catch{v=!0}})(),t.date={init:function(){for(var i=t.locale.date.month_short,o=t.locale.date.month_short_hash={},c=0;c<i.length;c++)o[i[c]]=c;for(i=t.locale.date.month_full,o=t.locale.date.month_full_hash={},c=0;c<i.length;c++)o[i[c]]=c},_bind_host_object:function(i){return i.bind?i.bind(t):function(){return i.apply(t,arguments)}},date_part:function(i){var o=new Date(i);return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getHours()&&(i.getDate()<o.getDate()||i.getMonth()<o.getMonth()||i.getFullYear()<o.getFullYear())&&i.setTime(i.getTime()+36e5*(24-i.getHours())),i},time_part:function(i){return(i.valueOf()/1e3-60*i.getTimezoneOffset())%86400},week_start:function(i){var o=i.getDay();return t.config.start_on_monday&&(0===o?o=6:o--),this.date_part(this.add(i,-1*o,"day"))},month_start:function(i){return i.setDate(1),this.date_part(i)},year_start:function(i){return i.setMonth(0),this.month_start(i)},day_start:function(i){return this.date_part(i)},_add_days:function(i,o){var c=new Date(i.valueOf());if(c.setDate(c.getDate()+o),o==Math.round(o)&&o>0){var h=(+c-+i)%864e5;if(h&&i.getTimezoneOffset()==c.getTimezoneOffset()){var D=h/36e5;c.setTime(c.getTime()+60*(24-D)*60*1e3)}}return o>=0&&!i.getHours()&&c.getHours()&&(c.getDate()<i.getDate()||c.getMonth()<i.getMonth()||c.getFullYear()<i.getFullYear())&&c.setTime(c.getTime()+36e5*(24-c.getHours())),c},add:function(i,o,c){var h=new Date(i.valueOf());switch(c){case"day":h=t.date._add_days(h,o);break;case"week":h=t.date._add_days(h,7*o);break;case"month":h.setMonth(h.getMonth()+o);break;case"year":h.setYear(h.getFullYear()+o);break;case"hour":h.setTime(h.getTime()+60*o*60*1e3);break;case"minute":h.setTime(h.getTime()+60*o*1e3);break;default:return t.date["add_"+c](i,o,c)}return h},to_fixed:function(i){return i<10?"0"+i:i},copy:function(i){return new Date(i.valueOf())},date_to_str:function(i,o){if(_())return h=i,D=o,function(V){return h.replace(/%[a-zA-Z]/g,function(T){switch(T){case"%d":return t.date.to_fixed(D?V.getUTCDate():V.getDate());case"%m":return t.date.to_fixed(D?V.getUTCMonth()+1:V.getMonth()+1);case"%j":return D?V.getUTCDate():V.getDate();case"%n":return D?V.getUTCMonth()+1:V.getMonth()+1;case"%y":return t.date.to_fixed(D?V.getUTCFullYear()%100:V.getFullYear()%100);case"%Y":return D?V.getUTCFullYear():V.getFullYear();case"%D":return D?t.locale.date.day_short[V.getUTCDay()]:t.locale.date.day_short[V.getDay()];case"%l":return D?t.locale.date.day_full[V.getUTCDay()]:t.locale.date.day_full[V.getDay()];case"%M":return D?t.locale.date.month_short[V.getUTCMonth()]:t.locale.date.month_short[V.getMonth()];case"%F":return D?t.locale.date.month_full[V.getUTCMonth()]:t.locale.date.month_full[V.getMonth()];case"%h":return t.date.to_fixed(D?(V.getUTCHours()+11)%12+1:(V.getHours()+11)%12+1);case"%g":return D?(V.getUTCHours()+11)%12+1:(V.getHours()+11)%12+1;case"%G":return D?V.getUTCHours():V.getHours();case"%H":return t.date.to_fixed(D?V.getUTCHours():V.getHours());case"%i":return t.date.to_fixed(D?V.getUTCMinutes():V.getMinutes());case"%a":return D?V.getUTCHours()>11?"pm":"am":V.getHours()>11?"pm":"am";case"%A":return D?V.getUTCHours()>11?"PM":"AM":V.getHours()>11?"PM":"AM";case"%s":return t.date.to_fixed(D?V.getUTCSeconds():V.getSeconds());case"%W":return t.date.to_fixed(D?t.date.getUTCISOWeek(V):t.date.getISOWeek(V));default:return T}})};var h,D;i=i.replace(/%[a-zA-Z]/g,function(h){switch(h){case"%d":return'"+this.date.to_fixed(date.getDate())+"';case"%m":return'"+this.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+this.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+this.locale.date.day_short[date.getDay()]+"';case"%l":return'"+this.locale.date.day_full[date.getDay()]+"';case"%M":return'"+this.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+this.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+this.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+this.date.to_fixed(date.getHours())+"';case"%i":return'"+this.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+this.date.to_fixed(date.getSeconds())+"';case"%W":return'"+this.date.to_fixed(this.date.getISOWeek(date))+"';default:return h}}),o&&(i=i.replace(/date\.get/g,"date.getUTC"));var c=new Function("date",'return "'+i+'";');return t.date._bind_host_object(c)},str_to_date:function(i,o,c){var h=_()?a:j,D=h(i,o),V=/^[0-9]{4}(\-|\/)[0-9]{2}(\-|\/)[0-9]{2} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,T=/^[0-9]{2}\/[0-9]{2}\/[0-9]{4} ?(([0-9]{1,2}:[0-9]{2})(:[0-9]{1,2})?)?$/,W=/^[0-9]{2}\-[0-9]{2}\-[0-9]{4} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,z=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Z=h("%Y-%m-%d %H:%i:%s",o),re=h("%m/%d/%Y %H:%i:%s",o),oe=h("%d-%m-%Y %H:%i:%s",o);return function(_e){if(!c&&!t.config.parse_exact_format){if(_e&&_e.getISOWeek)return new Date(_e);if("number"==typeof _e)return new Date(_e);if(V.test(String(_e)))return Z(_e);if(T.test(String(_e)))return re(_e);if(W.test(String(_e)))return oe(_e);if(function(he){return z.test(he)}(_e))return new Date(_e)}return D.call(t,_e)}},getISOWeek:function(i){if(!i)return!1;var o=(i=this.date_part(new Date(i))).getDay();0===o&&(o=7);var c=new Date(i.valueOf());c.setDate(i.getDate()+(4-o));var h=c.getFullYear(),D=Math.round((c.getTime()-new Date(h,0,1).getTime())/864e5);return 1+Math.floor(D/7)},getUTCISOWeek:function(i){return this.getISOWeek(this.convert_to_utc(i))},convert_to_utc:function(i){return new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds())}}}(j),function(i){i.config={default_date:"%j %M %Y",month_date:"%F %Y",load_date:"%Y-%m-%d",week_date:"%l",day_date:"%D, %F %j",hour_date:"%H:%i",month_day:"%d",date_format:"%Y-%m-%d %H:%i",api_date:"%d-%m-%Y %H:%i",parse_exact_format:!1,preserve_length:!0,time_step:5,start_on_monday:!0,first_hour:0,last_hour:24,readonly:!1,drag_resize:!0,drag_move:!0,drag_create:!0,drag_event_body:!0,dblclick_create:!0,edit_on_create:!0,details_on_create:!1,header:null,resize_month_events:!1,resize_month_timed:!1,responsive_lightbox:!1,rtl:!1,cascade_event_display:!1,cascade_event_count:4,cascade_event_margin:30,multi_day:!0,multi_day_height_limit:0,drag_lightbox:!0,preserve_scroll:!0,select:!0,server_utc:!1,touch:!0,touch_tip:!0,touch_drag:500,touch_swipe_dates:!1,quick_info_detached:!0,positive_closing:!1,drag_highlight:!0,limit_drag_out:!1,icons_edit:["icon_save","icon_cancel"],icons_select:["icon_details","icon_edit","icon_delete"],buttons_left:["dhx_save_btn","dhx_cancel_btn"],buttons_right:["dhx_delete_btn"],lightbox:{sections:[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"time",height:72,type:"time",map_to:"auto"}]},highlight_displayed_event:!0,left_border:!1,ajax_error:"alert",delay_render:0,timeline_swap_resize:!0,wai_aria_attributes:!0,wai_aria_application_role:!0,csp:"auto",event_attribute:"data-event-id",show_errors:!0},i.config.buttons_left.$initial=i.config.buttons_left.join(),i.config.buttons_right.$initial=i.config.buttons_right.join(),i._helpers={parseDate:function(o){return(i.templates.xml_date||i.templates.parse_date)(o)},formatDate:function(o){return(i.templates.xml_format||i.templates.format_date)(o)}},i.templates={},i.init_templates=function(){var o=i.locale.labels;o.dhx_save_btn=o.icon_save,o.dhx_cancel_btn=o.icon_cancel,o.dhx_delete_btn=o.icon_delete;var c=i.date.date_to_str,h=i.config;(function(D,V){for(var T in V)D[T]||(D[T]=V[T])})(i.templates,{day_date:c(h.default_date),month_date:c(h.month_date),week_date:function(D,V){return h.rtl?i.templates.day_date(i.date.add(V,-1,"day"))+" &ndash; "+i.templates.day_date(D):i.templates.day_date(D)+" &ndash; "+i.templates.day_date(i.date.add(V,-1,"day"))},day_scale_date:c(h.default_date),month_scale_date:c(h.week_date),week_scale_date:c(h.day_date),hour_scale:c(h.hour_date),time_picker:c(h.hour_date),event_date:c(h.hour_date),month_day:c(h.month_day),load_format:c(h.load_date),format_date:c(h.date_format,h.server_utc),parse_date:i.date.str_to_date(h.date_format,h.server_utc),api_date:i.date.str_to_date(h.api_date,!1,!1),event_header:function(D,V,T){return i.templates.event_date(D)+" - "+i.templates.event_date(V)},event_text:function(D,V,T){return T.text},event_class:function(D,V,T){return""},month_date_class:function(D){return""},week_date_class:function(D){return""},event_bar_date:function(D,V,T){return i.templates.event_date(D)+" "},event_bar_text:function(D,V,T){return T.text},month_events_link:function(D,V){return"<a>View more("+V+" events)</a>"},drag_marker_class:function(D,V,T){return""},drag_marker_content:function(D,V,T){return""},tooltip_date_format:i.date.date_to_str("%Y-%m-%d %H:%i"),tooltip_text:function(D,V,T){return"<b>Event:</b> "+T.text+"<br/><b>Start date:</b> "+i.templates.tooltip_date_format(D)+"<br/><b>End date:</b> "+i.templates.tooltip_date_format(V)}}),this.callEvent("onTemplatesReady",[])}}(j),function(i){i._events={},i.clearAll=function(){this._events={},this._loaded={},this._edit_id=null,this._select_id=null,this._drag_id=null,this._drag_mode=null,this._drag_pos=null,this._new_event=null,this.clear_view(),this.callEvent("onClearAll",[])},i.addEvent=function(o,c,h,D,V){if(!arguments.length)return this.addEventNow();var T=o;1!=arguments.length&&((T=V||{}).start_date=o,T.end_date=c,T.text=h,T.id=D),T.id=T.id||i.uid(),T.text=T.text||"","string"==typeof T.start_date&&(T.start_date=this.templates.api_date(T.start_date)),"string"==typeof T.end_date&&(T.end_date=this.templates.api_date(T.end_date));var W=6e4*(this.config.event_duration||this.config.time_step);T.start_date.valueOf()==T.end_date.valueOf()&&T.end_date.setTime(T.end_date.valueOf()+W),T.start_date.setMilliseconds(0),T.end_date.setMilliseconds(0),T._timed=this.isOneDayEvent(T);var z=!this._events[T.id];return this._events[T.id]=T,this.event_updated(T),this._loading||this.callEvent(z?"onEventAdded":"onEventChanged",[T.id,T]),T.id},i.deleteEvent=function(o,c){var h=this._events[o];(c||this.callEvent("onBeforeEventDelete",[o,h])&&this.callEvent("onConfirmedBeforeEventDelete",[o,h]))&&(h&&(i.getState().select_id==o&&i.unselect(),delete this._events[o],this.event_updated(h),this._drag_id==h.id&&(this._drag_id=null,this._drag_mode=null,this._drag_pos=null)),this.callEvent("onEventDeleted",[o,h]))},i.getEvent=function(o){return this._events[o]},i.setEvent=function(o,c){c.id||(c.id=o),this._events[o]=c},i.for_rendered=function(o,c){for(var h=this._rendered.length-1;h>=0;h--)this._rendered[h].getAttribute(this.config.event_attribute)==o&&c(this._rendered[h],h)},i.changeEventId=function(o,c){if(o!=c){var h=this._events[o];h&&(h.id=c,this._events[c]=h,delete this._events[o]),this.for_rendered(o,function(D){D.setAttribute("event_id",c),D.setAttribute(i.config.event_attribute,c)}),this._select_id==o&&(this._select_id=c),this._edit_id==o&&(this._edit_id=c),this.callEvent("onEventIdChange",[o,c])}},function(){for(var o=["text","Text","start_date","StartDate","end_date","EndDate"],c=function(V){return function(T){return i.getEvent(T)[V]}},h=function(V){return function(T,W){var z=i.getEvent(T);z[V]=W,z._changed=!0,z._timed=this.isOneDayEvent(z),i.event_updated(z,!0)}},D=0;D<o.length;D+=2)i["getEvent"+o[D+1]]=c(o[D]),i["setEvent"+o[D+1]]=h(o[D])}(),i.event_updated=function(o,c){this.is_visible_events(o)?this.render_view_data():this.clear_event(o.id)},i.is_visible_events=function(o){if(!this._min_date||!this._max_date)return!1;if(o.start_date.valueOf()<this._max_date.valueOf()&&this._min_date.valueOf()<o.end_date.valueOf()){var c=o.start_date.getHours(),h=o.end_date.getHours()+o.end_date.getMinutes()/60,D=this.config.last_hour,V=this.config.first_hour;return!(!this._table_view&&(h>D||h<=V)&&(c>=D||c<V)&&!((o.end_date.valueOf()-o.start_date.valueOf())/36e5>24-(this.config.last_hour-this.config.first_hour)||c<D&&h>V))}return!1},i.isOneDayEvent=function(o){var c=new Date(o.end_date.valueOf()-1);return o.start_date.getFullYear()===c.getFullYear()&&o.start_date.getMonth()===c.getMonth()&&o.start_date.getDate()===c.getDate()&&o.end_date.valueOf()-o.start_date.valueOf()<864e5},i.get_visible_events=function(o){var c=[];for(var h in this._events)this.is_visible_events(this._events[h])&&(o&&!this._events[h]._timed||this.filter_event(h,this._events[h])&&c.push(this._events[h]));return c},i.filter_event=function(o,c){var h=this["filter_"+this._mode];return!h||h(o,c)},i._is_main_area_event=function(o){return!!o._timed},i.render_view_data=function(o,c){var h=!1;if(!o){if(h=!0,this._not_render)return void(this._render_wait=!0);this._render_wait=!1,this.clear_view(),o=this.get_visible_events(!(this._table_view||this.config.multi_day))}for(var D=0,V=o.length;D<V;D++)this._recalculate_timed(o[D]);if(this.config.multi_day&&!this._table_view){var T=[],W=[];for(D=0;D<o.length;D++)this._is_main_area_event(o[D])?T.push(o[D]):W.push(o[D]);if(!this._els.dhx_multi_day){var z=i._commonErrorMessages.unknownView(this._mode);throw new Error(z)}this._rendered_location=this._els.dhx_multi_day[0],this._table_view=!0,this.render_data(W,c),this._table_view=!1,this._rendered_location=this._els.dhx_cal_data[0],this._table_view=!1,this.render_data(T,c)}else{var Z=document.createDocumentFragment(),re=this._els.dhx_cal_data[0];this._rendered_location=Z,this.render_data(o,c),re.appendChild(Z),this._rendered_location=re}h&&this.callEvent("onDataRender",[])},i._view_month_day=function(o){var c=i.getActionData(o).date;i.callEvent("onViewMoreClick",[c])&&i.setCurrentView(c,"day")},i._render_month_link=function(o){for(var c=this._rendered_location,h=this._lame_clone(o),D=o._sday;D<o._eday;D++){h._sday=D,h._eday=D+1;var V=i.date,T=i._min_date;T=V.add(T,h._sweek,"week"),T=V.add(T,h._sday,"day");var W=i.getEvents(T,V.add(T,1,"day")).length,z=this._get_event_bar_pos(h),Z=z.x2-z.x,re=document.createElement("div");i.event(re,"click",function(oe){i._view_month_day(oe)}),re.className="dhx_month_link",re.style.top=z.y+"px",re.style.left=z.x+"px",re.style.width=Z+"px",re.innerHTML=i.templates.month_events_link(T,W),this._rendered.push(re),c.appendChild(re)}},i._recalculate_timed=function(o){var c;o&&(c="object"!=Qe(o)?this._events[o]:o)&&(c._timed=i.isOneDayEvent(c))},i.attachEvent("onEventChanged",i._recalculate_timed),i.attachEvent("onEventAdded",i._recalculate_timed),i.render_data=function(o,c){o=this._pre_render_events(o,c);for(var h={},D=0;D<o.length;D++)if(this._table_view)if("month"!=i._mode)this.render_event_bar(o[D]);else{var V=i.config.max_month_events;V!==1*V||o[D]._sorder<V?this.render_event_bar(o[D]):void 0!==V&&o[D]._sorder==V&&i._render_month_link(o[D])}else{var T=o[D],W=i.locate_holder(T._sday);if(!W)continue;h[T._sday]||(h[T._sday]={real:W,buffer:document.createDocumentFragment(),width:W.clientWidth});var z=h[T._sday];this.render_event(T,z.buffer,z.width)}for(var D in h)(z=h[D]).real&&z.buffer&&z.real.appendChild(z.buffer)},i._get_first_visible_cell=function(o){for(var c=0;c<o.length;c++)if(-1==(o[c].className||"").indexOf("dhx_scale_ignore"))return o[c];return o[0]},i._pre_render_events=function(o,c){var h=this.xy.bar_height,D=this._colsS.heights,V=this._colsS.heights=[0,0,0,0,0,0,0],T=this._els.dhx_cal_data[0];if(o=this._table_view?this._pre_render_events_table(o,c):this._pre_render_events_line(o,c),this._table_view)if(c)this._colsS.heights=D;else{var W=T.firstChild;if(W.rows){for(var z=0;z<W.rows.length;z++){V[z]++;var Z=W.rows[z].cells,re=this._colsS.height-this.xy.month_head_height;if(V[z]*h>re){var oe=re;1*this.config.max_month_events!==this.config.max_month_events||V[z]<=this.config.max_month_events?oe=V[z]*h:(this.config.max_month_events+1)*h>re&&(oe=(this.config.max_month_events+1)*h);for(var _e=0;_e<Z.length;_e++)Z[_e].childNodes[1].style.height=oe+"px"}V[z]=(V[z-1]||0)+i._get_first_visible_cell(Z).offsetHeight}if(V.unshift(0),W.parentNode.offsetHeight<W.parentNode.scrollHeight&&!i._colsS.scroll_fix&&i.xy.scroll_width){var he=i._colsS,be=he[he.col_length],Ae=he.heights.slice();this._calc_scale_sizes(be-=i.xy.scroll_width||0,this._min_date,this._max_date),i._colsS.heights=Ae,this.set_xy(this._els.dhx_cal_header[0],be,this.xy.scale_height),i._render_scales(this._els.dhx_cal_header[0]),i._render_month_scale(this._els.dhx_cal_data[0],this._get_timeunit_start(),this._min_date),he.scroll_fix=!0}}else if(o.length||"visible"!=this._els.dhx_multi_day[0].style.visibility||(V[0]=-1),o.length||-1==V[0]){var He=(V[0]+1)*h+1,Ne=He,Ve=He+"px";this.config.multi_day_height_limit&&(Ve=(Ne=Math.min(He,this.config.multi_day_height_limit))+"px"),T.style.top=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+Ne+"px",T.style.height=this._obj.offsetHeight-parseInt(T.style.top,10)-(this.xy.margin_top||0)+"px";var Se=this._els.dhx_multi_day[0];Se.style.height=Ve,Se.style.visibility=-1==V[0]?"hidden":"visible";var Fe=this._els.dhx_multi_day[1];Fe.style.height=Ve,Fe.style.visibility=-1==V[0]?"hidden":"visible",Fe.className=V[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(V[0]+1)*h,this.config.multi_day_height_limit&&(this._dy_shift=Math.min(this.config.multi_day_height_limit,this._dy_shift)),V[0]=0,Ne!=He&&(T.style.top=parseInt(T.style.top)+2+"px",Se.style.overflowY="auto",Fe.style.position="fixed",Fe.style.top="",Fe.style.left="")}}return o},i._get_event_sday=function(o){var c=this.date.day_start(new Date(o.start_date));return Math.round((c.valueOf()-this._min_date.valueOf())/864e5)},i._get_event_mapped_end_date=function(o){var c=o.end_date;if(this.config.separate_short_events){var h=(o.end_date-o.start_date)/6e4;h<this._min_mapped_duration&&(c=this.date.add(c,this._min_mapped_duration-h,"minute"))}return c},i._pre_render_events_line=function(o,c){o.sort(function(Se,Fe){return Se.start_date.valueOf()==Fe.start_date.valueOf()?Se.id>Fe.id?1:-1:Se.start_date>Fe.start_date?1:-1});var h=[],D=[];this._min_mapped_duration=Math.ceil(60*this.xy.min_event_height/this.config.hour_size_px);for(var V=0;V<o.length;V++){var T=o[V],z=T.end_date,Z=T.start_date.getHours(),re=z.getHours();if(T._sday=this._get_event_sday(T),this._ignores[T._sday])o.splice(V,1),V--;else{if(h[T._sday]||(h[T._sday]=[]),!c){T._inner=!1;for(var oe=h[T._sday];oe.length;){var _e=oe[oe.length-1];if(!(this._get_event_mapped_end_date(_e).valueOf()<=T.start_date.valueOf()))break;oe.splice(oe.length-1,1)}for(var he=oe.length,be=!1,Ae=0;Ae<oe.length;Ae++)if(this._get_event_mapped_end_date(_e=oe[Ae]).valueOf()<=T.start_date.valueOf()){be=!0,T._sorder=_e._sorder,he=Ae,T._inner=!0;break}if(oe.length&&(oe[oe.length-1]._inner=!0),!be)if(oe.length)if(oe.length<=oe[oe.length-1]._sorder){if(oe[oe.length-1]._sorder)for(Ae=0;Ae<oe.length;Ae++){for(var He=!1,Ne=0;Ne<oe.length;Ne++)if(oe[Ne]._sorder==Ae){He=!0;break}if(!He){T._sorder=Ae;break}}else T._sorder=0;T._inner=!0}else{var Ve=oe[0]._sorder;for(Ae=1;Ae<oe.length;Ae++)oe[Ae]._sorder>Ve&&(Ve=oe[Ae]._sorder);T._sorder=Ve+1,T._inner=!1}else T._sorder=0;oe.splice(he,he==oe.length?0:1,T),oe.length>(oe.max_count||0)?(oe.max_count=oe.length,T._count=oe.length):T._count=T._count?T._count:1}(Z<this.config.first_hour||re>=this.config.last_hour)&&(D.push(T),o[V]=T=this._copy_event(T),Z<this.config.first_hour&&(T.start_date.setHours(this.config.first_hour),T.start_date.setMinutes(0)),re>=this.config.last_hour&&(T.end_date.setMinutes(0),T.end_date.setHours(this.config.last_hour)),T.start_date>T.end_date||Z==this.config.last_hour)&&(o.splice(V,1),V--)}}if(!c){for(V=0;V<o.length;V++)o[V]._count=h[o[V]._sday].max_count;for(V=0;V<D.length;V++)D[V]._count=h[D[V]._sday].max_count}return o},i._time_order=function(o){o.sort(function(c,h){return c.start_date.valueOf()==h.start_date.valueOf()?c._timed&&!h._timed?1:!c._timed&&h._timed?-1:c.id>h.id?1:-1:c.start_date>h.start_date?1:-1})},i._is_any_multiday_cell_visible=function(o,c,h){var D=this._cols.length,V=!1,T=o,W=!0,z=new Date(c);for(i.date.day_start(new Date(c)).valueOf()!=c.valueOf()&&(z=i.date.day_start(z),z=i.date.add(z,1,"day"));T<z;){W=!1;var Z=this.locate_holder_day(T,!1,h)%D;if(!this._ignores[Z]){V=!0;break}T=i.date.add(T,1,"day")}return W||V},i._pre_render_events_table=function(o,c){this._time_order(o);for(var h,D=[],V=[[],[],[],[],[],[],[]],T=this._colsS.heights,W=this._cols.length,z={},Z=0;Z<o.length;Z++){var re=o[Z],oe=re.id;z[oe]||(z[oe]={first_chunk:!0,last_chunk:!0});var _e=z[oe],he=h||re.start_date,be=re.end_date;he<this._min_date&&(_e.first_chunk=!1,he=this._min_date),be>this._max_date&&(_e.last_chunk=!1,be=this._max_date);var Ae=this.locate_holder_day(he,!1,re);if(re._sday=Ae%W,!this._ignores[re._sday]||!re._timed){var He=this.locate_holder_day(be,!0,re)||W;if(re._eday=He%W||W,re._length=He-Ae,re._sweek=Math.floor((this._correct_shift(he.valueOf(),1)-this._min_date.valueOf())/(864e5*W)),i._is_any_multiday_cell_visible(he,be,re)){var Ne,Ve=V[re._sweek];for(Ne=0;Ne<Ve.length&&!(Ve[Ne]._eday<=re._sday);Ne++);if(re._sorder&&c||(re._sorder=Ne),re._sday+re._length<=W)h=null,D.push(re),Ve[Ne]=re,T[re._sweek]=Ve.length-1,re._first_chunk=_e.first_chunk,re._last_chunk=_e.last_chunk;else{var Se=this._copy_event(re);Se.id=re.id,Se._length=W-re._sday,Se._eday=W,Se._sday=re._sday,Se._sweek=re._sweek,Se._sorder=re._sorder,Se.end_date=this.date.add(he,Se._length,"day"),Se._first_chunk=_e.first_chunk,_e.first_chunk&&(_e.first_chunk=!1),D.push(Se),Ve[Ne]=Se,h=Se.end_date,T[re._sweek]=Ve.length-1,Z--}}}}return D},i._copy_dummy=function(){var o=new Date(this.start_date),c=new Date(this.end_date);this.start_date=o,this.end_date=c},i._copy_event=function(o){return this._copy_dummy.prototype=o,new this._copy_dummy},i._rendered=[],i.clear_view=function(){for(var o=0;o<this._rendered.length;o++){var c=this._rendered[o];c.parentNode&&c.parentNode.removeChild(c)}this._rendered=[]},i.updateEvent=function(o){var c=this.getEvent(o);this.clear_event(o),c&&this.is_visible_events(c)&&this.filter_event(o,c)&&(this._table_view||this.config.multi_day||c._timed)&&(this.config.update_render?this.render_view_data():"month"!=this.getState().mode||this.getState().drag_id||this.isOneDayEvent(c)?this.render_view_data([c],!0):this.render_view_data())},i.clear_event=function(o){this.for_rendered(o,function(c,h){c.parentNode&&c.parentNode.removeChild(c),i._rendered.splice(h,1)})},i._y_from_date=function(o){var c=60*o.getHours()+o.getMinutes();return Math.round((60*c*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)},i._calc_event_y=function(o,c){c=c||0;var h=60*o.start_date.getHours()+o.start_date.getMinutes(),D=60*o.end_date.getHours()+o.end_date.getMinutes()||60*i.config.last_hour;return{top:this._y_from_date(o.start_date),height:Math.max(c,(D-h)*this.config.hour_size_px/60)}},i.render_event=function(o,c,h){var D=i.xy.menu_width,V=this.config.use_select_menu_space?0:D;if(!(o._sday<0)){var T=i.locate_holder(o._sday);if(T){c=c||T;var W=this._calc_event_y(o,i.xy.min_event_height),z=W.top,Z=W.height,re=o._count||1,oe=o._sorder||0;h=h||T.clientWidth;var _e=Math.floor((h-V)/re),he=oe*_e+1;if(o._inner||(_e*=re-oe),this.config.cascade_event_display){var be=this.config.cascade_event_count,Ae=this.config.cascade_event_margin;he=oe%be*Ae,_e=Math.floor(h-V-he-(o._inner?(re-oe-1)%be*Ae/2:0))}var Ne=this._render_v_bar(o,V+he,z,_e,Z,o._text_style,i.templates.event_header(o.start_date,o.end_date,o),i.templates.event_text(o.start_date,o.end_date,o));if(this._waiAria.eventAttr(o,Ne),this._rendered.push(Ne),c.appendChild(Ne),he=he+parseInt(this.config.rtl?T.style.right:T.style.left,10)+V,this._edit_id==o.id){Ne.style.zIndex=1,_e=Math.max(_e-4,i.xy.editor_width),(Ne=document.createElement("div")).setAttribute("event_id",o.id),Ne.setAttribute(this.config.event_attribute,o.id),this._waiAria.eventAttr(o,Ne),Ne.className="dhx_cal_event dhx_cal_editor",this.config.rtl&&he++,this.set_xy(Ne,_e,Z-20,he,z+(i.xy.event_header_height||14)),o.color&&(Ne.style.backgroundColor=o.color);var Ve=i.templates.event_class(o.start_date,o.end_date,o);Ve&&(Ne.className+=" "+Ve);var Se=document.createElement("div");this.set_xy(Se,_e-6,Z-26),Se.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;",Ne.appendChild(Se),this._els.dhx_cal_data[0].appendChild(Ne),this._rendered.push(Ne),Se.innerHTML="<textarea class='dhx_cal_editor'>"+o.text+"</textarea>",this._editor=Se.querySelector("textarea"),this._quirks7&&(this._editor.style.height=Z-12+"px"),i.event(this._editor,"keydown",function(yt){if(yt.shiftKey)return!0;var xt=yt.keyCode;xt==i.keys.edit_save&&i.editStop(!0),xt==i.keys.edit_cancel&&i.editStop(!1),xt!=i.keys.edit_save&&xt!=i.keys.edit_cancel||yt.preventDefault&&yt.preventDefault()}),i.event(this._editor,"selectstart",function(yt){return yt.cancelBubble=!0,!0}),i._focus(this._editor,!0),this._els.dhx_cal_data[0].scrollLeft=0}if(0!==this.xy.menu_width&&this._select_id==o.id){this.config.cascade_event_display&&this._drag_mode&&(Ne.style.zIndex=1);for(var Fe,Oe=this.config["icons_"+(this._edit_id==o.id?"edit":"select")],at="",ht=o.color?"background-color: "+o.color+";":"",lt=o.textColor?"color: "+o.textColor+";":"",mt=0;mt<Oe.length;mt++)Fe=this._waiAria.eventMenuAttrString(Oe[mt]),at+="<div class='dhx_menu_icon "+Oe[mt]+"' style='"+ht+lt+"' title='"+this.locale.labels[Oe[mt]]+"'"+Fe+"></div>";var ft=this._render_v_bar(o,he-D+1,z,D,20*Oe.length+26-2,"","<div style='"+ht+lt+"' class='dhx_menu_head'></div>",at,!0);ft.style.left=he-D+1,this._els.dhx_cal_data[0].appendChild(ft),this._rendered.push(ft)}this.config.drag_highlight&&this._drag_id==o.id&&this.highlightEventPosition(o)}}},i._render_v_bar=function(o,c,h,D,V,T,W,z,Z){var re=document.createElement("div"),oe=o.id,_e=Z?"dhx_cal_event dhx_cal_select_menu":"dhx_cal_event",he=i.getState();he.drag_id==o.id&&(_e+=" dhx_cal_event_drag"),he.select_id==o.id&&(_e+=" dhx_cal_event_selected");var be=i.templates.event_class(o.start_date,o.end_date,o);be&&(_e=_e+" "+be),this.config.cascade_event_display&&(_e+=" dhx_cal_event_cascade");var Ae=o.color?"background-color:"+o.color+";":"",He=o.textColor?"color:"+o.textColor+";":"",Ne=i._border_box_events(),Ve=D-2,Fe=Ne?Ve:D-6,Oe=Ne?Ve:D-(this._quirks?4:14),at=Ne?Ve-2:D-8,ht=Ne?V-this.xy.event_header_height-1:V-(this._quirks?20:30)+1;re.innerHTML='<div event_id="'+oe+'" '+this.config.event_attribute+'="'+oe+'" class="'+_e+'" style="position:absolute; top:'+h+"px; "+(this.config.rtl?"right:":"left:")+c+"px; width:"+(Ne?Ve:D-4)+"px; height:"+V+"px;"+(T||"")+'"></div>';var mt=re.cloneNode(!0).firstChild;if(!Z&&i.renderEvent(mt,o,D,V,W,z))return mt;var ft='<div class="dhx_event_move dhx_header" style=" width:'+Fe+"px;"+Ae+'" >&nbsp;</div>';ft+='<div class="dhx_event_move dhx_title" style="'+Ae+He+'">'+W+"</div>",ft+='<div class="dhx_body" style=" width:'+Oe+"px; height:"+ht+"px;"+Ae+He+'">'+z+"</div>";var yt="dhx_event_resize dhx_footer";return(Z||!1===o._drag_resize)&&(yt="dhx_resize_denied "+yt),(mt=re.firstChild).innerHTML=ft+='<div class="'+yt+'" style=" width:'+at+"px;"+(Z?" margin-top:-1px;":"")+Ae+He+'" ></div>',mt},i.renderEvent=function(){return!1},i.locate_holder=function(o){return"day"==this._mode?this._els.dhx_cal_data[0].firstChild:this._els.dhx_cal_data[0].childNodes[o]},i.locate_holder_day=function(o,c){var h=Math.floor((this._correct_shift(o,1)-this._min_date)/864e5);return c&&this.date.time_part(o)&&h++,h},i._get_dnd_order=function(o,c,h){if(!this._drag_event)return o;this._drag_event._orig_sorder?o=this._drag_event._orig_sorder:this._drag_event._orig_sorder=o;for(var D=c*o;D+c>h;)o--,D-=c;return Math.max(o,0)},i._get_event_bar_pos=function(o){var h=this._colsS,D=h[o._sday],V=h[o._eday];this.config.rtl&&(D=h[h.col_length]-h[o._eday]+h[0],V=h[h.col_length]-h[o._sday]+h[0]),V==D&&(V=h[o._eday+1]);var T=this.xy.bar_height,W=o._sorder;return o.id==this._drag_id&&(W=i._get_dnd_order(W,T,h.heights[o._sweek+1]-h.heights[o._sweek]-this.xy.month_head_height)),{x:D,x2:V,y:h.heights[o._sweek]+(h.height?this.xy.month_scale_height+2:2)+W*T}},i.render_event_bar=function(o){var c=this._rendered_location,h=this._get_event_bar_pos(o),D=h.y,V=h.x,T=h.x2,W="";if(T){var z=i.config.resize_month_events&&"month"==this._mode&&(!o._timed||i.config.resize_month_timed),Z=document.createElement("div"),re=o.hasOwnProperty("_first_chunk")&&o._first_chunk,oe=o.hasOwnProperty("_last_chunk")&&o._last_chunk,be=!0,Ae="dhx_cal_event_clear";o._timed&&!z||(be=!1,Ae="dhx_cal_event_line"),re&&(Ae+=" dhx_cal_event_line_start"),oe&&(Ae+=" dhx_cal_event_line_end"),z&&(o._timed||re)&&(W+="<div class='dhx_event_resize dhx_event_resize_start'></div>"),z&&(o._timed||oe)&&(W+="<div class='dhx_event_resize dhx_event_resize_end'></div>");var He=i.templates.event_class(o.start_date,o.end_date,o);He&&(Ae+=" "+He);var Se=["position:absolute","top:"+D+"px","left:"+V+"px","width:"+(T-V-3-(be?1:0))+"px",o.textColor?"color:"+o.textColor+";":"",o.color?"background:"+o.color+";":"",o._text_style||""].join(";"),Fe="<div event_id='"+o.id+"' "+this.config.event_attribute+"='"+o.id+"' class='"+Ae+"' style='"+Se+"'"+this._waiAria.eventBarAttrString(o)+">";z&&(Fe+=W),"month"==i.getState().mode&&(o=i.getEvent(o.id)),o._timed&&(Fe+=i.templates.event_bar_date(o.start_date,o.end_date,o)),Fe+=i.templates.event_bar_text(o.start_date,o.end_date,o)+"</div>",Z.innerHTML=Fe+="</div>",this._rendered.push(Z.firstChild),c.appendChild(Z.firstChild)}},i._locate_event=function(o){for(var c=null;o&&!c&&o.getAttribute;)c=o.getAttribute(this.config.event_attribute),o=o.parentNode;return c},i.edit=function(o){this._edit_id!=o&&(this.editStop(!1,o),this._edit_id=o,this.updateEvent(o))},i.editStop=function(o,c){if(!c||this._edit_id!=c){var h=this.getEvent(this._edit_id);h&&(o&&(h.text=this._editor.value),this._edit_id=null,this._editor=null,this.updateEvent(h.id),this._edit_stop_event(h,o))}},i._edit_stop_event=function(o,c){this._new_event?(c?this.callEvent("onEventAdded",[o.id,o]):o&&this.deleteEvent(o.id,!0),this._new_event=null):c&&this.callEvent("onEventChanged",[o.id,o])},i.getEvents=function(o,c){var h=[];for(var D in this._events){var V=this._events[D];V&&(!o&&!c||V.start_date<c&&V.end_date>o)&&h.push(V)}return h},i.getRenderedEvent=function(o){if(o){for(var c=i._rendered,h=0;h<c.length;h++){var D=c[h];if(D.getAttribute(i.config.event_attribute)==o)return D}return null}},i.showEvent=function(o,c){o&&"object"===Qe(o)&&(c=o.mode,oe=o.section,o=o.section);var h="number"==typeof o||"string"==typeof o?i.getEvent(o):o;if(c=c||i._mode,h&&(!this.checkEvent("onBeforeEventDisplay")||this.callEvent("onBeforeEventDisplay",[h,c]))){var D=i.config.scroll_hour;i.config.scroll_hour=h.start_date.getHours();var V=i.config.preserve_scroll;i.config.preserve_scroll=!1;var T=h.color,W=h.textColor;if(i.config.highlight_displayed_event&&(h.color=i.config.displayed_event_color,h.textColor=i.config.displayed_event_text_color),i.setCurrentView(new Date(h.start_date),c),i.config.scroll_hour=D,i.config.preserve_scroll=V,i.matrix&&i.matrix[c]){var z=i.getView(),Z=z.y_property,re=i.getEvent(h.id);if(re){if(!oe){var oe=re[Z];Array.isArray(oe)?oe=oe[0]:"string"==typeof oe&&i.config.section_delimiter&&oe.indexOf(i.config.section_delimiter)>-1&&(oe=oe.split(i.config.section_delimiter)[0])}var _e=z.getSectionTop(oe),he=z.posFromDate(re.start_date),be=i.$container.querySelector(".dhx_timeline_data_wrapper");if(he-=(be.offsetWidth-z.dx)/2,_e=_e-be.offsetHeight/2+z.dy/2,z._smartRenderingEnabled())var Ae=z.attachEvent("onScroll",function(){He(),z.detachEvent(Ae)});z.scrollTo({left:he,top:_e}),z._smartRenderingEnabled()||He()}}else He();i.callEvent("onAfterEventDisplay",[h,c])}function He(){h.color=T,h.textColor=W}}}(j),function(i){i._append_drag_marker=function(o){if(!o.parentNode){var c=i._els.dhx_cal_data[0].lastChild,h=i._getClassName(c);h.indexOf("dhx_scale_holder")<0&&c.previousSibling&&(c=c.previousSibling),h=i._getClassName(c),c&&0===h.indexOf("dhx_scale_holder")&&c.appendChild(o)}},i._update_marker_position=function(o,c){var h=i._calc_event_y(c,0);o.style.top=h.top+"px",o.style.height=h.height+"px"},i.highlightEventPosition=function(o){var c=document.createElement("div");c.setAttribute("event_id",o.id),c.setAttribute(this.config.event_attribute,o.id),this._rendered.push(c),this._update_marker_position(c,o);var h=this.templates.drag_marker_class(o.start_date,o.end_date,o),D=this.templates.drag_marker_content(o.start_date,o.end_date,o);c.className="dhx_drag_marker",h&&(c.className+=" "+h),D&&(c.innerHTML=D),this._append_drag_marker(c)}}(j),function ze(t){var a;t._loaded={},t._load=function(a,v){if(a=a||this._load_url){var _;if(a+=(-1==a.indexOf("?")?"?":"&")+"timeshift="+(new Date).getTimezoneOffset(),this.config.prevent_cache&&(a+="&uid="+this.uid()),v=v||this._date,this._load_mode){var i=this.templates.load_format;for(v=this.date[this._load_mode+"_start"](new Date(v.valueOf()));v>this._min_date;)v=this.date.add(v,-1,this._load_mode);_=v;for(var o=!0;_<this._max_date;)_=this.date.add(_,1,this._load_mode),this._loaded[i(v)]&&o?v=this.date.add(v,1,this._load_mode):o=!1;var c=_;do{c=this.date.add(_=c,-1,this._load_mode)}while(c>v&&this._loaded[i(c)]);if(_<=v)return!1;for(t.ajax.get(a+"&from="+i(v)+"&to="+i(_),h);v<_;)this._loaded[i(v)]=!0,v=this.date.add(v,1,this._load_mode)}else t.ajax.get(a,h);return this.callEvent("onXLS",[]),this.callEvent("onLoadStart",[]),!0}function h(D){t.on_load(D),t.callEvent("onLoadEnd",[])}},t._parsers={},(a=t)._parsers.xml={canParse:function(v,_){if(_.responseXML&&_.responseXML.firstChild)return!0;try{var i=a.ajax.parse(_.responseText),o=a.ajax.xmltop("data",i);if(o&&"data"===o.tagName)return!0}catch{}return!1},parse:function(v){var _;if(v.xmlDoc.responseXML||(v.xmlDoc.responseXML=a.ajax.parse(v.xmlDoc.responseText)),"data"!=(_=a.ajax.xmltop("data",v.xmlDoc)).tagName)return null;var i=_.getAttribute("dhx_security");i&&(window.dhtmlx&&(window.dhtmlx.security_key=i),a.security_key=i);for(var o=a.ajax.xpath("//coll_options",v.xmlDoc),c=0;c<o.length;c++){var h=o[c].getAttribute("for"),D=a.serverList[h];D||(a.serverList[h]=D=[]),D.splice(0,D.length);for(var V=a.ajax.xpath(".//item",o[c]),T=0;T<V.length;T++){for(var W=V[T].attributes,z={key:V[T].getAttribute("value"),label:V[T].getAttribute("label")},Z=0;Z<W.length;Z++){var re=W[Z];"value"!=re.nodeName&&"label"!=re.nodeName&&(z[re.nodeName]=re.nodeValue)}D.push(z)}}o.length&&a.callEvent("onOptionsLoad",[]);var oe=a.ajax.xpath("//userdata",v.xmlDoc);for(c=0;c<oe.length;c++){var _e=a._xmlNodeToJSON(oe[c]);a._userdata[_e.name]=_e.text}var he=[];for(_=a.ajax.xpath("//event",v.xmlDoc),c=0;c<_.length;c++){var be=he[c]=a._xmlNodeToJSON(_[c]);a._init_event(be)}return he}},function(a){a.json=a._parsers.json={canParse:function(v){if(v&&"object"===ae(v))return!0;if("string"==typeof v)try{var _=JSON.parse(v);return"[object Object]"===Object.prototype.toString.call(_)||"[object Array]"===Object.prototype.toString.call(_)}catch{return!1}return!1},parse:function(v){var _=[];"string"==typeof v&&(v=JSON.parse(v)),"[object Array]"===Object.prototype.toString.call(v)?_=v:v&&(v.events?_=v.events:v.data&&(_=v.data)),_=_||[],v.dhx_security&&(window.dhtmlx&&(window.dhtmlx.security_key=v.dhx_security),a.security_key=v.dhx_security);var i=v&&v.collections?v.collections:{},o=!1;for(var c in i)if(i.hasOwnProperty(c)){o=!0;var h=i[c],D=a.serverList[c];D||(a.serverList[c]=D=[]),D.splice(0,D.length);for(var V=0;V<h.length;V++){var T=h[V],W={key:T.value,label:T.label};for(var z in T)if(T.hasOwnProperty(z)){if("value"==z||"label"==z)continue;W[z]=T[z]}D.push(W)}}o&&a.callEvent("onOptionsLoad",[]);for(var Z=[],re=0;re<_.length;re++){var oe=_[re];a._init_event(oe),Z.push(oe)}return Z}}}(t),function(a){a.ical=a._parsers.ical={canParse:function(v){return"string"==typeof v&&new RegExp("^BEGIN:VCALENDAR").test(v)},parse:function(v){var _=v.match(RegExp(this.c_start+"[^\f]*"+this.c_end,""));if(_.length){_[0]=_[0].replace(/[\r\n]+ /g,""),_[0]=_[0].replace(/[\r\n]+(?=[a-z \t])/g," "),_[0]=_[0].replace(/;[^:\r\n]*:/g,":");for(var i,o=[],c=RegExp("(?:"+this.e_start+")([^\f]*?)(?:"+this.e_end+")","g");null!==(i=c.exec(_));){for(var h,D={},V=/[^\r\n]+[\r\n]+/g;null!==(h=V.exec(i[1]));)this.parse_param(h.toString(),D);D.uid&&!D.id&&(D.id=D.uid),o.push(D)}return o}},parse_param:function(v,_){var i=v.indexOf(":");if(-1!=i){var o=v.substr(0,i).toLowerCase(),c=v.substr(i+1).replace(/\\,/g,",").replace(/[\r\n]+$/,"");"summary"==o?o="text":"dtstart"==o?(o="start_date",c=this.parse_date(c,0,0)):"dtend"==o&&(o="end_date",c=this.parse_date(c,0,0)),_[o]=c}},parse_date:function(v,_,i){var o=v.split("T"),c=!1;o[1]&&(_=o[1].substr(0,2),i=o[1].substr(2,2),c="Z"==o[1][6]);var h=o[0].substr(0,4),D=parseInt(o[0].substr(4,2),10)-1,V=o[0].substr(6,2);return a.config.server_utc||c?new Date(Date.UTC(h,D,V,_,i)):new Date(h,D,V,_,i)},c_start:"BEGIN:VCALENDAR",e_start:"BEGIN:VEVENT",e_end:"END:VEVENT",c_end:"END:VCALENDAR"}}(t),t.on_load=function(a){var v;this.callEvent("onBeforeParse",[]);var _=!1,i=!1;for(var o in this._parsers){var c=this._parsers[o];if(c.canParse(a.xmlDoc.responseText,a.xmlDoc)){try{var h=a.xmlDoc.responseText;"xml"===o&&(h=a),(v=c.parse(h))||(_=!0)}catch{_=!0}i=!0;break}}if(!i)if(this._process&&this[this._process])try{v=this[this._process].parse(a.xmlDoc.responseText)}catch{_=!0}else _=!0;(_||a.xmlDoc.status&&a.xmlDoc.status>=400)&&(this.callEvent("onLoadError",[a.xmlDoc]),v=[]),this._process_loading(v),this.callEvent("onXLE",[]),this.callEvent("onParse",[])},t._process_loading=function(a){this._loading=!0,this._not_render=!0;for(var v=0;v<a.length;v++)this.callEvent("onEventLoading",[a[v]])&&this.addEvent(a[v]);this._not_render=!1,this._render_wait&&this.render_view_data(),this._loading=!1,this._after_call&&this._after_call(),this._after_call=null},t._init_event=function(a){a.text=a.text||a._tagvalue||"",a.start_date=t._init_date(a.start_date),a.end_date=t._init_date(a.end_date)},t._init_date=function(a){return a?"string"==typeof a?t._helpers.parseDate(a):new Date(a):null};var j=Me()(t);t.serialize=function(){var a=[],v=j();for(var _ in v){var i={},o=v[_];for(var c in o)if("$"!=c.charAt(0)&&"_"!=c.charAt(0)){var h,D=o[c];h=t.utils.isDate(D)?t.defined(t.templates.xml_format)?t.templates.xml_format(D):t.templates.format_date(D):D,i[c]=h}a.push(i)}return a},t.parse=function(a,v){this._process=v,this.on_load({xmlDoc:{responseText:a}})},t.load=function(a,v){"string"==typeof v&&(this._process=v,v=arguments[2]),this._load_url=a,this._after_call=v,this._load(a,this._date)},t.setLoadMode=function(a){"all"==a&&(a=""),this._load_mode=a},t.serverList=function(a,v){return v?(this.serverList[a]=v.slice(0),this.serverList[a]):(this.serverList[a]=this.serverList[a]||[],this.serverList[a])},t._userdata={},t._xmlNodeToJSON=function(a){for(var v={},_=0;_<a.attributes.length;_++)v[a.attributes[_].name]=a.attributes[_].value;for(_=0;_<a.childNodes.length;_++){var i=a.childNodes[_];1==i.nodeType&&(v[i.tagName]=i.firstChild?i.firstChild.nodeValue:"")}return v.text||(v.text=a.firstChild?a.firstChild.nodeValue:""),v},t.attachEvent("onXLS",function(){var a;!0===this.config.show_loading&&((a=this.config.show_loading=document.createElement("div")).className="dhx_loading",a.style.left=Math.round((this._x-128)/2)+"px",a.style.top=Math.round((this._y-15)/2)+"px",this._obj.appendChild(a))}),t.attachEvent("onXLE",function(){var a=this.config.show_loading;a&&"object"==je(a)&&(a.parentNode&&a.parentNode.removeChild(a),this.config.show_loading=!0)})}(j),function(i){i._lightbox_controls={},i.formSection=function(o){for(var c=this.config.lightbox.sections,h=0;h<c.length&&c[h].name!=o;h++);if(h===c.length)return null;var D=c[h];i._lightbox||i.getLightbox();var V=document.getElementById(D.id),T=V.nextSibling,W={section:D,header:V,node:T,getValue:function(Z){return i.form_blocks[D.type].get_value(T,Z||{},D)},setValue:function(Z,re){return i.form_blocks[D.type].set_value(T,Z,re||{},D)}},z=i._lightbox_controls["get_"+D.type+"_control"];return z?z(W):W},i._lightbox_controls.get_template_control=function(o){return o.control=o.node,o},i._lightbox_controls.get_select_control=function(o){return o.control=o.node.getElementsByTagName("select")[0],o},i._lightbox_controls.get_textarea_control=function(o){return o.control=o.node.getElementsByTagName("textarea")[0],o},i._lightbox_controls.get_time_control=function(o){return o.control=o.node.getElementsByTagName("select"),o},i._lightbox_controls.defaults={template:{height:30},textarea:{height:200},select:{height:23},time:{height:20}},i.form_blocks={template:{render:function(o){var c=i._lightbox_controls.defaults.template;return"<div class='dhx_cal_ltext dhx_cal_template' style='height:"+(o.height||(c?c.height:30)||30)+"px;'></div>"},set_value:function(o,c,h,D){o.innerHTML=c||""},get_value:function(o,c,h){return o.innerHTML||""},focus:function(o){}},textarea:{render:function(o){var c=i._lightbox_controls.defaults.textarea;return"<div class='dhx_cal_ltext' style='height:"+(o.height||(c?c.height:200)||"130")+"px;'><textarea></textarea></div>"},set_value:function(o,c,h){i.form_blocks.textarea._get_input(o).value=c||""},get_value:function(o,c){return i.form_blocks.textarea._get_input(o).value},focus:function(o){var c=i.form_blocks.textarea._get_input(o);i._focus(c,!0)},_get_input:function(o){return o.getElementsByTagName("textarea")[0]}},select:{render:function(o){for(var c=i._lightbox_controls.defaults.select,D="<div class='dhx_cal_ltext' style='height:"+(o.height||(c?c.height:23)||"23")+"px;'><select style='width:100%;'>",V=0;V<o.options.length;V++)D+="<option value='"+o.options[V].key+"'>"+o.options[V].label+"</option>";return D+"</select></div>"},set_value:function(o,c,h,D){var V=o.firstChild;!V._dhx_onchange&&D.onchange&&(i.event(V,"change",D.onchange),V._dhx_onchange=!0),void 0===c&&(c=(V.options[0]||{}).value),V.value=c||""},get_value:function(o,c){return o.firstChild.value},focus:function(o){i._focus(o.firstChild,!0)}},time:{render:function(o){o.time_format||(o.time_format=["%H:%i","%d","%m","%Y"]),o._time_format_order={};var c=o.time_format,h=i.config,D=i.date.date_part(i._currentDate()),V=1440,T=0;i.config.limit_time_select&&(V=60*h.last_hour+1,T=60*h.first_hour,D.setHours(h.first_hour));for(var W="",z=0;z<c.length;z++){var Z=c[z];z>0&&(W+=" ");var re="",oe="";switch(Z){case"%Y":var _e,he,be;re="dhx_lightbox_year_select",o._time_format_order[3]=z,o.year_range&&(isNaN(o.year_range)?o.year_range.push&&(he=o.year_range[0],be=o.year_range[1]):_e=o.year_range),_e=_e||10;var Ae=Ae||Math.floor(_e/2);he=he||D.getFullYear()-Ae,be=be||he+_e;for(var He=he;He<be;He++)oe+="<option value='"+He+"'>"+He+"</option>";break;case"%m":for(re="dhx_lightbox_month_select",o._time_format_order[2]=z,He=0;He<12;He++)oe+="<option value='"+He+"'>"+this.locale.date.month_full[He]+"</option>";break;case"%d":for(re="dhx_lightbox_day_select",o._time_format_order[1]=z,He=1;He<32;He++)oe+="<option value='"+He+"'>"+He+"</option>";break;case"%H:%i":re="dhx_lightbox_time_select",o._time_format_order[0]=z,He=T;var Ne=D.getDate();for(o._time_values=[];He<V;)oe+="<option value='"+He+"'>"+this.templates.time_picker(D)+"</option>",o._time_values.push(He),D.setTime(D.valueOf()+60*this.config.time_step*1e3),He=24*(D.getDate()!=Ne?1:0)*60+60*D.getHours()+D.getMinutes()}if(oe){var Ve=i._waiAria.lightboxSelectAttrString(Z);W+="<select class='"+re+"' "+(o.readonly?"disabled='disabled'":"")+Ve+">"+oe+"</select> "}}var Se=i._lightbox_controls.defaults.select;return"<div style='height:"+(o.height||(Se?Se.height:23)||23)+"px;padding-top:0px;font-size:inherit;' class='dhx_section_time'>"+W+"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"+W+"</div>"},set_value:function(o,c,h,D){var V,T,W=i.config,z=o.getElementsByTagName("select"),Z=D._time_format_order;if(W.full_day){if(!o._full_day){var re="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+i.locale.labels.full_day+"&nbsp;</label></input>";i.config.wide_form||(re=o.previousSibling.innerHTML+re),o.previousSibling.innerHTML=re,o._full_day=!0}var oe=o.previousSibling.getElementsByTagName("input")[0];oe.checked=0===i.date.time_part(h.start_date)&&0===i.date.time_part(h.end_date),z[Z[0]].disabled=oe.checked,z[Z[0]+z.length/2].disabled=oe.checked,oe.$_eventAttached||(oe.$_eventAttached=!0,i.event(oe,"click",function(){if(oe.checked){var Ae={};i.form_blocks.time.get_value(o,Ae,D),V=i.date.date_part(Ae.start_date),(+(T=i.date.date_part(Ae.end_date))==+V||+T>=+V&&(0!==h.end_date.getHours()||0!==h.end_date.getMinutes()))&&(T=i.date.add(T,1,"day"))}else V=null,T=null;z[Z[0]].disabled=oe.checked,z[Z[0]+z.length/2].disabled=oe.checked,be(z,0,V||h.start_date),be(z,4,T||h.end_date)}))}if(W.auto_end_date&&W.event_duration)for(var _e=function(){W.auto_end_date&&W.event_duration&&(V=new Date(z[Z[3]].value,z[Z[2]].value,z[Z[1]].value,0,z[Z[0]].value),T=new Date(V.getTime()+60*i.config.event_duration*1e3),be(z,4,T))},he=0;he<4;he++)z[he].$_eventAttached||(z[he].$_eventAttached=!0,i.event(z[he],"change",_e));function be(Ae,He,Ne){for(var Ve=D._time_values,Se=60*Ne.getHours()+Ne.getMinutes(),Fe=Se,Oe=!1,at=0;at<Ve.length;at++){var ht=Ve[at];if(ht===Se){Oe=!0;break}ht<Se&&(Fe=ht)}Ae[He+Z[0]].value=Oe?Se:Fe,Oe||Fe||(Ae[He+Z[0]].selectedIndex=-1),Ae[He+Z[1]].value=Ne.getDate(),Ae[He+Z[2]].value=Ne.getMonth(),Ae[He+Z[3]].value=Ne.getFullYear()}be(z,0,h.start_date),be(z,4,h.end_date)},get_value:function(o,c,h){var D=o.getElementsByTagName("select"),V=h._time_format_order;if(c.start_date=new Date(D[V[3]].value,D[V[2]].value,D[V[1]].value,0,D[V[0]].value),c.end_date=new Date(D[V[3]+4].value,D[V[2]+4].value,D[V[1]+4].value,0,D[V[0]+4].value),!D[V[3]].value||!D[V[3]+4].value){var T=i.getEvent(i._lightbox_id);T&&(c.start_date=T.start_date,c.end_date=T.end_date)}return c.end_date<=c.start_date&&(c.end_date=i.date.add(c.start_date,i.config.time_step,"minute")),{start_date:new Date(c.start_date),end_date:new Date(c.end_date)}},focus:function(o){i._focus(o.getElementsByTagName("select")[0])}}},i._setLbPosition=function(o){if(o){var c=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,h=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,D=window.innerHeight||document.documentElement.clientHeight;o.style.top=c?Math.round(c+Math.max((D-o.offsetHeight)/2,0))+"px":Math.round(Math.max((D-o.offsetHeight)/2,0)+9)+"px",o.style.left=document.documentElement.scrollWidth>document.body.offsetWidth?Math.round(h+(document.body.offsetWidth-o.offsetWidth)/2)+"px":Math.round((document.body.offsetWidth-o.offsetWidth)/2)+"px"}},i.showCover=function(o){o&&(o.style.display="block",this._setLbPosition(o)),i.config.responsive_lightbox&&(document.documentElement.classList.add("dhx_cal_overflow_container"),document.body.classList.add("dhx_cal_overflow_container")),this.show_cover()},i.showLightbox=function(o){if(o)if(this.callEvent("onBeforeLightbox",[o])){var c=this.getLightbox();this.showCover(c),this._fill_lightbox(o,c),this._waiAria.lightboxVisibleAttr(c),this.callEvent("onLightbox",[o])}else this._new_event&&(this._new_event=null)},i._fill_lightbox=function(o,c){var h=this.getEvent(o),D=c.getElementsByTagName("span"),V=[];if(i.templates.lightbox_header){V.push("");var T=i.templates.lightbox_header(h.start_date,h.end_date,h);V.push(T),D[1].innerHTML="",D[2].innerHTML=T}else{var W=this.templates.event_header(h.start_date,h.end_date,h),z=(this.templates.event_bar_text(h.start_date,h.end_date,h)||"").substr(0,70);V.push(W),V.push(z),D[1].innerHTML=W,D[2].innerHTML=z}this._waiAria.lightboxHeader(c,V.join(" "));for(var Z=this.config.lightbox.sections,re=0;re<Z.length;re++){var oe=Z[re],_e=i._get_lightbox_section_node(oe),he=this.form_blocks[oe.type];he.set_value.call(this,_e,void 0!==h[oe.map_to]?h[oe.map_to]:oe.default_value,h,oe),Z[re].focus&&he.focus.call(this,_e)}i._lightbox_id=o},i._get_lightbox_section_node=function(o){return document.getElementById(o.id).nextSibling},i._lightbox_out=function(o){for(var c=this.config.lightbox.sections,h=0;h<c.length;h++){var D=document.getElementById(c[h].id),V=this.form_blocks[c[h].type].get_value.call(this,D=D&&D.nextSibling,o,c[h]);"auto"!=c[h].map_to&&(o[c[h].map_to]=V)}return o},i._empty_lightbox=function(o){var h=this.getEvent(i._lightbox_id);this._lame_copy(h,o),this.setEvent(h.id,h),this._edit_stop_event(h,!0),this.render_view_data()},i.hide_lightbox=function(o){i.endLightbox(!1,this.getLightbox())},i.hideCover=function(o){o&&(o.style.display="none"),this.hide_cover(),i.config.responsive_lightbox&&(document.documentElement.classList.remove("dhx_cal_overflow_container"),document.body.classList.remove("dhx_cal_overflow_container"))},i.hide_cover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},i.show_cover=function(){this._cover||(this._cover=document.createElement("div"),this._cover.className="dhx_cal_cover",document.body.appendChild(this._cover))},i.save_lightbox=function(){var o=this._lightbox_out({},this._lame_copy(this.getEvent(this._lightbox_id)));this.checkEvent("onEventSave")&&!this.callEvent("onEventSave",[this._lightbox_id,o,this._new_event])||(this._empty_lightbox(o),this.hide_lightbox())},i.startLightbox=function(o,c){this._lightbox_id=o,this._custom_lightbox=!0,this._temp_lightbox=this._lightbox,this._lightbox=c,this.showCover(c)},i.endLightbox=function(o,c){c=c||i.getLightbox();var h=i.getEvent(this._lightbox_id);h&&this._edit_stop_event(h,o),o&&i.render_view_data(),this.hideCover(c),this._custom_lightbox&&(this._lightbox=this._temp_lightbox,this._custom_lightbox=!1),this._temp_lightbox=this._lightbox_id=null,this._waiAria.lightboxHiddenAttr(c),this.callEvent("onAfterLightbox",[])},i.resetLightbox=function(){i._lightbox&&!i._custom_lightbox&&i._lightbox.parentNode.removeChild(i._lightbox),i._lightbox=null},i.cancel_lightbox=function(){this._lightbox_id&&this.callEvent("onEventCancel",[this._lightbox_id,!!this._new_event]),this.hide_lightbox()},i.hideLightbox=i.cancel_lightbox,i._init_lightbox_events=function(){if(!this.getLightbox().$_eventAttached){var o=this.getLightbox();o.$_eventAttached=!0,i.event(o,"click",function(c){var h=i.$domHelpers.closest(c.target,".dhx_btn_set");if(h){var D=h?h.getAttribute("data-action"):null;switch(D){case"dhx_save_btn":case"save":if(i.config.readonly_active)return;i.save_lightbox();break;case"dhx_delete_btn":case"delete":if(i.config.readonly_active)return;i._dhtmlx_confirm(i.locale.labels.confirm_deleting,i.locale.labels.title_confirm_deleting,function(){i.deleteEvent(i._lightbox_id),i._new_event=null,i.hide_lightbox()});break;case"dhx_cancel_btn":case"cancel":i.cancel_lightbox();break;default:i.callEvent("onLightboxButton",[D,h,c])}}else{var T=i.$domHelpers.closest(c.target,".dhx_custom_button[data-section-index]");if(T){var W=Number(T.getAttribute("data-section-index"));i.form_blocks[i.config.lightbox.sections[W].type].button_click(i.$domHelpers.closest(T,".dhx_cal_lsection"),T,c)}}}),i.event(o,"keydown",function(c){var h=c||window.event,D=c.target||c.srcElement,V=D.querySelector("[dhx_button]");switch(V||(V=D.parentNode.querySelector(".dhx_custom_button, .dhx_readonly")),(c||h).keyCode){case 32:if((c||h).shiftKey)return;V&&V.click&&V.click();break;case i.keys.edit_save:if((c||h).shiftKey)return;if(V&&V.click)V.click();else{if(i.config.readonly_active)return;i.save_lightbox()}break;case i.keys.edit_cancel:i.cancel_lightbox()}})}},i.setLightboxSize=function(){var o=this._lightbox;if(o){var c=o.childNodes[1];c.style.height="0px",c.style.height=c.scrollHeight+"px",o.style.height=c.scrollHeight+i.xy.lightbox_additional_height+"px",c.style.height=c.scrollHeight+"px"}},i._init_dnd_events=function(){i.event(document.body,"mousemove",i._move_while_dnd),i.event(document.body,"mouseup",i._finish_dnd),i._init_dnd_events=function(){}},i._move_while_dnd=function(o){if(i._dnd_start_lb){document.dhx_unselectable||(document.body.className+=" dhx_unselectable",document.dhx_unselectable=!0);var c=i.getLightbox(),h=[o.pageX,o.pageY];c.style.top=i._lb_start[1]+h[1]-i._dnd_start_lb[1]+"px",c.style.left=i._lb_start[0]+h[0]-i._dnd_start_lb[0]+"px"}},i._ready_to_dnd=function(o){var c=i.getLightbox();i._lb_start=[parseInt(c.style.left,10),parseInt(c.style.top,10)],i._dnd_start_lb=[o.pageX,o.pageY]},i._finish_dnd=function(){i._lb_start&&(i._lb_start=i._dnd_start_lb=!1,document.body.className=document.body.className.replace(" dhx_unselectable",""),document.dhx_unselectable=!1)},i.getLightbox=function(){if(!this._lightbox){var o=document.createElement("div");o.className="dhx_cal_light",i.config.wide_form&&(o.className+=" dhx_cal_light_wide"),i.form_blocks.recurring&&(o.className+=" dhx_cal_light_rec"),i.config.rtl&&(o.className+=" dhx_cal_light_rtl"),i.config.responsive_lightbox&&(o.className+=" dhx_cal_light_responsive"),o.style.visibility="hidden";for(var c=this._lightbox_template,h=this.config.buttons_left,D=0;D<h.length;D++)c+="<div "+this._waiAria.lightboxButtonAttrString(h[D])+" data-action='"+h[D]+"' class='dhx_btn_set dhx_"+(i.config.rtl?"right":"left")+"_btn_set "+h[D]+"_set'><div class='"+h[D]+"'></div><div>"+i.locale.labels[h[D]]+"</div></div>";h=this.config.buttons_right;var V=i.config.rtl;for(D=0;D<h.length;D++)c+="<div "+this._waiAria.lightboxButtonAttrString(h[D])+" data-action='"+h[D]+"' class='dhx_btn_set dhx_"+(V?"left":"right")+"_btn_set "+h[D]+"_set' style='float:"+(V?"left":"right")+";'><div class='"+h[D]+"'></div><div>"+i.locale.labels[h[D]]+"</div></div>";o.innerHTML=c+="</div>",i.config.drag_lightbox&&(i.event(o.firstChild,"mousedown",i._ready_to_dnd),i.event(o.firstChild,"selectstart",function(_e){return _e.preventDefault(),!1}),o.firstChild.style.cursor="move",i._init_dnd_events()),this._waiAria.lightboxAttr(o),document.body.insertBefore(o,document.body.firstChild),this._lightbox=o;var T=this.config.lightbox.sections;for(c="",D=0;D<T.length;D++){var W=this.form_blocks[T[D].type];if(W){T[D].id="area_"+this.uid();var z="";T[D].button&&(z="<div "+i._waiAria.lightboxSectionButtonAttrString(this.locale.labels["button_"+T[D].button])+" class='dhx_custom_button' data-section-index='"+D+"' index='"+D+"'><div class='dhx_custom_button_"+T[D].button+"'></div><div>"+this.locale.labels["button_"+T[D].button]+"</div></div>"),this.config.wide_form&&(c+="<div class='dhx_wrap_section'>");var Z=this.locale.labels["section_"+T[D].name];"string"!=typeof Z&&(Z=T[D].name),c+="<div id='"+T[D].id+"' class='dhx_cal_lsection'>"+z+"<label>"+Z+"</label></div>"+W.render.call(this,T[D]),c+="</div>"}}var re=o.getElementsByTagName("div");for(D=0;D<re.length;D++){var oe=re[D];if("dhx_cal_larea"==i._getClassName(oe)){oe.innerHTML=c;break}}i._bindLightboxLabels(T),this.setLightboxSize(),this._init_lightbox_events(this),o.style.display="none",o.style.visibility="visible"}return this._lightbox},i._bindLightboxLabels=function(o){for(var c=0;c<o.length;c++){var h=o[c];if(h.id&&document.getElementById(h.id)){for(var D=document.getElementById(h.id).querySelector("label"),V=i._get_lightbox_section_node(h);V&&!V.querySelector;)V=V.nextSibling;var T=!0;if(V){var W=V.querySelector("input, select, textarea");W&&(h.inputId=W.id||"input_"+i.uid(),W.id||(W.id=h.inputId),D.setAttribute("for",h.inputId),T=!1)}T&&i.form_blocks[h.type].focus&&i.event(D,"click",function(z){return function(){var Z=i.form_blocks[z.type],re=i._get_lightbox_section_node(z);Z&&Z.focus&&Z.focus.call(i,re)}}(h))}}},i.attachEvent("onEventIdChange",function(o,c){this._lightbox_id==o&&(this._lightbox_id=c)}),i._lightbox_template="<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span></div><div class='dhx_cal_larea'></div>"}(j),function we(t){t._init_touch_events=function(){if((this.config.touch&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&(this.xy.scroll_width=0,this._mobile=!0),this.config.touch){var j=!0;try{document.createEvent("TouchEvent")}catch{j=!1}j?this._touch_events(["touchmove","touchstart","touchend"],function(a){return a.touches&&a.touches.length>1?null:a.touches[0]?{target:a.target,pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,clientX:a.touches[0].clientX,clientY:a.touches[0].clientY}:a},function(){return!1}):window.PointerEvent||window.navigator.pointerEnabled?this._touch_events(["pointermove","pointerdown","pointerup"],function(a){return"mouse"==a.pointerType?null:a},function(a){return!a||"mouse"==a.pointerType}):window.navigator.msPointerEnabled&&this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(a){return a.pointerType==a.MSPOINTER_TYPE_MOUSE?null:a},function(a){return!a||a.pointerType==a.MSPOINTER_TYPE_MOUSE})}},t._touch_events=function(j,a,v){var _,i,o,c,h,D,V=0;function T(z,Z,re){z.addEventListener(Z,function(oe){return!!t._is_lightbox_open()||(v(oe)?void 0:re(oe))},{passive:!1})}function W(z){v(z)||(t._hide_global_tip(),c&&(t._on_mouse_up(a(z)),t._temp_touch_block=!1),t._drag_id=null,t._drag_mode=null,t._drag_pos=null,t._pointerDragId=null,clearTimeout(o),c=D=!1,h=!0)}T(document.body,j[0],function(z){if(!v(z)){var Z=a(z);if(Z){if(c)return function(re){if(!v(re)){var oe=t.getState().drag_mode,_e=!!t.matrix&&t.matrix[t._mode],he=t.render_view_data;"create"==oe&&_e&&(t.render_view_data=function(){for(var be=t.getState().drag_id,Ae=t.getEvent(be),He=_e.y_property,Ne=t.getEvents(Ae.start_date,Ae.end_date),Ve=0;Ve<Ne.length;Ve++)Ne[Ve][He]!=Ae[He]&&(Ne.splice(Ve,1),Ve--);Ae._sorder=Ne.length-1,Ae._count=Ne.length,this.render_data([Ae],t.getState().mode)}),t._on_mouse_move(re),"create"==oe&&_e&&(t.render_view_data=he),re.preventDefault&&re.preventDefault(),re.cancelBubble=!0}}(Z),z.preventDefault&&z.preventDefault(),z.cancelBubble=!0,t._update_global_tip(),!1;i=a(z),D&&(i?(_.target!=i.target||Math.abs(_.pageX-i.pageX)>5||Math.abs(_.pageY-i.pageY)>5)&&(h=!0,clearTimeout(o)):h=!0)}}}),T(this._els.dhx_cal_data[0],"touchcancel",W),T(this._els.dhx_cal_data[0],"contextmenu",function(z){if(!v(z))return D?(z&&z.preventDefault&&z.preventDefault(),z.cancelBubble=!0,!1):void 0}),T(this._obj,j[1],function(z){var Z;if(document&&document.body&&document.body.classList.add("dhx_cal_touch_active"),!v(z))if(t._pointerDragId=z.pointerId,c=h=!1,D=!0,Z=i=a(z)){var re=new Date;if(!h&&!c&&re-V<250)return t._click.dhx_cal_data(Z),window.setTimeout(function(){Z.type="dblclick",t._on_dbl_click(Z)},50),z.preventDefault&&z.preventDefault(),z.cancelBubble=!0,t._block_next_stop=!0,!1;if(V=re,!h&&!c&&t.config.touch_drag){var oe=t._locate_event(document.activeElement),_e=t._locate_event(Z.target),he=_?t._locate_event(_.target):null;if(oe&&_e&&oe==_e&&oe!=he)return z.preventDefault&&z.preventDefault(),z.cancelBubble=!0,t._ignore_next_click=!1,t._click.dhx_cal_data(Z),_=Z,!1;o=setTimeout(function(){c=!0;var be=_.target,Ae=t._getClassName(be);be&&-1!=Ae.indexOf("dhx_body")&&(be=be.previousSibling),t._on_mouse_down(_,be),t._drag_mode&&"create"!=t._drag_mode&&t.for_rendered(t._drag_id,function(He,Ne){He.style.display="none",t._rendered.splice(Ne,1)}),t.config.touch_tip&&t._show_global_tip(),t.updateEvent(t._drag_id)},t.config.touch_drag),_=Z}}else h=!0}),T(this._els.dhx_cal_data[0],j[2],function(z){if(document&&document.body&&document.body.classList.remove("dhx_cal_touch_active"),!v(z))return t.config.touch_swipe_dates&&!c&&function(Z,re,oe,_e){if(!Z||!re)return!1;for(var he=Z.target;he&&he!=t._obj;)he=he.parentNode;if(he!=t._obj||t.matrix&&t.matrix[t.getState().mode]&&t.matrix[t.getState().mode].scrollable)return!1;var be=Math.abs(Z.pageY-re.pageY),Ae=Math.abs(Z.pageX-re.pageX);return be<100&&Ae>200&&(!be||Ae/be>3)&&(Z.pageX>re.pageX?t._click.dhx_cal_next_button():t._click.dhx_cal_prev_button(),!0)}(_,i)&&(t._block_next_stop=!0),c&&(t._ignore_next_click=!0,setTimeout(function(){t._ignore_next_click=!1},100)),W(z),t._block_next_stop?(t._block_next_stop=!1,z.preventDefault&&z.preventDefault(),z.cancelBubble=!0,!1):void 0}),t.event(document.body,j[2],W)},t._show_global_tip=function(){t._hide_global_tip();var j=t._global_tip=document.createElement("div");j.className="dhx_global_tip",t._update_global_tip(1),document.body.appendChild(j)},t._update_global_tip=function(j){var a=t._global_tip;if(a){var v="";if(t._drag_id&&!j){var _=t.getEvent(t._drag_id);_&&(v="<div>"+(_._timed?t.templates.event_header(_.start_date,_.end_date,_):t.templates.day_date(_.start_date,_.end_date,_))+"</div>")}a.innerHTML="create"==t._drag_mode||"new-size"==t._drag_mode?(t.locale.labels.drag_to_create||"Drag to create")+v:(t.locale.labels.drag_to_move||"Drag to move")+v}},t._hide_global_tip=function(){var j=t._global_tip;j&&j.parentNode&&(j.parentNode.removeChild(j),t._global_tip=0)}}(j),function(i){i.getRootView=function(){return{view:{render:function(){return{tag:"div",type:1,attrs:{style:"width:100%;height:100%;"},hooks:{didInsert:function(){i.setCurrentView()}},body:[{el:this.el,type:1}]}},init:function(){var o=document.createElement("DIV");o.id="scheduler_"+i.uid(),o.style.width="100%",o.style.height="100%",o.classList.add("dhx_cal_container"),o.cmp="grid",o.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" data-tab="day"></div><div class="dhx_cal_tab" data-tab="week"></div><div class="dhx_cal_tab" data-tab="month"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',i.init(o),this.el=o}},type:4}}}(j),function Ce(t){var j,a;function v(){if(t._is_material_skin())return!0;if(void 0!==a)return a;var i=document.createElement("div");i.style.position="absolute",i.style.left="-9999px",i.style.top="-9999px",i.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_data'><div class='dhx_cal_event'><div class='dhx_body'></div></div><div>",document.body.appendChild(i);var o=window.getComputedStyle(i.querySelector(".dhx_body")).getPropertyValue("box-sizing");document.body.removeChild(i),(a="border-box"===o)||setTimeout(function(){a=void 0},1e3)}function _(){if(!t._is_material_skin()&&!t._border_box_events()){var i=a;a=void 0,j=void 0,i!==v()&&t.$container&&t.getState().mode&&t.setCurrentView()}}t._skin_settings={fix_tab_position:[1,0],use_select_menu_space:[1,0],wide_form:[1,0],hour_size_px:[44,42],displayed_event_color:["#ff4a4a","ffc5ab"],displayed_event_text_color:["#ffef80","7e2727"]},t._skin_xy={lightbox_additional_height:[90,50],nav_height:[59,22],bar_height:[24,20]},t._is_material_skin=function(){return t.skin?(t.skin+"").indexOf("material")>-1:function(){if(void 0===j){var i=document.createElement("div");i.style.position="absolute",i.style.left="-9999px",i.style.top="-9999px",i.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_scale_placeholder'></div><div>",document.body.appendChild(i);var c=window.getComputedStyle(i.querySelector(".dhx_cal_scale_placeholder")).getPropertyValue("position");j="absolute"===c,setTimeout(function(){j=null},500)}return j}()},window.addEventListener("DOMContentLoaded",_),window.addEventListener("load",_),t._border_box_events=function(){return v()},t._configure=function(i,o,c){for(var h in o)void 0===i[h]&&(i[h]=o[h][c])},t._skin_init=function(){if(!t.skin)for(var i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var c=i[o].href.match("dhtmlxscheduler_([a-z]+).css");if(c){t.skin=c[1];break}}var h=0;if(!t.skin||"classic"!==t.skin&&"glossy"!==t.skin||(h=1),t._is_material_skin()){var D=t.config.buttons_left.$initial,V=t.config.buttons_right.$initial;if(D&&t.config.buttons_left.slice().join()==D&&V&&t.config.buttons_right.slice().join()==V){var T=t.config.buttons_left.slice();t.config.buttons_left=t.config.buttons_right.slice(),t.config.buttons_right=T}t.xy.event_header_height=18,t.xy.week_agenda_scale_height=35,t.xy.map_icon_width=38,t._lightbox_controls.defaults.textarea.height=64,t._lightbox_controls.defaults.time.height="auto"}if(this._configure(t.config,t._skin_settings,h),this._configure(t.xy,t._skin_xy,h),"flat"===t.skin&&(t.xy.scale_height=35,t.templates.hour_scale=function(z){var Z=z.getMinutes();return Z=Z<10?"0"+Z:Z,"<span class='dhx_scale_h'>"+z.getHours()+"</span><span class='dhx_scale_m'>&nbsp;"+Z+"</span>"}),!h){var W=t.config.minicalendar;W&&(W.padding=14),t.templates.event_bar_date=function(z,Z,re){return"\u2022 <b>"+t.templates.event_date(z)+"</b> "},t.attachEvent("onTemplatesReady",function(){var z=t.date.date_to_str("%d");t.templates._old_month_day||(t.templates._old_month_day=t.templates.month_day);var Z=t.templates._old_month_day;if(t.templates.month_day=function(Ve){if("month"==this._mode){var Se=z(Ve);return 1==Ve.getDate()&&(Se=t.locale.date.month_full[Ve.getMonth()]+" "+Se),+Ve==+t.date.date_part(this._currentDate())&&(Se=t.locale.labels.dhx_cal_today_button+" "+Se),Se}return Z.call(this,Ve)},t.config.fix_tab_position){var re=t._els.dhx_cal_navline[0].getElementsByTagName("div"),oe=null,_e=211,he=[14,75,136],be=14;t._is_material_skin()&&(he=[16,103,192],_e=294,be=-1);for(var Ae=0;Ae<re.length;Ae++){var He=re[Ae],Ne=He.getAttribute("data-tab")||He.getAttribute("name");if(Ne){switch(He.style.right="auto",Ne){case"day":case"day_tab":He.style.left=he[0]+"px",He.className+=" dhx_cal_tab_first";break;case"week":case"week_tab":He.style.left=he[1]+"px";break;case"month":case"month_tab":He.style.left=he[2]+"px",He.className+=" dhx_cal_tab_last";break;default:He.style.left=_e+"px",He.className+=" dhx_cal_tab_standalone",_e=_e+be+He.offsetWidth}He.className+=" "+Ne}else 0===(He.className||"").indexOf("dhx_minical_icon")&&He.parentNode==t._els.dhx_cal_navline[0]&&(oe=He)}oe&&(oe.style.left=_e+"px")}}),t._skin_init=function(){}}}}(j),window.jQuery&&function(i){var o=0,c=[];i.fn.dhx_scheduler=function(h){if("string"!=typeof h){var D=[];return this.each(function(){if(this&&this.getAttribute)if(this.getAttribute("dhxscheduler"))D.push(window[this.getAttribute("dhxscheduler")]);else{var V="scheduler";o&&(V="scheduler"+(o+1),window[V]=Scheduler.getSchedulerInstance());var T=window[V];for(var W in this.setAttribute("dhxscheduler",V),h)"data"!=W&&(T.config[W]=h[W]);this.getElementsByTagName("div").length||(this.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab" data-tab="day" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" data-tab="week" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" data-tab="month" style="right:76px;"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',this.className+=" dhx_cal_container"),T.init(this,T.config.date,T.config.mode),h.data&&T.parse(h.data),D.push(T),o++}}),1===D.length?D[0]:D}if(c[h])return c[h].apply(this,[]);i.error("Method "+h+" does not exist on jQuery.dhx_scheduler")}}(window.jQuery),function(i){!function(){var o=i.setCurrentView,c=i.updateView,h=null,D=null,V=function(z,Z){var re=this;y.a.clearTimeout(D),y.a.clearTimeout(h);var oe=re._date,_e=re._mode;W(this,z,Z),D=setTimeout(function(){re.callEvent("onBeforeViewChange",[_e,oe,Z||re._mode,z||re._date])?(c.call(re,z,Z),re.callEvent("onViewChange",[re._mode,re._date]),y.a.clearTimeout(h),D=0):W(re,oe,_e)},i.config.delay_render)},T=function(z,Z){var re=this,oe=arguments;W(this,z,Z),y.a.clearTimeout(h),h=setTimeout(function(){D||c.apply(re,oe)},i.config.delay_render)};function W(z,Z,re){Z&&(z._date=Z),re&&(z._mode=re)}i.attachEvent("onSchedulerReady",function(){i.config.delay_render?(i.setCurrentView=V,i.updateView=T):(i.setCurrentView=o,i.updateView=c)})}()}(j),function(i){i.createDataProcessor=function(o){var c,h;o instanceof Function?c=o:o.hasOwnProperty("router")?c=o.router:o.hasOwnProperty("event")&&(c=o),h=c?"CUSTOM":o.mode||"REST-JSON";var D=new $e(o.url);return D.init(i),D.setTransactionMode({mode:h,router:c},o.batchUpdate),D},i.DataProcessor=$e}(j),function(i){i.attachEvent("onSchedulerReady",function(){typeof dhtmlxError<"u"&&window.dhtmlxError.catchError("LoadXML",function(o,c,h){var D=h[0].responseText;switch(i.config.ajax_error){case"alert":y.a.alert(D);break;case"console":y.a.console.log(D)}})})}(j);var v=new Et({en:pt,ar:de,be:pe,ca:xe,cn:Xe,cs:rt,da:tt,de:Re,el:ot,es:ct,fi:st,fr:Ze,he:it,hu:vt,id:nt,it:gt,jp:Ye,nb:Ct,nl:Nt,no:Ie,pl:me,pt:Be,ro:se,ru:De,si:We,sk:ke,sv:Pe,tr:ce,ua:Ge});j.i18n={addLocale:v.addLocale,setLocale:function(i){if("string"==typeof i){var o=v.getLocale(i);o||(o=v.getLocale("en")),j.locale=o}else if(i)if(j.locale)for(var c in i)i[c]&&"object"===dt(i[c])?(j.locale[c]||(j.locale[c]={}),j.mixin(j.locale[c],i[c],!0)):j.locale[c]=i[c];else j.locale=i},getLocale:v.getLocale},j.i18n.setLocale("en"),j.ext={};var _={};return j.plugins=function(i){(function(o,c,h){var D=[];for(var V in o)if(o[V]){var T=V.toLowerCase();c[T]&&c[T].forEach(function(W){var z=W.toLowerCase();o[z]||D.push(z)}),D.push(T)}return D.sort(function(W,z){var Z=h[W]||0,re=h[z]||0;return Z>re?1:Z<re?-1:0}),D})(i,{treetimeline:["timeline"],daytimeline:["timeline"],outerdrag:["legacy"]},{legacy:1,limit:1,timeline:2,daytimeline:3,treetimeline:3,outerdrag:6}).forEach(function(o){if(!_[o]){var c=t.getExtension(o);if(!c)throw new Error("unknown plugin "+o);c(j),_[o]=!0}})},j};var Ke=function(){function t(j){for(var a in function(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}(this,t),this._extensions={},j)this._extensions[a]=j[a]}return a=[{key:"addExtension",value:function(j,a){this._extensions[j]=a}},{key:"getExtension",value:function(j){return this._extensions[j]}}],a&&function Ue(t,j){for(var a=0;a<j.length;a++){var v=j[a];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(t,v.key,v)}}(t.prototype,a),t;var a}();typeof dhtmlx<"u"&&dhtmlx.attaches&&(dhtmlx.attaches.attachScheduler=function(t,j,a,v){a=a||'<div class="dhx_cal_tab" name="day_tab" data-tab="day" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" data-tab="week" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" data-tab="month" style="right:76px;"></div>';var _=document.createElement("DIV");return _.id="dhxSchedObj_"+this._genStr(12),_.innerHTML='<div id="'+_.id+'" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+a+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>',document.body.appendChild(_.firstChild),this.attachObject(_.id,!1,!0),this.vs[this.av].sched=v,this.vs[this.av].schedId=_.id,v.setSizes=v.updateView,v.destructor=function(){},v.init(_.id,t,j),this.vs[this._viewRestore()].sched});var Te=function(t,j){j(!1,"The ".concat(t,' extension is not included in this version of dhtmlxScheduler.<br>\n\t\tYou may need a <a href="https://docs.dhtmlx.com/scheduler/editions_comparison.html" target="_blank">Professional version of the component</a>.<br>\n\t\tContact us at <a href="https://dhtmlx.com/docs/contact.shtml" target="_blank">https://dhtmlx.com/docs/contact.shtml</a> if you have any questions.'))};function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}function kt(t){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}function Tt(t){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(t)}var At=new(function(){function t(j){(function(a,v){if(!(a instanceof v))throw new TypeError("Cannot call a class as a function")})(this,t),this._seed=0,this._schedulerPlugins=[],this._bundledExtensions=j,this._extensionsManager=new Ke(j)}return a=[{key:"plugin",value:function(j){this._schedulerPlugins.push(j),y.a.scheduler&&j(y.a.scheduler)}},{key:"getSchedulerInstance",value:function(j){for(var a=te(this._extensionsManager),v=0;v<this._schedulerPlugins.length;v++)this._schedulerPlugins[v](a);return a._internal_id=this._seed++,this.$syncFactory&&this.$syncFactory(a),j&&this._initFromConfig(a,j),a}},{key:"_initFromConfig",value:function(j,a){if(a.plugins&&j.plugins(a.plugins),a.config&&j.mixin(j.config,a.config,!0),a.templates&&j.attachEvent("onTemplatesReady",function(){j.mixin(j.templates,a.templates,!0)},{once:!0}),a.events)for(var v in a.events)j.attachEvent(v,a.events[v]);a.locale&&j.i18n.setLocale(a.locale),Array.isArray(a.calendars)&&a.calendars.forEach(function(_){j.addCalendar(_)}),a.container?j.init(a.container):j.init(),a.data&&("string"==typeof a.data?j.load(a.data):j.parse(a.data))}}],a&&function ve(t,j){for(var a=0;a<j.length;a++){var v=j[a];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(t,v.key,v)}}(t.prototype,a),t;var a}())({active_links:function(t){t.config.active_link_view="day",t._active_link_click=function(j){var a=j.target.getAttribute("data-link-date"),v=t.date.str_to_date(t.config.api_date,!1,!0);if(a)return t.setCurrentView(v(a),t.config.active_link_view),j&&j.preventDefault&&j.preventDefault(),!1},t.attachEvent("onTemplatesReady",function(){var j=function(v,_){t.templates["_active_links_old_"+(_=_||v+"_scale_date")]||(t.templates["_active_links_old_"+_]=t.templates[_]);var i=t.templates["_active_links_old_"+_],o=t.date.date_to_str(t.config.api_date);t.templates[_]=function(c){return"<a data-link-date='"+o(c)+"' href='#'>"+i(c)+"</a>"}};if(j("week"),j("","month_day"),this.matrix)for(var a in this.matrix)j(a);this._detachDomEvent(this._obj,"click",t._active_link_click),t.event(this._obj,"click",t._active_link_click)})},agenda_view:function(t){t.date.add_agenda=function(j){return t.date.add(j,1,"year")},t.templates.agenda_time=function(j,a,v){return v._timed?this.day_date(v.start_date,v.end_date,v)+" "+this.event_date(j):t.templates.day_date(j)+" &ndash; "+t.templates.day_date(a)},t.templates.agenda_text=function(j,a,v){return v.text},t.templates.agenda_date=function(){return""},t.date.agenda_start=function(){return t.date.date_part(t._currentDate())},t.attachEvent("onTemplatesReady",function(){var j=t.dblclick_dhx_cal_data;t.dblclick_dhx_cal_data=function(){if("agenda"==this._mode)!this.config.readonly&&this.config.dblclick_create&&this.addEventNow();else if(j)return j.apply(this,arguments)};var a=t.render_data;t.render_data=function(i){if("agenda"!=this._mode)return a.apply(this,arguments);_()};var v=t.render_view_data;function _(){var i=t.get_visible_events();i.sort(function(_e,he){return _e.start_date>he.start_date?1:-1});for(var o,c="<div class='dhx_agenda_area' "+t._waiAria.agendaDataAttrString()+">",h=0;h<i.length;h++){var D=i[h],V=D.color?"background:"+D.color+";":"",T=D.textColor?"color:"+D.textColor+";":"",W=t.templates.event_class(D.start_date,D.end_date,D);o=t._waiAria.agendaEventAttrString(D);var z=t._waiAria.agendaDetailsBtnString();c+="<div "+o+" class='dhx_agenda_line"+(W?" "+W:"")+"' event_id='"+D.id+"' "+t.config.event_attribute+"='"+D.id+"' style='"+T+V+(D._text_style||"")+"'><div class='dhx_agenda_event_time'>"+(t.config.rtl?t.templates.agenda_time(D.end_date,D.start_date,D):t.templates.agenda_time(D.start_date,D.end_date,D))+"</div>",c+="<div "+z+" class='dhx_event_icon icon_details'>&nbsp;</div>",c+="<span>"+t.templates.agenda_text(D.start_date,D.end_date,D)+"</span></div>"}t._els.dhx_cal_data[0].innerHTML=c+="<div class='dhx_v_border'></div></div>",t._els.dhx_cal_data[0].childNodes[0].scrollTop=t._agendaScrollTop||0;var Z=t._els.dhx_cal_data[0].childNodes[0];Z.childNodes[Z.childNodes.length-1].style.height=Z.offsetHeight<t._els.dhx_cal_data[0].offsetHeight?"100%":Z.offsetHeight+"px";var re=t._els.dhx_cal_data[0].firstChild.childNodes,oe=t._getNavDateElement();for(oe&&(oe.innerHTML=t.templates.agenda_date(t._min_date,t._max_date,t._mode)),t._rendered=[],h=0;h<re.length-1;h++)t._rendered[h]=re[h]}t.render_view_data=function(){return"agenda"==this._mode&&(t._agendaScrollTop=t._els.dhx_cal_data[0].childNodes[0].scrollTop,t._els.dhx_cal_data[0].childNodes[0].scrollTop=0),v.apply(this,arguments)},t.agenda_view=function(i){t._min_date=t.config.agenda_start||t.date.agenda_start(t._date),t._max_date=t.config.agenda_end||t.date.add_agenda(t._min_date,1),function(o){if(o){var c=t.locale.labels,h=t._waiAria.agendaHeadAttrString(),D=t._waiAria.agendaHeadDateString(c.date),V=t._waiAria.agendaHeadDescriptionString(c.description);t._els.dhx_cal_header[0].innerHTML="<div "+h+" class='dhx_agenda_line'><div "+D+">"+c.date+"</div><span class = 'description_header' style='padding-left:25px' "+V+">"+c.description+"</span></div>",t._table_view=!0,t.set_sizes()}}(i),i?(t._cols=null,t._colsS=null,t._table_view=!0,_()):t._table_view=!1}})},all_timed:function(t){t.config.all_timed="short",t.config.all_timed_month=!1;var j=function(c){return!((c.end_date-c.start_date)/36e5>=24)||"resize"==t._drag_mode&&t._drag_id==c.id};t._safe_copy=function(c){var h=null,D=t._copy_event(c);return c.event_pid&&(h=t.getEvent(c.event_pid)),h&&h.isPrototypeOf(c)&&(delete D.event_length,delete D.event_pid,delete D.rec_pattern,delete D.rec_type),D};var a=t._pre_render_events_line,v=t._pre_render_events_table,_=function(c,h){return this._table_view?v.call(this,c,h):a.call(this,c,h)};t._pre_render_events_line=t._pre_render_events_table=function(c,h){if(!this.config.all_timed||this._table_view&&"month"!=this._mode||"month"==this._mode&&!this.config.all_timed_month)return _.call(this,c,h);for(var D=0;D<c.length;D++){var V=c[D];if(!V._timed)if("short"!=this.config.all_timed||j(V)){var T=this._safe_copy(V);T._first_chunk=!V._virtual,T._drag_resize=!1,T._virtual=!0,T.start_date=new Date(T.start_date),void 0,be=oe((he=V).start_date),+he.end_date>+be?(T.end_date=oe(T.start_date),24!=this.config.last_hour&&(T.end_date=_e(T.start_date,this.config.last_hour))):T.end_date=new Date(V.end_date);var W=!1;T.start_date<this._max_date&&T.end_date>this._min_date&&T.start_date<T.end_date&&(c[D]=T,W=!0);var z=this._safe_copy(V);if(z._virtual=!0,z.end_date=new Date(z.end_date),z.start_date=_e(z.start_date<this._min_date?this._min_date:oe(V.start_date),this.config.first_hour),z.start_date<this._max_date&&z.start_date<z.end_date){if(!W){c[D--]=z;continue}c.splice(D+1,0,z),z._last_chunk=!1}else T._last_chunk=!0,T._drag_resize=!0}else"month"!=this._mode&&c.splice(D--,1)}var he,be;return _.call(this,c,"move"!=this._drag_mode&&h);function oe(he){var be=t.date.add(he,1,"day");return t.date.date_part(be)}function _e(he,be){var Ae=t.date.date_part(new Date(he));return Ae.setHours(be),Ae}};var i=t.get_visible_events;t.get_visible_events=function(c){return i.call(this,(!this.config.all_timed||!this.config.multi_day)&&c)},t.attachEvent("onBeforeViewChange",function(c,h,D,V){return t._allow_dnd="day"==D||"week"==D,!0}),t._is_main_area_event=function(c){return!!(c._timed||!0===this.config.all_timed||"short"==this.config.all_timed&&j(c))};var o=t.updateEvent;t.updateEvent=function(c){var h,D,V=t.getEvent(c);V&&(h=t.config.all_timed&&!(t.isOneDayEvent(t._events[c])||t.getState().drag_id))&&(D=t.config.update_render,t.config.update_render=!0),o.apply(t,arguments),V&&h&&(t.config.update_render=D)}},collision:function(t){var j,a;function v(_){t._get_section_view()&&_&&(j=t.getEvent(_)[t._get_section_property()])}t.config.collision_limit=1,t.attachEvent("onBeforeDrag",function(_){return v(_),!0}),t.attachEvent("onBeforeLightbox",function(_){var i=t.getEvent(_);return a=[i.start_date,i.end_date],v(_),!0}),t.attachEvent("onEventChanged",function(_){if(!_||!t.getEvent(_))return!0;var i=t.getEvent(_);if(!t.checkCollision(i)){if(!a)return!1;i.start_date=a[0],i.end_date=a[1],i._timed=this.isOneDayEvent(i)}return!0}),t.attachEvent("onBeforeEventChanged",function(_,i,o){return t.checkCollision(_)}),t.attachEvent("onEventAdded",function(_,i){t.checkCollision(i)||t.deleteEvent(_)}),t.attachEvent("onEventSave",function(_,i,o){if((i=t._lame_clone(i)).id=_,!i.start_date||!i.end_date){var c=t.getEvent(_);i.start_date=new Date(c.start_date),i.end_date=new Date(c.end_date)}return i.rec_type&&t._roll_back_dates(i),t.checkCollision(i)}),t._check_sections_collision=function(_,i){var o=t._get_section_property();return _[o]==i[o]&&_.id!=i.id},t.checkCollision=function(_){var i=[],o=t.config.collision_limit;if(_.rec_type)for(var c=t.getRecDates(_),h=0;h<c.length;h++)for(var D=t.getEvents(c[h].start_date,c[h].end_date),V=0;V<D.length;V++)(D[V].event_pid||D[V].id)!=_.id&&i.push(D[V]);else{i=t.getEvents(_.start_date,_.end_date);for(var T=0;T<i.length;T++){var W=i[T];if(W.id==_.id||W.event_length&&[W.event_pid,W.event_length].join("#")==_.id){i.splice(T,1);break}}}var z=t._get_section_view(),Z=t._get_section_property(),re=!0;if(z){var oe=0;for(T=0;T<i.length;T++)i[T].id!=_.id&&this._check_sections_collision(i[T],_)&&oe++;oe>=o&&(re=!1)}else i.length>=o&&(re=!1);if(!re){var _e=!t.callEvent("onEventCollision",[_,i]);return _e||(_[Z]=j||_[Z]),_e}return re}},container_autoresize:function(t){t.config.container_autoresize=!0,t.config.month_day_min_height=90,t.config.min_grid_size=25,t.config.min_map_size=400;var j=t._pre_render_events,a=!0,v=0,_=0;t._pre_render_events=function(V,T){if(!t.config.container_autoresize||!a)return j.apply(this,arguments);var W=this.xy.bar_height,z=this._colsS.heights,Z=this._colsS.heights=[0,0,0,0,0,0,0],re=this._els.dhx_cal_data[0];if(V=this._table_view?this._pre_render_events_table(V,T):this._pre_render_events_line(V,T),this._table_view)if(T)this._colsS.heights=z;else{var oe=re.firstChild;if(oe.rows){for(var _e=0;_e<oe.rows.length;_e++){if(Z[_e]++,Z[_e]*W>this._colsS.height-this.xy.month_head_height){var he=oe.rows[_e].cells,be=this._colsS.height-this.xy.month_head_height;1*this.config.max_month_events!==this.config.max_month_events||Z[_e]<=this.config.max_month_events?be=Z[_e]*W:(this.config.max_month_events+1)*W>this._colsS.height-this.xy.month_head_height&&(be=(this.config.max_month_events+1)*W);for(var Ae=0;Ae<he.length;Ae++)he[Ae].childNodes[1].style.height=be+"px";Z[_e]=(Z[_e-1]||0)+he[0].offsetHeight}Z[_e]=(Z[_e-1]||0)+oe.rows[_e].cells[0].offsetHeight}Z.unshift(0)}else if(V.length||"visible"!=this._els.dhx_multi_day[0].style.visibility||(Z[0]=-1),V.length||-1==Z[0]){var He=(Z[0]+1)*W+1;_!=He+1&&(this._obj.style.height=v-_+He-1+"px"),He+="px",re.style.top=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+parseInt(He,10)+"px",re.style.height=this._obj.offsetHeight-parseInt(re.style.top,10)-(this.xy.margin_top||0)+"px";var Ne=this._els.dhx_multi_day[0];Ne.style.height=He,Ne.style.visibility=-1==Z[0]?"hidden":"visible",(Ne=this._els.dhx_multi_day[1]).style.height=He,Ne.style.visibility=-1==Z[0]?"hidden":"visible",Ne.className=Z[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(Z[0]+1)*W,Z[0]=0}}return V};var i=["dhx_cal_navline","dhx_cal_header","dhx_multi_day","dhx_cal_data"],o=function(V){v=0;for(var T=0;T<i.length;T++){var W=i[T],z=t._els[W]?t._els[W][0]:null,Z=0;switch(W){case"dhx_cal_navline":case"dhx_cal_header":Z=parseInt(z.style.height,10);break;case"dhx_multi_day":_=Z=z?z.offsetHeight-1:0;break;case"dhx_cal_data":var re=t.getState().mode;if(Z=z.childNodes[1]&&"month"!=re?z.childNodes[1].offsetHeight:Math.max(z.offsetHeight-1,z.scrollHeight),"month"==re)t.config.month_day_min_height&&!V&&(Z=z.getElementsByTagName("tr").length*t.config.month_day_min_height),V&&(z.style.height=Z+"px");else if("year"==re)Z=190*t.config.year_y;else if("agenda"==re){if(Z=0,z.childNodes&&z.childNodes.length)for(var oe=0;oe<z.childNodes.length;oe++)Z+=z.childNodes[oe].offsetHeight;Z+2<t.config.min_grid_size?Z=t.config.min_grid_size:Z+=2}else if("week_agenda"==re){for(var _e,he,be=t.xy.week_agenda_scale_height+t.config.min_grid_size,Ae=0;Ae<z.childNodes.length;Ae++)for(he=z.childNodes[Ae],oe=0;oe<he.childNodes.length;oe++){for(var He=0,Ne=he.childNodes[oe].childNodes[1],Ve=0;Ve<Ne.childNodes.length;Ve++)He+=Ne.childNodes[Ve].offsetHeight;_e=He+t.xy.week_agenda_scale_height,(_e=1!=Ae||2!=oe&&3!=oe?_e:2*_e)>be&&(be=_e)}Z=3*be}else if("map"==re){Z=0;var Se=z.querySelectorAll(".dhx_map_line");for(oe=0;oe<Se.length;oe++)Z+=Se[oe].offsetHeight;Z+2<t.config.min_map_size?Z=t.config.min_map_size:Z+=2}else if(t._gridView)if(Z=0,z.childNodes[1].childNodes[0].childNodes&&z.childNodes[1].childNodes[0].childNodes.length){for(Se=z.childNodes[1].childNodes[0].childNodes[0].childNodes,oe=0;oe<Se.length;oe++)Z+=Se[oe].offsetHeight;(Z+=2)<t.config.min_grid_size&&(Z=t.config.min_grid_size)}else Z=t.config.min_grid_size;if(t.matrix&&t.matrix[re]){if(V)z.style.height=(Z+=0)+"px";else{Z=0;for(var Fe=t.matrix[re],Oe=Fe.y_unit,at=0;at<Oe.length;at++)Z+=Fe.getSectionHeight(Oe[at].key);t.$container.clientWidth!=t.$container.scrollWidth&&(Z+=D())}Z-=1}("day"==re||"week"==re||t._props&&t._props[re])&&(Z+=2)}v+=Z+=1}t._obj.style.height=v+"px",V||t.updateView()};function c(){a=!1,t.callEvent("onAfterSchedulerResize",[]),a=!0}var h=function(){if(!t.config.container_autoresize||!a)return!0;var V=t.getState().mode;if(!V)return!0;var T=window.requestAnimationFrame||window.setTimeout,W=document.documentElement.scrollTop;T(function(){o()}),t.matrix&&t.matrix[V]||"month"==V?T(function(){o(!0),document.documentElement.scrollTop=W,c()},1):c()};function D(){var V=document.createElement("div");V.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(V);var T=V.offsetWidth-V.clientWidth;return document.body.removeChild(V),T}t.attachEvent("onBeforeViewChange",function(){var V=t.config.container_autoresize;if(t.xy.$original_scroll_width||(t.xy.$original_scroll_width=t.xy.scroll_width),t.xy.scroll_width=V?0:t.xy.$original_scroll_width,t.matrix)for(var T in t.matrix){var W=t.matrix[T];W.$original_section_autoheight||(W.$original_section_autoheight=W.section_autoheight),W.section_autoheight=!V&&W.$original_section_autoheight}return!0}),t.attachEvent("onViewChange",h),t.attachEvent("onXLE",h),t.attachEvent("onEventChanged",h),t.attachEvent("onEventCreated",h),t.attachEvent("onEventAdded",h),t.attachEvent("onEventDeleted",h),t.attachEvent("onAfterSchedulerResize",h),t.attachEvent("onClearAll",h),t.attachEvent("onBeforeExpand",function(){return a=!1,!0}),t.attachEvent("onBeforeCollapse",function(){return a=!0,!0})},cookie:function(t){function j(_){return(_._obj.id||"scheduler")+"_settings"}var a=!0;t.attachEvent("onBeforeViewChange",function(_,i,o,c){if(a&&t._get_url_nav){var h=t._get_url_nav();(h.date||h.mode||h.event)&&(a=!1)}var D=j(t);if(a){a=!1;var V=function(W){var z=W+"=";if(document.cookie.length>0){var Z=document.cookie.indexOf(z);if(-1!=Z){Z+=z.length;var re=document.cookie.indexOf(";",Z);return-1==re&&(re=document.cookie.length),document.cookie.substring(Z,re)}}return""}(D);if(V){t._min_date||(t._min_date=c),(V=unescape(V).split("@"))[0]=this._helpers.parseDate(V[0]);var T=this.isViewExists(V[1])?V[1]:o;return c=isNaN(+V[0])?c:V[0],window.setTimeout(function(){t.setCurrentView(c,T)},1),!1}}return!0}),t.attachEvent("onViewChange",function(_,i){var o,h;o=j(t),h=escape(this._helpers.formatDate(i)+"@"+_),document.cookie=o+"="+h+"; expires=Sun, 31 Jan 9999 22:00:00 GMT"});var v=t._load;t._load=function(){var _=arguments;if(t._date)v.apply(this,_);else{var i=this;window.setTimeout(function(){v.apply(i,_)},1)}}},daytimeline:function(t){Te("Day Timeline",t.assert)},drag_between:function(t){Te("Drag Between",t.assert)},editors:function(t){t.form_blocks.combo={render:function(j){return j.cached_options||(j.cached_options={}),"<div class='"+j.type+"' style='height:"+(j.height||20)+"px;' ></div>"},set_value:function(j,a,v,_){(function(){z();var W=t.attachEvent("onAfterLightbox",function(){z(),t.detachEvent(W)});function z(){if(j._combo&&j._combo.DOMParent){var Z=j._combo;Z.unload?Z.unload():Z.destructor&&Z.destructor(),Z.DOMParent=Z.DOMelem=null}}})(),window.dhx_globalImgPath=_.image_path||"/",j._combo=new dhtmlXCombo(j,_.name,j.offsetWidth-8),_.onchange&&j._combo.attachEvent("onChange",_.onchange),_.options_height&&j._combo.setOptionHeight(_.options_height);var i=j._combo;if(i.enableFilteringMode(_.filtering,_.script_path||null,!!_.cache),_.script_path){var o=v[_.map_to];o?_.cached_options[o]?(i.addOption(o,_.cached_options[o]),i.disable(1),i.selectOption(0),i.disable(0)):t.ajax.get(_.script_path+"?id="+o+"&uid="+t.uid(),function(W){var z,Z=W.xmlDoc.responseText;try{z=JSON.parse(Z).options[0].text}catch{z=t.ajax.xpath("//option",W.xmlDoc)[0].childNodes[0].nodeValue}_.cached_options[o]=z,i.addOption(o,z),i.disable(1),i.selectOption(0),i.disable(0)}):i.setComboValue("")}else{for(var c=[],h=0;h<_.options.length;h++){var D=_.options[h];c.push([D.key,D.label,D.css])}if(i.addOption(c),v[_.map_to]){var T=i.getIndexByValue(v[_.map_to]);i.selectOption(T)}}},get_value:function(j,a,v){var _=j._combo.getSelectedValue();return v.script_path&&(v.cached_options[_]=j._combo.getSelectedText()),_},focus:function(j){}},t.form_blocks.radio={render:function(j){var a="";a+="<div class='dhx_cal_ltext dhx_cal_radio' style='height:"+j.height+"px;' >";for(var v=0;v<j.options.length;v++){var _=t.uid();a+="<input id='"+_+"' type='radio' name='"+j.name+"' value='"+j.options[v].key+"'><label for='"+_+"'> "+j.options[v].label+"</label>",j.vertical&&(a+="<br/>")}return a+"</div>"},set_value:function(j,a,v,_){for(var i=j.getElementsByTagName("input"),o=0;o<i.length;o++)i[o].checked=!1,i[o].value==(v[_.map_to]||a)&&(i[o].checked=!0)},get_value:function(j,a,v){for(var _=j.getElementsByTagName("input"),i=0;i<_.length;i++)if(_[i].checked)return _[i].value},focus:function(j){}},t.form_blocks.checkbox={render:function(j){return t.config.wide_form?'<div class="dhx_cal_wide_checkbox" '+(j.height?"style='height:"+j.height+"px;'":"")+"></div>":""},set_value:function(j,a,v,_){j=document.getElementById(_.id);var i=t.uid(),o=void 0!==_.checked_value?a==_.checked_value:!!a;j.className+=" dhx_cal_checkbox";var c="<input id='"+i+"' type='checkbox' value='true' name='"+_.name+"'"+(o?"checked='true'":"")+"'>",h="<label for='"+i+"'>"+(t.locale.labels["section_"+_.name]||_.name)+"</label>";if(t.config.wide_form?(j.innerHTML=h,j.nextSibling.innerHTML=c):j.innerHTML=c+h,_.handler){var D=j.getElementsByTagName("input")[0];if(D.$_eventAttached)return;D.$_eventAttached=!0,t.event(D,"click",_.handler)}},get_value:function(j,a,v){var _=(j=document.getElementById(v.id)).getElementsByTagName("input")[0];return _||(_=j.nextSibling.getElementsByTagName("input")[0]),_.checked?v.checked_value||!0:v.unchecked_value||!1},focus:function(j){}}},expand:function(t){t.ext.fullscreen={toggleIcon:null},t.expand=function(){if(t.callEvent("onBeforeExpand",[])){var j=t._obj;do{j._position=j.style.position||"",j.style.position="static"}while((j=j.parentNode)&&j.style);(j=t._obj).style.position="absolute",j._width=j.style.width,j._height=j.style.height,j.style.width=j.style.height="100%",j.style.top=j.style.left="0px";var a=document.body;a.scrollTop=0,(a=a.parentNode)&&(a.scrollTop=0),document.body._overflow=document.body.style.overflow||"",document.body.style.overflow="hidden",t._maximize(),t.callEvent("onExpand",[])}},t.collapse=function(){if(t.callEvent("onBeforeCollapse",[])){var j=t._obj;do{j.style.position=j._position}while((j=j.parentNode)&&j.style);(j=t._obj).style.width=j._width,j.style.height=j._height,document.body.style.overflow=document.body._overflow,t._maximize(),t.callEvent("onCollapse",[])}},t.attachEvent("onTemplatesReady",function(){var j=document.createElement("div");j.className="dhx_expand_icon",t.ext.fullscreen.toggleIcon=j,t._obj.appendChild(j),t.event(j,"click",function(){t.expanded?t.collapse():t.expand()})}),t._maximize=function(){this.expanded=!this.expanded,t.ext.fullscreen.toggleIcon.style.backgroundPosition="0 "+(this.expanded?"0":"18")+"px";for(var j=["left","top"],a=0;a<j.length;a++){var v=t["_prev_margin_"+j[a]];t.xy["margin_"+j[a]]?(t["_prev_margin_"+j[a]]=t.xy["margin_"+j[a]],t.xy["margin_"+j[a]]=0):v&&(t.xy["margin_"+j[a]]=t["_prev_margin_"+j[a]],delete t["_prev_margin_"+j[a]])}t.setCurrentView()}},grid_view:function(t){Te("Grid",t.assert)},html_templates:function(t){t.attachEvent("onTemplatesReady",function(){for(var j=document.body.getElementsByTagName("DIV"),a=0;a<j.length;a++){var v=j[a].className||"";if(2==(v=v.split(":")).length&&"template"==v[0]){var _='return "'+(j[a].innerHTML||"").replace(/"/g,'\\"').replace(/[\n\r]+/g,"")+'";';_=unescape(_).replace(/\{event\.([a-z]+)\}/g,function(i,o){return'"+ev.'+o+'+"'}),t.templates[v[1]]=Function("start","end","ev",_),j[a].style.display="none"}}})},key_nav:function(t){function j(a){var v={minicalButton:t.$keyboardNavigation.MinicalButton,minicalDate:t.$keyboardNavigation.MinicalCell,scheduler:t.$keyboardNavigation.SchedulerNode,dataArea:t.$keyboardNavigation.DataArea,timeSlot:t.$keyboardNavigation.TimeSlot,event:t.$keyboardNavigation.Event},_={};for(var i in v)_[i.toLowerCase()]=v[i];return _[a=(a+"").toLowerCase()]||v.scheduler}var a;t.config.key_nav=!0,t.config.key_nav_step=30,t.addShortcut=function(a,v,_){var i=j(_);i&&i.prototype.bind(a,v)},t.getShortcutHandler=function(a,v){var _=j(v);if(_){var i=t.$keyboardNavigation.shortcuts.parse(a);if(i.length)return _.prototype.findHandler(i[0])}},t.removeShortcut=function(a,v){var _=j(v);_&&_.prototype.unbind(a)},t.focus=function(){if(t.config.key_nav){var a=t.$keyboardNavigation.dispatcher;a.enable();var v=a.getActiveNode();!v||v instanceof t.$keyboardNavigation.MinicalButton||v instanceof t.$keyboardNavigation.MinicalCell?a.setDefaultNode():a.focusNode(a.getActiveNode())}},t.$keyboardNavigation={},t._compose=function(){for(var a=Array.prototype.slice.call(arguments,0),v={},_=0;_<a.length;_++){var i=a[_];for(var o in"function"==typeof i&&(i=new i),i)v[o]=i[o]}return v},t.$keyboardNavigation.shortcuts={createCommand:function(){return{modifiers:{shift:!1,alt:!1,ctrl:!1,meta:!1},keyCode:null}},parse:function(v){for(var _=[],i=this.getExpressions(this.trim(v)),o=0;o<i.length;o++){for(var c=this.getWords(i[o]),h=this.createCommand(),D=0;D<c.length;D++)this.commandKeys[c[D]]?h.modifiers[c[D]]=!0:h.keyCode=this.specialKeys[c[D]]?this.specialKeys[c[D]]:c[D].charCodeAt(0);_.push(h)}return _},getCommandFromEvent:function(v){var _=this.createCommand();_.modifiers.shift=!!v.shiftKey,_.modifiers.alt=!!v.altKey,_.modifiers.ctrl=!!v.ctrlKey,_.modifiers.meta=!!v.metaKey,_.keyCode=v.which||v.keyCode,_.keyCode>=96&&_.keyCode<=105&&(_.keyCode-=48);var i=String.fromCharCode(_.keyCode);return i&&(_.keyCode=i.toLowerCase().charCodeAt(0)),_},getHashFromEvent:function(v){return this.getHash(this.getCommandFromEvent(v))},getHash:function(v){var _=[];for(var i in v.modifiers)v.modifiers[i]&&_.push(i);return _.push(v.keyCode),_.join(this.junctionChar)},getExpressions:function(v){return v.split(this.junctionChar)},getWords:function(v){return v.split(this.combinationChar)},trim:function(v){return v.replace(/\s/g,"")},junctionChar:",",combinationChar:"+",commandKeys:{shift:16,alt:18,ctrl:17,meta:!0},specialKeys:{backspace:8,tab:9,enter:13,esc:27,space:32,up:38,down:40,left:37,right:39,home:36,end:35,pageup:33,pagedown:34,delete:46,insert:45,plus:107,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}},(a=t).$keyboardNavigation.EventHandler={_handlers:null,findHandler:function(v){this._handlers||(this._handlers={});var _=a.$keyboardNavigation.shortcuts.getHash(v);return this._handlers[_]},doAction:function(v,_){var i=this.findHandler(v);i&&(i.call(this,_),_.preventDefault?_.preventDefault():_.returnValue=!1)},bind:function(v,_){this._handlers||(this._handlers={});for(var i=a.$keyboardNavigation.shortcuts,o=i.parse(v),c=0;c<o.length;c++)this._handlers[i.getHash(o[c])]=_},unbind:function(v){for(var _=a.$keyboardNavigation.shortcuts,i=_.parse(v),o=0;o<i.length;o++)this._handlers[_.getHash(i[o])]&&delete this._handlers[_.getHash(i[o])]},bindAll:function(v){for(var _ in v)this.bind(_,v[_])},initKeys:function(){this._handlers||(this._handlers={}),this.keys&&this.bindAll(this.keys)}},function(a){a.$keyboardNavigation.getFocusableNodes=a._getFocusableNodes,a.$keyboardNavigation.trapFocus=function(v,_){if(9!=_.keyCode)return!1;for(var i,o=a.$keyboardNavigation.getFocusableNodes(v),c=document.activeElement,h=-1,D=0;D<o.length;D++)if(o[D]==c){h=D;break}if(_.shiftKey){if(i=o[h<=0?o.length-1:h-1])return i.focus(),_.preventDefault(),!0}else if(i=o[h>=o.length-1?0:h+1])return i.focus(),_.preventDefault(),!0;return!1}}(t),function(a){a.$keyboardNavigation.marker={clear:function(){for(var v=a.$container.querySelectorAll(".dhx_focus_slot"),_=0;_<v.length;_++)v[_].parentNode.removeChild(v[_])},createElement:function(){var v=document.createElement("div");return v.setAttribute("tabindex",-1),v.className="dhx_focus_slot",v},renderMultiple:function(v,_,i){for(var o=[],c=new Date(v),h=new Date(Math.min(_.valueOf(),a.date.add(a.date.day_start(new Date(v)),1,"day").valueOf()));c.valueOf()<_.valueOf();)o=o.concat(i.call(this,c,new Date(Math.min(h.valueOf(),_.valueOf())))),c=a.date.day_start(a.date.add(c,1,"day")),h=a.date.day_start(a.date.add(c,1,"day")),h=new Date(Math.min(h.valueOf(),_.valueOf()));return o},render:function(v,_,i){this.clear();var o=[],c=a.$keyboardNavigation.TimeSlot.prototype._modes;switch(a.$keyboardNavigation.TimeSlot.prototype._getMode()){case c.units:o=this.renderVerticalMarker(v,_,i);break;case c.timeline:o=this.renderTimelineMarker(v,_,i);break;case c.year:o=o.concat(this.renderMultiple(v,_,this.renderYearMarker));break;case c.month:o=this.renderMonthMarker(v,_);break;case c.weekAgenda:o=o.concat(this.renderMultiple(v,_,this.renderWeekAgendaMarker));break;case c.list:o=this.renderAgendaMarker(v,_);break;case c.dayColumns:o=o.concat(this.renderMultiple(v,_,this.renderVerticalMarker))}this.addWaiAriaLabel(o,v,_,i),this.addDataAttributes(o,v,_,i);for(var h=o.length-1;h>=0;h--)if(o[h].offsetWidth)return o[h];return null},addDataAttributes:function(v,_,i,o){for(var c=a.date.date_to_str(a.config.api_date),h=c(_),D=c(i),V=0;V<v.length;V++)v[V].setAttribute("data-start-date",h),v[V].setAttribute("data-end-date",D),o&&v[V].setAttribute("data-section",o)},addWaiAriaLabel:function(v,_,i,o){var c="",h=a.getState().mode,D=!1;c+=a.templates.day_date(_),a.date.day_start(new Date(_)).valueOf()!=_.valueOf()&&(c+=" "+a.templates.hour_scale(_),D=!0),a.date.day_start(new Date(_)).valueOf()!=a.date.day_start(new Date(i)).valueOf()&&(c+=" - "+a.templates.day_date(i),(D||a.date.day_start(new Date(i)).valueOf()!=i.valueOf())&&(c+=" "+a.templates.hour_scale(i))),o&&(a.matrix&&a.matrix[h]?c+=", "+a.templates[h+"_scale_label"](o.key,o.label,o):a._props&&a._props[h]&&(c+=", "+a.templates[h+"_scale_text"](o.key,o.label,o)));for(var V=0;V<v.length;V++)a._waiAria.setAttributes(v[V],{"aria-label":c,"aria-live":"polite"})},renderWeekAgendaMarker:function(v,_){for(var i=a.$container.querySelectorAll(".dhx_wa_day_cont .dhx_wa_scale_bar"),o=a.date.week_start(new Date(a.getState().min_date)),c=-1,h=a.date.day_start(new Date(v)),D=0;D<i.length&&(c++,a.date.day_start(new Date(o)).valueOf()!=h.valueOf());D++)o=a.date.add(o,1,"day");return-1!=c?this._wrapDiv(i[c]):[]},_wrapDiv:function(v){var _=this.createElement();return _.style.top=v.offsetTop+"px",_.style.left=v.offsetLeft+"px",_.style.width=v.offsetWidth+"px",_.style.height=v.offsetHeight+"px",v.appendChild(_),[_]},renderYearMarker:function(v,_){var i=a._get_year_cell(v);i.style.position="relative";var o=this.createElement();return o.style.top="0px",o.style.left="0px",o.style.width="100%",o.style.height="100%",i.appendChild(o),[o]},renderAgendaMarker:function(v,_){var i=this.createElement();return i.style.height="1px",i.style.width="100%",i.style.opacity=1,i.style.top="0px",i.style.left="0px",a.$container.querySelector(".dhx_cal_data").appendChild(i),[i]},renderTimelineMarker:function(v,_,i){var o=a._lame_copy({},a.matrix[a._mode]),c=o._scales;o.round_position=!1;var h=[],D=v?new Date(v):a._min_date,V=_?new Date(_):a._max_date;if(D.valueOf()<a._min_date.valueOf()&&(D=new Date(a._min_date)),V.valueOf()>a._max_date.valueOf()&&(V=new Date(a._max_date)),!o._trace_x)return h;for(var T=0;T<o._trace_x.length&&!a._is_column_visible(o._trace_x[T]);T++);if(T==o._trace_x.length)return h;var W=c[i];if(!(D<_&&V>v))return h;var z=this.createElement(),Z=a._timeline_getX({start_date:v},!1,o)-1,re=a._timeline_getX({start_date:_},!1,o)-1,oe=o._section_height[i]-1||o.dy-1,_e=0;a._isRender("cell")&&(_e=W.offsetTop,Z+=o.dx,re+=o.dx,W=a.$container.querySelector(".dhx_cal_data"));var he=Math.max(1,re-Z-1);return z.style.cssText="height: "+oe+"px; left: "+Z+"px; width: "+he+"px; top: "+_e+"px;",W&&(W.appendChild(z),h.push(z)),h},renderMonthCell:function(v){for(var _=a.$container.querySelectorAll(".dhx_month_head"),i=[],o=0;o<_.length;o++)i.push(_[o].parentNode);var c=-1,h=0,D=-1,V=a.date.week_start(new Date(a.getState().min_date)),T=a.date.day_start(new Date(v));for(o=0;o<i.length&&(c++,6==D?(h++,D=0):D++,a.date.day_start(new Date(V)).valueOf()!=T.valueOf());o++)V=a.date.add(V,1,"day");if(-1==c)return[];var W=a._colsS[D],z=a._colsS.heights[h],Z=this.createElement();Z.style.top=z+"px",Z.style.left=W+"px",Z.style.width=a._cols[D]+"px",Z.style.height=(a._colsS.heights[h+1]-z||a._colsS.height)+"px";var re=a.$container.querySelector(".dhx_cal_data"),oe=re.querySelector("table");return oe.nextSibling?re.insertBefore(Z,oe.nextSibling):re.appendChild(Z),Z},renderMonthMarker:function(v,_){for(var i=[],o=v;o.valueOf()<_.valueOf();)i.push(this.renderMonthCell(o)),o=a.date.add(o,1,"day");return i},renderVerticalMarker:function(v,_,i){var o=a.locate_holder_day(v),c=[],h=null,D=a.config;if(a._ignores[o])return c;if(a._props&&a._props[a._mode]&&i){var V=a._props[a._mode];o=V.order[i];var T=V.order[i];V.days>1?o=a.locate_holder_day(v)+T:(o=T,V.size&&o>V.position+V.size&&(o=0))}if(!(h=a.locate_holder(o))||h.querySelector(".dhx_scale_hour"))return document.createElement("div");var W=Math.max(60*v.getHours()+v.getMinutes(),60*D.first_hour),z=Math.min(60*_.getHours()+_.getMinutes(),60*D.last_hour);if(!z&&a.date.day_start(new Date(_)).valueOf()>a.date.day_start(new Date(v)).valueOf()&&(z=60*D.last_hour),z<=W)return[];var Z=this.createElement(),re=a.config.hour_size_px*D.last_hour+1;return Z.style.top=Math.round((60*W*1e3-36e5*a.config.first_hour)*a.config.hour_size_px/36e5)%re+"px",Z.style.lineHeight=Z.style.height=Math.max(Math.round(60*(z-W)*1e3*a.config.hour_size_px/36e5)%re,1)+"px",Z.style.width="100%",h.appendChild(Z),c.push(Z),c[0]}}}(t),function(a){a.$keyboardNavigation.SchedulerNode=function(){},a.$keyboardNavigation.SchedulerNode.prototype=a._compose(a.$keyboardNavigation.EventHandler,{getDefaultNode:function(){var v=new a.$keyboardNavigation.TimeSlot;return v.isValid()||(v=v.fallback()),v},_modes:{month:"month",year:"year",dayColumns:"dayColumns",timeline:"timeline",units:"units",weekAgenda:"weekAgenda",list:"list"},getMode:function(){var v=a.getState().mode;return a.matrix&&a.matrix[v]?this._modes.timeline:a._props&&a._props[v]?this._modes.units:"month"==v?this._modes.month:"year"==v?this._modes.year:"week_agenda"==v?this._modes.weekAgenda:"map"==v||"agenda"==v||a._grid&&a["grid_"+v]?this._modes.list:this._modes.dayColumns},focus:function(){a.focus()},blur:function(){},disable:function(){a.$container.setAttribute("tabindex","0")},enable:function(){a.$container&&a.$container.removeAttribute("tabindex")},isEnabled:function(){return a.$container.hasAttribute("tabindex")},_compareEvents:function(v,_){return v.start_date.valueOf()==_.start_date.valueOf()?v.id>_.id?1:-1:v.start_date.valueOf()>_.start_date.valueOf()?1:-1},_pickEvent:function(v,_,i,o){var c=a.getState();v=new Date(Math.max(c.min_date.valueOf(),v.valueOf())),_=new Date(Math.min(c.max_date.valueOf(),_.valueOf()));var h=a.getEvents(v,_);h.sort(this._compareEvents),o&&(h=h.reverse());for(var D=!!i,V=0;V<h.length&&D;V++)h[V].id==i&&(D=!1),h.splice(V,1),V--;for(V=0;V<h.length;V++)if(new a.$keyboardNavigation.Event(h[V].id).getNode())return h[V];return null},nextEventHandler:function(v){var _=a.$keyboardNavigation.dispatcher.activeNode,i=v||_&&_.eventId,o=null;if(i&&a.getEvent(i)){var c=a.getEvent(i);o=a.$keyboardNavigation.SchedulerNode.prototype._pickEvent(c.start_date,a.date.add(c.start_date,1,"year"),c.id,!1)}if(!o&&!v){var h=a.getState();o=a.$keyboardNavigation.SchedulerNode.prototype._pickEvent(h.min_date,a.date.add(h.min_date,1,"year"),null,!1)}if(o){var D=new a.$keyboardNavigation.Event(o.id);D.isValid()?(_&&_.blur(),a.$keyboardNavigation.dispatcher.setActiveNode(D)):this.nextEventHandler(o.id)}},prevEventHandler:function(v){var _=a.$keyboardNavigation.dispatcher.activeNode,i=v||_&&_.eventId,o=null;if(i&&a.getEvent(i)){var c=a.getEvent(i);o=a.$keyboardNavigation.SchedulerNode.prototype._pickEvent(a.date.add(c.end_date,-1,"year"),c.end_date,c.id,!0)}if(!o&&!v){var h=a.getState();o=a.$keyboardNavigation.SchedulerNode.prototype._pickEvent(a.date.add(h.max_date,-1,"year"),h.max_date,null,!0)}if(o){var D=new a.$keyboardNavigation.Event(o.id);D.isValid()?(_&&_.blur(),a.$keyboardNavigation.dispatcher.setActiveNode(D)):this.prevEventHandler(o.id)}},keys:{"alt+1, alt+2, alt+3, alt+4, alt+5, alt+6, alt+7, alt+8, alt+9":function(v){var _=a.$keyboardNavigation.HeaderCell.prototype.getNodes(".dhx_cal_navline .dhx_cal_tab"),i=v.key;void 0===i&&(i=v.keyCode-48),_[1*i-1]&&_[1*i-1].click()},"ctrl+left,meta+left":function(v){a._click.dhx_cal_prev_button()},"ctrl+right,meta+right":function(v){a._click.dhx_cal_next_button()},"ctrl+up,meta+up":function(v){a.$container.querySelector(".dhx_cal_data").scrollTop-=20},"ctrl+down,meta+down":function(v){a.$container.querySelector(".dhx_cal_data").scrollTop+=20},e:function(){this.nextEventHandler()},home:function(){a.setCurrentView(new Date)},"shift+e":function(){this.prevEventHandler()},"ctrl+enter,meta+enter":function(){a.addEventNow({start_date:new Date(a.getState().date)})},"ctrl+c,meta+c":function(v){a._key_nav_copy_paste(v)},"ctrl+v,meta+v":function(v){a._key_nav_copy_paste(v)},"ctrl+x,meta+x":function(v){a._key_nav_copy_paste(v)}}}),a.$keyboardNavigation.SchedulerNode.prototype.bindAll(a.$keyboardNavigation.SchedulerNode.prototype.keys)}(t),function(a){a.$keyboardNavigation.KeyNavNode=function(){},a.$keyboardNavigation.KeyNavNode.prototype=a._compose(a.$keyboardNavigation.EventHandler,{isValid:function(){return!0},fallback:function(){return null},moveTo:function(v){a.$keyboardNavigation.dispatcher.setActiveNode(v)},compareTo:function(v){if(!v)return!1;for(var _ in this){if(!!this[_]!=!!v[_])return!1;var i=!(!this[_]||!this[_].toString),o=!(!v[_]||!v[_].toString);if(o!=i)return!1;if(o&&i){if(v[_].toString()!=this[_].toString())return!1}else if(v[_]!=this[_])return!1}return!0},getNode:function(){},focus:function(){var v=this.getNode();v&&(v.setAttribute("tabindex","-1"),v.focus&&v.focus())},blur:function(){var v=this.getNode();v&&v.setAttribute("tabindex","-1")}})}(t),function(a){a.$keyboardNavigation.HeaderCell=function(v){this.index=v||0},a.$keyboardNavigation.HeaderCell.prototype=a._compose(a.$keyboardNavigation.KeyNavNode,{getNode:function(v){v=v||this.index||0;var _=this.getNodes();if(_[v])return _[v]},getNodes:function(v){v=v||[".dhx_cal_navline .dhx_cal_prev_button",".dhx_cal_navline .dhx_cal_next_button",".dhx_cal_navline .dhx_cal_today_button",".dhx_cal_navline .dhx_cal_tab"].join(", ");var _=Array.prototype.slice.call(a.$container.querySelectorAll(v));return _.sort(function(i,o){return i.offsetLeft-o.offsetLeft}),_},_handlers:null,isValid:function(){return!!this.getNode(this.index)},fallback:function(){var v=this.getNode(0);return v||(v=new a.$keyboardNavigation.TimeSlot),v},keys:{left:function(){var v=this.index-1;v<0&&(v=this.getNodes().length-1),this.moveTo(new a.$keyboardNavigation.HeaderCell(v))},right:function(){var v=this.index+1;v>=this.getNodes().length&&(v=0),this.moveTo(new a.$keyboardNavigation.HeaderCell(v))},down:function(){this.moveTo(new a.$keyboardNavigation.TimeSlot)},enter:function(){var v=this.getNode();v&&v.click()}}}),a.$keyboardNavigation.HeaderCell.prototype.bindAll(a.$keyboardNavigation.HeaderCell.prototype.keys)}(t),function(a){a.$keyboardNavigation.Event=function(v){if(this.eventId=null,a.getEvent(v)){var _=a.getEvent(v);this.start=new Date(_.start_date),this.end=new Date(_.end_date),this.section=this._getSection(_),this.eventId=v}},a.$keyboardNavigation.Event.prototype=a._compose(a.$keyboardNavigation.KeyNavNode,{_getNodes:function(){return Array.prototype.slice.call(a.$container.querySelectorAll("["+a.config.event_attribute+"]"))},_modes:a.$keyboardNavigation.SchedulerNode.prototype._modes,getMode:a.$keyboardNavigation.SchedulerNode.prototype.getMode,_handlers:null,isValid:function(){return!(!a.getEvent(this.eventId)||!this.getNode())},fallback:function(){var v=this._getNodes()[0],_=null;if(v&&a._locate_event(v)){var i=a._locate_event(v);_=new a.$keyboardNavigation.Event(i)}else _=new a.$keyboardNavigation.TimeSlot;return _},isScrolledIntoView:function(v){var _=v.getBoundingClientRect(),i=a.$container.querySelector(".dhx_cal_data").getBoundingClientRect();return!(_.bottom<i.top||_.top>i.bottom)},getNode:function(){var v="["+a.config.event_attribute+"='"+this.eventId+"']",_=a.$keyboardNavigation.dispatcher.getInlineEditor(this.eventId);if(_)return _;if(a.isMultisectionEvent&&a.isMultisectionEvent(a.getEvent(this.eventId))){for(var i=a.$container.querySelectorAll(v),o=0;o<i.length;o++)if(this.isScrolledIntoView(i[o]))return i[o];return i[0]}return a.$container.querySelector(v)},focus:function(){var v=a.getEvent(this.eventId),_=a.getState();(v.start_date.valueOf()>_.max_date.valueOf()||v.end_date.valueOf()<=_.min_date.valueOf())&&a.setCurrentView(v.start_date);var i=this.getNode();this.isScrolledIntoView(i)?a.$keyboardNavigation.dispatcher.keepScrollPosition(function(){a.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)}.bind(this)):a.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){a.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},_getSection:function(v){var _=null,i=a.getState().mode;return a.matrix&&a.matrix[i]?_=v[a.matrix[a.getState().mode].y_property]:a._props&&a._props[i]&&(_=v[a._props[i].map_to]),_},_moveToSlot:function(v){var _=a.getEvent(this.eventId);if(_){var i=this._getSection(_),o=new a.$keyboardNavigation.TimeSlot(_.start_date,null,i);this.moveTo(o.nextSlot(o,v))}else this.moveTo(new a.$keyboardNavigation.TimeSlot)},keys:{left:function(){this._moveToSlot("left")},right:function(){this._moveToSlot("right")},down:function(){this.getMode()==this._modes.list?a.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler():this._moveToSlot("down")},space:function(){var v=this.getNode();v&&v.click?v.click():this.moveTo(new a.$keyboardNavigation.TimeSlot)},up:function(){this.getMode()==this._modes.list?a.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler():this._moveToSlot("up")},delete:function(){a.getEvent(this.eventId)?a._click.buttons.delete(this.eventId):this.moveTo(new a.$keyboardNavigation.TimeSlot)},enter:function(){a.getEvent(this.eventId)?a.showLightbox(this.eventId):this.moveTo(new a.$keyboardNavigation.TimeSlot)}}}),a.$keyboardNavigation.Event.prototype.bindAll(a.$keyboardNavigation.Event.prototype.keys)}(t),function(a){a.$keyboardNavigation.TimeSlot=function(v,_,i,o){var c=a.getState(),h=a.matrix&&a.matrix[c.mode];v||(v=this.getDefaultDate()),_||(_=h?a.date.add(v,h.x_step,h.x_unit):a.date.add(v,a.config.key_nav_step,"minute")),this.section=i||this._getDefaultSection(),this.start_date=new Date(v),this.end_date=new Date(_),this.movingDate=o||null},a.$keyboardNavigation.TimeSlot.prototype=a._compose(a.$keyboardNavigation.KeyNavNode,{_handlers:null,getDefaultDate:function(){var v,_=a.getState(),i=new Date(_.date);i.setSeconds(0),i.setMilliseconds(0);var o=new Date;o.setSeconds(0),o.setMilliseconds(0);var c=a.matrix&&a.matrix[_.mode],h=!1;if(i.valueOf()===o.valueOf()&&(h=!0),c)h?("day"===c.x_unit?(o.setHours(0),o.setMinutes(0)):"hour"===c.x_unit&&o.setMinutes(0),v=o):v=a.date[c.name+"_start"](new Date(_.date)),v=this.findVisibleColumn(v);else if(v=new Date(a.getState().min_date),h&&(v=o),v=this.findVisibleColumn(v),h||v.setHours(a.config.first_hour),!a._table_view){var D=a.$container.querySelector(".dhx_cal_data");D.scrollTop&&v.setHours(a.config.first_hour+Math.ceil(D.scrollTop/a.config.hour_size_px))}return v},clone:function(v){return new a.$keyboardNavigation.TimeSlot(v.start_date,v.end_date,v.section,v.movingDate)},_getMultisectionView:function(){var v,_=a.getState();return a._props&&a._props[_.mode]?v=a._props[_.mode]:a.matrix&&a.matrix[_.mode]&&(v=a.matrix[_.mode]),v},_getDefaultSection:function(){var v=null;return this._getMultisectionView()&&!v&&(v=this._getNextSection()),v},_getNextSection:function(v,_){var i=this._getMultisectionView(),o=i.order[v],c=o;(c=void 0!==o?o+_:i.size&&i.position?i.position:0)<0&&(c=0);var h=i.options||i.y_unit;return c>=h.length&&(c=h.length-1),h[c]?h[c].key:null},isValid:function(){var v=a.getState();if(this.start_date.valueOf()<v.min_date.valueOf()||this.start_date.valueOf()>=v.max_date.valueOf()||!this.isVisible(this.start_date,this.end_date))return!1;var _=this._getMultisectionView();return!_||void 0!==_.order[this.section]},fallback:function(){var v=new a.$keyboardNavigation.TimeSlot;return v.isValid()?v:new a.$keyboardNavigation.DataArea},getNodes:function(){return Array.prototype.slice.call(a.$container.querySelectorAll(".dhx_focus_slot"))},getNode:function(){return this.getNodes()[0]},focus:function(){this.section&&a.getView()&&a.getView().smart_rendering&&a.getView().scrollTo&&!a.$container.querySelector('[data-section-id="'.concat(this.section,'"]'))&&a.getView().scrollTo({section:this.section}),a.$keyboardNavigation.marker.render(this.start_date,this.end_date,this.section),a.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this),a.$keyboardNavigation._pasteDate=this.start_date,a.$keyboardNavigation._pasteSection=this.section},blur:function(){a.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this),a.$keyboardNavigation.marker.clear()},_modes:a.$keyboardNavigation.SchedulerNode.prototype._modes,_getMode:a.$keyboardNavigation.SchedulerNode.prototype.getMode,addMonthDate:function(v,_,i){var o;switch(_){case"up":o=a.date.add(v,-1,"week");break;case"down":o=a.date.add(v,1,"week");break;case"left":o=a.date.day_start(a.date.add(v,-1,"day")),o=this.findVisibleColumn(o,-1);break;case"right":o=a.date.day_start(a.date.add(v,1,"day")),o=this.findVisibleColumn(o,1);break;default:o=a.date.day_start(new Date(v))}var c=a.getState();return(v.valueOf()<c.min_date.valueOf()||!i&&v.valueOf()>=c.max_date.valueOf())&&(o=new Date(c.min_date)),o},nextMonthSlot:function(v,_,i){var o,c;return(o=this.addMonthDate(v.start_date,_,i)).setHours(a.config.first_hour),(c=new Date(o)).setHours(a.config.last_hour),{start_date:o,end_date:c}},_alignTimeSlot:function(v,_,i,o){for(var c=new Date(_);c.valueOf()<v.valueOf();)c=a.date.add(c,o,i);return c.valueOf()>v.valueOf()&&(c=a.date.add(c,-o,i)),c},nextTimelineSlot:function(v,_,i){var o=a.getState(),c=a.matrix[o.mode],h=this._alignTimeSlot(v.start_date,a.date[c.name+"_start"](new Date(v.start_date)),c.x_unit,c.x_step),D=this._alignTimeSlot(v.end_date,a.date[c.name+"_start"](new Date(v.end_date)),c.x_unit,c.x_step);D.valueOf()<=h.valueOf()&&(D=a.date.add(h,c.x_step,c.x_unit));var V=this.clone(v);switch(V.start_date=h,V.end_date=D,V.section=v.section||this._getNextSection(),_){case"up":V.section=this._getNextSection(v.section,-1);break;case"down":V.section=this._getNextSection(v.section,1);break;case"left":V.start_date=this.findVisibleColumn(a.date.add(V.start_date,-c.x_step,c.x_unit),-1),V.end_date=a.date.add(V.start_date,c.x_step,c.x_unit);break;case"right":V.start_date=this.findVisibleColumn(a.date.add(V.start_date,c.x_step,c.x_unit),1),V.end_date=a.date.add(V.start_date,c.x_step,c.x_unit)}return(V.start_date.valueOf()<o.min_date.valueOf()||V.start_date.valueOf()>=o.max_date.valueOf())&&(i&&V.start_date.valueOf()>=o.max_date.valueOf()?V.start_date=new Date(o.max_date):(V.start_date=a.date[o.mode+"_start"](a.date.add(o.date,"left"==_?-1:1,o.mode)),V.end_date=a.date.add(V.start_date,c.x_step,c.x_unit))),V},nextUnitsSlot:function(v,_,i){var o=this.clone(v);o.section=v.section||this._getNextSection();var c=v.section||this._getNextSection(),h=a.getState(),D=a._props[h.mode];switch(_){case"left":c=this._getNextSection(v.section,-1),D.days>1&&D.order[c]==(D.size?D.size-1:D.options.length)-1&&a.date.add(v.start_date,-1,"day").valueOf()>=h.min_date.valueOf()&&(o=this.nextDaySlot(v,_,i));break;case"right":c=this._getNextSection(v.section,1),D.days>1&&!D.order[c]&&a.date.add(v.start_date,1,"day").valueOf()<h.max_date.valueOf()&&(o=this.nextDaySlot(v,_,i));break;default:o=this.nextDaySlot(v,_,i),c=v.section}return o.section=c,o},_moveDate:function(v,_){var i=this.findVisibleColumn(a.date.add(v,_,"day"),_);return i.setHours(v.getHours()),i.setMinutes(v.getMinutes()),i},isBeforeLastHour:function(v,_){var i=v.getMinutes(),o=v.getHours(),c=a.config.last_hour;return o<c||!_&&(24==c||o==c)&&!i},isAfterFirstHour:function(v,_){var i=v.getMinutes(),o=v.getHours(),h=a.config.last_hour;return o>=a.config.first_hour||!_&&!i&&(!o&&24==h||o==h)},isInVisibleDayTime:function(v,_){return this.isBeforeLastHour(v,_)&&this.isAfterFirstHour(v,_)},nextDaySlot:function(v,_,i){var o,c,h=a.config.key_nav_step,D=this._alignTimeSlot(v.start_date,a.date.day_start(new Date(v.start_date)),"minute",h),V=v.start_date;switch(_){case"up":if(o=a.date.add(D,-h,"minute"),!this.isInVisibleDayTime(o,!0)&&(!i||this.isInVisibleDayTime(V,!0))){var T=!0;i&&a.date.date_part(new Date(o)).valueOf()!=a.date.date_part(new Date(V)).valueOf()&&(T=!1),T&&(o=this.findVisibleColumn(a.date.add(v.start_date,-1,"day"),-1)),o.setHours(a.config.last_hour),o.setMinutes(0),o=a.date.add(o,-h,"minute")}c=a.date.add(o,h,"minute");break;case"down":o=a.date.add(D,h,"minute");var W=i?o:a.date.add(o,h,"minute");this.isInVisibleDayTime(W,!1)||i&&!this.isInVisibleDayTime(V,!1)||(i?(T=!0,a.date.date_part(new Date(V)).valueOf()==V.valueOf()&&(T=!1),T&&(o=this.findVisibleColumn(a.date.add(v.start_date,1,"day"),1)),o.setHours(a.config.first_hour),o.setMinutes(0),o=a.date.add(o,h,"minute")):((o=this.findVisibleColumn(a.date.add(v.start_date,1,"day"),1)).setHours(a.config.first_hour),o.setMinutes(0))),c=a.date.add(o,h,"minute");break;case"left":o=this._moveDate(v.start_date,-1),c=this._moveDate(v.end_date,-1);break;case"right":o=this._moveDate(v.start_date,1),c=this._moveDate(v.end_date,1);break;default:c=a.date.add(o=D,h,"minute")}return{start_date:o,end_date:c}},nextWeekAgendaSlot:function(v,_){var i,o,c=a.getState();switch(_){case"down":case"left":i=a.date.day_start(a.date.add(v.start_date,-1,"day")),i=this.findVisibleColumn(i,-1);break;case"up":case"right":i=a.date.day_start(a.date.add(v.start_date,1,"day")),i=this.findVisibleColumn(i,1);break;default:i=a.date.day_start(v.start_date)}return(v.start_date.valueOf()<c.min_date.valueOf()||v.start_date.valueOf()>=c.max_date.valueOf())&&(i=new Date(c.min_date)),(o=new Date(i)).setHours(a.config.last_hour),{start_date:i,end_date:o}},nextAgendaSlot:function(v,_){return{start_date:v.start_date,end_date:v.end_date}},isDateVisible:function(v){if(!a._ignores_detected)return!0;var _,i=a.matrix&&a.matrix[a.getState().mode];return _=i?a._get_date_index(i,v):a.locate_holder_day(v),!a._ignores[_]},findVisibleColumn:function(v,_){var i=v;_=_||1;for(var o=a.getState();!this.isDateVisible(i)&&(_>0&&i.valueOf()<=o.max_date.valueOf()||_<0&&i.valueOf()>=o.min_date.valueOf());)i=this.nextDateColumn(i,_);return i},nextDateColumn:function(v,_){_=_||1;var i=a.matrix&&a.matrix[a.getState().mode];return i?a.date.add(v,_*i.x_step,i.x_unit):a.date.day_start(a.date.add(v,_,"day"))},isVisible:function(v,_){if(!a._ignores_detected)return!0;for(var i=new Date(v);i.valueOf()<_.valueOf();){if(this.isDateVisible(i))return!0;i=this.nextDateColumn(i)}return!1},nextSlot:function(v,_,i,o){var c;i=i||this._getMode();var h=a.$keyboardNavigation.TimeSlot.prototype.clone(v);switch(i){case this._modes.units:c=this.nextUnitsSlot(h,_,o);break;case this._modes.timeline:c=this.nextTimelineSlot(h,_,o);break;case this._modes.year:case this._modes.month:c=this.nextMonthSlot(h,_,o);break;case this._modes.weekAgenda:c=this.nextWeekAgendaSlot(h,_,o);break;case this._modes.list:c=this.nextAgendaSlot(h,_,o);break;case this._modes.dayColumns:c=this.nextDaySlot(h,_,o)}return c.start_date.valueOf()>=c.end_date.valueOf()&&(c=this.nextSlot(c,_,i)),a.$keyboardNavigation.TimeSlot.prototype.clone(c)},extendSlot:function(v,_){var i;switch(this._getMode()){case this._modes.units:i="left"==_||"right"==_?this.nextUnitsSlot(v,_):this.extendUnitsSlot(v,_);break;case this._modes.timeline:i="down"==_||"up"==_?this.nextTimelineSlot(v,_):this.extendTimelineSlot(v,_);break;case this._modes.year:case this._modes.month:i=this.extendMonthSlot(v,_);break;case this._modes.dayColumns:i=this.extendDaySlot(v,_);break;case this._modes.weekAgenda:i=this.extendWeekAgendaSlot(v,_);break;default:i=v}var o=a.getState();return i.start_date.valueOf()<o.min_date.valueOf()&&(i.start_date=this.findVisibleColumn(o.min_date),i.start_date.setHours(a.config.first_hour)),i.end_date.valueOf()>o.max_date.valueOf()&&(i.end_date=this.findVisibleColumn(o.max_date,-1)),a.$keyboardNavigation.TimeSlot.prototype.clone(i)},extendTimelineSlot:function(v,_){return this.extendGenericSlot({left:"start_date",right:"end_date"},v,_,"timeline")},extendWeekAgendaSlot:function(v,_){return this.extendGenericSlot({left:"start_date",right:"end_date"},v,_,"weekAgenda")},extendGenericSlot:function(v,_,i,o){var c,h=_.movingDate;if(h||(h=v[i]),!h||!v[i])return _;if(!i)return a.$keyboardNavigation.TimeSlot.prototype.clone(_);(c=this.nextSlot({start_date:_[h],section:_.section},i,o,!0)).start_date.valueOf()==_.start_date.valueOf()&&(c=this.nextSlot({start_date:c.start_date,section:c.section},i,o,!0)),c.movingDate=h;var D=this.extendSlotDates(_,c,c.movingDate);return D.end_date.valueOf()<=D.start_date.valueOf()&&(c.movingDate="end_date"==c.movingDate?"start_date":"end_date"),D=this.extendSlotDates(_,c,c.movingDate),c.start_date=D.start_date,c.end_date=D.end_date,c},extendSlotDates:function(v,_,i){var o={start_date:null,end_date:null};return"start_date"==i?(o.start_date=_.start_date,o.end_date=v.end_date):(o.start_date=v.start_date,o.end_date=_.start_date),o},extendMonthSlot:function(v,_){return(v=this.extendGenericSlot({up:"start_date",down:"end_date",left:"start_date",right:"end_date"},v,_,"month")).start_date.setHours(a.config.first_hour),v.end_date=a.date.add(v.end_date,-1,"day"),v.end_date.setHours(a.config.last_hour),v},extendUnitsSlot:function(v,_){var i;switch(_){case"down":case"up":i=this.extendDaySlot(v,_);break;default:i=v}return i.section=v.section,i},extendDaySlot:function(v,_){return this.extendGenericSlot({up:"start_date",down:"end_date",left:"start_date",right:"end_date"},v,_,"dayColumns")},scrollSlot:function(v){var _=a.getState(),i=this.nextSlot(this,v);(i.start_date.valueOf()<_.min_date.valueOf()||i.start_date.valueOf()>=_.max_date.valueOf())&&a.setCurrentView(new Date(i.start_date)),this.moveTo(i)},keys:{left:function(){this.scrollSlot("left")},right:function(){this.scrollSlot("right")},down:function(){this._getMode()==this._modes.list?a.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler():this.scrollSlot("down")},up:function(){this._getMode()==this._modes.list?a.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler():this.scrollSlot("up")},"shift+down":function(){this.moveTo(this.extendSlot(this,"down"))},"shift+up":function(){this.moveTo(this.extendSlot(this,"up"))},"shift+right":function(){this.moveTo(this.extendSlot(this,"right"))},"shift+left":function(){this.moveTo(this.extendSlot(this,"left"))},enter:function(){var v={start_date:new Date(this.start_date),end_date:new Date(this.end_date)},_=a.getState().mode;a.matrix&&a.matrix[_]?v[a.matrix[a.getState().mode].y_property]=this.section:a._props&&a._props[_]&&(v[a._props[_].map_to]=this.section),a.addEventNow(v)}}}),a.$keyboardNavigation.TimeSlot.prototype.bindAll(a.$keyboardNavigation.TimeSlot.prototype.keys)}(t),function(a){a.$keyboardNavigation.MinicalButton=function(v,_){this.container=v,this.index=_||0},a.$keyboardNavigation.MinicalButton.prototype=a._compose(a.$keyboardNavigation.KeyNavNode,{isValid:function(){return!!this.container.offsetWidth},fallback:function(){var v=new a.$keyboardNavigation.TimeSlot;return v.isValid()?v:new a.$keyboardNavigation.DataArea},focus:function(){a.$keyboardNavigation.dispatcher.globalNode.disable(),this.container.removeAttribute("tabindex"),a.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){this.container.setAttribute("tabindex","0"),a.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},getNode:function(){return this.container.querySelector(this.index?".dhx_cal_next_button":".dhx_cal_prev_button")},keys:{right:function(v){this.moveTo(new a.$keyboardNavigation.MinicalButton(this.container,this.index?0:1))},left:function(v){this.moveTo(new a.$keyboardNavigation.MinicalButton(this.container,this.index?0:1))},down:function(){var v=new a.$keyboardNavigation.MinicalCell(this.container,0,0);v&&!v.isValid()&&(v=v.fallback()),this.moveTo(v)},enter:function(v){this.getNode().click()}}}),a.$keyboardNavigation.MinicalButton.prototype.bindAll(a.$keyboardNavigation.MinicalButton.prototype.keys)}(t),function(a){a.$keyboardNavigation.MinicalCell=function(v,_,i){this.container=v,this.row=_||0,this.col=i||0},a.$keyboardNavigation.MinicalCell.prototype=a._compose(a.$keyboardNavigation.KeyNavNode,{isValid:function(){var v=this._getGrid();return!(!v[this.row]||!v[this.row][this.col])},fallback:function(){var v=this.row,_=this.col,i=this._getGrid();i[v]||(v=0);var o=!0;if(v>i.length/2&&(o=!1),!i[v]){var c=new a.$keyboardNavigation.TimeSlot;return c.isValid()?c:new a.$keyboardNavigation.DataArea}if(o){for(var h=_;i[v]&&h<i[v].length;h++)if(i[v][h]||h!=i[v].length-1||(v++,_=0),i[v][h])return new a.$keyboardNavigation.MinicalCell(this.container,v,h)}else for(h=_;i[v]&&h<i[v].length;h--)if(i[v][h]||h||(_=i[--v].length-1),i[v][h])return new a.$keyboardNavigation.MinicalCell(this.container,v,h);return new a.$keyboardNavigation.MinicalButton(this.container,0)},focus:function(){a.$keyboardNavigation.dispatcher.globalNode.disable(),this.container.removeAttribute("tabindex"),a.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){this.container.setAttribute("tabindex","0"),a.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},_getNode:function(v,_){return this.container.querySelector(".dhx_year_body tr:nth-child("+(v+1)+") td:nth-child("+(_+1)+")")},getNode:function(){return this._getNode(this.row,this.col)},_getGrid:function(){for(var v=this.container.querySelectorAll(".dhx_year_body tr"),_=[],i=0;i<v.length;i++){_[i]=[];for(var o=v[i].querySelectorAll("td"),c=0;c<o.length;c++){var D=!0,V=a._getClassName(o[c]);(V.indexOf("dhx_after")>-1||V.indexOf("dhx_before")>-1||V.indexOf("dhx_scale_ignore")>-1)&&(D=!1),_[i][c]=D}}return _},keys:{right:function(v){var _=this._getGrid(),i=this.row,o=this.col+1;_[i]&&_[i][o]||(_[i+1]?(i+=1,o=0):o=this.col);var c=new a.$keyboardNavigation.MinicalCell(this.container,i,o);c.isValid()||(c=c.fallback()),this.moveTo(c)},left:function(v){var _=this._getGrid(),i=this.row,o=this.col-1;_[i]&&_[i][o]||(o=_[i-1]?_[i-=1].length-1:this.col);var c=new a.$keyboardNavigation.MinicalCell(this.container,i,o);c.isValid()||(c=c.fallback()),this.moveTo(c)},down:function(){var v=this._getGrid(),_=this.row+1,i=this.col;v[_]&&v[_][i]||(_=this.row);var o=new a.$keyboardNavigation.MinicalCell(this.container,_,i);o.isValid()||(o=o.fallback()),this.moveTo(o)},up:function(){var v=this._getGrid(),_=this.row-1,i=this.col;if(v[_]&&v[_][i]){var o=new a.$keyboardNavigation.MinicalCell(this.container,_,i);o.isValid()||(o=o.fallback()),this.moveTo(o)}else{var c=0;this.col>v[this.row].length/2&&(c=1),this.moveTo(new a.$keyboardNavigation.MinicalButton(this.container,c))}},enter:function(v){this.getNode().querySelector(".dhx_month_head").click()}}}),a.$keyboardNavigation.MinicalCell.prototype.bindAll(a.$keyboardNavigation.MinicalCell.prototype.keys)}(t),function(a){a.$keyboardNavigation.DataArea=function(v){this.index=v||0},a.$keyboardNavigation.DataArea.prototype=a._compose(a.$keyboardNavigation.KeyNavNode,{getNode:function(v){return a.$container.querySelector(".dhx_cal_data")},_handlers:null,isValid:function(){return!0},fallback:function(){return this},keys:{"up,down,right,left":function(){this.moveTo(new a.$keyboardNavigation.TimeSlot)}}}),a.$keyboardNavigation.DataArea.prototype.bindAll(a.$keyboardNavigation.DataArea.prototype.keys)}(t),function(t){!function(){var j=[];function a(){return!!j.length}function v(h){setTimeout(function(){a()||function(D,V){for(;D&&D!=V;)D=D.parentNode;return D==V}(document.activeElement,t.$container)||t.focus()},1)}function _(h){var D=(h=h||window.event).currentTarget;D==j[j.length-1]&&t.$keyboardNavigation.trapFocus(D,h)}if(t.attachEvent("onLightbox",function(){var h;h=t.getLightbox(),t.eventRemove(h,"keydown",_),t.event(h,"keydown",_),j.push(h)}),t.attachEvent("onAfterLightbox",function(){var h=j.pop();h&&t.eventRemove(h,"keydown",_),v()}),t.attachEvent("onAfterQuickInfo",function(){v()}),!t._keyNavMessagePopup){t._keyNavMessagePopup=!0;var i=null,o=null,c=[];t.attachEvent("onMessagePopup",function(h){for(i=document.activeElement,o=i;o&&t._getClassName(o).indexOf("dhx_cal_data")<0;)o=o.parentNode;o&&(o=o.parentNode),t.eventRemove(h,"keydown",_),t.event(h,"keydown",_),c.push(h)}),t.attachEvent("onAfterMessagePopup",function(){var h=c.pop();h&&t.eventRemove(h,"keydown",_),setTimeout(function(){for(var D=document.activeElement;D&&t._getClassName(D).indexOf("dhx_cal_light")<0;)D=D.parentNode;D||(i&&i.parentNode?i.focus():o&&o.parentNode&&o.focus(),i=null,o=null)},1)})}t.$keyboardNavigation.isModal=a}()}(t),function(a){a.$keyboardNavigation.dispatcher={isActive:!1,activeNode:null,globalNode:new a.$keyboardNavigation.SchedulerNode,keepScrollPosition:function(v){var _,i,o=a.$container.querySelector(".dhx_timeline_scrollable_data");o||(o=a.$container.querySelector(".dhx_cal_data")),o&&(_=o.scrollTop,i=o.scrollLeft),v(),o&&(o.scrollTop=_,o.scrollLeft=i)},enable:function(){if(a.$container){this.isActive=!0;var v=this;this.keepScrollPosition(function(){v.globalNode.enable(),v.setActiveNode(v.getActiveNode())})}},disable:function(){this.isActive=!1,this.globalNode.disable()},isEnabled:function(){return!!this.isActive},getDefaultNode:function(){return this.globalNode.getDefaultNode()},setDefaultNode:function(){this.setActiveNode(this.getDefaultNode())},getActiveNode:function(){var v=this.activeNode;return v&&!v.isValid()&&(v=v.fallback()),v},focusGlobalNode:function(){this.blurNode(this.globalNode),this.focusNode(this.globalNode)},setActiveNode:function(v){v&&v.isValid()&&(this.activeNode&&this.activeNode.compareTo(v)||this.isEnabled()&&(this.blurNode(this.activeNode),this.activeNode=v,this.focusNode(this.activeNode)))},focusNode:function(v){v&&v.focus&&(v.focus(),v.getNode&&document.activeElement!=v.getNode()&&this.setActiveNode(new a.$keyboardNavigation.DataArea))},blurNode:function(v){v&&v.blur&&v.blur()},getInlineEditor:function(v){var _=a.$container.querySelector(".dhx_cal_editor["+a.config.event_attribute+"='"+v+"'] textarea");return _&&_.offsetWidth?_:null},keyDownHandler:function(v){if(!v.defaultPrevented){var _=this.getActiveNode();if((!a.$keyboardNavigation.isModal()||_&&_.container&&a.utils.dom.locateCss({target:_.container},"dhx_minical_popup",!1))&&(!a.getState().editor_id||!this.getInlineEditor(a.getState().editor_id))&&this.isEnabled()){v=v||window.event;var i=this.globalNode,o=a.$keyboardNavigation.shortcuts.getCommandFromEvent(v);_?_.findHandler(o)?_.doAction(o,v):i.findHandler(o)&&i.doAction(o,v):this.setDefaultNode()}}},_timeout:null,delay:function(v,_){clearTimeout(this._timeout),this._timeout=setTimeout(v,_||1)}}}(t),function(t){t._temp_key_scope=function(){t.config.key_nav=!0,t.$keyboardNavigation._pasteDate=null,t.$keyboardNavigation._pasteSection=null;var j=null,a={};function v(o){o=o||window.event,a.x=o.clientX,a.y=o.clientY}function _(){for(var o,c,h=document.elementFromPoint(a.x,a.y);h&&h!=t._obj;)h=h.parentNode;return o=h==t._obj,c=t.$keyboardNavigation.dispatcher.isEnabled(),o||c}function i(o){return t._lame_copy({},o)}document.body?t.event(document.body,"mousemove",v):t.event(window,"load",function(){t.event(document.body,"mousemove",v)}),t.attachEvent("onMouseMove",function(o,c){var h=t.getState();if(h.mode&&h.min_date){var D=t.getActionData(c);t.$keyboardNavigation._pasteDate=D.date,t.$keyboardNavigation._pasteSection=D.section}}),t._make_pasted_event=function(o){var W,c=t.$keyboardNavigation._pasteDate,h=t.$keyboardNavigation._pasteSection,D=o.end_date-o.start_date,V=i(o);if(delete(W=V).rec_type,delete W.rec_pattern,delete W.event_pid,delete W.event_length,V.start_date=new Date(c),V.end_date=new Date(V.start_date.valueOf()+D),h){var T=t._get_section_property();V[T]=t.config.multisection?o[T]:h}return V},t._do_paste=function(o,c,h){!1!==t.callEvent("onBeforeEventPasted",[o,c,h])&&(t.addEvent(c),t.callEvent("onEventPasted",[o,c,h]))},t._is_key_nav_active=function(){return!(!this._is_initialized()||this._is_lightbox_open()||!this.config.key_nav)},t.event(document,"keydown",function(o){(o.ctrlKey||o.metaKey)&&86==o.keyCode&&t._buffer_event&&!t.$keyboardNavigation.dispatcher.isEnabled()&&(t.$keyboardNavigation.dispatcher.isActive=_())}),t._key_nav_copy_paste=function(o){if(!t._is_key_nav_active())return!0;if(37==o.keyCode||39==o.keyCode){o.cancelBubble=!0;var c=t.date.add(t._date,37==o.keyCode?-1:1,t._mode);return t.setCurrentView(c),!0}var T,h=(T=t.$keyboardNavigation.dispatcher.getActiveNode())&&T.eventId?T.eventId:t._select_id;if((o.ctrlKey||o.metaKey)&&67==o.keyCode)return h&&(t._buffer_event=i(t.getEvent(h)),j=!0,t.callEvent("onEventCopied",[t.getEvent(h)])),!0;if((o.ctrlKey||o.metaKey)&&88==o.keyCode&&h){j=!1;var D=t._buffer_event=i(t.getEvent(h));t.updateEvent(D.id),t.callEvent("onEventCut",[D])}if((o.ctrlKey||o.metaKey)&&86==o.keyCode&&_()){if(D=(D=t._buffer_event?t.getEvent(t._buffer_event.id):t._buffer_event)||t._buffer_event){var V=t._make_pasted_event(D);j?(V.id=t.uid(),t._do_paste(j,V,D)):t.callEvent("onBeforeEventChanged",[V,o,!1,D])&&(t._do_paste(j,V,D),j=!0)}return!0}}},t._temp_key_scope()}(t),function(){var o;(function(t){t.$keyboardNavigation.attachSchedulerHandlers=function(){var j,a=t.$keyboardNavigation.dispatcher,v=function(h){if(t.config.key_nav)return a.keyDownHandler(h)},_=function(){a.keepScrollPosition(function(){a.focusGlobalNode()})};t.attachEvent("onDataRender",function(){t.config.key_nav&&a.isEnabled()&&!t.getState().editor_id&&(clearTimeout(j),j=setTimeout(function(){a.isEnabled()||a.enable(),i()}))});var i=function(){if(a.isEnabled()){var h=a.getActiveNode();h&&(h.isValid()||(h=h.fallback()),!h||h instanceof t.$keyboardNavigation.MinicalButton||h instanceof t.$keyboardNavigation.MinicalCell||a.keepScrollPosition(function(){h.focus(!0)}))}};function o(h){if(!t.config.key_nav)return!0;var D,V=t.$keyboardNavigation.isChildOf(h.target||h.srcElement,t.$container.querySelector(".dhx_cal_data")),T=t.getActionData(h);t._locate_event(h.target||h.srcElement)?D=new t.$keyboardNavigation.Event(t._locate_event(h.target||h.srcElement)):V&&(D=new t.$keyboardNavigation.TimeSlot,T.date&&V&&(D=D.nextSlot(new t.$keyboardNavigation.TimeSlot(T.date,null,T.section)))),D&&(a.isEnabled()?T.date&&V&&a.delay(function(){a.setActiveNode(D)}):a.activeNode=D)}t.attachEvent("onSchedulerReady",function(){var h=t.$container;t.eventRemove(document,"keydown",v),t.eventRemove(h,"mousedown",o),t.eventRemove(h,"focus",_),t.config.key_nav?(t.event(document,"keydown",v),t.event(h,"mousedown",o),t.event(h,"focus",_),h.setAttribute("tabindex","0")):h.removeAttribute("tabindex")});var c=t.updateEvent;t.updateEvent=function(h){var D=c.apply(this,arguments);if(t.config.key_nav&&a.isEnabled()&&t.getState().select_id==h){var V=new t.$keyboardNavigation.Event(h);t.getState().lightbox_id||function(T){if(t.config.key_nav&&a.isEnabled()){var W=T,z=new t.$keyboardNavigation.Event(W.eventId);z.isValid()||(z=new t.$keyboardNavigation.TimeSlot(z.start||W.start,z.end||W.end,z.section||W.section)).isValid()||(z=new t.$keyboardNavigation.TimeSlot),a.setActiveNode(z);var _e=a.getActiveNode();_e&&_e.getNode&&document.activeElement!=_e.getNode()&&a.focusNode(a.getActiveNode())}}(V)}return D},t.attachEvent("onEventDeleted",function(h){return t.config.key_nav&&a.isEnabled()&&a.getActiveNode().eventId==h&&a.setActiveNode(new t.$keyboardNavigation.TimeSlot),!0}),t.attachEvent("onClearAll",function(){if(!t.config.key_nav)return!0;a.isEnabled()&&a.getActiveNode()instanceof t.$keyboardNavigation.Event&&a.setActiveNode(new t.$keyboardNavigation.TimeSlot)})}})(t),(o=t).$keyboardNavigation._minicalendars=[],o.$keyboardNavigation.isMinical=function(c){for(var h=o.$keyboardNavigation._minicalendars,D=0;D<h.length;D++)if(this.isChildOf(c,h[D]))return!0;return!1},o.$keyboardNavigation.isChildOf=function(c,h){for(;c&&c!==h;)c=c.parentNode;return c===h},o.$keyboardNavigation.patchMinicalendar=function(){var c=o.$keyboardNavigation.dispatcher;function h(W){var z=W.target;c.enable(),c.setActiveNode(new o.$keyboardNavigation.MinicalButton(z,0))}function D(W){var z=W.target||W.srcElement,Z=o.utils.dom.locateCss(W,"dhx_cal_prev_button",!1),re=o.utils.dom.locateCss(W,"dhx_cal_next_button",!1),oe=o.utils.dom.locateCss(W,"dhx_year_body",!1),_e=0,he=0;if(oe){for(var be,Ae,He=z;He&&"td"!=He.tagName.toLowerCase();)He=He.parentNode;if(He&&(be=(Ae=He).parentNode),be&&Ae){for(var Ne=be.parentNode.querySelectorAll("tr"),Ve=0;Ve<Ne.length;Ve++)if(Ne[Ve]==be){_e=Ve;break}var Se=be.querySelectorAll("td");for(Ve=0;Ve<Se.length;Ve++)if(Se[Ve]==Ae){he=Ve;break}}}var Fe=W.currentTarget;c.delay(function(){var Oe;(Z||re||oe)&&(Z?(Oe=new o.$keyboardNavigation.MinicalButton(Fe,0),c.setActiveNode(new o.$keyboardNavigation.MinicalButton(Fe,0))):re?Oe=new o.$keyboardNavigation.MinicalButton(Fe,1):oe&&(Oe=new o.$keyboardNavigation.MinicalCell(Fe,_e,he)),Oe&&(c.enable(),Oe.isValid()&&(c.activeNode=null,c.setActiveNode(Oe))))})}if(o.renderCalendar){var V=o.renderCalendar;o.renderCalendar=function(){var W=V.apply(this,arguments),z=o.$keyboardNavigation._minicalendars;o.eventRemove(W,"click",D),o.event(W,"click",D),o.eventRemove(W,"focus",h),o.event(W,"focus",h);for(var Z=!1,re=0;re<z.length;re++)if(z[re]==W){Z=!0;break}if(Z||z.push(W),c.isEnabled()){var oe=c.getActiveNode();oe&&oe.container==W?c.focusNode(oe):W.setAttribute("tabindex","0")}else W.setAttribute("tabindex","0");return W}}if(o.destroyCalendar){var T=o.destroyCalendar;o.destroyCalendar=function(W,z){W=W||(o._def_count?o._def_count.firstChild:null);var Z=T.apply(this,arguments);if(!W||!W.parentNode)for(var re=o.$keyboardNavigation._minicalendars,oe=0;oe<re.length;oe++)re[oe]==W&&(o.eventRemove(re[oe],"focus",h),re.splice(oe,1),oe--);return Z}}};var a=t.$keyboardNavigation.dispatcher;if(t.$keyboardNavigation.attachSchedulerHandlers(),t.renderCalendar)t.$keyboardNavigation.patchMinicalendar();else var v=t.attachEvent("onSchedulerReady",function(){t.detachEvent(v),t.$keyboardNavigation.patchMinicalendar()});function _(){if(t.config.key_nav){var o=document.activeElement;return!(!o||t.utils.dom.locateCss(o,"dhx_cal_quick_info",!1))&&(t.$keyboardNavigation.isChildOf(o,t.$container)||t.$keyboardNavigation.isMinical(o))}}function i(o){o&&!a.isEnabled()?a.enable():!o&&a.isEnabled()&&a.disable()}setInterval(function(){if(t.$container&&t.$keyboardNavigation.isChildOf(t.$container,document.body)){var o=_();o?i(o):!o&&a.isEnabled()&&setTimeout(function(){t.config.key_nav?i(_()):t.$container.removeAttribute("tabindex")},100)}},500)}()},layer:function(t){t.attachEvent("onTemplatesReady",function(){this.layers.sort(function(a,v){return a.zIndex-v.zIndex}),t._dp_init=function(a){a._methods=["_set_event_text_style","","changeEventId","deleteEvent"],this.attachEvent("onEventAdded",function(v){!this._loading&&this.validId(v)&&this.getEvent(v)&&this.getEvent(v).layer==a.layer&&a.setUpdated(v,!0,"inserted")}),this.attachEvent("onBeforeEventDelete",function(v){if(this.getEvent(v)&&this.getEvent(v).layer==a.layer){if(!this.validId(v))return;var _=a.getState(v);return"inserted"==_||this._new_event?(a.setUpdated(v,!1),!0):"deleted"!=_&&("true_deleted"==_||(a.setUpdated(v,!0,"deleted"),!1))}return!0}),this.attachEvent("onEventChanged",function(v){!this._loading&&this.validId(v)&&this.getEvent(v)&&this.getEvent(v).layer==a.layer&&a.setUpdated(v,!0,"updated")}),a._getRowData=function(v,_){var i=this.obj.getEvent(v),o={};for(var c in i)0!==c.indexOf("_")&&(o[c]=i[c]&&i[c].getUTCFullYear?this.obj._helpers.formatDate(i[c]):i[c]);return o},a._clearUpdateFlag=function(){},a.attachEvent("insertCallback",t._update_callback),a.attachEvent("updateCallback",t._update_callback),a.attachEvent("deleteCallback",function(v,_){this.obj.setUserData(_,this.action_param,"true_deleted"),this.obj.deleteEvent(_)})},function(){var a=function i(o){if(null===o||"object"!=_t(o))return o;var c=new o.constructor;for(var h in o)c[h]=i(o[h]);return c};t._dataprocessors=[],t._layers_zindex={};for(var v=0;v<t.layers.length;v++){if(t.config["lightbox_"+t.layers[v].name]={},t.config["lightbox_"+t.layers[v].name].sections=a(t.config.lightbox.sections),t._layers_zindex[t.layers[v].name]=t.config.initial_layer_zindex||5+3*v,t.layers[v].url){var _=t.createDataProcessor({url:t.layers[v].url});_.layer=t.layers[v].name,t._dataprocessors.push(_),t._dataprocessors[v].init(t)}t.layers[v].isDefault&&(t.defaultLayer=t.layers[v].name)}}(),t.showLayer=function(a){this.toggleLayer(a,!0)},t.hideLayer=function(a){this.toggleLayer(a,!1)},t.toggleLayer=function(a,v){var _=this.getLayer(a);_.visible=void 0!==v?!!v:!_.visible,this.setCurrentView(this._date,this._mode)},t.getLayer=function(a){var v,_;"string"==typeof a&&(_=a),"object"==_t(a)&&(_=a.layer);for(var i=0;i<t.layers.length;i++)t.layers[i].name==_&&(v=t.layers[i]);return v},t.attachEvent("onBeforeLightbox",function(a){var v=this.getEvent(a);return this.config.lightbox.sections=this.config["lightbox_"+v.layer].sections,t.resetLightbox(),!0}),t.attachEvent("onClick",function(a,v){var _=t.getEvent(a);return!t.getLayer(_.layer).noMenu}),t.attachEvent("onEventCollision",function(a,v){var _=this.getLayer(a);if(!_.checkCollision)return!1;for(var i=0,o=0;o<v.length;o++)v[o].layer==_.name&&v[o].id!=a.id&&i++;return i>=t.config.collision_limit}),t.addEvent=function(a,v,_,i,o){var c=a;1!=arguments.length&&((c=o||{}).start_date=a,c.end_date=v,c.text=_,c.id=i,c.layer=this.defaultLayer),c.id=c.id||t.uid(),c.text=c.text||"","string"==typeof c.start_date&&(c.start_date=this.templates.api_date(c.start_date)),"string"==typeof c.end_date&&(c.end_date=this.templates.api_date(c.end_date)),c._timed=this.isOneDayEvent(c);var h=!this._events[c.id];this._events[c.id]=c,this.event_updated(c),this._loading||this.callEvent(h?"onEventAdded":"onEventChanged",[c.id,c])},this._evs_layer={};for(var j=0;j<this.layers.length;j++)this._evs_layer[this.layers[j].name]=[];t.addEventNow=function(a,v,_){var i={};"object"==_t(a)&&(i=a,a=null);var o=6e4*(this.config.event_duration||this.config.time_step);a||(a=Math.round(t._currentDate().valueOf()/o)*o);var c=new Date(a);if(!v){var h=this.config.first_hour;h>c.getHours()&&(c.setHours(h),a=c.valueOf()),v=a+o}i.start_date=i.start_date||c,i.end_date=i.end_date||new Date(v),i.text=i.text||this.locale.labels.new_event,i.id=this._drag_id=this.uid(),i.layer=this.defaultLayer,this._drag_mode="new-size",this._loading=!0,this.addEvent(i),this.callEvent("onEventCreated",[this._drag_id,_]),this._loading=!1,this._drag_event={},this._on_mouse_up(_)},t._t_render_view_data=function(a){if(this.config.multi_day&&!this._table_view){for(var v=[],_=[],i=0;i<a.length;i++)a[i]._timed?v.push(a[i]):_.push(a[i]);this._table_view=!0,this.render_data(_),this._table_view=!1,this.render_data(v)}else this.render_data(a)},t.render_view_data=function(){if(this._not_render)this._render_wait=!0;else{this._render_wait=!1,this.clear_view(),this._evs_layer={};for(var a=0;a<this.layers.length;a++)this._evs_layer[this.layers[a].name]=[];var v=this.get_visible_events();for(a=0;a<v.length;a++)this._evs_layer[v[a].layer]&&this._evs_layer[v[a].layer].push(v[a]);if("month"==this._mode){var _=[];for(a=0;a<this.layers.length;a++)this.layers[a].visible&&(_=_.concat(this._evs_layer[this.layers[a].name]));this._t_render_view_data(_)}else for(a=0;a<this.layers.length;a++)this.layers[a].visible&&this._t_render_view_data(this._evs_layer[this.layers[a].name])}},t._render_v_bar=function(a,v,_,i,o,c,h,D,V){var T=a.id;-1==h.indexOf("<div class=")&&(h=t.templates["event_header_"+a.layer]?t.templates["event_header_"+a.layer](a.start_date,a.end_date,a):h),-1==D.indexOf("<div class=")&&(D=t.templates["event_text_"+a.layer]?t.templates["event_text_"+a.layer](a.start_date,a.end_date,a):D);var W=document.createElement("div"),z="dhx_cal_event",Z=t.templates["event_class_"+a.layer]?t.templates["event_class_"+a.layer](a.start_date,a.end_date,a):t.templates.event_class(a.start_date,a.end_date,a);Z&&(z=z+" "+Z);var re=t._border_box_events(),oe=i-2,Ne='<div event_id="'+T+'" '+t.config.event_attribute+'="'+T+'" class="'+z+'" style="position:absolute; top:'+_+"px; left:"+v+"px; width:"+(re?oe:i-4)+"px; height:"+o+"px;"+(c||"")+'">';return Ne+='<div class="dhx_header" style=" width:'+(re?oe:i-6)+'px;" >&nbsp;</div>',Ne+='<div class="dhx_title">'+h+"</div>",Ne+='<div class="dhx_body" style=" width:'+(re?oe:i-(this._quirks?4:14))+"px; height:"+(re?o-this.xy.event_header_height:o-(this._quirks?20:30)+1)+'px;">'+D+"</div>",W.innerHTML=Ne+='<div class="dhx_footer" style=" width:'+(re?oe-2:i-8)+"px;"+(V?" margin-top:-1px;":"")+'" ></div></div>',W.style.zIndex=100,W.firstChild},t.render_event_bar=function(a){var v=this._els.dhx_cal_data[0],_=this._colsS[a._sday],i=this._colsS[a._eday];i==_&&(i=this._colsS[a._eday+1]);var c=this._colsS.heights[a._sweek]+(this._colsS.height?this.xy.month_scale_height+2:2)+a._sorder*this.xy.bar_height,h=document.createElement("div"),D=a._timed?"dhx_cal_event_clear":"dhx_cal_event_line",V=t.templates["event_class_"+a.layer]?t.templates["event_class_"+a.layer](a.start_date,a.end_date,a):t.templates.event_class(a.start_date,a.end_date,a);V&&(D=D+" "+V);var T='<div event_id="'+a.id+'" '+this.config.event_attribute+'="'+a.id+'" class="'+D+'" style="position:absolute; top:'+c+"px; left:"+_+"px; width:"+(i-_-15)+"px;"+(a._text_style||"")+'">';a._timed&&(T+=t.templates["event_bar_date_"+a.layer]?t.templates["event_bar_date_"+a.layer](a.start_date,a.end_date,a):t.templates.event_bar_date(a.start_date,a.end_date,a)),T+=t.templates["event_bar_text_"+a.layer]?t.templates["event_bar_text_"+a.layer](a.start_date,a.end_date,a):t.templates.event_bar_text(a.start_date,a.end_date,a)+"</div>)",h.innerHTML=T+="</div>",this._rendered.push(h.firstChild),v.appendChild(h.firstChild)},t.render_event=function(a){var v=t.xy.menu_width;if(t.getLayer(a.layer).noMenu&&(v=0),!(a._sday<0)){var _=t.locate_holder(a._sday);if(_){var i=60*a.start_date.getHours()+a.start_date.getMinutes(),o=60*a.end_date.getHours()+a.end_date.getMinutes()||60*t.config.last_hour,c=Math.round((60*i*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)+1,h=Math.max(t.xy.min_event_height,(o-i)*this.config.hour_size_px/60)+1,D=Math.floor((_.clientWidth-v)/a._count),V=a._sorder*D+1;a._inner||(D*=a._count-a._sorder);var T=this._render_v_bar(a.id,v+V,c,D,h,a._text_style,t.templates.event_header(a.start_date,a.end_date,a),t.templates.event_text(a.start_date,a.end_date,a));if(this._rendered.push(T),_.appendChild(T),V=V+parseInt(_.style.left,10)+v,c+=this._dy_shift,T.style.zIndex=this._layers_zindex[a.layer],this._edit_id==a.id){T.style.zIndex=parseInt(T.style.zIndex)+1;var W=T.style.zIndex;D=Math.max(D-4,t.xy.editor_width),(T=document.createElement("div")).setAttribute("event_id",a.id),T.setAttribute(this.config.event_attribute,a.id),this.set_xy(T,D,h-20,V,c+14),T.className="dhx_cal_editor",T.style.zIndex=W;var z=document.createElement("div");this.set_xy(z,D-6,h-26),z.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;",z.style.zIndex=W,T.appendChild(z),this._els.dhx_cal_data[0].appendChild(T),this._rendered.push(T),z.innerHTML="<textarea class='dhx_cal_editor'>"+a.text+"</textarea>",this._quirks7&&(z.firstChild.style.height=h-12+"px"),this._editor=z.firstChild,this._editor.addEventListener("keypress",function(he){if(he.shiftKey)return!0;var be=he.keyCode;be==t.keys.edit_save&&t.editStop(!0),be==t.keys.edit_cancel&&t.editStop(!1)}),this._editor.addEventListener("selectstart",function(he){return he.cancelBubble=!0,!0}),z.firstChild.focus(),this._els.dhx_cal_data[0].scrollLeft=0,z.firstChild.select()}if(this._select_id==a.id){T.style.zIndex=parseInt(T.style.zIndex)+1;for(var Z=this.config["icons_"+(this._edit_id==a.id?"edit":"select")],re="",oe=0;oe<Z.length;oe++)re+="<div class='dhx_menu_icon "+Z[oe]+"' title='"+this.locale.labels[Z[oe]]+"'></div>";var _e=this._render_v_bar(a.id,V-v+1,c,v,20*Z.length+26,"","<div class='dhx_menu_head'></div>",re,!0);_e.style.left=V-v+1,_e.style.zIndex=T.style.zIndex,this._els.dhx_cal_data[0].appendChild(_e),this._rendered.push(_e)}}}},t.filter_agenda=function(a,v){var _=t.getLayer(v.layer);return _&&_.visible}})},limit:function(t){t.config.limit_start=null,t.config.limit_end=null,t.config.limit_view=!1,t.config.check_limits=!0,t.config.mark_now=!0,t.config.display_marked_timespans=!0,t.config.overwrite_marked_timespans=!0,t._temp_limit_scope=function(){var j=null,a=function(i,o,c){var D,V,T,h="object"==kt(i)?i:{days:i};return h.type="dhx_time_block",h.css="",o&&(c&&(h.sections=c),D=h,T=o,(V=i)instanceof Date&&T instanceof Date?(D.start_date=V,D.end_date=T):(D.days=V,D.zones=T),h=D),h};t.blockTime=function(i,o,c){var h=a(i,o,c);return t.addMarkedTimespan(h)},t.unblockTime=function(i,o,c){var h=a(i,o=o||"fullday",c);return t.deleteMarkedTimespan(h)},t.attachEvent("onBeforeViewChange",function(i,o,c,h){function D(V,T){var W=t.config.limit_start,z=t.config.limit_end,Z=t.date.add(V,1,T);return V.valueOf()>z.valueOf()||Z<=W.valueOf()}return!t.config.limit_view||!D(h=h||o,c=c||i)||o.valueOf()==h.valueOf()||(setTimeout(function(){var V=D(o,c)?t.config.limit_start:o;t.setCurrentView(D(V,c)?null:V,c)},1),!1)}),t.checkInMarkedTimespan=function(i,o,c){o=o||"default";for(var h=!0,D=new Date(i.start_date.valueOf()),V=t.date.add(D,1,"day"),T=t._marked_timespans;D<i.end_date;D=t.date.date_part(V),V=t.date.add(D,1,"day")){var W=+t.date.date_part(new Date(D)),z=_(i,T,D.getDay(),W,o);if(z)for(var Z=0;Z<z.length;Z+=2){var re=t._get_zone_minutes(D),oe=i.end_date>V||i.end_date.getDate()!=D.getDate()?1440:t._get_zone_minutes(i.end_date),_e=z[Z],he=z[Z+1];if(_e<oe&&he>re&&!(h="function"==typeof c&&c(i,re,oe,_e,he)))break}}return!h};var v=t.checkLimitViolation=function(i){if(!i||!t.config.check_limits)return!0;var o=t,c=o.config,h=[];if(i.rec_type)for(var D=t.getRecDates(i),V=0;V<D.length;V++){var T=t._copy_event(i);t._lame_copy(T,D[V]),h.push(T)}else h=[i];for(var W=!0,z=0;z<h.length;z++){var Z=!0;(T=h[z])._timed=t.isOneDayEvent(T),(Z=!c.limit_start||!c.limit_end||T.start_date.valueOf()>=c.limit_start.valueOf()&&T.end_date.valueOf()<=c.limit_end.valueOf())&&(Z=!t.checkInMarkedTimespan(T,"dhx_time_block",function(re,oe,_e,he,be){var Ae=!0;return oe<=be&&oe>=he&&((1440==be||_e<=be)&&(Ae=!1),re._timed&&o._drag_id&&"new-size"==o._drag_mode?(re.start_date.setHours(0),re.start_date.setMinutes(be)):Ae=!1),(_e>=he&&_e<=be||oe<he&&_e>be)&&(re._timed&&o._drag_id&&"new-size"==o._drag_mode?(re.end_date.setHours(0),re.end_date.setMinutes(he)):Ae=!1),Ae})),Z||(Z=o.checkEvent("onLimitViolation")?o.callEvent("onLimitViolation",[T.id,T]):Z),W=W&&Z}return W||(o._drag_id=null,o._drag_mode=null),W};function _(i,o,c,h,D){var V=t,T=[],W={_props:"map_to",matrix:"y_property"};for(var z in W){var Z=W[z];if(V[z])for(var re in V[z]){var oe=V[z][re][Z];i[oe]&&(T=V._add_timespan_zones(T,t._get_blocked_zones(o[re],i[oe],c,h,D)))}}return V._add_timespan_zones(T,t._get_blocked_zones(o,"global",c,h,D))}t._get_blocked_zones=function(i,o,c,h,D){var V=[];if(i&&i[o])for(var W=this._get_relevant_blocked_zones(c,h,i[o],D),z=0;z<W.length;z++)V=this._add_timespan_zones(V,W[z].zones);return V},t._get_relevant_blocked_zones=function(i,o,c,h){var D;return t.config.overwrite_marked_timespans?D=c[o]&&c[o][h]?c[o][h]:c[i]&&c[i][h]?c[i][h]:[]:(D=[],c[o]&&c[o][h]&&(D=D.concat(c[o][h])),c[i]&&c[i][h]&&(D=D.concat(c[i][h]))),D},t.attachEvent("onMouseDown",function(i){return"dhx_time_block"!=i}),t.attachEvent("onBeforeDrag",function(i){return!i||v(t.getEvent(i))}),t.attachEvent("onClick",function(i,o){return v(t.getEvent(i))}),t.attachEvent("onBeforeLightbox",function(i){var o=t.getEvent(i);return j=[o.start_date,o.end_date],v(o)}),t.attachEvent("onEventSave",function(i,o,c){if(!o.start_date||!o.end_date){var h=t.getEvent(i);o.start_date=new Date(h.start_date),o.end_date=new Date(h.end_date)}if(o.rec_type){var D=t._lame_clone(o);return t._roll_back_dates(D),v(D)}return v(o)}),t.attachEvent("onEventAdded",function(i){if(!i)return!0;var o=t.getEvent(i);return!v(o)&&t.config.limit_start&&t.config.limit_end&&(o.start_date<t.config.limit_start&&(o.start_date=new Date(t.config.limit_start)),o.start_date.valueOf()>=t.config.limit_end.valueOf()&&(o.start_date=this.date.add(t.config.limit_end,-1,"day")),o.end_date<t.config.limit_start&&(o.end_date=new Date(t.config.limit_start)),o.end_date.valueOf()>=t.config.limit_end.valueOf()&&(o.end_date=this.date.add(t.config.limit_end,-1,"day")),o.start_date.valueOf()>=o.end_date.valueOf()&&(o.end_date=this.date.add(o.start_date,this.config.event_duration||this.config.time_step,"minute")),o._timed=this.isOneDayEvent(o)),!0}),t.attachEvent("onEventChanged",function(i){if(!i)return!0;var o=t.getEvent(i);if(!v(o)){if(!j)return!1;o.start_date=j[0],o.end_date=j[1],o._timed=this.isOneDayEvent(o)}return!0}),t.attachEvent("onBeforeEventChanged",function(i,o,c){return v(i)}),t.attachEvent("onBeforeEventCreated",function(i){var o=t.getActionData(i).date,c={_timed:!0,start_date:o,end_date:t.date.add(o,t.config.time_step,"minute")};return v(c)}),t.attachEvent("onViewChange",function(){t._mark_now()}),t.attachEvent("onAfterSchedulerResize",function(){return window.setTimeout(function(){t._mark_now()},1),!0}),t.attachEvent("onTemplatesReady",function(){t._mark_now_timer=window.setInterval(function(){t._is_initialized()&&t._mark_now()},6e4)}),t._mark_now=function(i){this._els.dhx_now_time||(this._els.dhx_now_time=[]);var o=t._currentDate(),c=this.config;if(t._remove_mark_now(),!i&&c.mark_now&&o<this._max_date&&o>this._min_date&&o.getHours()>=c.first_hour&&o.getHours()<c.last_hour){var h=this.locate_holder_day(o);this._els.dhx_now_time=t._append_mark_now(h,o)}},t._append_mark_now=function(i,o){var c=t._get_zone_minutes(o),h={zones:[c,c+1],css:"dhx_now_time",type:"dhx_now_time"};if(!this._table_view){if(this._props&&this._props[this._mode]){var D,V,T=this._props[this._mode],W=T.size||T.options.length;T.days>1?(T.size&&T.options.length&&(i=(T.position+i)/T.options.length*T.size),D=i,V=i+W):V=(D=0)+W;for(var z=[],Z=D;Z<V;Z++){var re=Z;h.days=re;var oe=t._render_marked_timespan(h,null,re)[0];z.push(oe)}return z}return h.days=i,t._render_marked_timespan(h,null,i)}if("month"==this._mode)return h.days=+t.date.date_part(o),t._render_marked_timespan(h,null,null)},t._remove_mark_now=function(){for(var i=this._els.dhx_now_time,o=0;o<i.length;o++){var c=i[o],h=c.parentNode;h&&h.removeChild(c)}this._els.dhx_now_time=[]},t._marked_timespans={global:{}},t._get_zone_minutes=function(i){return 60*i.getHours()+i.getMinutes()},t._prepare_timespan_options=function(i){var o=[],c=[];if("fullweek"==i.days&&(i.days=[0,1,2,3,4,5,6]),i.days instanceof Array){for(var h=i.days.slice(),D=0;D<h.length;D++){var V=t._lame_clone(i);V.days=h[D],o.push.apply(o,t._prepare_timespan_options(V))}return o}if(!i||!(i.start_date&&i.end_date&&i.end_date>i.start_date||void 0!==i.days&&i.zones)&&!i.type)return o;"fullday"==i.zones&&(i.zones=[0,1440]),i.zones&&i.invert_zones&&(i.zones=t.invertZones(i.zones)),i.id=t.uid(),i.css=i.css||"",i.type=i.type||"default";var T=i.sections;if(T){for(var W in T)if(T.hasOwnProperty(W)){var z=T[W];for(z instanceof Array||(z=[z]),D=0;D<z.length;D++)(Ae=t._lame_copy({},i)).sections={},Ae.sections[W]=z[D],c.push(Ae)}}else c.push(i);for(var Z=0;Z<c.length;Z++){var re=c[Z],oe=re.start_date,_e=re.end_date;if(oe&&_e)for(var he=t.date.date_part(new Date(oe)),be=t.date.add(he,1,"day");he<_e;){var Ae;delete(Ae=t._lame_copy({},re)).start_date,delete Ae.end_date,Ae.days=he.valueOf();var He=oe>he?t._get_zone_minutes(oe):0,Ne=_e>be||_e.getDate()!=he.getDate()?1440:t._get_zone_minutes(_e);Ae.zones=[He,Ne],o.push(Ae),he=be,be=t.date.add(be,1,"day")}else re.days instanceof Date&&(re.days=t.date.date_part(re.days).valueOf()),re.zones=i.zones.slice(),o.push(re)}return o},t._get_dates_by_index=function(i,o,c){var h=[];o=t.date.date_part(new Date(o||t._min_date)),c=new Date(c||t._max_date);for(var D=o.getDay(),V=i-D>=0?i-D:7-o.getDay()+i,T=t.date.add(o,V,"day");T<c;T=t.date.add(T,1,"week"))h.push(T);return h},t._get_css_classes_by_config=function(i){var o=[];return"dhx_time_block"==i.type&&(o.push("dhx_time_block"),i.css&&o.push("dhx_time_block_reset")),o.push("dhx_marked_timespan",i.css),o.join(" ")},t._get_block_by_config=function(i){var o=document.createElement("div");return i.html&&("string"==typeof i.html?o.innerHTML=i.html:o.appendChild(i.html)),o},t._render_marked_timespan=function(i,o,c){var h=[],D=t.config,V=this._min_date,T=this._max_date,W=!1;if(!D.display_marked_timespans)return h;if(!c&&0!==c){if(i.days<7)c=i.days;else{var z=new Date(i.days);if(W=+z,!(+T>+z&&+V<=+z))return h;c=z.getDay()}var Z=V.getDay();Z>c?c=7-(Z-c):c-=Z}var re=i.zones,oe=t._get_css_classes_by_config(i);if(t._table_view&&"month"==t._mode){var _e=[],he=[];if(o)_e.push(o),he.push(c);else{he=W?[W]:t._get_dates_by_index(c);for(var be=0;be<he.length;be++)_e.push(this._scales[he[be]])}for(be=0;be<_e.length;be++){o=_e[be],c=he[be];var Ae=Math.floor((this._correct_shift(c,1)-V.valueOf())/(864e5*this._cols.length)),He=this.locate_holder_day(c,!1)%this._cols.length;if(!this._ignores[He]){var Ne=this.config.rtl?this._colsS.col_length-1-He:He,Ve=t._get_block_by_config(i),Se=Math.max(o.offsetHeight-1,0),Fe=Math.max(o.offsetWidth-1,0),Oe=this._colsS[Ne],at=this._colsS.heights[Ae]+(this._colsS.height?this.xy.month_scale_height+2:2)-1;Ve.className=oe,Ve.style.top=at+"px",Ve.style.lineHeight=Ve.style.height=Se+"px";for(var ht=0;ht<re.length;ht+=2){var lt=re[be];if((xt=re[be+1])<=lt)return[];(wt=Ve.cloneNode(!0)).style.left=Oe+Math.round(lt/1440*Fe)+"px",wt.style.width=Math.round((xt-lt)/1440*Fe)+"px",o.appendChild(wt),h.push(wt)}}}}else{var mt=c;if(this._ignores[this.locate_holder_day(c,!1)])return h;if(this._props&&this._props[this._mode]&&i.sections&&i.sections[this._mode]){var ft=this._props[this._mode];mt=ft.order[i.sections[this._mode]];var yt=ft.order[i.sections[this._mode]];ft.days>1?mt=mt*(ft.size||ft.options.length)+yt:(mt=yt,ft.size&&mt>ft.position+ft.size&&(mt=0))}for(o=o||t.locate_holder(mt),be=0;be<re.length;be+=2){var xt,wt;if(lt=Math.max(re[be],60*D.first_hour),(xt=Math.min(re[be+1],60*D.last_hour))<=lt){if(be+2<re.length)continue;return[]}(wt=t._get_block_by_config(i)).className=oe;var Dt=24*this.config.hour_size_px+1;wt.style.top=Math.round((60*lt*1e3-36e5*this.config.first_hour)*this.config.hour_size_px/36e5)%Dt+"px",wt.style.lineHeight=wt.style.height=Math.max(Math.round(60*(xt-lt)*1e3*this.config.hour_size_px/36e5)%Dt,1)+"px",o.appendChild(wt),h.push(wt)}}return h},t._mark_timespans=function(){var i=this._els.dhx_cal_data[0],o=[];if(t._table_view&&"month"==t._mode)for(var c in this._scales){var h=new Date(+c);o.push.apply(o,t._on_scale_add_marker(this._scales[c],h))}else{h=new Date(t._min_date);for(var D=0,V=i.childNodes.length;D<V;D++){var T=i.childNodes[D];T.firstChild&&t._getClassName(T.firstChild).indexOf("dhx_scale_hour")>-1||(o.push.apply(o,t._on_scale_add_marker(T,h)),h=t.date.add(h,1,"day"))}}return o},t.markTimespan=function(i){var o=!1;this._els.dhx_cal_data||(t.get_elements(),o=!0);var c=t._marked_timespans_ids,h=t._marked_timespans_types,D=t._marked_timespans;t.deleteMarkedTimespan(),t.addMarkedTimespan(i);var V=t._mark_timespans();return o&&(t._els=[]),t._marked_timespans_ids=c,t._marked_timespans_types=h,t._marked_timespans=D,V},t.unmarkTimespan=function(i){if(i)for(var o=0;o<i.length;o++){var c=i[o];c.parentNode&&c.parentNode.removeChild(c)}},t._addMarkerTimespanConfig=function(i){var o=t._marked_timespans,c=i.id,h=t._marked_timespans_ids;h[c]||(h[c]=[]);var D=i.days,V=i.sections,T=i.type;if(i.id=c,V){for(var W in V)if(V.hasOwnProperty(W)){o[W]||(o[W]={});var z=V[W],Z=o[W];Z[z]||(Z[z]={}),Z[z][D]||(Z[z][D]={}),Z[z][D][T]||(Z[z][D][T]=[],t._marked_timespans_types||(t._marked_timespans_types={}),t._marked_timespans_types[T]||(t._marked_timespans_types[T]=!0));var re=Z[z][D][T];i._array=re,re.push(i),h[c].push(i)}}else o.global[D]||(o.global[D]={}),o.global[D][T]||(o.global[D][T]=[]),t._marked_timespans_types||(t._marked_timespans_types={}),t._marked_timespans_types[T]||(t._marked_timespans_types[T]=!0),i._array=re=o.global[D][T],re.push(i),h[c].push(i)},t._marked_timespans_ids={},t.addMarkedTimespan=function(i){var o=t._prepare_timespan_options(i);if(o.length){for(var c=o[0].id,h=0;h<o.length;h++)t._addMarkerTimespanConfig(o[h]);return c}},t._add_timespan_zones=function(i,o){var c=i.slice();if(o=o.slice(),!c.length)return o;for(var h=0;h<c.length;h+=2)for(var D=c[h],V=c[h+1],T=h+2==c.length,W=0;W<o.length;W+=2){var z=o[W],Z=o[W+1];if(Z>V&&z<=V||z<D&&Z>=D)c[h]=Math.min(D,z),c[h+1]=Math.max(V,Z),h-=2;else{if(!T)continue;c.splice(h+(D>z?0:2),0,z,Z)}o.splice(W--,2);break}return c},t._subtract_timespan_zones=function(i,o){for(var c=i.slice(),h=0;h<c.length;h+=2)for(var D=c[h],V=c[h+1],T=0;T<o.length;T+=2){var W=o[T],z=o[T+1];if(z>D&&W<V){var Z=!1;D>=W&&V<=z&&c.splice(h,2),D<W&&(c.splice(h,2,D,W),Z=!0),V>z&&c.splice(Z?h+2:h,Z?0:2,z,V),h-=2;break}}return c},t.invertZones=function(i){return t._subtract_timespan_zones([0,1440],i.slice())},t._delete_marked_timespan_by_id=function(i){var o=t._marked_timespans_ids[i];if(o)for(var c=0;c<o.length;c++)for(var h=o[c],D=h._array,V=0;V<D.length;V++)if(D[V]==h){D.splice(V,1);break}},t._delete_marked_timespan_by_config=function(i){var o,c=t._marked_timespans,h=i.sections,D=i.days,V=i.type||"default";if(h){for(var T in h)if(h.hasOwnProperty(T)&&c[T]){var W=h[T];c[T][W]&&(o=c[T][W])}}else o=c.global;if(o)if(void 0!==D)o[D]&&o[D][V]&&(t._addMarkerTimespanConfig(i),t._delete_marked_timespans_list(o[D][V],i));else for(var z in o)if(o[z][V]){var Z=t._lame_clone(i);i.days=z,t._addMarkerTimespanConfig(Z),t._delete_marked_timespans_list(o[z][V],i)}},t._delete_marked_timespans_list=function(i,o){for(var c=0;c<i.length;c++){var h=i[c],D=t._subtract_timespan_zones(h.zones,o.zones);if(D.length)h.zones=D;else{i.splice(c,1),c--;for(var V=t._marked_timespans_ids[h.id],T=0;T<V.length;T++)if(V[T]==h){V.splice(T,1);break}}}},t.deleteMarkedTimespan=function(i){if(arguments.length||(t._marked_timespans={global:{}},t._marked_timespans_ids={},t._marked_timespans_types={}),"object"!=kt(i))t._delete_marked_timespan_by_id(i);else{i.start_date&&i.end_date||(void 0!==i.days||i.type||(i.days="fullweek"),i.zones||(i.zones="fullday"));var o=[];if(i.type)o.push(i.type);else for(var c in t._marked_timespans_types)o.push(c);for(var h=t._prepare_timespan_options(i),D=0;D<h.length;D++)for(var V=h[D],T=0;T<o.length;T++){var W=t._lame_clone(V);W.type=o[T],t._delete_marked_timespan_by_config(W)}}},t._get_types_to_render=function(i,o){var c=i?t._lame_copy({},i):{};for(var h in o||{})o.hasOwnProperty(h)&&(c[h]=o[h]);return c},t._get_configs_to_render=function(i){var o=[];for(var c in i)i.hasOwnProperty(c)&&o.push.apply(o,i[c]);return o},t._on_scale_add_marker=function(i,o){if(!t._table_view||"month"==t._mode){var c=o.getDay(),h=o.valueOf(),D=this._mode,V=t._marked_timespans,T=[],W=[];if(this._props&&this._props[D]){var z=this._props[D],Z=z.options,re=Z[t._get_unit_index(z,o)];if(z.days>1){var oe=Math.round((o-t._min_date)/864e5);o=t.date.add(t._min_date,Math.floor(oe/(z.size||Z.length)),"day"),o=t.date.date_part(o)}else o=t.date.date_part(new Date(this._date));if(c=o.getDay(),h=o.valueOf(),V[D]&&V[D][re.key]){var he=V[D][re.key],be=t._get_types_to_render(he[c],he[h]);T.push.apply(T,t._get_configs_to_render(be))}}var Ae=V.global;t.config.overwrite_marked_timespans?T.push.apply(T,t._get_configs_to_render(Ae[h]||Ae[c])):(Ae[h]&&T.push.apply(T,t._get_configs_to_render(Ae[h])),Ae[c]&&T.push.apply(T,t._get_configs_to_render(Ae[c])));for(var Ne=0;Ne<T.length;Ne++)W.push.apply(W,t._render_marked_timespan(T[Ne],i,o));return W}},t.attachEvent("onScaleAdd",function(){t._on_scale_add_marker.apply(t,arguments)}),t.dblclick_dhx_marked_timespan=function(i,o){t.callEvent("onScaleDblClick",[t.getActionData(i).date,o,i]),t.config.dblclick_create&&t.addEventNow(t.getActionData(i).date,null,i)}},t._temp_limit_scope()},map_view:function(t){var j;t.xy.map_date_width=188,t.xy.map_icon_width=25,t.xy.map_description_width=400,t.config.map_resolve_event_location=!0,t.config.map_resolve_user_location=!0,t.config.map_initial_position=new google.maps.LatLng(48.724,8.215),t.config.map_error_position=new google.maps.LatLng(15,15),t.config.map_infowindow_max_width=300,t.config.map_type=google.maps.MapTypeId.ROADMAP,t.config.map_zoom_after_resolve=15,t.locale.labels.marker_geo_success="It seems you are here.",t.locale.labels.marker_geo_fail="Sorry, could not get your current position using geolocation.",t.templates.marker_date=t.date.date_to_str("%Y-%m-%d %H:%i"),t.templates.marker_text=function(a,v,_){return"<div><b>"+_.text+"</b><br/><br/>"+(_.event_location||"")+"<br/><br/>"+t.templates.marker_date(a)+" - "+t.templates.marker_date(v)+"</div>"},t.dblclick_dhx_map_area=function(){!this.config.readonly&&this.config.dblclick_create&&this.addEventNow({start_date:t._date,end_date:t.date.add(t._date,t.config.time_step,"minute")})},t.templates.map_time=function(a,v,_){return t.config.rtl&&!_._timed?t.templates.day_date(v)+" &ndash; "+t.templates.day_date(a):_._timed?this.day_date(_.start_date,_.end_date,_)+" "+this.event_date(a):t.templates.day_date(a)+" &ndash; "+t.templates.day_date(v)},t.templates.map_text=function(a,v,_){return _.text},t.date.map_start=function(a){return a},t.date.add_map=function(a,v,_){return new Date(a.valueOf())},t.templates.map_date=function(a,v,_){return""},t._latLngUpdate=!1,t.attachEvent("onSchedulerReady",function(){t._isMapPositionSet=!1;var a=document.createElement("div");a.className="dhx_map",a.id="dhx_gmap",a.style.display="none",t._obj.appendChild(a),t._els.dhx_gmap=[],t._els.dhx_gmap.push(a),h("dhx_gmap");var v={zoom:t.config.map_initial_zoom||10,center:t.config.map_initial_position,mapTypeId:t.config.map_type||google.maps.MapTypeId.ROADMAP},_=new google.maps.Map(document.getElementById("dhx_gmap"),v);_.disableDefaultUI=!1,_.disableDoubleClickZoom=!t.config.readonly,google.maps.event.addListener(_,"dblclick",function(z){if(!t.config.readonly&&t.config.dblclick_create){var Z=z.latLng;j.geocode({latLng:Z},function(re,oe){oe==google.maps.GeocoderStatus.OK&&t.addEventNow({lat:(Z=re[0].geometry.location).lat(),lng:Z.lng(),event_location:re[0].formatted_address,start_date:t._date,end_date:t.date.add(t._date,t.config.time_step,"minute")})})}});var i={content:""};t.config.map_infowindow_max_width&&(i.maxWidth=t.config.map_infowindow_max_width),t.map={_points:[],_markers:[],_infowindow:new google.maps.InfoWindow(i),_infowindows_content:[],_initialization_count:-1,_obj:_},j=new google.maps.Geocoder,t.config.map_resolve_user_location&&navigator.geolocation&&(t._isMapPositionSet||navigator.geolocation.getCurrentPosition(function(z){var Z=new google.maps.LatLng(z.coords.latitude,z.coords.longitude);_.setCenter(Z),_.setZoom(t.config.map_zoom_after_resolve||10),t.map._infowindow.setContent(t.locale.labels.marker_geo_success),t.map._infowindow.position=_.getCenter(),t.map._infowindow.open(_),t._isMapPositionSet=!0},function(){t.map._infowindow.setContent(t.locale.labels.marker_geo_fail),t.map._infowindow.setPosition(_.getCenter()),t.map._infowindow.open(_),t._isMapPositionSet=!0})),google.maps.event.addListener(_,"resize",function(z){a.style.zIndex="5",_.setZoom(_.getZoom())}),google.maps.event.addListener(_,"tilesloaded",function(z){a.style.zIndex="5"}),a.style.display="none";var o=t.render_data;function c(){var z=t.get_visible_events();z.sort(function(Se,Fe){return Se.start_date.valueOf()==Fe.start_date.valueOf()?Se.id>Fe.id?1:-1:Se.start_date>Fe.start_date?1:-1});for(var Z="<div "+(Ae=t._waiAria.mapAttrString())+" class='dhx_map_area'>",re=0;re<z.length;re++){var oe=z[re],_e=oe.id==t._selected_event_id?"dhx_map_line highlight":"dhx_map_line",he=oe.color?"background:"+oe.color+";":"",be=oe.textColor?"color:"+oe.textColor+";":"",Ae=t._waiAria.mapRowAttrString(oe),He=t._waiAria.mapDetailsBtnString();Z+="<div "+Ae+" class='"+_e+"' event_id='"+oe.id+"' "+t.config.event_attribute+"='"+oe.id+"' style='"+he+be+(oe._text_style||"")+" width: "+(t.xy.map_date_width+t.xy.map_description_width+2)+"px;'><div class='dhx_map_event_time' style='width: "+t.xy.map_date_width+"px;' >"+t.templates.map_time(oe.start_date,oe.end_date,oe)+"</div>",Z+="<div "+He+" class='dhx_event_icon icon_details'>&nbsp;</div>",Z+="<div class='line_description' style='width:"+(t.xy.map_description_width-t.xy.map_icon_width)+"px;'>"+t.templates.map_text(oe.start_date,oe.end_date,oe)+"</div></div>"}Z+="<div class='dhx_v_border' style="+(t.config.rtl?"'right: ":"'left: ")+(t.xy.map_date_width-2)+"px;'></div><div class='dhx_v_border_description'></div></div>",t._els.dhx_cal_data[0].scrollTop=0,t._els.dhx_cal_data[0].innerHTML=Z,t._els.dhx_cal_data[0].style.width=t.xy.map_date_width+t.xy.map_description_width+1+"px";var Ne=t._els.dhx_cal_data[0].firstChild.childNodes,Ve=t._getNavDateElement();for(Ve&&(Ve.innerHTML=t.templates[t._mode+"_date"](t._min_date,t._max_date,t._mode)),t._rendered=[],re=0;re<Ne.length-2;re++)t._rendered[re]=Ne[re]}function h(z){var Z=document.getElementById(z),re=t._y-t.xy.nav_height;re<0&&(re=0);var oe=t._x-t.xy.map_date_width-t.xy.map_description_width-1;oe<0&&(oe=0),Z.style.height=re+"px",Z.style.width=oe+"px",t.config.rtl?Z.style.marginRight=t.xy.map_date_width+t.xy.map_description_width+1+"px":Z.style.marginLeft=t.xy.map_date_width+t.xy.map_description_width+1+"px",Z.style.marginTop=t.xy.nav_height+2+"px"}t.render_data=function(z,Z){if("map"!=this._mode)return o.apply(this,arguments);c();for(var re=t.get_visible_events(),oe=0;oe<re.length;oe++)t.map._markers[re[oe].id]||V(re[oe],!1,!1)},t.map_view=function(z){t.map._initialization_count++;var Z,re=t._els.dhx_gmap[0];if(t._els.dhx_cal_data[0].style.width=t.xy.map_date_width+t.xy.map_description_width+1+"px",t._min_date=t.config.map_start||t._currentDate(),t._max_date=t.config.map_end||t.date.add(t._currentDate(),1,"year"),t._table_view=!0,function(he){if(he){var be=t.locale.labels;t._els.dhx_cal_header[0].innerHTML="<div class='dhx_map_line' style='width: "+(t.xy.map_date_width+t.xy.map_description_width+2)+"px;' ><div class='headline_date' style='width: "+t.xy.map_date_width+"px;'>"+be.date+"</div><div class='headline_description' style='width: "+t.xy.map_description_width+"px;'>"+be.description+"</div></div>",t._table_view=!0,t.set_sizes()}}(z),z){(function(){t._selected_event_id=null,t.map._infowindow.close();var he=t.map._markers;for(var be in he)he.hasOwnProperty(be)&&(he[be].setMap(null),delete t.map._markers[be],t.map._infowindows_content[be]&&delete t.map._infowindows_content[be])})(),c(),re.style.display="block",h("dhx_gmap"),Z=t.map._obj.getCenter();for(var oe=t.get_visible_events(),_e=0;_e<oe.length;_e++)t.map._markers[oe[_e].id]||V(oe[_e])}else re.style.display="none";google.maps.event.trigger(t.map._obj,"resize"),0===t.map._initialization_count&&Z&&t.map._obj.setCenter(Z),t._selected_event_id&&D(t._selected_event_id)};var D=function(z){t.map._obj.setCenter(t.map._points[z]),t.callEvent("onClick",[z])},V=function(z,Z,re){var oe=t.config.map_error_position;z.lat&&z.lng&&(oe=new google.maps.LatLng(z.lat,z.lng));var _e=t.templates.marker_text(z.start_date,z.end_date,z);t._new_event||(t.map._infowindows_content[z.id]=_e,t.map._markers[z.id]&&t.map._markers[z.id].setMap(null),t.map._markers[z.id]=new google.maps.Marker({position:oe,map:t.map._obj}),google.maps.event.addListener(t.map._markers[z.id],"click",function(){t.map._infowindow.setContent(t.map._infowindows_content[z.id]),t.map._infowindow.open(t.map._obj,t.map._markers[z.id]),t._selected_event_id=z.id,t.render_data()}),t.map._points[z.id]=oe,Z&&t.map._obj.setCenter(t.map._points[z.id]),re&&t.callEvent("onClick",[z.id]))};t.attachEvent("onClick",function(z,Z){if("map"==this._mode){t._selected_event_id=z;for(var re=0;re<t._rendered.length;re++)t._rendered[re].className="dhx_map_line",t._rendered[re].getAttribute(t.config.event_attribute)==z&&(t._rendered[re].className+=" highlight");t.map._points[z]&&t.map._markers[z]&&(t.map._obj.setCenter(t.map._points[z]),google.maps.event.trigger(t.map._markers[z],"click"))}return!0});var T=function(z){z.event_location&&j?j.geocode({address:z.event_location,language:t.uid().toString()},function(Z,re){var oe={};re!=google.maps.GeocoderStatus.OK?(oe=t.callEvent("onLocationError",[z.id]))&&!0!==oe||(oe=t.config.map_error_position):oe=Z[0].geometry.location,z.lat=oe.lat(),z.lng=oe.lng(),t._selected_event_id=z.id,t._latLngUpdate=!0,t.callEvent("onEventChanged",[z.id,z]),V(z,!0,!0)}):V(z,!0,!0)},W=function(z){z.event_location&&j&&j.geocode({address:z.event_location,language:t.uid().toString()},function(Z,re){var oe={};re!=google.maps.GeocoderStatus.OK?(oe=t.callEvent("onLocationError",[z.id]))&&!0!==oe||(oe=t.config.map_error_position):oe=Z[0].geometry.location,z.lat=oe.lat(),z.lng=oe.lng(),t._latLngUpdate=!0,t.callEvent("onEventChanged",[z.id,z])})};t.attachEvent("onEventChanged",function(z,Z){if(this._latLngUpdate)this._latLngUpdate=!1;else{var re=t.getEvent(z);re.start_date<t._min_date&&re.end_date>t._min_date||re.start_date<t._max_date&&re.end_date>t._max_date||re.start_date.valueOf()>=t._min_date&&re.end_date.valueOf()<=t._max_date?(t.map._markers[z]&&t.map._markers[z].setMap(null),T(re)):(t._selected_event_id=null,t.map._infowindow.close(),t.map._markers[z]&&t.map._markers[z].setMap(null))}return!0}),t.attachEvent("onEventIdChange",function(z,Z){var re=t.getEvent(Z);return(re.start_date<t._min_date&&re.end_date>t._min_date||re.start_date<t._max_date&&re.end_date>t._max_date||re.start_date.valueOf()>=t._min_date&&re.end_date.valueOf()<=t._max_date)&&(t.map._markers[z]&&(t.map._markers[z].setMap(null),delete t.map._markers[z]),t.map._infowindows_content[z]&&delete t.map._infowindows_content[z],T(re)),!0}),t.attachEvent("onEventAdded",function(z,Z){return t._dataprocessor||(Z.start_date<t._min_date&&Z.end_date>t._min_date||Z.start_date<t._max_date&&Z.end_date>t._max_date||Z.start_date.valueOf()>=t._min_date&&Z.end_date.valueOf()<=t._max_date)&&(t.map._markers[z]&&t.map._markers[z].setMap(null),T(Z)),!0}),t.attachEvent("onBeforeEventDelete",function(z,Z){return t.map._markers[z]&&t.map._markers[z].setMap(null),t._selected_event_id=null,t.map._infowindow.close(),!0}),t._event_resolve_delay=1500,t.attachEvent("onEventLoading",function(z){return t.config.map_resolve_event_location&&z.event_location&&!z.lat&&!z.lng&&(t._event_resolve_delay+=1500,Z=W,re=this,oe=[z],setTimeout(function(){var he=Z.apply(re,oe);return Z=re=oe=null,he},t._event_resolve_delay||1)),!0;var Z,re,oe}),t.attachEvent("onEventCancel",function(z,Z){return Z&&(t.map._markers[z]&&t.map._markers[z].setMap(null),t.map._infowindow.close()),!0})})},minical:function(t){var j=t._createDomEventScope();t.templates.calendar_month=t.date.date_to_str("%F %Y"),t.templates.calendar_scale_date=t.date.date_to_str("%D"),t.templates.calendar_date=t.date.date_to_str("%d"),t.config.minicalendar={mark_events:!0},t._synced_minicalendars=[],t.renderCalendar=function(a,v,_){var i=null,o=a.date||t._currentDate();if("string"==typeof o&&(o=this.templates.api_date(o)),v)i=this._render_calendar(v.parentNode,o,a,v),t.unmarkCalendar(i);else{var c=a.container,h=a.position;if("string"==typeof c&&(c=document.getElementById(c)),"string"==typeof h&&(h=document.getElementById(h)),h&&void 0===h.left&&void 0===h.right){var D=t.$domHelpers.getOffset(h);h={top:D.top+h.offsetHeight,left:D.left}}c||(c=t._get_def_cont(h)),(i=this._render_calendar(c,o,a)).$_eventAttached||(i.$_eventAttached=!0,j.attach(i,"click",function(he){var be=he.target||he.srcElement,Ae=t.$domHelpers;if(Ae.closest(be,".dhx_month_head")&&!Ae.closest(be,".dhx_after")&&!Ae.closest(be,".dhx_before")){var He=Ae.closest(be,"[data-cell-date]").getAttribute("data-cell-date"),Ne=t.templates.parse_date(He);t.unmarkCalendar(this),t.markCalendar(this,Ne,"dhx_calendar_click"),this._last_date=Ne,this.conf.handler&&this.conf.handler.call(t,Ne,this)}}.bind(i)))}if(t.config.minicalendar.mark_events)for(var V=t.date.month_start(o),T=t.date.add(V,1,"month"),W=this.getEvents(V,T),z=this["filter_"+this._mode],Z={},re=0;re<W.length;re++){var oe=W[re];if(!z||z(oe.id,oe)){var _e=oe.start_date;for(_e.valueOf()<V.valueOf()&&(_e=V),_e=t.date.date_part(new Date(_e.valueOf()));_e<oe.end_date&&(Z[+_e]||(Z[+_e]=!0,this.markCalendar(i,_e,"dhx_year_event")),!((_e=this.date.add(_e,1,"day")).valueOf()>=T.valueOf())););}}return this._markCalendarCurrentDate(i),i.conf=a,a.sync&&!_&&this._synced_minicalendars.push(i),i.conf._on_xle_handler||(i.conf._on_xle_handler=t.attachEvent("onXLE",function(){t.updateCalendar(i,i.conf.date)})),this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&i.setAttribute("role","application"),i},t._get_def_cont=function(a){return this._def_count||(this._def_count=document.createElement("div"),this._def_count.className="dhx_minical_popup",t.event(this._def_count,"click",function(v){v.cancelBubble=!0}),document.body.appendChild(this._def_count)),a.left&&(this._def_count.style.left=a.left+"px"),a.right&&(this._def_count.style.right=a.right+"px"),a.top&&(this._def_count.style.top=a.top+"px"),a.bottom&&(this._def_count.style.bottom=a.bottom+"px"),this._def_count._created=new Date,this._def_count},t._locateCalendar=function(a,v){if("string"==typeof v&&(v=t.templates.api_date(v)),+v>+a._max_date||+v<+a._min_date)return null;for(var _=a.querySelector(".dhx_year_body").childNodes[0],i=0,o=new Date(a._min_date);+this.date.add(o,1,"week")<=+v;)o=this.date.add(o,1,"week"),i++;var c=t.config.start_on_monday,h=(v.getDay()||(c?7:0))-(c?1:0);return _.rows[i].cells[h].firstChild},t.markCalendar=function(a,v,_){var i=this._locateCalendar(a,v);i&&(i.className+=" "+_)},t.unmarkCalendar=function(a,v,_){if(_=_||"dhx_calendar_click",v=v||a._last_date){var i=this._locateCalendar(a,v);i&&(i.className=(i.className||"").replace(RegExp(_,"g")))}},t._week_template=function(a){for(var v=a||250,_=0,i=document.createElement("div"),o=this.date.week_start(t._currentDate()),c=0;c<7;c++)this._cols[c]=Math.floor(v/(7-c)),this._render_x_header(c,_,o,i),o=this.date.add(o,1,"day"),v-=this._cols[c],_+=this._cols[c];return i.lastChild.className+=" dhx_scale_bar_last",i},t.updateCalendar=function(a,v){a.conf.date=v,this.renderCalendar(a.conf,a,!0)},t._mini_cal_arrows=["&nbsp;","&nbsp;"],t._render_calendar=function(a,v,_,i){var o=t.templates,c=this._cols;this._cols=[];var h=this._mode;this._mode="calendar";var D=this._colsS;this._colsS={height:0};var V=new Date(this._min_date),T=new Date(this._max_date),W=new Date(t._date),z=o.month_day,Z=this._ignores_detected;this._ignores_detected=0,o.month_day=o.calendar_date,v=this.date.month_start(v);var re,oe=this._week_template(a.offsetWidth-1-this.config.minicalendar.padding);i?re=i:(re=document.createElement("div")).className="dhx_cal_container dhx_mini_calendar",re.setAttribute("date",this._helpers.formatDate(v)),re.innerHTML="<div class='dhx_year_month'></div><div class='dhx_year_grid"+(t.config.rtl?" dhx_grid_rtl'>":"'>")+"<div class='dhx_year_week'>"+(oe?oe.innerHTML:"")+"</div><div class='dhx_year_body'></div></div>";var _e=re.querySelector(".dhx_year_month"),he=re.querySelector(".dhx_year_week"),be=re.querySelector(".dhx_year_body");if(_e.innerHTML=this.templates.calendar_month(v),_.navigation)for(var Ae=function(wt,Dt){var Rt=t.date.add(wt._date,Dt,"month");t.updateCalendar(wt,Rt),t._date.getMonth()==wt._date.getMonth()&&t._date.getFullYear()==wt._date.getFullYear()&&t._markCalendarCurrentDate(wt)},He=["dhx_cal_prev_button","dhx_cal_next_button"],Ne=["left:1px;top:2px;position:absolute;","left:auto; right:1px;top:2px;position:absolute;"],Ve=[-1,1],Se=function(wt){return function(){if(_.sync)for(var Dt=t._synced_minicalendars,Rt=0;Rt<Dt.length;Rt++)Ae(Dt[Rt],wt);else t.config.rtl&&(wt=-wt),Ae(re,wt)}},Fe=[t.locale.labels.prev,t.locale.labels.next],Oe=0;Oe<2;Oe++){var at=document.createElement("div");at.className=He[Oe],t._waiAria.headerButtonsAttributes(at,Fe[Oe]),at.style.cssText=Ne[Oe],at.innerHTML=this._mini_cal_arrows[Oe],_e.appendChild(at),j.attach(at,"click",Se(Ve[Oe]))}re._date=new Date(v),re.week_start=(v.getDay()-(this.config.start_on_monday?1:0)+7)%7;var ht=re._min_date=this.date.week_start(v);re._max_date=this.date.add(re._min_date,6,"week"),this._reset_month_scale(be,v,ht,6),i||a.appendChild(re),he.style.height=he.childNodes[0].offsetHeight-1+"px";var lt=t.uid();t._waiAria.minicalHeader(_e,lt),t._waiAria.minicalGrid(re.querySelector(".dhx_year_grid"),lt),t._waiAria.minicalRow(he);for(var mt=he.querySelectorAll(".dhx_scale_bar"),ft=0;ft<mt.length;ft++)t._waiAria.minicalHeadCell(mt[ft]);var yt=be.querySelectorAll("td"),xt=new Date(ht);for(ft=0;ft<yt.length;ft++)t._waiAria.minicalDayCell(yt[ft],new Date(xt)),xt=t.date.add(xt,1,"day");return t._waiAria.minicalHeader(_e,lt),this._cols=c,this._mode=h,this._colsS=D,this._min_date=V,this._max_date=T,t._date=W,o.month_day=z,this._ignores_detected=Z,re},t.destroyCalendar=function(a,v){!a&&this._def_count&&this._def_count.firstChild&&(v||(new Date).valueOf()-this._def_count._created.valueOf()>500)&&(a=this._def_count.firstChild),a&&(j.detachAll(),a.innerHTML="",a.parentNode&&a.parentNode.removeChild(a),this._def_count&&(this._def_count.style.top="-1000px"),a.conf&&a.conf._on_xle_handler&&t.detachEvent(a.conf._on_xle_handler))},t.isCalendarVisible=function(){return!!(this._def_count&&parseInt(this._def_count.style.top,10)>0)&&this._def_count},t.attachEvent("onTemplatesReady",function(){t.event(document.body,"click",function(){t.destroyCalendar()})},{once:!0}),t.templates.calendar_time=t.date.date_to_str("%d-%m-%Y"),t.form_blocks.calendar_time={render:function(a){var v="<input class='dhx_readonly' type='text' readonly='true'>",_=t.config,i=this.date.date_part(t._currentDate()),o=1440,c=0;_.limit_time_select&&(c=60*_.first_hour,o=60*_.last_hour+1),i.setHours(c/60),a._time_values=[],v+=" <select class='dhx_lightbox_time_select'>";for(var h=c;h<o;h+=1*this.config.time_step)v+="<option value='"+h+"'>"+this.templates.time_picker(i)+"</option>",a._time_values.push(h),i=this.date.add(i,this.config.time_step,"minute");return"<div style='height:30px;padding-top:0; font-size:inherit;' class='dhx_section_time dhx_lightbox_minical'>"+(v+="</select>")+"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"+v+"</div>"},set_value:function(a,v,_,i){var o,c,h=a.getElementsByTagName("input"),D=a.getElementsByTagName("select"),V=function(_e,he,be){t.event(_e,"click",function(){t.destroyCalendar(null,!0),t.renderCalendar({position:_e,date:new Date(this._date),navigation:!0,handler:function(Ae){_e.value=t.templates.calendar_time(Ae),_e._date=new Date(Ae),t.destroyCalendar(),t.config.event_duration&&t.config.auto_end_date&&0===be&&Z()}})})};if(t.config.full_day){if(!a._full_day){var T="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+t.locale.labels.full_day+"&nbsp;</label></input>";t.config.wide_form||(T=a.previousSibling.innerHTML+T),a.previousSibling.innerHTML=T,a._full_day=!0}var W=a.previousSibling.getElementsByTagName("input")[0],z=0===t.date.time_part(_.start_date)&&0===t.date.time_part(_.end_date);W.checked=z,D[0].disabled=W.checked,D[1].disabled=W.checked,W.$_eventAttached||(W.$_eventAttached=!0,t.event(W,"click",function(){if(!0===W.checked){var _e={};t.form_blocks.calendar_time.get_value(a,_e),o=t.date.date_part(_e.start_date),(+(c=t.date.date_part(_e.end_date))==+o||+c>=+o&&(0!==_.end_date.getHours()||0!==_.end_date.getMinutes()))&&(c=t.date.add(c,1,"day"))}var he=o||_.start_date,be=c||_.end_date;re(h[0],he),re(h[1],be),D[0].value=60*he.getHours()+he.getMinutes(),D[1].value=60*be.getHours()+be.getMinutes(),D[0].disabled=W.checked,D[1].disabled=W.checked}))}if(t.config.event_duration&&t.config.auto_end_date){var Z=function(){t.config.auto_end_date&&t.config.event_duration&&(o=t.date.add(h[0]._date,D[0].value,"minute"),c=new Date(o.getTime()+60*t.config.event_duration*1e3),h[1].value=t.templates.calendar_time(c),h[1]._date=t.date.date_part(new Date(c)),D[1].value=60*c.getHours()+c.getMinutes())};D[0].$_eventAttached||D[0].addEventListener("change",Z)}function re(_e,he,be){V(_e,he,be),_e.value=t.templates.calendar_time(he),_e._date=t.date.date_part(new Date(he))}function oe(_e){for(var he=i._time_values,be=60*_e.getHours()+_e.getMinutes(),Ae=be,He=!1,Ne=0;Ne<he.length;Ne++){var Ve=he[Ne];if(Ve===be){He=!0;break}Ve<be&&(Ae=Ve)}return He||Ae?He?be:Ae:-1}re(h[0],_.start_date,0),re(h[1],_.end_date,1),V=function(){},D[0].value=oe(_.start_date),D[1].value=oe(_.end_date)},get_value:function(a,v){var _=a.getElementsByTagName("input"),i=a.getElementsByTagName("select");return v.start_date=t.date.add(_[0]._date,i[0].value,"minute"),v.end_date=t.date.add(_[1]._date,i[1].value,"minute"),v.end_date<=v.start_date&&(v.end_date=t.date.add(v.start_date,t.config.time_step,"minute")),{start_date:new Date(v.start_date),end_date:new Date(v.end_date)}},focus:function(a){}},t.linkCalendar=function(a,v){var _=function(){var o=new Date(t._date.valueOf());return v&&(o=v(o)),o.setDate(1),t.updateCalendar(a,o),!0};t.attachEvent("onViewChange",_),t.attachEvent("onXLE",_),t.attachEvent("onEventAdded",_),t.attachEvent("onEventChanged",_),t.attachEvent("onEventDeleted",_),_()},t._markCalendarCurrentDate=function(a){var v=t.getState(),_=v.min_date,i=v.max_date,o=v.mode,c=t.date.month_start(new Date(a._date)),h=t.date.add(c,1,"month");if(!({month:!0,year:!0,agenda:!0,grid:!0}[o]||_.valueOf()<=c.valueOf()&&i.valueOf()>=h.valueOf()))for(var D=_;D.valueOf()<i.valueOf();)c.valueOf()<=D.valueOf()&&h>D&&t.markCalendar(a,D,"dhx_calendar_click"),D=t.date.add(D,1,"day")},t.attachEvent("onEventCancel",function(){t.destroyCalendar(null,!0)}),t.attachEvent("onDestroy",function(){t.destroyCalendar()})},monthheight:function(t){t.attachEvent("onTemplatesReady",function(){t.xy.scroll_width=0;var j=t.render_view_data;t.render_view_data=function(){var v=this._els.dhx_cal_data[0];v.firstChild._h_fix=!0,j.apply(t,arguments);var _=parseInt(v.style.height);v.style.height="1px",v.style.height=v.scrollHeight+"px",this._obj.style.height=this._obj.clientHeight+v.scrollHeight-_+"px"};var a=t._reset_month_scale;t._reset_month_scale=function(v,_,i,o){var c={clientHeight:100};a.apply(t,[c,_,i,o]),v.innerHTML=c.innerHTML}})},multisection:function(t){Te("Multisection",t.assert)},multisource:function(t){var j=t._load;t._load=function(a,v){if("object"==It(a=a||this._load_url))for(var _=(c=void 0,(c=function(){}).prototype=this._loaded,c),i=0;i<a.length;i++)this._loaded=new _,j.call(this,a[i],v);else j.apply(this,arguments);var c}},mvc:function(t){var j,a={use_id:!1};function v(o){var c={};for(var h in o)0!==h.indexOf("_")&&(c[h]=o[h]);return a.use_id||delete c.id,c}function _(o){o._not_render=!1,o._render_wait&&o.render_view_data(),o._loading=!1,o.callEvent("onXLE",[])}function i(o){return a.use_id?o.id:o.cid}t.backbone=function(o,c){c&&(a=c),o.bind("change",function(V,T){var W=i(V),z=t._events[W]=V.toJSON();z.id=W,t._init_event(z),clearTimeout(j),j=setTimeout(function(){t.updateView()},1)}),o.bind("remove",function(V,T){var W=i(V);t._events[W]&&t.deleteEvent(W)});var h=[];function D(){h.length&&(t.parse(h,"json"),h=[])}o.bind("add",function(V,T){var W=i(V);if(!t._events[W]){var z=V.toJSON();z.id=W,t._init_event(z),h.push(z),1==h.length&&setTimeout(D,1)}}),o.bind("request",function(V){var T;V instanceof Backbone.Collection&&((T=t)._loading=!0,T._not_render=!0,T.callEvent("onXLS",[]))}),o.bind("sync",function(V){V instanceof Backbone.Collection&&_(t)}),o.bind("error",function(V){V instanceof Backbone.Collection&&_(t)}),t.attachEvent("onEventCreated",function(V){var T=new o.model(t.getEvent(V));return t._events[V]=T.toJSON(),t._events[V].id=V,!0}),t.attachEvent("onEventAdded",function(V){if(!o.get(V)){var T=v(t.getEvent(V)),W=new o.model(T),z=i(W);z!=V&&this.changeEventId(V,z),o.add(W),o.trigger("scheduler:add",W)}return!0}),t.attachEvent("onEventChanged",function(V){var T=o.get(V),W=v(t.getEvent(V));return T.set(W),o.trigger("scheduler:change",T),!0}),t.attachEvent("onEventDeleted",function(V){var T=o.get(V);return T&&(o.trigger("scheduler:remove",T),o.remove(V)),!0})}},outerdrag:function(t){t.attachEvent("onTemplatesReady",function(){var j,a=new dhtmlDragAndDropObject,v=a.stopDrag;function _(i,o,c,h){if(!t.checkEvent("onBeforeExternalDragIn")||t.callEvent("onBeforeExternalDragIn",[i,o,c,h,j])){var D=t.attachEvent("onEventCreated",function(Z){t.callEvent("onExternalDragIn",[Z,i,j])||(this._drag_mode=this._drag_id=null,this.deleteEvent(Z))}),V=t.getActionData(j),T={start_date:new Date(V.date)};if(t.matrix&&t.matrix[t._mode]){var W=t.matrix[t._mode];T[W.y_property]=V.section;var z=t._locate_cell_timeline(j);T.start_date=W._trace_x[z.x],T.end_date=t.date.add(T.start_date,W.x_step,W.x_unit)}t._props&&t._props[t._mode]&&(T[t._props[t._mode].map_to]=V.section),t.addEventNow(T),t.detachEvent(D)}}a.stopDrag=function(i){return j=i,v.apply(this,arguments)},a.addDragLanding(t._els.dhx_cal_data[0],{_drag:function(i,o,c,h){_(i,o,c,h)},_dragIn:function(i,o){return i},_dragOut:function(i){return this}}),dhtmlx.DragControl&&dhtmlx.DragControl.addDrop(t._els.dhx_cal_data[0],{onDrop:function(i,o,c,h){var D=dhtmlx.DragControl.getMaster(i);j=h,_(i,D,o,h.target||h.srcElement)},onDragIn:function(i,o,c){return o}},!0)})},pdf:function(t){var j,a,v=new RegExp("<[^>]*>","g"),_=new RegExp("<br[^>]*>","g");function i(Ne){return Ne.replace(_,"\n").replace(v,"")}function o(Ne,Ve){Ne=parseFloat(Ne),Ve=parseFloat(Ve),isNaN(Ve)||(Ne-=Ve);var Se=h(Ne);return Ne=Ne-Se.width+Se.cols*j,isNaN(Ne)?"auto":100*Ne/j}function c(Ne,Ve,Se){Ne=parseFloat(Ne),Ve=parseFloat(Ve),!isNaN(Ve)&&Se&&(Ne-=Ve);var Fe=h(Ne);return Ne=Ne-Fe.width+Fe.cols*j,isNaN(Ne)?"auto":100*Ne/(j-(isNaN(Ve)?0:Ve))}function h(Ne){for(var Ve=0,Se=t._els.dhx_cal_header[0].childNodes,Fe=Se[1]?Se[1].childNodes:Se[0].childNodes,Oe=0;Oe<Fe.length;Oe++){var ht=parseFloat((Fe[Oe].style?Fe[Oe]:Fe[Oe].parentNode).style.width);if(!(Ne>ht))break;Ne-=ht+1,Ve+=ht+1}return{width:Ve,cols:Oe}}function D(Ne){return Ne=parseFloat(Ne),isNaN(Ne)?"auto":100*Ne/a}function V(Ne,Ve){return(window.getComputedStyle?window.getComputedStyle(Ne,null)[Ve]:Ne.currentStyle?Ne.currentStyle[Ve]:null)||""}function T(Ne,Ve){for(var Se=parseInt(Ne.style.left,10),Fe=0;Fe<t._cols.length;Fe++)if((Se-=t._cols[Fe])<0)return Fe;return Ve}function W(Ne,Ve){for(var Se=parseInt(Ne.style.top,10),Fe=0;Fe<t._colsS.heights.length;Fe++)if(t._colsS.heights[Fe]>Se)return Fe;return Ve}function z(Ne){return Ne?"<"+Ne+">":""}function Z(Ne){return Ne?"</"+Ne+">":""}function re(Ne,Ve,Se,Fe){var Oe="<"+Ne+" profile='"+Ve+"'";return Se&&(Oe+=" header='"+Se+"'"),Fe&&(Oe+=" footer='"+Fe+"'"),Oe+">"}function oe(){var Ne="",Ve=t._mode;if(t.matrix&&t.matrix[t._mode]&&(Ve="cell"==t.matrix[t._mode].render?"matrix":"timeline"),Ne+="<scale mode='"+Ve+"' today='"+t._els.dhx_cal_date[0].innerHTML+"'>","week_agenda"==t._mode)for(var Se=t._els.dhx_cal_data[0].getElementsByTagName("DIV"),Fe=0;Fe<Se.length;Fe++)"dhx_wa_scale_bar"==Se[Fe].className&&(Ne+="<column>"+i(Se[Fe].innerHTML)+"</column>");else if("agenda"==t._mode||"map"==t._mode)Ne+="<column>"+i((Se=t._els.dhx_cal_header[0].childNodes[0].childNodes)[0].innerHTML)+"</column><column>"+i(Se[1].innerHTML)+"</column>";else if("year"==t._mode)for(Se=t._els.dhx_cal_data[0].childNodes,Fe=0;Fe<Se.length;Fe++)Ne+="<month label='"+i(Se[Fe].querySelector(".dhx_year_month").innerHTML)+"'>",Ne+=he(Se[Fe].querySelector(".dhx_year_week").childNodes),Ne+=_e(Se[Fe].querySelector(".dhx_year_body")),Ne+="</month>";else{Ne+="<x>",Ne+=he(Se=t._els.dhx_cal_header[0].childNodes),Ne+="</x>";var Oe=t._els.dhx_cal_data[0];if(t.matrix&&t.matrix[t._mode]){for(Ne+="<y>",Fe=0;Fe<Oe.firstChild.rows.length;Fe++)Ne+="<row><![CDATA["+i(Oe.firstChild.rows[Fe].cells[0].innerHTML)+"]]></row>";Ne+="</y>",a=Oe.firstChild.rows[0].cells[0].offsetHeight}else if("TABLE"==Oe.firstChild.tagName)Ne+=_e(Oe);else{for(Oe=Oe.childNodes[Oe.childNodes.length-1];-1==Oe.className.indexOf("dhx_scale_holder");)Oe=Oe.previousSibling;for(Oe=Oe.childNodes,Ne+="<y>",Fe=0;Fe<Oe.length;Fe++)Ne+="\n<row><![CDATA["+i(Oe[Fe].innerHTML)+"]]></row>";Ne+="</y>",a=Oe[0].offsetHeight}}return Ne+"</scale>"}function _e(Ne){for(var Ve="",Se=Ne.querySelectorAll("tr"),Fe=0;Fe<Se.length;Fe++){for(var Oe=[],at=Se[Fe].querySelectorAll("td"),ht=0;ht<at.length;ht++)Oe.push(at[ht].querySelector(".dhx_month_head").innerHTML);Ve+="\n<row height='"+at[0].offsetHeight+"'><![CDATA["+i(Oe.join("|"))+"]]></row>",a=at[0].offsetHeight}return Ve}function he(Ne){var Ve,Se="";t.matrix&&t.matrix[t._mode]&&(t.matrix[t._mode].second_scale&&(Ve=Ne[1].childNodes),Ne=Ne[0].childNodes);for(var Fe=0;Fe<Ne.length;Fe++)Se+="\n<column><![CDATA["+i(Ne[Fe].innerHTML)+"]]></column>";if(j=Ne[0].offsetWidth,Ve){var Oe=0,at=Ne[0].offsetWidth,ht=1;for(Fe=0;Fe<Ve.length;Fe++)Se+="\n<column second_scale='"+ht+"'><![CDATA["+i(Ve[Fe].innerHTML)+"]]></column>",(Oe+=Ve[Fe].offsetWidth)>=at&&(at+=Ne[ht]?Ne[ht].offsetWidth:0,ht++),j=Ve[0].offsetWidth}return Se}function be(Ne){var Ve="",Se=t._rendered,Fe=t.matrix&&t.matrix[t._mode];if("agenda"==t._mode||"map"==t._mode)for(var Oe=0;Oe<Se.length;Oe++)Ve+="<event><head><![CDATA["+i(Se[Oe].childNodes[0].innerHTML)+"]]></head><body><![CDATA["+i(Se[Oe].childNodes[2].innerHTML)+"]]></body></event>";else if("week_agenda"==t._mode)for(Oe=0;Oe<Se.length;Oe++)Ve+="<event day='"+Se[Oe].parentNode.getAttribute("day")+"'><body>"+i(Se[Oe].innerHTML)+"</body></event>";else if("year"==t._mode)for(Se=t.get_visible_events(),Oe=0;Oe<Se.length;Oe++){var at=Se[Oe].start_date;for(at.valueOf()<t._min_date.valueOf()&&(at=t._min_date);at<Se[Oe].end_date;){var ht=at.getMonth()+12*(at.getFullYear()-t._min_date.getFullYear())-t.week_starts._month,lt=t.week_starts[ht]+at.getDate()-1,mt=Ne?V(t._get_year_cell(at),"color"):"",ft=Ne?V(t._get_year_cell(at),"backgroundColor"):"";if(Ve+="<event day='"+lt%7+"' week='"+Math.floor(lt/7)+"' month='"+ht+"' backgroundColor='"+ft+"' color='"+mt+"'></event>",(at=t.date.add(at,1,"day")).valueOf()>=t._max_date.valueOf())break}}else if(Fe&&"cell"==Fe.render)for(Se=t._els.dhx_cal_data[0].getElementsByTagName("TD"),Oe=0;Oe<Se.length;Oe++)mt=Ne?V(Se[Oe],"color"):"",Ve+="\n<event><body backgroundColor='"+(ft=Ne?V(Se[Oe],"backgroundColor"):"")+"' color='"+mt+"'><![CDATA["+i(Se[Oe].innerHTML)+"]]></body></event>";else for(Oe=0;Oe<Se.length;Oe++){var yt,xt;if(t.matrix&&t.matrix[t._mode])yt=o(Se[Oe].style.left),xt=o(Se[Oe].offsetWidth)-1;else{var wt=t.config.use_select_menu_space?0:26;yt=c(Se[Oe].style.left,wt,!0),xt=c(Se[Oe].style.width,wt)-1}if(!isNaN(1*xt)){var Dt=D(Se[Oe].style.top),Rt=D(Se[Oe].style.height),Pt=Se[Oe].className.split(" ")[0].replace("dhx_cal_","");if("dhx_tooltip_line"!==Pt){var Ft=t.getEvent(Se[Oe].getAttribute(t.config.event_attribute));if(Ft){lt=Ft._sday;var Lt=Ft._sweek,Bt=Ft._length||0;if("month"==t._mode)Rt=parseInt(Se[Oe].offsetHeight,10),Dt=parseInt(Se[Oe].style.top,10)-t.xy.month_head_height,lt=T(Se[Oe],lt),Lt=W(Se[Oe],Lt);else if(t.matrix&&t.matrix[t._mode]){lt=0,Lt=Se[Oe].parentNode.parentNode.parentNode.rowIndex;var Ut=a;a=Se[Oe].parentNode.offsetHeight,Dt=D(Se[Oe].style.top),Dt-=.2*Dt,a=Ut}else{if(Se[Oe].parentNode==t._els.dhx_cal_data[0])continue;var zt=t._els.dhx_cal_data[0].childNodes[0],Ht=parseFloat(-1!=zt.className.indexOf("dhx_scale_holder")?zt.style.left:0);yt+=o(Se[Oe].parentNode.style.left,Ht)}Ve+="\n<event week='"+Lt+"' day='"+lt+"' type='"+Pt+"' x='"+yt+"' y='"+Dt+"' width='"+xt+"' height='"+Rt+"' len='"+Bt+"'>","event"==Pt?(Ve+="<header><![CDATA["+i(Se[Oe].childNodes[1].innerHTML)+"]]></header>",mt=Ne?V(Se[Oe].childNodes[2],"color"):"",Ve+="<body backgroundColor='"+(ft=Ne?V(Se[Oe].childNodes[2],"backgroundColor"):"")+"' color='"+mt+"'><![CDATA["+i(Se[Oe].childNodes[2].innerHTML)+"]]></body>"):(mt=Ne?V(Se[Oe],"color"):"",Ve+="<body backgroundColor='"+(ft=Ne?V(Se[Oe],"backgroundColor"):"")+"' color='"+mt+"'><![CDATA["+i(Se[Oe].innerHTML)+"]]></body>"),Ve+="</event>"}}}}return Ve}function Ae(Ne,Ve,Se,Fe,Oe,at){var ht=!1;"fullcolor"==Fe&&(ht=!0,Fe="color"),Fe=Fe||"color";var lt="";if(Ne){var mt=t._date,ft=t._mode;Ve=t.date[Se+"_start"](Ve),Ve=t.date["get_"+Se+"_end"]?t.date["get_"+Se+"_end"](Ve):t.date.add(Ve,1,Se),lt=re("pages",Fe,Oe,at);for(var yt=new Date(Ne);+yt<+Ve;yt=this.date.add(yt,1,Se))this.setCurrentView(yt,Se),lt+=z("page")+oe().replace("\u2013","-")+be(ht)+Z("page");lt+=Z("pages"),this.setCurrentView(mt,ft)}else lt=re("data",Fe,Oe,at)+oe().replace("\u2013","-")+be(ht)+Z("data");return lt}function He(Ne,Ve,Se,Fe,Oe,at,ht){var lt,mt,ft,yt;lt="object"==Tt(Oe)?function(lt){for(var mt="<data>",ft=0;ft<lt.length;ft++)mt+=lt[ft].source.getPDFData(lt[ft].start,lt[ft].end,lt[ft].view,lt[ft].mode,lt[ft].header,lt[ft].footer);return mt+"</data>"}(Oe):Ae.apply(this,[Ne,Ve,Se,Oe,at,ht]),mt=Fe,ft=t.uid(),(yt=document.createElement("div")).style.display="none",document.body.appendChild(yt),yt.innerHTML='<form id="'+ft+'" method="post" target="_blank" action="'+mt+'" accept-charset="utf-8" enctype="application/x-www-form-urlencoded"><input type="hidden" name="mycoolxmlbody"/> </form>',document.getElementById(ft).firstChild.value=encodeURIComponent(lt),document.getElementById(ft).submit(),yt.parentNode.removeChild(yt)}t.getPDFData=Ae,t.toPDF=function(Ne,Ve,Se,Fe){return He.apply(this,[null,null,null,Ne,Ve,Se,Fe])},t.toPDFRange=function(Ne,Ve,Se,Fe,Oe,at,ht){return"string"==typeof Ne&&(Ne=t.templates.api_date(Ne),Ve=t.templates.api_date(Ve)),He.apply(this,arguments)}},quick_info:function(t){t.config.icons_select=["icon_details","icon_delete"],t.config.details_on_create=!0,t.config.show_quick_info=!0,t.xy.menu_width=0,t.attachEvent("onClick",function(j){if(t.config.show_quick_info)return t.showQuickInfo(j),!0}),function(){for(var j=["onEmptyClick","onViewChange","onLightbox","onBeforeEventDelete","onBeforeDrag"],a=function(){return t.hideQuickInfo(!0),!0},v=0;v<j.length;v++)t.attachEvent(j[v],a)}(),t.templates.quick_info_title=function(j,a,v){return v.text.substr(0,50)},t.templates.quick_info_content=function(j,a,v){return v.details||v.text},t.templates.quick_info_date=function(j,a,v){return t.isOneDayEvent(v)&&t.config.rtl?t.templates.day_date(j,a,v)+" "+t.templates.event_header(a,j,v):t.isOneDayEvent(v)?t.templates.day_date(j,a,v)+" "+t.templates.event_header(j,a,v):t.config.rtl?t.templates.week_date(a,j,v):t.templates.week_date(j,a,v)},t.showQuickInfo=function(j){if(j!=this._quick_info_box_id&&(this.hideQuickInfo(!0),!1!==this.callEvent("onBeforeQuickInfo",[j]))){var a=this._get_event_counter_part(j);a&&(this._quick_info_box=this._init_quick_info(a),this._fill_quick_data(j),this._show_quick_info(a),this.callEvent("onQuickInfo",[j]))}},function(){function j(a){a=a||"";var v,_=parseFloat(a),i=a.match(/m?s/);switch(i&&(i=i[0]),i){case"s":v=1e3*_;break;case"ms":v=_;break;default:v=0}return v}t.hideQuickInfo=function(a){var v=this._quick_info_box,_=this._quick_info_box_id;if(this._quick_info_box_id=0,v&&v.parentNode){var i=v.offsetWidth;if(t.config.quick_info_detached)return this.callEvent("onAfterQuickInfo",[_]),v.parentNode.removeChild(v);if("auto"==v.style.right?v.style.left=-i+"px":v.style.right=-i+"px",a)v.parentNode.removeChild(v);else{var o;window.getComputedStyle?o=window.getComputedStyle(v,null):v.currentStyle&&(o=v.currentStyle);var c=j(o["transition-delay"])+j(o["transition-duration"]);setTimeout(function(){v.parentNode&&v.parentNode.removeChild(v)},c)}this.callEvent("onAfterQuickInfo",[_])}}}(),t.event(window,"keydown",function(j){27==j.keyCode&&t.hideQuickInfo()}),t._show_quick_info=function(j){var a=t._quick_info_box;t._obj.appendChild(a);var v=a.offsetWidth,_=a.offsetHeight;if(t.config.quick_info_detached){var i=j.left-j.dx*(v-j.width);i+v>window.innerWidth&&(i=window.innerWidth-v),i=Math.max(0,i),a.style.left=i+"px",a.style.top=j.top-(j.dy?_:-j.height)+"px"}else a.style.top=this.xy.scale_height+this.xy.nav_height+20+"px",1==j.dx?(a.style.right="auto",a.style.left=-v+"px",setTimeout(function(){a.style.left="-10px"},1)):(a.style.left="auto",a.style.right=-v+"px",setTimeout(function(){a.style.right="-10px"},1)),a.className=a.className.replace(" dhx_qi_left","").replace(" dhx_qi_right","")+" dhx_qi_"+(1==j.dx?"left":"right")},t.attachEvent("onTemplatesReady",function(){if(t.hideQuickInfo(),this._quick_info_box){var j=this._quick_info_box;j.parentNode&&j.parentNode.removeChild(j),this._quick_info_box=null}}),t._quick_info_onscroll_handler=function(j){t.hideQuickInfo()},t._init_quick_info=function(){if(!this._quick_info_box){var j=t.xy,a=this._quick_info_box=document.createElement("div");this._waiAria.quickInfoAttr(a),a.className="dhx_cal_quick_info",t.$testmode&&(a.className+=" dhx_no_animate"),t.config.rtl&&(a.className+=" dhx_quick_info_rtl");var v=this._waiAria.quickInfoHeaderAttrString(),_='<div class="dhx_cal_qi_title" style="height:'+j.quick_info_title+'px" '+v+'><div class="dhx_cal_qi_tcontent"></div><div  class="dhx_cal_qi_tdate"></div></div><div class="dhx_cal_qi_content"></div>';_+='<div class="dhx_cal_qi_controls" style="height:'+j.quick_info_buttons+'px">';for(var i=t.config.icons_select,o=0;o<i.length;o++)_+="<div "+(v=this._waiAria.quickInfoButtonAttrString(this.locale.labels[i[o]]))+' class="dhx_qi_big_icon '+i[o]+'" title="'+t.locale.labels[i[o]]+"\"><div class='dhx_menu_icon "+i[o]+"'></div><div>"+t.locale.labels[i[o]]+"</div></div>";a.innerHTML=_+="</div>",t.event(a,"click",function(c){t._qi_button_click(c.target||c.srcElement)}),t.config.quick_info_detached&&(t._detachDomEvent(t._els.dhx_cal_data[0],"scroll",t._quick_info_onscroll_handler),t.event(t._els.dhx_cal_data[0],"scroll",t._quick_info_onscroll_handler))}return this._quick_info_box},t._qi_button_click=function(j){if(j&&j!=t._quick_info_box){var v=t._getClassName(j);if(-1!=v.indexOf("_icon")){var _=t._quick_info_box_id;t._click.buttons[v.split(" ")[1].replace("icon_","")](_)}else t._qi_button_click(j.parentNode)}},t._get_event_counter_part=function(j){for(var a=t.getRenderedEvent(j),v=0,_=0,i=a;i&&i!=t._obj;)v+=i.offsetLeft,_+=i.offsetTop-i.scrollTop,i=i.offsetParent;return i?{left:v,top:_,dx:v+a.offsetWidth/2>t._x/2?1:0,dy:_+a.offsetHeight/2>t._y/2?1:0,width:a.offsetWidth,height:a.offsetHeight}:0},t._fill_quick_data=function(j){var a=t.getEvent(j),v=t._quick_info_box;t._quick_info_box_id=j;var _={content:t.templates.quick_info_title(a.start_date,a.end_date,a),date:t.templates.quick_info_date(a.start_date,a.end_date,a)},i=v.firstChild.firstChild;i.innerHTML=_.content,i.nextSibling.innerHTML=_.date,t._waiAria.quickInfoHeader(v,[_.content,_.date].join(" ")),v.firstChild.nextSibling.innerHTML=t.templates.quick_info_content(a.start_date,a.end_date,a)}},readonly:function(t){t.attachEvent("onTemplatesReady",function(){var j;t.form_blocks.recurring&&(j=t.form_blocks.recurring.set_value);var a=t.config.buttons_left.slice(),v=t.config.buttons_right.slice();function _(h,D,V,T){for(var W=D.getElementsByTagName(h),z=V.getElementsByTagName(h),Z=z.length-1;Z>=0;Z--)if(V=z[Z],T){var re=document.createElement("span");re.className="dhx_text_disabled",re.innerHTML=T(W[Z]),V.parentNode.insertBefore(re,V),V.parentNode.removeChild(V)}else V.disabled=!0,D.checked&&(V.checked=!0)}t.attachEvent("onBeforeLightbox",function(h){this.config.readonly_form||this.getEvent(h).readonly?this.config.readonly_active=!0:(this.config.readonly_active=!1,t.config.buttons_left=a.slice(),t.config.buttons_right=v.slice(),t.form_blocks.recurring&&(t.form_blocks.recurring.set_value=j));var D=this.config.lightbox.sections;if(this.config.readonly_active){for(var V=0;V<D.length;V++)"recurring"==D[V].type&&this.config.readonly_active&&t.form_blocks.recurring&&(t.form_blocks.recurring.set_value=function(he,be,Ae){var He=t.$domHelpers.closest(he,".dhx_wrap_section");He.querySelector(".dhx_cal_lsection").display="none",He.querySelector(".dhx_form_repeat").display="none",He.style.display="none",t.setLightboxSize()});var T=["dhx_delete_btn","dhx_save_btn"],W=[t.config.buttons_left,t.config.buttons_right];for(V=0;V<T.length;V++)for(var z=T[V],Z=0;Z<W.length;Z++){for(var re=W[Z],oe=-1,_e=0;_e<re.length;_e++)if(re[_e]==z){oe=_e;break}-1!=oe&&re.splice(oe,1)}}return this.resetLightbox(),!0});var i=t._fill_lightbox;t._fill_lightbox=function(){var h=this.getLightbox();this.config.readonly_active&&(h.style.visibility="hidden",h.style.display="block");var D=i.apply(this,arguments);if(this.config.readonly_active&&(h.style.visibility="",h.style.display="none"),this.config.readonly_active){var V=this.getLightbox(),T=this._lightbox_r=V.cloneNode(!0);T.id=t.uid(),T.className+=" dhx_cal_light_readonly",_("textarea",V,T,function(W){return W.value}),_("input",V,T,!1),_("select",V,T,function(W){return W.options.length?W.options[Math.max(W.selectedIndex||0,0)].text:""}),V.parentNode.insertBefore(T,V),o.call(this,T),t._lightbox&&t._lightbox.parentNode.removeChild(t._lightbox),this._lightbox=T,t.config.drag_lightbox&&t.event(T.firstChild,"mousedown",t._ready_to_dnd),t._init_lightbox_events(),this.setLightboxSize()}return D};var o=t.showCover;t.showCover=function(){this.config.readonly_active||o.apply(this,arguments)};var c=t.hide_lightbox;t.hide_lightbox=function(){return this._lightbox_r&&(this._lightbox_r.parentNode.removeChild(this._lightbox_r),this._lightbox_r=this._lightbox=null),c.apply(this,arguments)}})},recurring:function(t){function j(){var _=t.formSection("recurring");if(_||(_=a("recurring")),!_)throw new Error(["Can't locate the Recurring form section.","Make sure that you have the recurring control on the lightbox configuration https://docs.dhtmlx.com/scheduler/recurring_events.html#recurringlightbox ",'and that the recurring control has name "recurring":',"","scheduler.config.lightbox.sections = [",'\t{name:"recurring", ... }',"];"].join("\n"));return _}function a(_){for(var i=0;i<t.config.lightbox.sections.length;i++){var o=t.config.lightbox.sections[i];if(o.type===_)return t.formSection(o.name)}return null}function v(_){return new Date(_.getFullYear(),_.getMonth(),_.getDate(),_.getHours(),_.getMinutes(),_.getSeconds(),0)}var _;t.config.occurrence_timestamp_in_utc=!1,t.config.recurring_workdays=[1,2,3,4,5],t.form_blocks.recurring={_get_node:function(_){return"string"==typeof _&&(_=document.getElementById(_)),"none"==_.style.display&&(_.style.display=""),_},_outer_html:function(_){return _.outerHTML||(i=_,(c=document.createElement("div")).appendChild(i.cloneNode(!0)),o=c.innerHTML,c=null,o);var i,o,c},render:function(_){if(_.form){var i=t.form_blocks.recurring,o=i._get_node(_.form),c=i._outer_html(o);return o.style.display="none",c}var h=t.locale.labels;return'<div class="dhx_form_repeat"> <form> <div class="dhx_repeat_left"> <label><input class="dhx_repeat_radio" type="radio" name="repeat" value="day" />'+h.repeat_radio_day+'</label><br /> <label><input class="dhx_repeat_radio" type="radio" name="repeat" value="week"/>'+h.repeat_radio_week+'</label><br /> <label><input class="dhx_repeat_radio" type="radio" name="repeat" value="month" checked />'+h.repeat_radio_month+'</label><br /> <label><input class="dhx_repeat_radio" type="radio" name="repeat" value="year" />'+h.repeat_radio_year+'</label> </div> <div class="dhx_repeat_divider"></div> <div class="dhx_repeat_center"> <div style="display:none;" id="dhx_repeat_day"> <label><input class="dhx_repeat_radio" type="radio" name="day_type" value="d"/>'+h.repeat_radio_day_type+'</label><label><input class="dhx_repeat_text" type="text" name="day_count" value="1" />'+h.repeat_text_day_count+'</label><br /> <label><input class="dhx_repeat_radio" type="radio" name="day_type" checked value="w"/>'+h.repeat_radio_day_type2+'</label> </div> <div style="display:none;" id="dhx_repeat_week"><label>'+h.repeat_week+'<input class="dhx_repeat_text" type="text" name="week_count" value="1" /></label><span>'+h.repeat_text_week_count+'</span><br /> <table class="dhx_repeat_days"> <tr> <td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="1" />'+h.day_for_recurring[1]+'</label><br /> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="4" />'+h.day_for_recurring[4]+'</label> </td> <td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="2" />'+h.day_for_recurring[2]+'</label><br /> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="5" />'+h.day_for_recurring[5]+'</label> </td> <td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="3" />'+h.day_for_recurring[3]+'</label><br /> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="6" />'+h.day_for_recurring[6]+'</label> </td> <td> <label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="0" />'+h.day_for_recurring[0]+'</label><br /><br /> </td> </tr> </table> </div> <div id="dhx_repeat_month"> <label class = "dhx_repeat_month_label"><input class="dhx_repeat_radio" type="radio" name="month_type" value="d"/>'+h.repeat_radio_month_type+'</label><label><input class="dhx_repeat_text" type="text" name="month_day" value="1" />'+h.repeat_text_month_day+'</label><label><input class="dhx_repeat_text" type="text" name="month_count" value="1" />'+h.repeat_text_month_count+'</label><br /> <label class = "dhx_repeat_month_label"><input class="dhx_repeat_radio" type="radio" name="month_type" checked value="w"/>'+h.repeat_radio_month_start+'</label><input class="dhx_repeat_text" type="text" name="month_week2" value="1" /><label><select name="month_day2">\t<option value="1" selected >'+t.locale.date.day_full[1]+'<option value="2">'+t.locale.date.day_full[2]+'<option value="3">'+t.locale.date.day_full[3]+'<option value="4">'+t.locale.date.day_full[4]+'<option value="5">'+t.locale.date.day_full[5]+'<option value="6">'+t.locale.date.day_full[6]+'<option value="0">'+t.locale.date.day_full[0]+"</select>"+h.repeat_text_month_count2_before+'</label><label><input class="dhx_repeat_text" type="text" name="month_count2" value="1" />'+h.repeat_text_month_count2_after+'</label><br /> </div> <div style="display:none;" id="dhx_repeat_year"> <label class = "dhx_repeat_year_label"><input class="dhx_repeat_radio" type="radio" name="year_type" value="d"/>'+h.repeat_radio_day_type+'</label><label><input class="dhx_repeat_text" type="text" name="year_day" value="1" />'+h.repeat_text_year_day+'</label><label><select name="year_month"><option value="0" selected >'+h.month_for_recurring[0]+'<option value="1">'+h.month_for_recurring[1]+'<option value="2">'+h.month_for_recurring[2]+'<option value="3">'+h.month_for_recurring[3]+'<option value="4">'+h.month_for_recurring[4]+'<option value="5">'+h.month_for_recurring[5]+'<option value="6">'+h.month_for_recurring[6]+'<option value="7">'+h.month_for_recurring[7]+'<option value="8">'+h.month_for_recurring[8]+'<option value="9">'+h.month_for_recurring[9]+'<option value="10">'+h.month_for_recurring[10]+'<option value="11">'+h.month_for_recurring[11]+"</select>"+h.select_year_month+'</label><br /> <label class = "dhx_repeat_year_label"><input class="dhx_repeat_radio" type="radio" name="year_type" checked value="w"/>'+h.repeat_year_label+'</label><input class="dhx_repeat_text" type="text" name="year_week2" value="1" /><select name="year_day2"><option value="1" selected >'+t.locale.date.day_full[1]+'<option value="2">'+t.locale.date.day_full[2]+'<option value="3">'+t.locale.date.day_full[3]+'<option value="4">'+t.locale.date.day_full[4]+'<option value="5">'+t.locale.date.day_full[5]+'<option value="6">'+t.locale.date.day_full[6]+'<option value="7">'+t.locale.date.day_full[0]+"</select>"+h.select_year_day2+'<select name="year_month2"><option value="0" selected >'+h.month_for_recurring[0]+'<option value="1">'+h.month_for_recurring[1]+'<option value="2">'+h.month_for_recurring[2]+'<option value="3">'+h.month_for_recurring[3]+'<option value="4">'+h.month_for_recurring[4]+'<option value="5">'+h.month_for_recurring[5]+'<option value="6">'+h.month_for_recurring[6]+'<option value="7">'+h.month_for_recurring[7]+'<option value="8">'+h.month_for_recurring[8]+'<option value="9">'+h.month_for_recurring[9]+'<option value="10">'+h.month_for_recurring[10]+'<option value="11">'+h.month_for_recurring[11]+'</select><br /> </div> </div> <div class="dhx_repeat_divider"></div> <div class="dhx_repeat_right"> <label><input class="dhx_repeat_radio" type="radio" name="end" checked/>'+h.repeat_radio_end+'</label><br /> <label><input class="dhx_repeat_radio" type="radio" name="end" />'+h.repeat_radio_end2+'</label><input class="dhx_repeat_text" type="text" name="occurences_count" value="1" />'+h.repeat_text_occurences_count+'<br /> <label><input class="dhx_repeat_radio" type="radio" name="end" />'+h.repeat_radio_end3+'</label><input class="dhx_repeat_date" type="text" name="date_of_end" value="'+t.config.repeat_date_of_end+'" /><br /> </div> </form> </div> <div style="clear:both"> </div>'},_ds:{},_get_form_node:function(_,i,o){var c=_[i];if(!c)return null;if(c.nodeName)return c;if(c.length)for(var h=0;h<c.length;h++)if(c[h].value==o)return c[h]},_get_node_value:function(_,i,o){var c=_[i];if(!c)return"";if(c.length){if(o){for(var h=[],D=0;D<c.length;D++)c[D].checked&&h.push(c[D].value);return h}for(D=0;D<c.length;D++)if(c[D].checked)return c[D].value}return c.value?o?[c.value]:c.value:void 0},_get_node_numeric_value:function(_,i){return 1*t.form_blocks.recurring._get_node_value(_,i)||0},_set_node_value:function(_,i,o){var c=_[i];if(c)if(c.name==i)c.value=o;else if(c.length)for(var h="object"==St(o),D=0;D<c.length;D++)(h||c[D].value==o)&&(c[D].checked=h?!!o[c[D].value]:!!o)},_init_set_value:function(_,i,o){var c=t.form_blocks.recurring,h=c._get_node_value,D=c._set_node_value;t.form_blocks.recurring._ds={start:o.start_date,end:o._end_date};var V=t.date.str_to_date(t.config.repeat_date,!1,!0),W=t.date.date_to_str(t.config.repeat_date),z=_.getElementsByTagName("FORM")[0],Z={};function re(Se){for(var Fe=0;Fe<Se.length;Fe++){var Oe=Se[Fe];Oe.name&&(Z[Oe.name]?Z[Oe.name].nodeType?Z[Oe.name]=[Z[Oe.name],Oe]:Z[Oe.name].push(Oe):Z[Oe.name]=Oe)}}if(re(z.getElementsByTagName("INPUT")),re(z.getElementsByTagName("SELECT")),!t.config.repeat_date_of_end){var oe=t.date.date_to_str(t.config.repeat_date);t.config.repeat_date_of_end=oe(t.date.add(t._currentDate(),30,"day"))}D(Z,"date_of_end",t.config.repeat_date_of_end);var _e=function(Se){return document.getElementById(Se)||{style:{}}};function he(){_e("dhx_repeat_day").style.display="none",_e("dhx_repeat_week").style.display="none",_e("dhx_repeat_month").style.display="none",_e("dhx_repeat_year").style.display="none",_e("dhx_repeat_"+this.value).style.display="block",t.setLightboxSize()}function be(Se,Fe){var Oe=Se.end;if(Oe.length)if(Oe[0].value&&"on"!=Oe[0].value)for(var at=0;at<Oe.length;at++)Oe[at].value==Fe&&(Oe[at].checked=!0);else{var ht=0;switch(Fe){case"no":ht=0;break;case"date_of_end":ht=2;break;default:ht=1}Oe[ht].checked=!0}else Oe.value=Fe}t.form_blocks.recurring._get_repeat_code=function(Se){var Fe=[h(Z,"repeat")];for(Ae[Fe[0]](Fe,Se);Fe.length<5;)Fe.push("");var Oe="",at=function(ht){var lt=ht.end;if(lt.length){for(var mt=0;mt<lt.length;mt++)if(lt[mt].checked)return lt[mt].value&&"on"!=lt[mt].value?lt[mt].value:mt?2==mt?"date_of_end":"occurences_count":"no"}else if(lt.value)return lt.value;return"no"}(Z);return"no"==at?(Se.end=new Date(9999,1,1),Oe="no"):"date_of_end"==at?Se.end=function(Se){var Fe=V(Se);return t.config.include_end_by&&(Fe=t.date.add(Fe,1,"day")),Fe}(h(Z,"date_of_end")):(t.transpose_type(Fe.join("_")),Oe=Math.max(1,h(Z,"occurences_count")),Se.end=t.date["add_"+Fe.join("_")](new Date(Se.start),Oe+0,{start_date:Se.start})||Se.start),Fe.join("_")+"#"+Oe};var Ae={month:function(Se,Fe){var Oe=t.form_blocks.recurring._get_node_value,at=t.form_blocks.recurring._get_node_numeric_value;"d"==Oe(Z,"month_type")?(Se.push(Math.max(1,at(Z,"month_count"))),Fe.start.setDate(Oe(Z,"month_day"))):(Se.push(Math.max(1,at(Z,"month_count2"))),Se.push(Oe(Z,"month_day2")),Se.push(Math.max(1,at(Z,"month_week2"))),t.config.repeat_precise||Fe.start.setDate(1)),Fe._start=!0},week:function(Se,Fe){var Oe=t.form_blocks.recurring._get_node_value;Se.push(Math.max(1,(0,t.form_blocks.recurring._get_node_numeric_value)(Z,"week_count"))),Se.push(""),Se.push("");for(var ht=[],lt=Oe(Z,"week_day",!0),mt=Fe.start.getDay(),ft=!1,yt=0;yt<lt.length;yt++)ht.push(lt[yt]),ft=ft||lt[yt]==mt;ht.length||(ht.push(mt),ft=!0),ht.sort(),t.config.repeat_precise?ft||(t.transpose_day_week(Fe.start,ht,1,7),Fe._start=!0):(Fe.start=t.date.week_start(Fe.start),Fe._start=!0),Se.push(ht.join(","))},day:function(Se){var Oe=t.form_blocks.recurring._get_node_numeric_value;"d"==(0,t.form_blocks.recurring._get_node_value)(Z,"day_type")?Se.push(Math.max(1,Oe(Z,"day_count"))):(Se.push("week"),Se.push(1),Se.push(""),Se.push(""),Se.push(t.config.recurring_workdays.join(",")),Se.splice(0,1))},year:function(Se,Fe){var Oe=t.form_blocks.recurring._get_node_value;"d"==Oe(Z,"year_type")?(Se.push("1"),Fe.start.setMonth(0),Fe.start.setDate(Oe(Z,"year_day")),Fe.start.setMonth(Oe(Z,"year_month"))):(Se.push("1"),Se.push(Oe(Z,"year_day2")),Se.push(Oe(Z,"year_week2")),Fe.start.setDate(1),Fe.start.setMonth(Oe(Z,"year_month2"))),Fe._start=!0}},He={week:function(Se,Fe){var Oe=t.form_blocks.recurring._set_node_value;Oe(Z,"week_count",Se[1]);for(var at=Se[4].split(","),ht={},lt=0;lt<at.length;lt++)ht[at[lt]]=!0;Oe(Z,"week_day",ht)},month:function(Se,Fe){var Oe=t.form_blocks.recurring._set_node_value;""===Se[2]?(Oe(Z,"month_type","d"),Oe(Z,"month_count",Se[1]),Oe(Z,"month_day",Fe.start.getDate())):(Oe(Z,"month_type","w"),Oe(Z,"month_count2",Se[1]),Oe(Z,"month_week2",Se[3]),Oe(Z,"month_day2",Se[2]))},day:function(Se,Fe){var Oe=t.form_blocks.recurring._set_node_value;Oe(Z,"day_type","d"),Oe(Z,"day_count",Se[1])},year:function(Se,Fe){var Oe=t.form_blocks.recurring._set_node_value;""===Se[2]?(Oe(Z,"year_type","d"),Oe(Z,"year_day",Fe.start.getDate()),Oe(Z,"year_month",Fe.start.getMonth())):(Oe(Z,"year_type","w"),Oe(Z,"year_week2",Se[3]),Oe(Z,"year_day2",Se[2]),Oe(Z,"year_month2",Fe.start.getMonth()))}};t.form_blocks.recurring._set_repeat_code=function(Se,Fe){var Oe=t.form_blocks.recurring._set_node_value,at=Se.split("#");switch(Se=at[0].split("_"),He[Se[0]](Se,Fe),at[1]){case"no":be(Z,"no");break;case"":be(Z,"date_of_end");var ht=Fe.end;t.config.include_end_by&&(ht=t.date.add(ht,-1,"day")),Oe(Z,"date_of_end",W(ht));break;default:be(Z,"occurences_count"),Oe(Z,"occurences_count",at[1])}Oe(Z,"repeat",Se[0]);var lt=t.form_blocks.recurring._get_form_node(Z,"repeat",Se[0]);"SELECT"==lt.nodeName?(lt.dispatchEvent(new Event("change")),lt.dispatchEvent(new MouseEvent("click"))):lt.dispatchEvent(new MouseEvent("click"))};for(var Ne=0;Ne<z.elements.length;Ne++){var Ve=z.elements[Ne];"repeat"===Ve.name&&("SELECT"!=Ve.nodeName||Ve.$_eventAttached?Ve.$_eventAttached||(Ve.$_eventAttached=!0,Ve.addEventListener("click",he)):(Ve.$_eventAttached=!0,Ve.addEventListener("change",he)))}t._lightbox._rec_init_done=!0},set_value:function(_,i,o){var c=t.form_blocks.recurring;t._lightbox._rec_init_done||c._init_set_value(_,i,o),_.open=!o.rec_type,_.blocked=this._is_modified_occurence(o);var h=c._ds;h.start=o.start_date,h.end=o._end_date,c._toggle_block(),i&&c._set_repeat_code(i,h)},get_value:function(_,i){if(_.open){var o=t.form_blocks.recurring._ds,c={};(function(){var h=t.formSection("time");if(h||(h=a("time")),h||(h=a("calendar_time")),!h)throw new Error(["Can't calculate the recurring rule, the Recurring form block can't find the Time control. Make sure you have the time control in 'scheduler.config.lightbox.sections' config.","You can use either the default time control https://docs.dhtmlx.com/scheduler/time.html, or the datepicker https://docs.dhtmlx.com/scheduler/minicalendar.html, or a custom control. ",'In the latter case, make sure the control is named "time":',"","scheduler.config.lightbox.sections = [",'{name:"time", height:72, type:"YOU CONTROL", map_to:"auto" }];'].join("\n"));return h})().getValue(c),o.start=c.start_date,i.rec_type=t.form_blocks.recurring._get_repeat_code(o),o._start?(i.start_date=new Date(o.start),i._start_date=new Date(o.start),o._start=!1):i._start_date=null,i._end_date=o.end,i.rec_pattern=i.rec_type.split("#")[0]}else i.rec_type=i.rec_pattern="",i._end_date=i.end_date;return i.rec_type},_get_button:function(){return j().header.firstChild.firstChild},_get_form:function(){return j().node},open:function(){var _=t.form_blocks.recurring;_._get_form().open||_._toggle_block()},close:function(){var _=t.form_blocks.recurring;_._get_form().open&&_._toggle_block()},_toggle_block:function(){var _=t.form_blocks.recurring,i=_._get_form(),o=_._get_button();i.open||i.blocked?(i.style.height="0px",o&&(o.style.backgroundPosition="-5px 20px",o.nextSibling.innerHTML=t.locale.labels.button_recurring)):(i.style.height="auto",o&&(o.style.backgroundPosition="-5px 0px",o.nextSibling.innerHTML=t.locale.labels.button_recurring_open)),i.open=!i.open,t.setLightboxSize()},focus:function(_){},button_click:function(_,i,o){t.form_blocks.recurring._get_form().blocked||t.form_blocks.recurring._toggle_block()}},t._rec_markers={},t._rec_markers_pull={},t._add_rec_marker=function(_,i){_._pid_time=i,this._rec_markers[_.id]=_,this._rec_markers_pull[_.event_pid]||(this._rec_markers_pull[_.event_pid]={}),this._rec_markers_pull[_.event_pid][i]=_},t._get_rec_marker=function(_,i){var o=this._rec_markers_pull[i];return o?o[_]:null},t._get_rec_markers=function(_){return this._rec_markers_pull[_]||[]},t._rec_temp=[],_=t.addEvent,t.addEvent=function(i,o,c,h,D){var V=_.apply(this,arguments);if(V&&t.getEvent(V)){var T=t.getEvent(V);T.start_date&&(T.start_date=v(T.start_date)),T.end_date&&(T.end_date=v(T.end_date)),this._is_modified_occurence(T)&&t._add_rec_marker(T,1e3*T.event_length),T.rec_type&&(T.rec_pattern=T.rec_type.split("#")[0])}return V},t.attachEvent("onEventIdChange",function(_,i){if(!this._ignore_call){this._ignore_call=!0,t._rec_markers[_]&&(t._rec_markers[i]=t._rec_markers[_],delete t._rec_markers[_]),t._rec_markers_pull[_]&&(t._rec_markers_pull[i]=t._rec_markers_pull[_],delete t._rec_markers_pull[_]);for(var o=0;o<this._rec_temp.length;o++)(c=this._rec_temp[o]).event_pid==_&&(c.event_pid=i,this.changeEventId(c.id,i+"#"+c.id.split("#")[1]));for(var o in this._rec_markers){var c;(c=this._rec_markers[o]).event_pid==_&&(c.event_pid=i,c._pid_changed=!0)}var h=t._rec_markers[i];h&&h._pid_changed&&(delete h._pid_changed,setTimeout(function(){t.callEvent("onEventChanged",[i,t.getEvent(i)])},1)),delete this._ignore_call}}),t.attachEvent("onConfirmedBeforeEventDelete",function(_){var i=this.getEvent(_);if(this._is_virtual_event(_)||this._is_modified_occurence(i)&&i.rec_type&&"none"!=i.rec_type){_=_.split("#");var o=this.uid(),c=_[1]?_[1]:Math.round(i._pid_time/1e3),h=this._copy_event(i);h.id=o,h.event_pid=i.event_pid||_[0];var D=c;h.event_length=D,h.rec_type=h.rec_pattern="none",this.addEvent(h),this._add_rec_marker(h,1e3*D)}else{i.rec_type&&this._lightbox_id&&this._roll_back_dates(i);var V=this._get_rec_markers(_);for(var T in V)V.hasOwnProperty(T)&&this.getEvent(_=V[T].id)&&this.deleteEvent(_,!0)}return!0}),t.attachEvent("onEventDeleted",function(_,i){!this._is_virtual_event(_)&&this._is_modified_occurence(i)&&(t._events[_]||(i.rec_type=i.rec_pattern="none",this.setEvent(_,i)))}),t.attachEvent("onEventChanged",function(_,i){if(this._loading)return!0;var o=this.getEvent(_);if(this._is_virtual_event(_)){_=_.split("#");var c=this.uid();this._not_render=!0;var h=this._copy_event(i);h.id=c,h.event_pid=_[0];var D=_[1];h.event_length=D,h.rec_type=h.rec_pattern="",this._add_rec_marker(h,1e3*D),this.addEvent(h),this._not_render=!1}else{o.start_date&&(o.start_date=v(o.start_date)),o.end_date&&(o.end_date=v(o.end_date)),o.rec_type&&this._lightbox_id&&this._roll_back_dates(o);var V=this._get_rec_markers(_);for(var T in V)V.hasOwnProperty(T)&&(delete this._rec_markers[V[T].id],this.deleteEvent(V[T].id,!0));delete this._rec_markers_pull[_];for(var W=!1,z=0;z<this._rendered.length;z++)this._rendered[z].getAttribute(this.config.event_attribute)==_&&(W=!0);W||(this._select_id=null)}return!0}),t.attachEvent("onEventAdded",function(_){if(!this._loading){var i=this.getEvent(_);i.rec_type&&!i.event_length&&this._roll_back_dates(i)}return!0}),t.attachEvent("onEventSave",function(_,i,o){return this.getEvent(_).rec_type||!i.rec_type||this._is_virtual_event(_)||(this._select_id=null),!0}),t.attachEvent("onEventCreated",function(_){var i=this.getEvent(_);return i.rec_type||(i.rec_type=i.rec_pattern=i.event_length=i.event_pid=""),!0}),t.attachEvent("onEventCancel",function(_){var i=this.getEvent(_);i.rec_type&&(this._roll_back_dates(i),this.render_view_data())}),t._roll_back_dates=function(_){_.start_date&&(_.start_date=v(_.start_date)),_.end_date&&(_.end_date=v(_.end_date)),_.event_length=Math.round((_.end_date.valueOf()-_.start_date.valueOf())/1e3),_.end_date=_._end_date,_._start_date&&(_.start_date.setMonth(0),_.start_date.setDate(_._start_date.getDate()),_.start_date.setMonth(_._start_date.getMonth()),_.start_date.setFullYear(_._start_date.getFullYear()))},t._is_virtual_event=function(_){return-1!=_.toString().indexOf("#")},t._is_modified_occurence=function(_){return _.event_pid&&"0"!=_.event_pid},t._validId=function(_){return!this._is_virtual_event(_)},t.showLightbox_rec=t.showLightbox,t.showLightbox=function(_){var i=this.locale,o=t.config.lightbox_recurring,c=this.getEvent(_),h=c.event_pid,D=this._is_virtual_event(_);D&&(h=_.split("#")[0]);var V=function(W){var z=t.getEvent(W);return z._end_date=z.end_date,z.end_date=new Date(z.start_date.valueOf()+1e3*z.event_length),t.showLightbox_rec(W)};if((h||1*h==0)&&c.rec_type)return V(_);if(!h||"0"===h||!i.labels.confirm_recurring||"instance"==o||"series"==o&&!D)return this.showLightbox_rec(_);if("ask"==o){var T=this;t.modalbox({text:i.labels.confirm_recurring,title:i.labels.title_confirm_recurring,width:"500px",position:"middle",buttons:[i.labels.button_edit_series,i.labels.button_edit_occurrence,i.labels.icon_cancel],callback:function(W){switch(+W){case 0:return V(h);case 1:return T.showLightbox_rec(_);case 2:return}}})}else V(h)},t.get_visible_events_rec=t.get_visible_events,t.get_visible_events=function(_){for(var i=0;i<this._rec_temp.length;i++)delete this._events[this._rec_temp[i].id];this._rec_temp=[];var o=this.get_visible_events_rec(_),c=[];for(i=0;i<o.length;i++)o[i].rec_type?"none"!=o[i].rec_pattern&&this.repeat_date(o[i],c):c.push(o[i]);return c},function(){var _=t.isOneDayEvent;t.isOneDayEvent=function(o){return!!o.rec_type||_.call(this,o)};var i=t.updateEvent;t.updateEvent=function(o){var c=t.getEvent(o);c&&c.rec_type&&(c.rec_pattern=(c.rec_type||"").split("#")[0]),c&&c.rec_type&&!this._is_virtual_event(o)?t.update_view():i.call(this,o)}}(),t.transponse_size={day:1,week:7,month:1,year:12},t.date.day_week=function(_,i,o){_.setDate(1);var c=t.date.month_start(new Date(_)),h=1*i+(o=7*(o-1))-_.getDay()+1;_.setDate(h<=o?h+7:h);var D=t.date.month_start(new Date(_));return c.valueOf()===D.valueOf()},t.transpose_day_week=function(_,i,o,c,h){for(var D=(_.getDay()||(t.config.start_on_monday?7:0))-o,V=0;V<i.length;V++)if(i[V]>D)return _.setDate(_.getDate()+1*i[V]-D-(c?o:h));this.transpose_day_week(_,i,o+c,null,o)},t.transpose_type=function(_){var i="transpose_"+_;if(!this.date[i]){var o=_.split("_"),c="add_"+_,h=this.transponse_size[o[0]]*o[1];if("day"==o[0]||"week"==o[0]){var D=null;if(o[4]&&(D=o[4].split(","),t.config.start_on_monday)){for(var V=0;V<D.length;V++)D[V]=1*D[V]||7;D.sort()}this.date[i]=function(T,W){var z=Math.floor((W.valueOf()-T.valueOf())/(864e5*h));return z>0&&T.setDate(T.getDate()+z*h),D&&t.transpose_day_week(T,D,1,h),T},this.date[c]=function(T,W){var z=new Date(T.valueOf());if(D)for(var Z=0;Z<W;Z++)t.transpose_day_week(z,D,0,h);else z.setDate(z.getDate()+W*h);return z}}else"month"!=o[0]&&"year"!=o[0]||(this.date[i]=function(T,W,z){var Z=Math.ceil((12*W.getFullYear()+1*W.getMonth()+1-(12*T.getFullYear()+1*T.getMonth()+1))/h-1);return Z>=0&&(T.setDate(1),T.setMonth(T.getMonth()+Z*h)),t.date[c](T,0,z)},this.date[c]=function(T,W,z,Z){if(Z?Z++:Z=1,Z>12)return null;var re=new Date(T.valueOf());re.setDate(1),re.setMonth(re.getMonth()+W*h);var oe=re.getMonth(),_e=re.getFullYear();re.setDate(z.start_date.getDate()),o[3]&&t.date.day_week(re,o[2],o[3]);var he=t.config.recurring_overflow_instances;return re.getMonth()!=oe&&"none"!=he&&(re="lastDay"===he?new Date(_e,oe+1,0,re.getHours(),re.getMinutes(),re.getSeconds(),re.getMilliseconds()):t.date[c](new Date(_e,oe+1,0),W||1,z,Z)),re})}},t.repeat_date=function(_,i,o,c,h,D){c=c||this._min_date,h=h||this._max_date;var V=D||-1,T=new Date(_.start_date.valueOf()),W=T.getHours(),z=0;for(!_.rec_pattern&&_.rec_type&&(_.rec_pattern=_.rec_type.split("#")[0]),this.transpose_type(_.rec_pattern),T=t.date["transpose_"+_.rec_pattern](T,c,_);T&&(T<_.start_date||t._fix_daylight_saving_date(T,c,_,T,new Date(T.valueOf()+1e3*_.event_length)).valueOf()<=c.valueOf()||T.valueOf()+1e3*_.event_length<=c.valueOf());)T=this.date["add_"+_.rec_pattern](T,1,_);for(;T&&T<h&&T<_.end_date&&(V<0||z<V);){T.setHours(W);var Z=t.config.occurrence_timestamp_in_utc?Date.UTC(T.getFullYear(),T.getMonth(),T.getDate(),T.getHours(),T.getMinutes(),T.getSeconds()):T.valueOf(),re=this._get_rec_marker(Z,_.id);if(re)o&&("none"!=re.rec_type&&z++,i.push(re));else{var oe=new Date(T.valueOf()+1e3*_.event_length),_e=this._copy_event(_);if(_e.text=_.text,_e.start_date=T,_e.event_pid=_.id,_e.id=_.id+"#"+Math.round(Z/1e3),_e.end_date=oe,_e.end_date=t._fix_daylight_saving_date(_e.start_date,_e.end_date,_,T,_e.end_date),_e._timed=this.isOneDayEvent(_e),!_e._timed&&!this._table_view&&!this.config.multi_day)return;i.push(_e),o||(this._events[_e.id]=_e,this._rec_temp.push(_e)),z++}T=this.date["add_"+_.rec_pattern](T,1,_)}},t._fix_daylight_saving_date=function(_,i,o,c,h){var D=_.getTimezoneOffset()-i.getTimezoneOffset();return D?D>0?new Date(c.valueOf()+1e3*o.event_length-60*D*1e3):new Date(i.valueOf()-60*D*1e3):new Date(h.valueOf())},t.getRecDates=function(_,i){var o="object"==St(_)?_:t.getEvent(_),c=[];if(!o.rec_type)return[{start_date:o.start_date,end_date:o.end_date}];if("none"==o.rec_type)return[];t.repeat_date(o,c,!0,o.start_date,o.end_date,i=i||100);for(var h=[],D=0;D<c.length;D++)"none"!=c[D].rec_type&&h.push({start_date:c[D].start_date,end_date:c[D].end_date});return h},t.getEvents=function(_,i){var o=[];for(var c in this._events){var h=this._events[c];if(h&&h.start_date<i&&h.end_date>_)if(h.rec_pattern){if("none"==h.rec_pattern)continue;var D=[];this.repeat_date(h,D,!0,_,i);for(var V=0;V<D.length;V++)!D[V].rec_pattern&&D[V].start_date<i&&D[V].end_date>_&&!this._rec_markers[D[V].id]&&o.push(D[V])}else this._is_virtual_event(h.id)||o.push(h)}return o},t.config.repeat_date="%m.%d.%Y",t.config.lightbox.sections=[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"recurring",type:"recurring",map_to:"rec_type",button:"recurring"},{name:"time",height:72,type:"time",map_to:"auto"}],t._copy_dummy=function(_){var i=new Date(this.start_date),o=new Date(this.end_date);this.start_date=i,this.end_date=o,this.event_length=this.event_pid=this.rec_pattern=this.rec_type=null},t.config.include_end_by=!1,t.config.lightbox_recurring="ask",t.attachEvent("onClearAll",function(){t._rec_markers={},t._rec_markers_pull={},t._rec_temp=[]})},serialize:function(t){var j=Me()(t);t.data_attributes=function(){var a=[],v=t._helpers.formatDate,_=j();for(var i in _){var o=_[i];for(var c in o)"_"!=c.substr(0,1)&&a.push([c,"start_date"==c||"end_date"==c?v:null]);break}return a},t.toXML=function(a){var v=[],_=this.data_attributes(),i=j();for(var o in i){var c=i[o];v.push("<event>");for(var h=0;h<_.length;h++)v.push("<"+_[h][0]+"><![CDATA["+(_[h][1]?_[h][1](c[_[h][0]]):c[_[h][0]])+"]]></"+_[h][0]+">");v.push("</event>")}return(a||"")+"<data>"+v.join("\n")+"</data>"},t._serialize_json_value=function(a){return null===a||"boolean"==typeof a?a=""+a:(a||0===a||(a=""),a='"'+a.toString().replace(/\n/g,"").replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'),a},t.toJSON=function(){return JSON.stringify(this.serialize())},t.toICal=function(a){var v=t.date.date_to_str("%Y%m%dT%H%i%s"),_=t.date.date_to_str("%Y%m%d"),i=[],o=j();for(var c in o){var h=o[c];i.push("BEGIN:VEVENT"),h._timed&&(h.start_date.getHours()||h.start_date.getMinutes())?i.push("DTSTART:"+v(h.start_date)):i.push("DTSTART:"+_(h.start_date)),h._timed&&(h.end_date.getHours()||h.end_date.getMinutes())?i.push("DTEND:"+v(h.end_date)):i.push("DTEND:"+_(h.end_date)),i.push("SUMMARY:"+h.text),i.push("END:VEVENT")}return"BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//dhtmlXScheduler//NONSGML v2.2//EN\nDESCRIPTION:"+(a||"")+"\n"+i.join("\n")+"\nEND:VCALENDAR"}},timeline:function(t){Te("Timeline",t.assert)},tooltip:function(t){var j=t._createDomEventScope(),a={};t.ext.tooltip=t.dhtmlXTooltip=t.tooltip=a,a.config={className:"dhtmlXTooltip scheduler_tooltip tooltip",timeout_to_display:50,timeout_to_hide:50,delta_x:15,delta_y:-20},a.tooltip=document.createElement("div"),a.tooltip.className=a.config.className,t._waiAria.tooltipAttr(a.tooltip),a.show=function(v,_){if(!this._mobile||t.config.touch_tooltip){var i=a,o=this.tooltip,c=o.style;i.tooltip.className=i.config.className;var h=this.position(v);if(!this.isTooltip(v.target||v.srcElement)){var V=h.x+(i.config.delta_x||0),T=h.y-(i.config.delta_y||0);c.visibility="hidden",c.right="",c.bottom="",c.left="0",c.top="0",t.config.rtl&&(o.className+=" dhtmlXTooltip_rtl"),this.tooltip.innerHTML=_,document.body.appendChild(this.tooltip);var z=this.tooltip.offsetHeight;if(document.documentElement.clientWidth-V-this.tooltip.offsetWidth<0?(c.left="",c.right=document.documentElement.clientWidth-V+2*(i.config.delta_x||0)+"px"):c.left=V<0?h.x+Math.abs(i.config.delta_x||0)+"px":V+"px",document.documentElement.clientHeight-T-z<0){var Z=document.documentElement.clientHeight-T-2*(i.config.delta_y||0);Z+z>document.documentElement.clientHeight?(T-=Math.abs(document.documentElement.clientHeight-T-z),T=Math.max(T,0),c.top=T+"px"):(c.bottom=Z+"px",c.top="")}else c.top=T<0?h.y+Math.abs(i.config.delta_y||0)+"px":T+"px";t._waiAria.tooltipVisibleAttr(this.tooltip),c.visibility="visible",j.attach(this.tooltip,"mouseleave",function(re){for(var oe=t.dhtmlXTooltip,_e=re.relatedTarget;_e!=t._obj&&_e;)_e=_e.parentNode;_e!=t._obj&&oe.delay(oe.hide,oe,[],oe.config.timeout_to_hide)}),t.callEvent("onTooltipDisplayed",[this.tooltip,this.tooltip.event_id])}}},a._clearTimeout=function(){this.tooltip._timeout_id&&clearTimeout(this.tooltip._timeout_id)},a.hide=function(){if(this.tooltip.parentNode){t._waiAria.tooltipHiddenAttr(this.tooltip);var v=this.tooltip.event_id;this.tooltip.event_id=null,j.detachAll(),this.tooltip.parentNode.removeChild(this.tooltip),t.callEvent("onAfterTooltip",[v])}this._clearTimeout()},a.delay=function(v,_,i,o){this._clearTimeout(),this.tooltip._timeout_id=setTimeout(function(){var c=v.apply(_,i);return v=_=i=null,c},o||this.config.timeout_to_display)},a.isTooltip=function(v){for(var _=!1;v&&!_;)_=v.className==this.tooltip.className,v=v.parentNode;return _},a.position=function(v){return{x:v.clientX,y:v.clientY}},t.attachEvent("onMouseMove",function(v,_){var i=_.target||_.srcElement,o=a,c=o.isTooltip(i),h=o.isTooltipTarget&&o.isTooltipTarget(i);if(v&&t.getState().editor_id!=v||c||h){var D,V;if(v||o.tooltip.event_id){var T=t.getEvent(v)||t.getEvent(o.tooltip.event_id);if(!T)return;if(o.tooltip.event_id=T.id,!(D=t.templates.tooltip_text(T.start_date,T.end_date,T)))return o.hide()}if(h&&(D=""),t.$env.isIE)for(var W in V={pageX:void 0,pageY:void 0,clientX:void 0,clientY:void 0,target:void 0,srcElement:void 0})V[W]=_[W];if(!t.callEvent("onBeforeTooltip",[v])||!D)return;o.delay(o.show,o,[V||_,D])}else o.delay(o.hide,o,[],o.config.timeout_to_hide)}),t.attachEvent("onBeforeDrag",function(){return a.hide(),!0}),t.attachEvent("onEventDeleted",function(){return a.hide(),!0}),t.attachEvent("onDestroy",function(){a.hide()})},treetimeline:function(t){Te("Tree Timeline",t.assert)},units:function(t){Te("Units",t.assert)},url:function(t){t._get_url_nav=function(){for(var j={},a=(document.location.hash||"").replace("#","").split(","),v=0;v<a.length;v++){var _=a[v].split("=");2==_.length&&(j[_[0]]=_[1])}return j},t.attachEvent("onTemplatesReady",function(){var j=!0,a=t.date.str_to_date("%Y-%m-%d"),v=t.date.date_to_str("%Y-%m-%d"),_=t._get_url_nav().event||null;function i(o){_=o,t.getEvent(o)&&t.showEvent(o)}t.attachEvent("onAfterEventDisplay",function(o){return _=null,!0}),t.attachEvent("onBeforeViewChange",function(o,c,h,D){if(j){j=!1;var V=t._get_url_nav();if(V.event)try{if(t.getEvent(V.event))return setTimeout(function(){i(V.event)}),!1;var T=t.attachEvent("onXLE",function(){setTimeout(function(){i(V.event)}),t.detachEvent(T)})}catch{}if(V.date||V.mode){try{this.setCurrentView(V.date?a(V.date):null,V.mode||null)}catch{this.setCurrentView(V.date?a(V.date):null,h)}return!1}}var W=["date="+v(D||c),"mode="+(h||o)];_&&W.push("event="+_);var z="#"+W.join(",");return document.location.hash=z,!0})})},week_agenda:function(t){Te("Week Agenda",t.assert)},wp:function(t){t.attachEvent("onLightBox",function(){if(this._cover)try{this._cover.style.height=this.expanded?"100%":(document.body.parentNode||document.body).scrollHeight+"px"}catch{}}),t.form_blocks.select.set_value=function(j,a,v){void 0!==a&&""!==a||(a=(j.firstChild.options[0]||{}).value),j.firstChild.value=a||""}},year_view:function(t){t.config.year_x=4,t.config.year_y=3,t.xy.year_top=0,t.templates.year_date=function(h){return t.date.date_to_str(t.locale.labels.year_tab+" %Y")(h)},t.templates.year_month=t.date.date_to_str("%F"),t.templates.year_scale_date=t.date.date_to_str("%D"),t.templates.year_tooltip=function(h,D,V){return V.text};var j=function(){return"year"==t._mode},a=function(h){var D=t.$domHelpers.closest(h,"[data-cell-date]");return D&&D.hasAttribute("data-cell-date")?t.templates.parse_date(D.getAttribute("data-cell-date")):null};t.dblclick_dhx_month_head=function(h){if(j()){var D=h.target;if(t.$domHelpers.closest(D,".dhx_before")||t.$domHelpers.closest(D,".dhx_after"))return!1;var V=a(D);if(V){var T=V,W=this.date.add(T,1,"day");!this.config.readonly&&this.config.dblclick_create&&this.addEventNow(T.valueOf(),W.valueOf(),h)}}};var v=t.changeEventId;t.changeEventId=function(){v.apply(this,arguments),j()&&this.year_view(!0)};var _=t.render_data;t.render_data=function(h){if(!j())return _.apply(this,arguments);for(var D=0;D<h.length;D++)this._year_render_event(h[D])};var i=t.clear_view;t.clear_view=function(){if(!j())return i.apply(this,arguments);var h=t._year_marked_cells,D=null;for(var V in h)h.hasOwnProperty(V)&&((D=h[V]).className="dhx_month_head",D.removeAttribute("date"),D.removeAttribute("data-year-date"));t._year_marked_cells={}},t._hideToolTip=function(){this._tooltip&&(this._tooltip.style.display="none",this._tooltip.date=new Date(9999,1,1))},t._showToolTip=function(h,D,V,T){if(this._tooltip){if(this._tooltip.date.valueOf()==h.valueOf())return;this._tooltip.innerHTML=""}else{var W=this._tooltip=document.createElement("div");W.className="dhx_year_tooltip",this.config.rtl&&(W.className+=" dhx_tooltip_rtl"),document.body.appendChild(W),W.addEventListener("click",t._click.dhx_cal_data)}for(var z=this.getEvents(h,this.date.add(h,1,"day")),Z="",re=0;re<z.length;re++){var oe=z[re];if(this.filter_event(oe.id,oe)){var _e=oe.color?"background:"+oe.color+";":"",he=oe.textColor?"color:"+oe.textColor+";":"";Z+="<div class='dhx_tooltip_line' style='"+_e+he+"' event_id='"+z[re].id+"' "+this.config.event_attribute+"='"+z[re].id+"'>",Z+="<div class='dhx_tooltip_date' style='"+_e+he+"'>"+(z[re]._timed?this.templates.event_date(z[re].start_date):"")+"</div>",Z+="<div class='dhx_event_icon icon_details'>&nbsp;</div>",Z+=this.templates.year_tooltip(z[re].start_date,z[re].end_date,z[re])+"</div>"}}this._tooltip.style.display="",this._tooltip.style.top="0px",this._tooltip.style.left=document.body.offsetWidth-D.left-this._tooltip.offsetWidth<0?D.left-this._tooltip.offsetWidth+"px":D.left+T.offsetWidth+"px",this._tooltip.date=h,this._tooltip.innerHTML=Z,this._tooltip.style.top=document.body.offsetHeight-D.top-this._tooltip.offsetHeight<0?D.top-this._tooltip.offsetHeight+T.offsetHeight+"px":D.top+"px"},t._year_view_tooltip_handler=function(h){if(j()){var D=h.target||h.srcElement;"a"==D.tagName.toLowerCase()&&(D=D.parentNode),-1!=t._getClassName(D).indexOf("dhx_year_event")?t._showToolTip(t.templates.parse_date(D.getAttribute("data-year-date")),t.$domHelpers.getOffset(D),h,D):t._hideToolTip()}},t._init_year_tooltip=function(){t._detachDomEvent(t._els.dhx_cal_data[0],"mouseover",t._year_view_tooltip_handler),t.event(t._els.dhx_cal_data[0],"mouseover",t._year_view_tooltip_handler)},t._get_year_cell=function(h){for(var D=t.templates.format_date(h),V=this.$root.querySelectorAll('.dhx_cal_data [data-cell-date="'.concat(D,'"] .dhx_month_head')),T=0;T<V.length;T++)if(!t.$domHelpers.closest(V[T],".dhx_after, .dhx_before"))return V[T];return null},t._year_marked_cells={},t._mark_year_date=function(h,D){var V=t.templates.format_date(h),T=this._get_year_cell(h);if(T){var W=this.templates.event_class(D.start_date,D.end_date,D);t._year_marked_cells[V]||(T.classList.add("dhx_year_event"),T.setAttribute("data-year-date",V),T.setAttribute("date",V),t._year_marked_cells[V]=T),T.className+=W?" "+W:""}},t._unmark_year_date=function(h){var D=this._get_year_cell(h);D&&(D.className="dhx_month_head")},t._year_render_event=function(h){var D=h.start_date;for(D=D.valueOf()<this._min_date.valueOf()?this._min_date:this.date.date_part(new Date(D));D<h.end_date;)if(this._mark_year_date(D,h),(D=this.date.add(D,1,"day")).valueOf()>=this._max_date.valueOf())return},t.year_view=function(h){var D;if(h&&(D=t.xy.scale_height,t.xy.scale_height=-1),t._els.dhx_cal_header[0].style.display=h?"none":"",t.set_sizes(),h&&(t.xy.scale_height=D),t._table_view=h,!this._load_mode||!this._load())if(h){if(t._init_year_tooltip(),t._reset_year_scale(),t._load_mode&&t._load())return void(t._render_wait=!0);t.render_view_data()}else t._hideToolTip()},t._reset_year_scale=function(){this._cols=[],this._colsS={};var h=[],D=this._els.dhx_cal_data[0],V=this.config;D.scrollTop=0,D.innerHTML="";var T=Math.floor(parseInt(D.style.width)/V.year_x),W=Math.floor((parseInt(D.style.height)-t.xy.year_top)/V.year_y);W<190&&(W=190,T=Math.floor((parseInt(D.style.width)-t.xy.scroll_width)/V.year_x));var z=T-11,Z=0,re=document.createElement("div"),oe=this.date.week_start(t._currentDate());this._process_ignores(oe,7,"day",1);for(var _e=7-(this._ignores_detected||0),he=0,be=0;be<7;be++)this._ignores&&this._ignores[be]||(this._cols[be]=Math.floor(z/(_e-he)),this._render_x_header(be,Z,oe,re),z-=this._cols[be],Z+=this._cols[be],he++),oe=this.date.add(oe,1,"day");for(re.lastChild.className+=" dhx_scale_bar_last",be=0;be<re.childNodes.length;be++)this._waiAria.yearHeadCell(re.childNodes[be]);var Ae=this.date[this._mode+"_start"](this.date.copy(this._date)),He=Ae,Ne=null;for(be=0;be<V.year_y;be++)for(var Ve=0;Ve<V.year_x;Ve++){(Ne=document.createElement("div")).className="dhx_year_box",Ne.style.cssText="position:absolute;",Ne.setAttribute("date",this._helpers.formatDate(Ae)),Ne.setAttribute("data-month-date",this._helpers.formatDate(Ae)),Ne.innerHTML="<div class='dhx_year_month'></div><div class='dhx_year_grid'><div class='dhx_year_week'>"+re.innerHTML+"</div><div class='dhx_year_body'></div></div>";var Se=Ne.querySelector(".dhx_year_month"),Fe=Ne.querySelector(".dhx_year_grid"),Oe=Ne.querySelector(".dhx_year_week"),at=Ne.querySelector(".dhx_year_body"),ht=t.uid();this._waiAria.yearHeader(Se,ht),this._waiAria.yearGrid(Fe,ht),Se.innerHTML=this.templates.year_month(Ae);var lt=this.date.week_start(Ae);this._reset_month_scale(at,Ae,lt,6);for(var mt=at.querySelectorAll("td"),ft=0;ft<mt.length;ft++)this._waiAria.yearDayCell(mt[ft]);D.appendChild(Ne),Oe.style.height=Oe.childNodes[0].offsetHeight+"px";var yt=Math.round((W-190)/2);Ne.style.marginTop=yt+"px",this.set_xy(Ne,T-10,W-yt-10,T*Ve+5,W*be+5+t.xy.year_top),h[be*V.year_x+Ve]=(Ae.getDay()-(this.config.start_on_monday?1:0)+7)%7,Ae=this.date.add(Ae,1,"month")}var xt=this._getNavDateElement();xt&&(xt.innerHTML=this.templates[this._mode+"_date"](He,Ae,this._mode)),this.week_starts=h,h._month=He.getMonth(),this._min_date=He,this._max_date=Ae};var o=t.getActionData;t.getActionData=function(h){return j()?{date:a(h.target),section:null}:o.apply(t,arguments)};var c=t._locate_event;t._locate_event=function(h){var D=c.apply(t,arguments);if(!D){var V=a(h);if(!V)return null;var T=t.getEvents(V,t.date.add(V,1,"day"));if(!T.length)return null;D=T[0].id}return D},t.attachEvent("onDestroy",function(){t._hideToolTip()})}}),Ot=At.getSchedulerInstance(),Mt={plugin:Ot.bind(At.plugin,At)};window.scheduler=Ot,window.Scheduler=Mt,X.default=Ot}])}),function(){function P(y,w){for(var E in w)y[E]||(y[E]=w[E]);return y}function X(y,w){var E={};return(y=w._els[y])&&y[0]?(E.x=y[0].scrollWidth,E.y=y[0].scrollHeight):(E.x=0,E.y=0),E}function I(y){function w(){var N=y.getState().mode;return y.matrix&&y.matrix[N]?y.matrix[N]:null}y.exportToPDF=function(N){(N=P(N||{},{name:"calendar.pdf",format:"A4",orientation:"landscape",dpi:96,zoom:1,rtl:y.config.rtl})).html=this._export_html(N),N.mode=this.getState().mode,this._send_to_export(N,"pdf")},y.exportToPNG=function(N){(N=P(N||{},{name:"calendar.png",format:"A4",orientation:"landscape",dpi:96,zoom:1,rtl:y.config.rtl})).html=this._export_html(N),N.mode=this.getState().mode,this._send_to_export(N,"png")},y.exportToICal=function(N){N=P(N||{},{name:"calendar.ical",data:this._serialize_plain(null,N)}),this._send_to_export(N,"ical")},y.exportToExcel=function(N){N=P(N||{},{name:"calendar.xlsx",title:"Events",data:this._serialize_plain(this.templates.xml_format,N),columns:this._serialize_columns()}),this._send_to_export(N,"excel")},y._plain_export_copy=function(N,x){var S={};for(var s in N)S[s]=N[s];return S.start_date=x(S.start_date),S.end_date=x(S.end_date),S.$text=this.templates.event_text(N.start_date,N.end_date,N),S},y._serialize_plain=function(N,x){var S;N=N||y.date.date_to_str("%Y%m%dT%H%i%s",!0),S=x&&x.start&&x.end?y.getEvents(x.start,x.end):y.getEvents();for(var s=[],u=0;u<S.length;u++)s[u]=this._plain_export_copy(S[u],N);return s},y._serialize_columns=function(){return[{id:"start_date",header:"Start Date",width:30},{id:"end_date",header:"End Date",width:30},{id:"$text",header:"Text",width:100}]},y._send_to_export=function(N,x){N.version||(N.version=y.version),N.skin||(N.skin=y.skin);var S=this._create_hidden_form();S.firstChild.action=N.server||"https://export.dhtmlx.com/scheduler",S.firstChild.childNodes[0].value=JSON.stringify(N),S.firstChild.childNodes[1].value=x,S.firstChild.submit()},y._create_hidden_form=function(){if(!this._hidden_export_form){var N=this._hidden_export_form=document.createElement("div");N.style.display="none",N.innerHTML="<form method='POST' target='_blank'><input type='text' name='data'><input type='hidden' name='type' value=''></form>",document.body.appendChild(N)}return this._hidden_export_form},y._get_export_size=function(N,x,S,s,u,m,l){s=parseInt(s)/25.4||4;var M={A5:{x:148,y:210},A4:{x:210,y:297},A3:{x:297,y:420},A2:{x:420,y:594},A1:{x:594,y:841},A0:{x:841,y:1189}},O=X("dhx_cal_data",this).x,B={y:X("dhx_cal_data",this).y+X("dhx_cal_header",this).y+X("dhx_multi_day",this).y};return B.x="full"===N?O:Math.floor(("landscape"===x?M[N].y:M[N].x)*s),l&&(B.x*=parseFloat(l.x)||1,B.y*=parseFloat(l.y)||1),B},y._export_html=function(N){var x=function E(){var N,x,S=w();return S&&(x=S.scrollable,N=S.smart_rendering),{nav_height:y.xy.nav_height,scroll_width:y.xy.scroll_width,style_width:y._obj.style.width,style_height:y._obj.style.height,timeline_scrollable:x,timeline_smart_rendering:N}}(),S=y._get_export_size(N.format,N.orientation,N.zoom,N.dpi,N.header,N.footer,N.scales),s="";try{(function R(N,x){y._obj.style.width=N.x+"px",y._obj.style.height=N.y+"px",y.xy.nav_height=0,y.xy.scroll_width=0;var S=w();(x.timeline_scrollable||x.timeline_smart_rendering)&&(S.scrollable=!1,S.smart_rendering=!1)})(S,x),y.setCurrentView(),s=y._obj.innerHTML}catch(u){console.error(u)}finally{(function C(N){y.xy.scroll_width=N.scroll_width,y.xy.nav_height=N.nav_height,y._obj.style.width=N.style_width,y._obj.style.height=N.style_height;var x=w();(N.timeline_scrollable||N.timeline_smart_rendering)&&(x.scrollable=N.timeline_scrollable,x.smart_rendering=N.timeline_smart_rendering)})(x),y.setCurrentView()}return s}}I(scheduler),scheduler.plugins({tooltip:!0,year_view:!0}),scheduler.i18n.setLocale("fr"),window.Scheduler&&Scheduler.plugin&&Scheduler.plugin(I)}();var webodf_version="0.5.9";function Runtime(){}Runtime.prototype.getVariable=function(P){},Runtime.prototype.toJson=function(P){},Runtime.prototype.fromJson=function(P){},Runtime.prototype.byteArrayFromString=function(P,X){},Runtime.prototype.byteArrayToString=function(P,X){},Runtime.prototype.read=function(P,X,I,y){},Runtime.prototype.readFile=function(P,X,I){},Runtime.prototype.readFileSync=function(P,X){},Runtime.prototype.loadXML=function(P,X){},Runtime.prototype.writeFile=function(P,X,I){},Runtime.prototype.deleteFile=function(P,X){},Runtime.prototype.log=function(P,X){},Runtime.prototype.setTimeout=function(P,X){},Runtime.prototype.clearTimeout=function(P){},Runtime.prototype.libraryPaths=function(){},Runtime.prototype.currentDirectory=function(){},Runtime.prototype.setCurrentDirectory=function(P){},Runtime.prototype.type=function(){},Runtime.prototype.getDOMImplementation=function(){},Runtime.prototype.parseXML=function(P){},Runtime.prototype.exit=function(P){},Runtime.prototype.getWindow=function(){},Runtime.prototype.requestAnimationFrame=function(P){},Runtime.prototype.cancelAnimationFrame=function(P){},Runtime.prototype.assert=function(P,X){};var IS_COMPILED_CODE=!0;function BrowserRuntime(){function P(N){var S,s,x=N.length,u=0;for(S=0;S<x;S+=1)u+=1+(128<(s=N.charCodeAt(S)))+(2048<s),55040<s&&57344>s&&(u+=1,S+=1);return u}function X(N,x,S){var u,m,s=N.length;for(x=new Uint8Array(new ArrayBuffer(x)),S?(x[0]=239,x[1]=187,x[2]=191,m=3):m=0,S=0;S<s;S+=1)128>(u=N.charCodeAt(S))?(x[m]=u,m+=1):2048>u?(x[m]=192|u>>>6,x[m+1]=128|63&u,m+=2):55040>=u||57344<=u?(x[m]=224|u>>>12&15,x[m+1]=128|u>>>6&63,x[m+2]=128|63&u,m+=3):(u=65536+(u-55296<<10|N.charCodeAt(S+=1)-56320),x[m]=240|u>>>18&7,x[m+1]=128|u>>>12&63,x[m+2]=128|u>>>6&63,x[m+3]=128|63&u,m+=4);return x}function I(N){var s,x=N.length,S=new Uint8Array(new ArrayBuffer(x));for(s=0;s<x;s+=1)S[s]=255&N.charCodeAt(s);return S}function y(N,x){var S;void 0!==x?S=N:x=N,console.log(x),C.enableAlerts&&"alert"===S&&alert(x)}function w(N,x,S){if(0!==S.status||S.responseText)if(200===S.status||0===S.status){if(S.response&&"string"!=typeof S.response)"binary"===x?(S=S.response,S=new Uint8Array(S)):S=String(S.response);else if("binary"===x)if(null!==S.responseBody&&"undefined"!==String(typeof VBArray)){var s=(S=new VBArray(S.responseBody).toArray()).length;for(x=new Uint8Array(new ArrayBuffer(s)),N=0;N<s;N+=1)x[N]=S[N];S=x}else{if((N=S.getResponseHeader("Content-Length"))&&(N=parseInt(N,10)),N&&N!==S.responseText.length)e:{x=!1;var u=P(s=S.responseText);if("number"==typeof N){if(N!==u&&N!==u+3){s=void 0;break e}x=u+3===N,u=N}s=X(s,u,x)}void 0===s&&(s=I(S.responseText)),S=s}else S=S.responseText;S={err:null,data:S}}else S={err:S.responseText||S.statusText,data:null};else S={err:"File "+N+" is empty.",data:null};return S}function E(N,x,S){var s=new XMLHttpRequest;return s.open("GET",N,S),s.overrideMimeType&&s.overrideMimeType("binary"!==x?"text/plain; charset="+x:"text/plain; charset=x-user-defined"),s}function R(N,x,S){var s=E(N,x,!0);s.onreadystatechange=function(){var u;4===s.readyState&&(u=w(N,x,s),S(u.err,u.data))};try{s.send(null)}catch(u){S(u.message,null)}}var C=this;this.byteArrayFromString=function(N,x){var S;return"utf8"===x?S=X(N,P(N),!1):("binary"!==x&&C.log("unknown encoding: "+x),S=I(N)),S},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.readFile=R,this.read=function(N,x,S,s){R(N,"binary",function(u,m){var l=null;if(m){if("string"==typeof m)throw"This should not happen.";l=m.subarray(x,x+S)}s(u,l)})},this.readFileSync=function(N,x){var s,S=E(N,x,!1);try{if(S.send(null),(s=w(N,x,S)).err)throw s.err;if(null===s.data)throw"No data read from "+N+"."}catch(u){throw u}return s.data},this.writeFile=function(N,x,S){var u,s=new XMLHttpRequest;s.open("PUT",N,!0),s.onreadystatechange=function(){4===s.readyState&&S(0!==s.status||s.responseText?200<=s.status&&300>s.status||0===s.status?null:"Status "+String(s.status)+": "+s.responseText||s.statusText:"File "+N+" is empty.")},u=x.buffer&&!s.sendAsBinary?x.buffer:C.byteArrayToString(x,"binary");try{s.sendAsBinary?s.sendAsBinary(u):s.send(u)}catch(m){C.log("HUH? "+m+" "+x),S(m.message)}},this.deleteFile=function(N,x){var S=new XMLHttpRequest;S.open("DELETE",N,!0),S.onreadystatechange=function(){4===S.readyState&&x(200>S.status&&300<=S.status?S.responseText:null)},S.send(null)},this.loadXML=function(N,x){var S=new XMLHttpRequest;S.open("GET",N,!0),S.overrideMimeType&&S.overrideMimeType("text/xml"),S.onreadystatechange=function(){4===S.readyState&&(0!==S.status||S.responseText?200===S.status||0===S.status?x(null,S.responseXML):x(S.responseText,null):x("File "+N+" is empty.",null))};try{S.send(null)}catch(s){x(s.message,null)}},this.log=y,this.enableAlerts=!0,this.assert=Runtime.assert,this.setTimeout=function(N,x){return setTimeout(function(){N()},x)},this.clearTimeout=function(N){clearTimeout(N)},this.libraryPaths=function(){return["lib"]},this.setCurrentDirectory=function(){},this.currentDirectory=function(){return""},this.type=function(){return"BrowserRuntime"},this.getDOMImplementation=function(){return window.document.implementation},this.parseXML=function(N){return(new DOMParser).parseFromString(N,"text/xml")},this.exit=function(N){y("Calling exit with code "+String(N)+", but exit() is not implemented.")},this.getWindow=function(){return window},this.requestAnimationFrame=function(N){var x=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;return x?(x.bind(window),x(N)):setTimeout(N,15)},this.cancelAnimationFrame=function(N){var x=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;x?(x.bind(window),x(N)):clearTimeout(N)}}function NodeJSRuntime(){function P(N){var S,x=N.length,s=new Uint8Array(new ArrayBuffer(x));for(S=0;S<x;S+=1)s[S]=N[S];return s}function X(N,x,S){N=w.resolve(E,N),y.readFile(N,"binary"!==x?x:null,function s(u,m){return u?S(u,null):m?"string"==typeof m?S(u,m):void S(u,P(m)):S("No data for "+N+".",null)})}var R,C,I=this,y=require("fs"),w=require("path"),E="";this.byteArrayFromString=function(N,x){var s,S=new Buffer(N,x),u=S.length,m=new Uint8Array(new ArrayBuffer(u));for(s=0;s<u;s+=1)m[s]=S[s];return m},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.readFile=X,this.loadXML=function(N,x){X(N,"utf-8",function(S,s){return S?x(S,null):s?void x(null,I.parseXML(s)):x("No data for "+N+".",null)})},this.writeFile=function(N,x,S){x=new Buffer(x),N=w.resolve(E,N),y.writeFile(N,x,"binary",function(s){S(s||null)})},this.deleteFile=function(N,x){N=w.resolve(E,N),y.unlink(N,x)},this.read=function(N,x,S,s){N=w.resolve(E,N),y.open(N,"r+",666,function(u,m){if(u)s(u,null);else{var l=new Buffer(S);y.read(m,l,0,S,x,function(M){y.close(m),s(M,P(l))})}})},this.readFileSync=function(N,x){var S;if(null===(S=y.readFileSync(N,"binary"===x?null:x)))throw"File "+N+" could not be read.";return"binary"===x&&(S=P(S)),S},this.log=function(N,x){var S;void 0!==x?S=N:x=N,"alert"===S&&process.stderr.write("\n!!!!! ALERT !!!!!\n"),process.stderr.write(x+"\n"),"alert"===S&&process.stderr.write("!!!!! ALERT !!!!!\n")},this.assert=Runtime.assert,this.setTimeout=function(N,x){return setTimeout(function(){N()},x)},this.clearTimeout=function(N){clearTimeout(N)},this.libraryPaths=function(){return[__dirname]},this.setCurrentDirectory=function(N){E=N},this.currentDirectory=function(){return E},this.type=function(){return"NodeJSRuntime"},this.getDOMImplementation=function(){return C},this.parseXML=function(N){return R.parseFromString(N,"text/xml")},this.exit=process.exit,this.getWindow=function(){return null},this.requestAnimationFrame=function(N){return setTimeout(N,15)},this.cancelAnimationFrame=function(N){clearTimeout(N)},R=new(require("xmldom").DOMParser),C=I.parseXML("<a/>").implementation}function RhinoRuntime(){var y,w,P=this,X={},I=X.javax.xml.parsers.DocumentBuilderFactory.newInstance(),E="";I.setValidating(!1),I.setNamespaceAware(!0),I.setExpandEntityReferences(!1),I.setSchema(null),w=X.org.xml.sax.EntityResolver({resolveEntity:function(R,C){var N=new X.java.io.FileReader(C);return new X.org.xml.sax.InputSource(N)}}),(y=I.newDocumentBuilder()).setEntityResolver(w),this.byteArrayFromString=function(R,C){var N,x=R.length,S=new Uint8Array(new ArrayBuffer(x));for(N=0;N<x;N+=1)S[N]=255&R.charCodeAt(N);return S},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.loadXML=function(R,C){var N=new X.java.io.File(R),x=null;try{x=y.parse(N)}catch(S){return print(S),C(S,null)}C(null,x)},this.readFile=function(R,C,N){E&&(R=E+"/"+R);var S="binary"===C?"latin1":C;new X.java.io.File(R).isFile()?((R=readFile(R,S))&&"binary"===C&&(R=P.byteArrayFromString(R,"binary")),N(null,R)):N(R+" is not a file.",null)},this.writeFile=function(R,C,N){E&&(R=E+"/"+R),R=new X.java.io.FileOutputStream(R);var x,S=C.length;for(x=0;x<S;x+=1)R.write(C[x]);R.close(),N(null)},this.deleteFile=function(R,C){E&&(R=E+"/"+R);var N=new X.java.io.File(R),x=R+Math.random();x=new X.java.io.File(x),N.rename(x)?(x.deleteOnExit(),C(null)):C("Could not delete "+R)},this.read=function(R,C,N,x){var S;E&&(R=E+"/"+R);var s="binary";new X.java.io.File(S=R).isFile()?("binary"===s&&(s="latin1"),S=readFile(S,s)):S=null,S?x(null,this.byteArrayFromString(S.substring(C,C+N),"binary")):x("Cannot read "+R,null)},this.readFileSync=function(R,C){if(!C)return"";var N=readFile(R,C);if(null===N)throw"File could not be read.";return N},this.log=function(R,C){var N;void 0!==C?N=R:C=R,"alert"===N&&print("\n!!!!! ALERT !!!!!"),print(C),"alert"===N&&print("!!!!! ALERT !!!!!")},this.assert=Runtime.assert,this.setTimeout=function(R){return R(),0},this.clearTimeout=function(){},this.libraryPaths=function(){return["lib"]},this.setCurrentDirectory=function(R){E=R},this.currentDirectory=function(){return E},this.type=function(){return"RhinoRuntime"},this.getDOMImplementation=function(){return y.getDOMImplementation()},this.parseXML=function(R){return R=new X.java.io.StringReader(R),R=new X.org.xml.sax.InputSource(R),y.parse(R)},this.exit=quit,this.getWindow=function(){return null},this.requestAnimationFrame=function(R){return R(),0},this.cancelAnimationFrame=function(){}}Runtime.byteArrayToString=function(P,X){var w;return"utf8"===X?w=function y(E){var C,S,s,u,R="",N=E.length,x=[];for(C=3<=N&&239===E[0]&&187===E[1]&&191===E[2]?3:0;C<N;C+=1)128>(S=E[C])?x.push(S):(s=E[C+=1],194<=S&&224>S?x.push((31&S)<<6|63&s):(u=E[C+=1],224<=S&&240>S?x.push((15&S)<<12|(63&s)<<6|63&u):(C+=1,240<=S&&245>S&&(S=(7&S)<<18|(63&s)<<12|(63&u)<<6|63&E[C],x.push(55296+((S-=65536)>>10),56320+(1023&S)))))),1e3<=x.length&&(R+=String.fromCharCode.apply(null,x),x.length=0);return R+String.fromCharCode.apply(null,x)}(P):("binary"!==X&&this.log("Unsupported encoding: "+X),w=function I(E){var C,R="",N=E.length;for(C=0;C<N;C+=1)R+=String.fromCharCode(255&E[C]);return R}(P)),w},Runtime.getVariable=function(g){try{return eval(g)}catch(P){}},Runtime.toJson=function(P){return JSON.stringify(P)},Runtime.fromJson=function(P){return JSON.parse(P)},Runtime.getFunctionName=function(P){return void 0===P.name?(P=/function\s+(\w+)/.exec(P))&&P[1]:P.name},Runtime.assert=function(P,X){if(!P)throw this.log("alert","ASSERTION FAILED:\n"+X),Error(X)},Runtime.create=function(){return"undefined"!==String(typeof window)?new BrowserRuntime:"undefined"!==String(typeof require)?new NodeJSRuntime:new RhinoRuntime};var runtime=Runtime.create(),core={},gui={},xmldom={},odf={},ops={},webodf={};function makeBase64(){function P(B){var A,H=B.length,$=new Uint8Array(new ArrayBuffer(H));for(A=0;A<H;A+=1)$[A]=255&B.charCodeAt(A);return $}function X(B){var A,$,H="",J=B.length-2;for($=0;$<J;$+=3)H+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(A=B[$]<<16|B[$+1]<<8|B[$+2])>>>18],H+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[A>>>12&63],H+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[A>>>6&63],H+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&A];return $===J+1?(H+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(A=B[$]<<4)>>>6],H+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&A],H+="=="):$===J&&(H+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(A=B[$]<<10|B[$+1]<<2)>>>12],H+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[A>>>6&63],H+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&A],H+="="),H}function I(B){var Q,U,A=(B=B.replace(/[^A-Za-z0-9+\/]+/g,"")).length,H=new Uint8Array(new ArrayBuffer(3*A)),$=B.length%4,J=0;for(Q=0;Q<A;Q+=4)U=(l[B.charAt(Q)]||0)<<18|(l[B.charAt(Q+1)]||0)<<12|(l[B.charAt(Q+2)]||0)<<6|(l[B.charAt(Q+3)]||0),H[J]=U>>16,H[J+1]=U>>8&255,H[J+2]=255&U,J+=3;return H.subarray(0,A=3*A-[0,0,2,1][$])}function y(B){var A,H,$=B.length,J=0,Q=new Uint8Array(new ArrayBuffer(3*$));for(A=0;A<$;A+=1)128>(H=B[A])?Q[J++]=H:(2048>H?Q[J++]=192|H>>>6:(Q[J++]=224|H>>>12&15,Q[J++]=128|H>>>6&63),Q[J++]=128|63&H);return Q.subarray(0,J)}function w(B){var A,H,$,Q=B.length,U=new Uint8Array(new ArrayBuffer(Q)),K=0;for(A=0;A<Q;A+=1)128>(H=B[A])?U[K++]=H:($=B[A+=1],U[K++]=224>H?(31&H)<<6|63&$:(15&H)<<12|(63&$)<<6|63&B[A+=1]);return U.subarray(0,K)}function E(B){return X(P(B))}function R(B){return String.fromCharCode.apply(String,I(B))}function C(B){return w(P(B))}function N(B){B=w(B);for(var A="",H=0;H<B.length;)A+=String.fromCharCode.apply(String,B.subarray(H,H+45e3)),H+=45e3;return A}function x(B,A,H){var $,J,Q,U="";for(Q=A;Q<H;Q+=1)128>(A=255&B.charCodeAt(Q))?U+=String.fromCharCode(A):($=255&B.charCodeAt(Q+=1),224>A?U+=String.fromCharCode((31&A)<<6|63&$):(J=255&B.charCodeAt(Q+=1),U+=String.fromCharCode((15&A)<<12|(63&$)<<6|63&J)));return U}function S(B,A){var $="",J=0;1e5>B.length?A(x(B,0,B.length),!0):("string"!=typeof B&&(B=B.slice()),function H(){var Q=J+1e5;Q>B.length&&(Q=B.length),$+=x(B,J,Q),A($,Q=(J=Q)===B.length)&&!Q&&runtime.setTimeout(H,0)}())}function s(B){return y(P(B))}function u(B){return String.fromCharCode.apply(String,y(B))}function m(B){return String.fromCharCode.apply(String,y(P(B)))}var M,O,ee,G,l=function(B){var H,$,A={};for(H=0,$=B.length;H<$;H+=1)A[B.charAt(H)]=H;return A}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),q=runtime.getWindow();return q&&q.btoa?(ee=q.btoa,M=function(B){return ee(m(B))}):(ee=E,M=function(B){return X(s(B))}),q&&q.atob?(G=q.atob,O=function(B){return x(B=G(B),0,B.length)}):(G=R,O=function(B){return N(I(B))}),core.Base64=function(){return this.convertByteArrayToBase64=this.convertUTF8ArrayToBase64=X,this.convertBase64ToByteArray=this.convertBase64ToUTF8Array=I,this.convertUTF16ArrayToByteArray=this.convertUTF16ArrayToUTF8Array=y,this.convertByteArrayToUTF16Array=this.convertUTF8ArrayToUTF16Array=w,this.convertUTF8StringToBase64=E,this.convertBase64ToUTF8String=R,this.convertUTF8StringToUTF16Array=C,this.convertByteArrayToUTF16String=this.convertUTF8ArrayToUTF16String=N,this.convertUTF8StringToUTF16String=S,this.convertUTF16StringToByteArray=this.convertUTF16StringToUTF8Array=s,this.convertUTF16ArrayToUTF8String=u,this.convertUTF16StringToUTF8String=m,this.convertUTF16StringToBase64=M,this.convertBase64ToUTF16String=O,this.fromBase64=R,this.toBase64=E,this.atob=G,this.btoa=ee,this.utob=m,this.btou=S,this.encode=M,this.encodeURI=function(B){return M(B).replace(/[+\/]/g,function(A){return"+"===A?"-":"_"}).replace(/\\=+$/,"")},this.decode=function(B){return O(B.replace(/[\-_]/g,function(A){return"-"===A?"+":"/"}))},this},core.Base64}function createXPathSingleton(){function P(S,s,u){return-1!==S&&(S<s||-1===s)&&(S<u||-1===u)}function X(S){for(var l,s=[],u=0,m=S.length;u<m;){var M=S,O=m,q=s,ee="",G=[],B=M.indexOf("[",u),A=M.indexOf("/",u),H=M.indexOf("=",u);if(P(A,B,H)?(ee=M.substring(u,A),u=A+1):P(B,A,H)?(ee=M.substring(u,B),u=x(M,B,G)):P(H,A,B)?(ee=M.substring(u,H),u=H):(ee=M.substring(u,O),u=O),q.push({location:ee,predicates:G}),u<m&&"="===S[u]){if(2<(l=S.substring(u+1,m)).length&&("'"===l[0]||'"'===l[0]))l=l.slice(1,l.length-1);else try{l=parseInt(l,10)}catch{}u=m}}return{steps:s,value:l}}function I(){var S=null,s=!1;this.setNode=function(u){S=u},this.reset=function(){s=!1},this.next=function(){var u=s?null:S;return s=!0,u}}function y(S,s,u){this.reset=function(){S.reset()},this.next=function(){for(var m=S.next();m&&(m.nodeType===Node.ELEMENT_NODE&&(m=m.getAttributeNodeNS(s,u)),!m);)m=S.next();return m}}function w(S,s){var u=S.next(),m=null;this.reset=function(){S.reset(),u=S.next(),m=null},this.next=function(){for(;u;){if(m)if(s&&m.firstChild)m=m.firstChild;else{for(;!m.nextSibling&&m!==u;)m=m.parentNode;m===u?u=S.next():m=m.nextSibling}else do{(m=u.firstChild)||(u=S.next())}while(u&&!m);if(m&&m.nodeType===Node.ELEMENT_NODE)return m}return null}}function E(S,s){this.reset=function(){S.reset()},this.next=function(){for(var u=S.next();u&&!s(u);)u=S.next();return u}}function R(S,s,u){var m=u((s=s.split(":",2))[0]),l=s[1];return new E(S,function(M){return M.localName===l&&M.namespaceURI===m})}function C(S,s,u){var m=new I,l=N(m,s,u),M=s.value;return new E(S,void 0===M?function(O){return m.setNode(O),l.reset(),null!==l.next()}:function(O){return m.setNode(O),l.reset(),!!(O=l.next())&&O.nodeValue===M})}var N,x;return x=function(S,s,u){for(var m=s,l=S.length,M=0;m<l;)"]"===S[m]?0>=--M&&u.push(X(S.substring(s,m))):"["===S[m]&&(0>=M&&(s=m+1),M+=1),m+=1;return m},N=function(S,s,u){var m,l,M,O;for(m=0;m<s.steps.length;m+=1){if(""===(l=(M=s.steps[m]).location))S=new w(S,!1);else if("@"===l[0]){if(!(O=u((l=l.substr(1).split(":",2))[0])))throw"No namespace associated with the prefix "+l[0];S=new y(S,O,l[1])}else"."!==l&&(S=new w(S,!1),-1!==l.indexOf(":")&&(S=R(S,l,u)));for(l=0;l<M.predicates.length;l+=1)S=C(S,O=M.predicates[l],u)}return S},{getODFElementsWithXPath:function(S,s,u){var m=S.ownerDocument,l=[],M=null;if(m&&"function"==typeof m.evaluate)for(M=(u=m.evaluate(s,S,u,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null)).iterateNext();null!==M;)M.nodeType===Node.ELEMENT_NODE&&l.push(M),M=u.iterateNext();else{for((l=new I).setNode(S),S=X(s),l=N(l,S,u),S=[],u=l.next();u;)S.push(u),u=l.next();l=S}return l}}}function RootFilter(P,X,I){var y=core.PositionFilter.FilterResult.FILTER_ACCEPT,w=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(E){var R;return E=E.container(),R="string"==typeof P?X[P].getNode():P,I(E)===I(R)?y:w}}webodf.Version="undefined"!==String(typeof webodf_version)?webodf_version:"From Source",function(){function g(P,X,I){var w,E,y=P+"/manifest.json";runtime.log("Loading manifest: "+y);try{w=runtime.readFileSync(y,"utf-8")}catch(R){if(!I)throw console.log(String(R)),R;return void runtime.log("No loadable manifest found.")}for(E in I=JSON.parse(w))I.hasOwnProperty(E)&&(X[E]={dir:P,deps:I[E]})}function k(P,X,I){var w=[],E={},R={};return P.forEach(function y(C){if(!R[C]&&!I(C)){if(E[C])throw"Circular dependency detected for "+C+".";if(E[C]=!0,!X[C])throw"Missing dependency information for class "+C+".";var S,N=X[C],x=N.deps,s=x.length;for(S=0;S<s;S+=1)y(x[S]);E[C]=!1,R[C]=!0,w.push(N.dir+"/"+C.replace(".","/")+".js")}}),w}function d(P,X){return X+"\n//# sourceURL="+P}function b(b){var f,e;for(f=0;f<b.length;f+=1)e=runtime.readFileSync(b[f],"utf-8"),e=d(b[f],e),eval(e)}function f(P){P=P.split(".");var X,I=p,y=P.length;for(X=0;X<y;X+=1){if(!I.hasOwnProperty(P[X]))return!1;I=I[P[X]]}return!0}var n,p={core,gui,xmldom,odf,ops};runtime.loadClasses=function(P,X){if(IS_COMPILED_CODE||0===P.length)return X&&X();var I;if(!(I=n)){I=[];var w,y=runtime.libraryPaths();for(runtime.currentDirectory()&&-1===y.indexOf(runtime.currentDirectory())&&g(runtime.currentDirectory(),I,!0),w=0;w<y.length;w+=1)g(y[w],I)}if(0===(P=k(P,n=I,f)).length)return X&&X();if("BrowserRuntime"===runtime.type()&&X){var E,R;for(I=P,y=document.currentScript||document.documentElement.lastChild,w=document.createDocumentFragment(),R=0;R<I.length;R+=1)(E=document.createElement("script")).type="text/javascript",E.charset="utf-8",E.async=!1,E.setAttribute("src",I[R]),w.appendChild(E);X&&(E.onload=X),y.parentNode.insertBefore(w,y)}else b(P),X&&X()},runtime.loadClass=function(P,X){runtime.loadClasses([P],X)}}(),function(){var P=function(X){return X};runtime.getTranslator=function(){return P},runtime.setTranslator=function(X){P=X},runtime.tr=function(X){var I=P(X);return I&&"string"===String(typeof I)?I:X}}(),function(g){function k(d){if(d.length){var b=d[0];runtime.readFile(b,"utf8",function(f,n){function g(){var b;(b=eval(k))&&runtime.exit(b)}var r="",r=b.lastIndexOf("/"),k=n,r=-1!==r?b.substring(0,r):".";runtime.setCurrentDirectory(r),f?(runtime.log(f),runtime.exit(1)):null===k?(runtime.log("No code found for "+b),runtime.exit(1)):g.apply(null,d)})}}g=g?Array.prototype.slice.call(g):[],"NodeJSRuntime"===runtime.type()?k(process.argv.slice(2)):"RhinoRuntime"===runtime.type()?k(g):k(g.slice(1))}("undefined"!==String(typeof arguments)&&arguments),core.Async={forEach:function(P,X,I){function y(C){R!==E&&(C?(R=E,I(C)):(R+=1)===E&&I(null))}var w,E=P.length,R=0;for(w=0;w<E;w+=1)X(P[w],y)},destroyAll:function(P,X){!function I(y,w){w?X(w):y<P.length?P[y](function(E){I(y+1,E)}):X()}(0,void 0)}},core.Base64=makeBase64(),core.CSSUnits=function(){var P=this,X={in:1,cm:2.54,mm:25.4,pt:72,pc:12,px:96};this.convert=function(I,y,w){return I*X[w]/X[y]},this.convertMeasure=function(I,y){var w,E;return I&&y&&(w=parseFloat(I),E=I.replace(w.toString(),""),w=P.convert(w,E,y)),w},this.getUnits=function(I){return I.substr(I.length-2,I.length)}},function(){function P(){var y,w,E,R,C,N,x,S,s;return void 0===I&&(N=(w=(y=runtime.getWindow())&&y.document).documentElement,x=w.body,I={rangeBCRIgnoresElementBCR:!1,unscaledRangeClientRects:!1,elementBCRIgnoresBodyScroll:!1},w&&((R=w.createElement("div")).style.position="absolute",R.style.left="-99999px",R.style.transform="scale(2)",R.style["-webkit-transform"]="scale(2)",C=w.createElement("div"),R.appendChild(C),x.appendChild(R),(y=w.createRange()).selectNode(C),I.rangeBCRIgnoresElementBCR=0===y.getClientRects().length,C.appendChild(w.createTextNode("Rect transform test")),w=C.getBoundingClientRect(),E=y.getBoundingClientRect(),I.unscaledRangeClientRects=2<Math.abs(w.height-E.height),R.style.transform="",R.style["-webkit-transform"]="",w=N.style.overflow,E=x.style.overflow,S=x.style.height,s=x.scrollTop,N.style.overflow="visible",x.style.overflow="visible",x.style.height="200%",x.scrollTop=x.scrollHeight,I.elementBCRIgnoresBodyScroll=y.getBoundingClientRect().top!==C.getBoundingClientRect().top,x.scrollTop=s,x.style.height=S,x.style.overflow=E,N.style.overflow=w,y.detach(),x.removeChild(R),y=Object.keys(I).map(function(u){return u+":"+String(I[u])}).join(", "),runtime.log("Detected browser quirks - "+y))),I}function X(y,w,E){for(y=y?y.firstElementChild:null;y;){if(y.localName===E&&y.namespaceURI===w)return y;y=y.nextElementSibling}return null}var I;core.DomUtilsImpl=function(){function y(m,l){for(var O,M=0;m.parentNode!==l;)runtime.assert(null!==m.parentNode,"parent is null"),m=m.parentNode;for(O=l.firstChild;O!==m;)M+=1,O=O.nextSibling;return M}function w(m,l){return 0>=m.compareBoundaryPoints(Range.START_TO_START,l)&&0<=m.compareBoundaryPoints(Range.END_TO_END,l)}function E(m,l){return 0>=m.compareBoundaryPoints(Range.END_TO_START,l)&&0<=m.compareBoundaryPoints(Range.START_TO_END,l)}function R(m,l){var M=null;return m.nodeType===Node.TEXT_NODE&&(0===m.length?(m.parentNode.removeChild(m),l.nodeType===Node.TEXT_NODE&&(M=l)):(l.nodeType===Node.TEXT_NODE&&(m.appendData(l.data),l.parentNode.removeChild(l)),M=m)),M}function C(m){for(var l=m.parentNode;m.firstChild;)l.insertBefore(m.firstChild,m);return l.removeChild(m),l}function S(m,l){return P().unscaledRangeClientRects?m:m/l}var l,M,u=null;this.splitBoundaries=function(m){var l,O,q,ee,M=[];if(m.startContainer.nodeType===Node.TEXT_NODE||m.endContainer.nodeType===Node.TEXT_NODE){if(O=m.endContainer,q=m.endContainer.nodeType!==Node.TEXT_NODE&&m.endOffset===m.endContainer.childNodes.length,(ee=m.endOffset)<(l=m.endContainer).childNodes.length)for(l=l.childNodes.item(ee),ee=0;l.firstChild;)l=l.firstChild;else for(;l.lastChild;)ee=(l=l.lastChild).nodeType===Node.TEXT_NODE?l.textContent.length:l.childNodes.length;if(l===O&&(O=null),m.setEnd(l,ee),ee=m.endContainer,0!==m.endOffset&&ee.nodeType===Node.TEXT_NODE&&m.endOffset!==(l=ee).length&&(M.push(l.splitText(m.endOffset)),M.push(l)),ee=m.startContainer,0!==m.startOffset&&ee.nodeType===Node.TEXT_NODE&&m.startOffset!==(l=ee).length&&(ee=l.splitText(m.startOffset),M.push(l),M.push(ee),m.setStart(ee,0)),null!==O){for(ee=m.endContainer;ee.parentNode&&ee.parentNode!==O;)ee=ee.parentNode;q=q?O.childNodes.length:y(ee,O),m.setEnd(O,q)}}return M},this.containsRange=w,this.rangesIntersect=E,this.rangeIntersection=function(m,l){var M;return E(m,l)&&(M=m.cloneRange(),-1===m.compareBoundaryPoints(Range.START_TO_START,l)&&M.setStart(l.startContainer,l.startOffset),1===m.compareBoundaryPoints(Range.END_TO_END,l)&&M.setEnd(l.endContainer,l.endOffset)),M},this.getNodesInRange=function(m,l,M){var ee,G,O=[],q=(q=m.commonAncestorContainer).nodeType===Node.TEXT_NODE?q.parentNode:q;if(M=m.startContainer.ownerDocument.createTreeWalker(q,M,l,!1),m.endContainer.childNodes[m.endOffset-1]?(ee=m.endContainer.childNodes[m.endOffset-1],G=Node.DOCUMENT_POSITION_PRECEDING|Node.DOCUMENT_POSITION_CONTAINED_BY):(ee=m.endContainer,G=Node.DOCUMENT_POSITION_PRECEDING),m.startContainer.childNodes[m.startOffset])M.currentNode=m=m.startContainer.childNodes[m.startOffset];else{var B=m.startContainer;m.startOffset===(B.nodeType===Node.TEXT_NODE?B.length:B.childNodes.length)?(M.currentNode=m=m.startContainer,M.lastChild(),m=M.nextNode()):M.currentNode=m=m.startContainer}if(m){if((m=M.currentNode)!==q)for(m=m.parentNode;m&&m!==q;)l(m)===NodeFilter.FILTER_REJECT&&(M.currentNode=m),m=m.parentNode;switch(l(m=M.currentNode)){case NodeFilter.FILTER_REJECT:for(m=M.nextSibling();!m&&M.parentNode();)m=M.nextSibling();break;case NodeFilter.FILTER_SKIP:m=M.nextNode()}for(;m&&(0===(l=ee.compareDocumentPosition(m))||0!=(l&G));)O.push(m),m=M.nextNode()}return O},this.normalizeTextNodes=function(m){m&&m.nextSibling&&(m=R(m,m.nextSibling)),m&&m.previousSibling&&R(m.previousSibling,m)},this.rangeContainsNode=function(m,l){var q,M=l.ownerDocument.createRange(),O=l.ownerDocument.createRange();return M.setStart(m.startContainer,m.startOffset),M.setEnd(m.endContainer,m.endOffset),O.selectNodeContents(l),q=w(M,O),M.detach(),O.detach(),q},this.mergeIntoParent=C,this.removeUnwantedNodes=function N(m,l){var ee,M=m.parentNode,O=m.firstChild,q=l(m);if(q===NodeFilter.FILTER_SKIP)return M;for(;O;)ee=O.nextSibling,N(O,l),O=ee;return M&&q===NodeFilter.FILTER_REJECT&&C(m),M},this.removeAllChildNodes=function(m){for(;m.firstChild;)m.removeChild(m.firstChild)},this.getElementsByTagNameNS=function(m,l,M){var O=[];for(m=m.getElementsByTagNameNS(l,M),O.length=M=m.length,l=0;l<M;l+=1)O[l]=m.item(l);return O},this.getElementsByTagName=function(m,l){var O,q,ee,M=[];for(O=m.getElementsByTagName(l),M.length=ee=O.length,q=0;q<ee;q+=1)M[q]=O.item(q);return M},this.containsNode=function(m,l){return m===l||m.contains(l)},this.comparePoints=function(m,l,M,O){if(m===M)return O-l;var q=m.compareDocumentPosition(M);return q=2===q?-1:4===q?1:10===q?(l=y(m,M))<O?1:-1:(O=y(M,m))<l?-1:1},this.adaptRangeDifferenceToZoomLevel=S,this.translateRect=function(m,l,M){return{top:S(m.top-l.top,M),left:S(m.left-l.left,M),bottom:S(m.bottom-l.top,M),right:S(m.right-l.left,M),width:S(m.width,M),height:S(m.height,M)}},this.getBoundingClientRect=function(m){var q,l=m.ownerDocument,M=P(),O=l.body;return!1!==M.unscaledRangeClientRects&&!M.rangeBCRIgnoresElementBCR||m.nodeType!==Node.ELEMENT_NODE?(u?q=u:u=q=l.createRange(),(M=q).selectNode(m),M.getBoundingClientRect()):(m=m.getBoundingClientRect(),M.elementBCRIgnoresBodyScroll?{left:m.left+O.scrollLeft,right:m.right+O.scrollLeft,top:m.top+O.scrollTop,bottom:m.bottom+O.scrollTop,width:m.width,height:m.height}:m)},this.mapKeyValObjOntoNode=function(m,l,M){Object.keys(l).forEach(function(O){var q=(ee=O.split(":"))[1],ee=M(ee[0]),G=l[O];ee?((q=m.getElementsByTagNameNS(ee,q)[0])||(q=m.ownerDocument.createElementNS(ee,O),m.appendChild(q)),q.textContent=G):runtime.log("Key ignored: "+O)})},this.removeKeyElementsFromNode=function(m,l,M){l.forEach(function(O){var q=O.split(":"),ee=q[1];(q=M(q[0]))?(ee=m.getElementsByTagNameNS(q,ee)[0])?ee.parentNode.removeChild(ee):runtime.log("Element for "+O+" not found."):runtime.log("Property Name ignored: "+O)})},this.getKeyValRepresentationOfNode=function(m,l){for(var q,M={},O=m.firstElementChild;O;)(q=l(O.namespaceURI))&&(M[q+":"+O.localName]=O.textContent),O=O.nextElementSibling;return M},this.mapObjOntoNode=function s(m,l,M){Object.keys(l).forEach(function(O){var G,q=(G=O.split(":"))[1],ee=M(G[0]),B=typeof(G=l[O]);"object"===B?Object.keys(G).length&&(O=ee?m.getElementsByTagNameNS(ee,q)[0]||m.ownerDocument.createElementNS(ee,O):m.getElementsByTagName(q)[0]||m.ownerDocument.createElement(O),m.appendChild(O),s(O,G,M)):ee&&(runtime.assert("number"===B||"string"===B,"attempting to map unsupported type '"+B+"' (key: "+O+")"),m.setAttributeNS(ee,O,String(G)))})},this.cloneEvent=function(m){var l=Object.create(null);return Object.keys(m.constructor.prototype).forEach(function(M){l[M]=m[M]}),l.prototype=m.constructor.prototype,l},this.getDirectChild=X,null!==(M=runtime.getWindow())&&(l=M.navigator.appVersion.toLowerCase(),M=-1===l.indexOf("chrome")&&(-1!==l.indexOf("applewebkit")||-1!==l.indexOf("safari")),l=-1!==l.indexOf("msie")||-1!==l.indexOf("trident"),M||l)&&(this.containsNode=function x(m,l){return m===l||Boolean(m.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)})},core.DomUtils=new core.DomUtilsImpl}(),core.Cursor=function(P,X){function I(s){s.parentNode&&(C.push(s.previousSibling),C.push(s.nextSibling),s.parentNode.removeChild(s))}function y(s,u,m){if(u.nodeType===Node.TEXT_NODE){runtime.assert(Boolean(u),"putCursorIntoTextNode: invalid container");var l=u.parentNode;runtime.assert(Boolean(l),"putCursorIntoTextNode: container without parent"),runtime.assert(0<=m&&m<=u.length,"putCursorIntoTextNode: offset is out of bounds"),0===m?l.insertBefore(s,u):(m!==u.length&&u.splitText(m),l.insertBefore(s,u.nextSibling))}else u.nodeType===Node.ELEMENT_NODE&&u.insertBefore(s,u.childNodes.item(m));C.push(s.previousSibling),C.push(s.nextSibling)}var R,x,w=P.createElementNS("urn:webodf:names:cursor","cursor"),E=P.createElementNS("urn:webodf:names:cursor","anchor"),C=[],N=P.createRange(),S=core.DomUtils;this.getNode=function(){return w},this.getAnchorNode=function(){return E.parentNode?E:w},this.getSelectedRange=function(){return x?(N.setStartBefore(w),N.collapse(!0)):(N.setStartAfter(R?E:w),N.setEndBefore(R?w:E)),N},this.setSelectedRange=function(s,u){N&&N!==s&&N.detach(),N=s,R=!1!==u,(x=s.collapsed)?(I(E),I(w),y(w,s.startContainer,s.startOffset)):(I(E),I(w),y(R?w:E,s.endContainer,s.endOffset),y(R?E:w,s.startContainer,s.startOffset)),C.forEach(S.normalizeTextNodes),C.length=0},this.hasForwardSelection=function(){return R},this.remove=function(){I(w),C.forEach(S.normalizeTextNodes),C.length=0},w.setAttributeNS("urn:webodf:names:cursor","memberId",X),E.setAttributeNS("urn:webodf:names:cursor","memberId",X)},core.Destroyable=function(){},core.Destroyable.prototype.destroy=function(P){},core.EventSource=function(){},core.EventSource.prototype.subscribe=function(P,X){},core.EventSource.prototype.unsubscribe=function(P,X){},core.EventNotifier=function(P){function X(y){runtime.assert(!I.hasOwnProperty(y),'Duplicated event ids: "'+y+'" registered more than once.'),I[y]=[]}var I={};this.emit=function(y,w){var E,R;for(runtime.assert(I.hasOwnProperty(y),'unknown event fired "'+y+'"'),R=I[y],E=0;E<R.length;E+=1)R[E](w)},this.subscribe=function(y,w){runtime.assert(I.hasOwnProperty(y),'tried to subscribe to unknown event "'+y+'"'),I[y].push(w)},this.unsubscribe=function(y,w){var E;runtime.assert(I.hasOwnProperty(y),'tried to unsubscribe from unknown event "'+y+'"'),E=I[y].indexOf(w),runtime.assert(-1!==E,'tried to unsubscribe unknown callback from event "'+y+'"'),-1!==E&&I[y].splice(E,1)},this.register=X,P&&P.forEach(X)},core.ScheduledTask=function(P,X,I){function y(){R&&(I(E),R=!1)}function w(){y(),P.apply(void 0,C),C=null}var E,R=!1,C=[],N=!1;this.trigger=function(){runtime.assert(!1===N,"Can't trigger destroyed ScheduledTask instance"),C=Array.prototype.slice.call(arguments),R||(R=!0,E=X(w))},this.triggerImmediate=function(){runtime.assert(!1===N,"Can't trigger destroyed ScheduledTask instance"),C=Array.prototype.slice.call(arguments),w()},this.processRequests=function(){R&&w()},this.cancel=y,this.restart=function(){runtime.assert(!1===N,"Can't trigger destroyed ScheduledTask instance"),y(),R=!0,E=X(w)},this.destroy=function(x){y(),N=!0,x()}},function(){var P;core.Task={},core.Task.SUPPRESS_MANUAL_PROCESSING=!1,core.Task.processTasks=function(){core.Task.SUPPRESS_MANUAL_PROCESSING||P.performRedraw()},core.Task.createRedrawTask=function(X){return new core.ScheduledTask(X,P.requestRedrawTask,P.cancelRedrawTask)},core.Task.createTimeoutTask=function(X,I){return new core.ScheduledTask(X,function(y){return runtime.setTimeout(y,I)},runtime.clearTimeout)},P=new function(){var X={};this.requestRedrawTask=function(I){var y=runtime.requestAnimationFrame(function(){I(),delete X[y]});return X[y]=I,y},this.performRedraw=function(){Object.keys(X).forEach(function(I){X[I](),runtime.cancelAnimationFrame(parseInt(I,10))}),X={}},this.cancelRedrawTask=function(I){runtime.cancelAnimationFrame(I),delete X[I]}}}(),core.EventSubscriptions=function(){function P(R,C,N){R.subscribe(C,N),I.push({eventSource:R,eventid:C,callback:N})}function X(){var R=[];I.forEach(function(C){C.eventSource.unsubscribe(C.eventid,C.callback)}),I.length=0,Object.keys(w).forEach(function(C){w[C].forEach(function(N){R.push(N.task.destroy)}),delete w[C]}),core.Async.destroyAll(R,function(){}),y=new core.EventNotifier}var I=[],y=new core.EventNotifier,w={},E=0;this.addSubscription=P,this.addFrameSubscription=function(R,C,N){var x,S,s,u;for(w.hasOwnProperty(C)||(w[C]=[]),s=w[C],u=0;u<s.length;u+=1)if(s[u].eventSource===R){x=s[u];break}x||(S="s"+E,E+=1,y.register(S),x={frameEventId:S,eventSource:R,task:core.Task.createRedrawTask(function(){y.emit(S,void 0)})},s.push(x),P(R,C,x.task.trigger)),y.subscribe(x.frameEventId,N)},this.unsubscribeAll=X,this.destroy=function(R){X(),R()}},core.LazyProperty=function(P){var X,I=!1;this.value=function(){return I||(X=P(),I=!0),X},this.reset=function(){I=!1}},core.LoopWatchDog=function(P,X){var I=Date.now(),y=0;this.check=function(){if(P&&Date.now()-I>P)throw runtime.log("alert","watchdog timeout"),"timeout!";if(0<X&&(y+=1)>X)throw runtime.log("alert","watchdog loop overflow"),"loop overflow"}},core.NodeFilterChain=function(P){var X=NodeFilter.FILTER_REJECT,I=NodeFilter.FILTER_ACCEPT;this.acceptNode=function(y){var w;for(w=0;w<P.length;w+=1)if(P[w].acceptNode(y)===X)return X;return I}},core.PositionIterator=function(P,X,I,y){function R(){var q=S.currentNode,ee=q.nodeType;s=ee===m?q.length-1:ee===l?1:0}function C(){if(null===S.previousSibling()){if(!S.parentNode()||S.currentNode===P)return S.firstChild(),!1;s=0}else R();return!0}function N(){var ee,q=S.currentNode;if(ee=u(q),q!==P)for(q=q.parentNode;q&&q!==P;)u(q)===O&&(S.currentNode=q,ee=O),q=q.parentNode;return ee===O?(s=S.currentNode.nodeType===m?q.length:1,q=x.nextPosition()):q=ee===M||x.nextPosition(),q&&runtime.assert(u(S.currentNode)===M,"moveToAcceptedNode did not result in walker being on an accepted node"),q}var S,s,u,x=this,m=Node.TEXT_NODE,l=Node.ELEMENT_NODE,M=NodeFilter.FILTER_ACCEPT,O=NodeFilter.FILTER_REJECT;this.nextPosition=function(){var q=S.currentNode,ee=q.nodeType;if(q===P)return!1;if(0===s&&ee===l)null===S.firstChild()&&(s=1);else if(ee===m&&s+1<q.length)s+=1;else if(null!==S.nextSibling())s=0;else{if(!S.parentNode())return!1;s=1}return!0},this.previousPosition=function(){var q=!0,ee=S.currentNode;return 0===s?q=C():ee.nodeType===m?--s:null!==S.lastChild()?R():ee===P?q=!1:s=0,q},this.previousNode=C,this.container=function(){var q=S.currentNode;return 0===s&&q.nodeType!==m&&(q=q.parentNode),q},this.rightNode=function(){var q=S.currentNode,ee=q.nodeType;if(ee===m&&s===q.length)for(q=q.nextSibling;q&&u(q)!==M;)q=q.nextSibling;else ee===l&&1===s&&(q=null);return q},this.leftNode=function(){var q=S.currentNode;if(0===s)for(q=q.previousSibling;q&&u(q)!==M;)q=q.previousSibling;else if(q.nodeType===l)for(q=q.lastChild;q&&u(q)!==M;)q=q.previousSibling;return q},this.getCurrentNode=function(){return S.currentNode},this.unfilteredDomOffset=function(){if(S.currentNode.nodeType===m)return s;var q=0,ee=S.currentNode;for(ee=1===s?ee.lastChild:ee.previousSibling;ee;)q+=1,ee=ee.previousSibling;return q},this.getPreviousSibling=function(){var q=S.currentNode,ee=S.previousSibling();return S.currentNode=q,ee},this.getNextSibling=function(){var q=S.currentNode,ee=S.nextSibling();return S.currentNode=q,ee},this.setPositionBeforeElement=function(q){return runtime.assert(Boolean(q),"setPositionBeforeElement called without element"),S.currentNode=q,s=0,N()},this.setUnfilteredPosition=function(q,ee){return runtime.assert(Boolean(q),"PositionIterator.setUnfilteredPosition called without container"),S.currentNode=q,q.nodeType===m?(s=ee,runtime.assert(ee<=q.length,"Error in setPosition: "+ee+" > "+q.length),runtime.assert(0<=ee,"Error in setPosition: "+ee+" < 0"),ee===q.length&&(S.nextSibling()?s=0:S.parentNode()?s=1:runtime.assert(!1,"Error in setUnfilteredPosition: position not valid."))):ee<q.childNodes.length?(S.currentNode=q.childNodes.item(ee),s=0):s=1,N()},this.moveToEnd=function(){S.currentNode=P,s=1},this.moveToEndOfNode=function(q){q.nodeType===m?x.setUnfilteredPosition(q,q.length):(S.currentNode=q,s=1)},this.isBeforeNode=function(){return 0===s},this.getNodeFilter=function(){return u},(u=(I?new function E(q){this.acceptNode=function(ee){return!ee||ee.nodeType===m&&0===ee.length?O:q.acceptNode(ee)}}(I):new function w(){this.acceptNode=function(q){return!q||q.nodeType===m&&0===q.length?O:M}}).acceptNode).acceptNode=u,X=X||NodeFilter.SHOW_ALL,runtime.assert(P.nodeType!==Node.TEXT_NODE,"Internet Explorer doesn't allow tree walker roots to be text nodes"),S=P.ownerDocument.createTreeWalker(P,X,u,y),s=0,null===S.firstChild()&&(s=1)},core.PositionFilter=function(){},core.PositionFilter.FilterResult={FILTER_ACCEPT:1,FILTER_REJECT:2,FILTER_SKIP:3},core.PositionFilter.prototype.acceptPosition=function(P){},core.PositionFilterChain=function(){var P=[],X=core.PositionFilter.FilterResult.FILTER_ACCEPT,I=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(y){var w;for(w=0;w<P.length;w+=1)if(P[w].acceptPosition(y)===I)return I;return X},this.addFilter=function(y){P.push(y)}},core.StepDirection={PREVIOUS:1,NEXT:2},core.StepIterator=function(P,X){function I(){s=null,m=u=void 0}function y(){return void 0===m&&(m=P.acceptPosition(X)===x),m}function w(l,M){return I(),X.setUnfilteredPosition(l,M)}function E(){return s||(s=X.container()),s}function R(){return void 0===u&&(u=X.unfilteredDomOffset()),u}function C(){for(I();X.nextPosition();)if(I(),y())return!0;return!1}function N(){for(I();X.previousPosition();)if(I(),y())return!0;return!1}var s,u,m,x=core.PositionFilter.FilterResult.FILTER_ACCEPT,S=core.StepDirection.NEXT;this.isStep=y,this.setPosition=w,this.container=E,this.offset=R,this.nextStep=C,this.previousStep=N,this.advanceStep=function(l){return l===S?C():N()},this.roundToClosestStep=function(){var l,M,O=y();return O||(l=E(),M=R(),(O=N())||(w(l,M),O=C())),O},this.roundToPreviousStep=function(){var l=y();return l||(l=N()),l},this.roundToNextStep=function(){var l=y();return l||(l=C()),l},this.leftNode=function(){return X.leftNode()},this.snapshot=function(){return new core.StepIterator.StepSnapshot(E(),R())},this.restore=function(l){w(l.container,l.offset)}},core.StepIterator.StepSnapshot=function(P,X){this.container=P,this.offset=X},core.Utils=function(){function P(X,I){if(I&&Array.isArray(I)){if(X=X||[],!Array.isArray(X))throw"Destination is not an array.";X=X.concat(I.map(function(y){return P(null,y)}))}else if(I&&"object"==typeof I){if("object"!=typeof(X=X||{}))throw"Destination is not an object.";Object.keys(I).forEach(function(y){X[y]=P(X[y],I[y])})}else X=I;return X}this.hashString=function(X){var y,w,I=0;for(y=0,w=X.length;y<w;y+=1)I=(I<<5)-I+X.charCodeAt(y),I|=0;return I},this.mergeObjects=function(X,I){return Object.keys(I).forEach(function(y){X[y]=P(X[y],I[y])}),X}},core.Zip=function(P,X){function I(x,S){var s=C.file(x);s?S(null,s.asUint8Array()):S(x+" not found.",null)}function y(x,S){I(x,function(s,u){if(s||null===u)return S(s,null);var m=runtime.byteArrayToString(u,"utf8");S(null,m)})}function w(x,S){try{x(C.generate({type:"uint8array",compression:"STORE"}))}catch(s){S(s.message)}}function E(x,S){w(function(s){runtime.writeFile(x,s,S)},S)}var C,R=this,N=new core.Base64;this.load=I,this.save=function(x,S,s,u){C.file(x,S,{date:u,compression:s?"DEFLATE":"STORE"})},this.remove=function(x){var S=null!==C.file(x);return C.remove(x),S},this.write=function(x){E(P,x)},this.writeAs=E,this.createByteArray=w,this.loadContentXmlAsFragments=function(x,S){y(x,function(s,u){if(s)return S.rootElementReady(s);S.rootElementReady(null,u,!0)})},this.loadAsString=y,this.loadAsDOM=function(x,S){y(x,function(s,u){if(s||null===u)S(s,null);else{var m=(new DOMParser).parseFromString(u,"text/xml");S(null,m)}})},this.loadAsDataURL=function(x,S,s){I(x,function(u,m){if(u||!m)return s(u,null);var M,l=0;for(S||(S=80===m[1]&&78===m[2]&&71===m[3]?"image/png":255===m[0]&&216===m[1]&&255===m[2]?"image/jpeg":71===m[0]&&73===m[1]&&70===m[2]?"image/gif":""),M="data:"+S+";base64,";l<m.length;)M+=N.convertUTF8ArrayToBase64(m.subarray(l,Math.min(l+45e3,m.length))),l+=45e3;s(null,M)})},this.getEntries=function(){return Object.keys(C.files).map(function(x){return{filename:x,date:C.files[x].date}})},C=new externs.JSZip,null!==X&&runtime.readFile(P,"binary",function(x,S){if("string"==typeof S&&(x="file was read as a string. Should be Uint8Array."),x||!S||0===S.length)X("File '"+P+"' cannot be read. Err: "+(x||"[none]"),R);else try{C.load(S,{checkCRC32:!1}),X(null,R)}catch(s){X(s.message,R)}})},core.SimpleClientRect=null,gui.CommonConstraints={EDIT:{ANNOTATIONS:{ONLY_DELETE_OWN:"onlyDeleteOwn"},REVIEW_MODE:"reviewMode"}},gui.SessionConstraints=function(){function P(y){X.hasOwnProperty(y)||(X[y]=!1,I.register(y))}var X={},I=new core.EventNotifier;this.registerConstraint=P,this.subscribe=function(y,w){P(y),I.subscribe(y,w)},this.unsubscribe=function(y,w){I.unsubscribe(y,w)},this.setState=function(y,w){runtime.assert(!0===X.hasOwnProperty(y),"No such constraint"),X[y]!==w&&(X[y]=w,I.emit(y,w))},this.getState=function(y){return runtime.assert(!0===X.hasOwnProperty(y),"No such constraint"),X[y]}},gui.BlacklistNamespaceNodeFilter=function(P){var X={},I=NodeFilter.FILTER_REJECT,y=NodeFilter.FILTER_ACCEPT;this.acceptNode=function(w){return!w||X.hasOwnProperty(w.namespaceURI)?I:y},P.forEach(function(w){X[w]=!0})},odf.Namespaces={namespaceMap:{config:"urn:oasis:names:tc:opendocument:xmlns:config:1.0",db:"urn:oasis:names:tc:opendocument:xmlns:database:1.0",dc:"http://purl.org/dc/elements/1.1/",dr3d:"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0",draw:"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",chart:"urn:oasis:names:tc:opendocument:xmlns:chart:1.0",fo:"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",form:"urn:oasis:names:tc:opendocument:xmlns:form:1.0",math:"http://www.w3.org/1998/Math/MathML",meta:"urn:oasis:names:tc:opendocument:xmlns:meta:1.0",number:"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",office:"urn:oasis:names:tc:opendocument:xmlns:office:1.0",presentation:"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0",style:"urn:oasis:names:tc:opendocument:xmlns:style:1.0",svg:"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",table:"urn:oasis:names:tc:opendocument:xmlns:table:1.0",text:"urn:oasis:names:tc:opendocument:xmlns:text:1.0",xforms:"http://www.w3.org/2002/xforms",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},prefixMap:{},configns:"urn:oasis:names:tc:opendocument:xmlns:config:1.0",dbns:"urn:oasis:names:tc:opendocument:xmlns:database:1.0",dcns:"http://purl.org/dc/elements/1.1/",dr3dns:"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0",drawns:"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",chartns:"urn:oasis:names:tc:opendocument:xmlns:chart:1.0",fons:"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",formns:"urn:oasis:names:tc:opendocument:xmlns:form:1.0",mathns:"http://www.w3.org/1998/Math/MathML",metans:"urn:oasis:names:tc:opendocument:xmlns:meta:1.0",numberns:"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",officens:"urn:oasis:names:tc:opendocument:xmlns:office:1.0",presentationns:"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0",stylens:"urn:oasis:names:tc:opendocument:xmlns:style:1.0",svgns:"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",tablens:"urn:oasis:names:tc:opendocument:xmlns:table:1.0",textns:"urn:oasis:names:tc:opendocument:xmlns:text:1.0",xformsns:"http://www.w3.org/2002/xforms",xlinkns:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/XML/1998/namespace"},function(){var I,P=odf.Namespaces.namespaceMap,X=odf.Namespaces.prefixMap;for(I in P)P.hasOwnProperty(I)&&(X[P[I]]=I)}(),odf.Namespaces.forEachPrefix=function(P){var I,X=odf.Namespaces.namespaceMap;for(I in X)X.hasOwnProperty(I)&&P(I,X[I])},odf.Namespaces.lookupNamespaceURI=function(P){var X=null;return odf.Namespaces.namespaceMap.hasOwnProperty(P)&&(X=odf.Namespaces.namespaceMap[P]),X},odf.Namespaces.lookupPrefix=function(P){var X=odf.Namespaces.prefixMap;return X.hasOwnProperty(P)?X[P]:null},odf.Namespaces.lookupNamespaceURI.lookupNamespaceURI=odf.Namespaces.lookupNamespaceURI,odf.OdfSchemaImpl=function(){var P=[["config:config-item","uncategorized"],["form:item","object"],["form:option","uncategorized"],["math:math","field"],["meta:user-defined","uncategorized"],["number:currency-symbol","uncategorized"],["number:embedded-text","uncategorized"],["number:text","uncategorized"],["presentation:date-time-decl","uncategorized"],["presentation:footer-decl","uncategorized"],["presentation:header-decl","uncategorized"],["svg:desc","text"],["svg:title","text"],["table:desc","uncategorized"],["table:title","uncategorized"],["text:a","text"],["text:author-initials","field"],["text:author-name","field"],["text:bibliography-mark","field"],["text:bookmark-ref","field"],["text:chapter","field"],["text:character-count","field"],["text:conditional-text","field"],["text:creation-date","field"],["text:creation-time","field"],["text:creator","field"],["text:database-display","field"],["text:database-name","field"],["text:database-row-number","field"],["text:date","field"],["text:dde-connection","field"],["text:description","field"],["text:editing-cycles","field"],["text:editing-duration","field"],["text:execute-macro","uncategorized"],["text:expression","uncategorized"],["text:file-name","field"],["text:h","text"],["text:hidden-paragraph","text"],["text:hidden-text","text"],["text:image-count","field"],["text:index-entry-span","uncategorized"],["text:index-title-template","uncategorized"],["text:initial-creator","field"],["text:keywords","field"],["text:linenumbering-separator","style"],["text:measure","uncategorized"],["text:meta","uncategorized"],["text:meta-field","uncategorized"],["text:modification-date","field"],["text:modification-time","field"],["text:note-citation","field"],["text:note-continuation-notice-backward","style"],["text:note-continuation-notice-forward","style"],["text:note-ref","field"],["text:object-count","field"],["text:p","text"],["text:page-continuation","uncategorized"],["text:page-count","field"],["text:page-number","field"],["text:page-variable-get","field"],["text:page-variable-set","field"],["text:paragraph-count","field"],["text:placeholder","field"],["text:print-date","field"],["text:print-time","field"],["text:printed-by","field"],["text:reference-ref","field"],["text:ruby-base","text"],["text:ruby-text","text"],["text:script","text"],["text:sender-city","field"],["text:sender-company","field"],["text:sender-country","field"],["text:sender-email","field"],["text:sender-fax","field"],["text:sender-firstname","field"],["text:sender-initials","field"],["text:sender-lastname","field"],["text:sender-phone-private","field"],["text:sender-phone-work","field"],["text:sender-position","field"],["text:sender-postal-code","field"],["text:sender-state-or-province","field"],["text:sender-street","field"],["text:sender-title","field"],["text:sequence","uncategorized"],["text:sequence-ref","uncategorized"],["text:sheet-name","uncategorized"],["text:span","text"],["text:subject","field"],["text:table-count","field"],["text:table-formula","deprecated"],["text:template-name","uncategorized"],["text:text-input","field"],["text:time","field"],["text:title","field"],["text:user-defined","field"],["text:user-field-get","field"],["text:user-field-input","field"],["text:variable-get","field"],["text:variable-input","field"],["text:variable-set","field"],["text:word-count","field"],["xforms:model","uncategorized"]],X={};this.isTextContainer=function(I,y){return"text"===X[I+":"+y]},this.isField=function(I,y){return"field"===X[I+":"+y]},this.getFields=function(){return P.filter(function(I){return"field"===I[1]}).map(function(I){return I[0]})},P.forEach(function(I){var y=I[1],w=I[0].split(":");I=w[0],w=w[1];var E=odf.Namespaces.lookupNamespaceURI(I);E?X[E+":"+w]=y:runtime.log("DEBUG: OdfSchema - unknown prefix '"+I+"'")})},odf.OdfSchema=new odf.OdfSchemaImpl,odf.OdfUtilsImpl=function(){function P(ae){return"image"===(ae&&ae.localName)&&ae.namespaceURI===le}function X(ae){return null!==ae&&ae.nodeType===Node.ELEMENT_NODE&&"frame"===ae.localName&&ae.namespaceURI===le&&"as-char"===ae.getAttributeNS(ne,"anchor-type")}function I(ae){var fe;return(fe="annotation"===(ae&&ae.localName)&&ae.namespaceURI===odf.Namespaces.officens)||(fe="div"===(ae&&ae.localName)&&"annotationWrapper"===ae.className),fe}function y(ae){return"a"===(ae&&ae.localName)&&ae.namespaceURI===ne}function w(ae){var fe=ae&&ae.localName;return("p"===fe||"h"===fe)&&ae.namespaceURI===ne}function E(ae,fe){for(ae&&void 0!==fe&&!w(ae)&&ae.childNodes.item(fe)&&(ae=ae.childNodes.item(fe));ae&&!w(ae);)ae=ae.parentNode;return ae}function R(ae,fe){for(;ae&&ae!==fe;){if(ae.namespaceURI===odf.Namespaces.officens&&"annotation"===ae.localName)return ae;ae=ae.parentNode}return null}function C(ae){return/^[ \t\r\n]+$/.test(ae)}function N(ae){if(null===ae||ae.nodeType!==Node.ELEMENT_NODE)return!1;var fe=ae.localName;return Qe.isTextContainer(ae.namespaceURI,fe)||"span"===fe&&"webodf-annotationHighlight"===ae.className}function x(ae){return null!==ae&&ae.nodeType===Node.ELEMENT_NODE&&Qe.isField(ae.namespaceURI,ae.localName)}function S(ae){var fe=ae&&ae.localName,Me=!1;return fe&&(ae=ae.namespaceURI)===ne&&(Me="s"===fe||"tab"===fe||"line-break"===fe),Me}function s(ae){return S(ae)||x(ae)||X(ae)||I(ae)}function u(ae){var fe=ae&&ae.localName,Me=!1;return fe&&(ae=ae.namespaceURI)===ne&&(Me="s"===fe),Me}function m(ae){return-1!==Le.indexOf(ae.namespaceURI)}function M(ae){for(;null!==ae.firstChild&&N(ae);)ae=ae.firstChild;return ae}function O(ae){for(;null!==ae.lastChild&&N(ae);)ae=ae.lastChild;return ae}function q(ae){for(;!w(ae)&&null===ae.previousSibling;)ae=ae.parentNode;return w(ae)?null:O(ae.previousSibling)}function ee(ae){for(;!w(ae)&&null===ae.nextSibling;)ae=ae.parentNode;return w(ae)?null:M(ae.nextSibling)}function G(ae){for(var fe=!1;ae;)if(ae.nodeType===Node.TEXT_NODE){if(0!==ae.length)return!C(ae.data.substr(ae.length-1,1));ae=q(ae)}else s(ae)?(fe=!1===u(ae),ae=null):ae=q(ae);return fe}function B(ae){var fe=!1;for(ae=ae&&M(ae);ae;){if(0<(ae.nodeType===Node.TEXT_NODE?ae.length:0)&&!C(ae.data)){fe=!0;break}if(s(ae)){fe=!0;break}ae=ee(ae)}return fe}function A(ae,fe){return!!C(ae.data.substr(fe))&&!B(ee(ae))}function H(ae,fe){var je,Me=ae.data;return!(!C(Me[fe])||s(ae.parentNode)||(0<fe?C(Me[fe-1])||(je=!0):G(q(ae))&&(je=!0),!0!==je||A(ae,fe)))}function $(ae){return(ae=/(-?[0-9]*[0-9][0-9]*(\.[0-9]*)?|0+\.[0-9]*[1-9][0-9]*|\.[0-9]*[1-9][0-9]*)((cm)|(mm)|(in)|(pt)|(pc)|(px)|(%))/.exec(ae))?{value:parseFloat(ae[1]),unit:ae[3]}:null}function J(ae){return(ae=$(ae))&&(0>ae.value||"%"===ae.unit)?null:ae}function Q(ae){return(ae=$(ae))&&"%"!==ae.unit?null:ae}function U(ae){switch(ae.namespaceURI){case odf.Namespaces.drawns:case odf.Namespaces.svgns:case odf.Namespaces.dr3dns:return!1;case odf.Namespaces.textns:switch(ae.localName){case"note-body":case"ruby-text":return!1}break;case odf.Namespaces.officens:switch(ae.localName){case"annotation":case"binary-data":case"event-listeners":return!1}break;default:switch(ae.localName){case"cursor":case"editinfo":return!1}}return!0}function K(ae){return Boolean(E(ae)&&(!C(ae.textContent)||H(ae,0)))}function F(ae,fe){for(;0<fe.length&&!Ee.rangeContainsNode(ae,fe[0]);)fe.shift();for(;0<fe.length&&!Ee.rangeContainsNode(ae,fe[fe.length-1]);)fe.pop()}function L(ae,fe,Me){var je;return je=Ee.getNodesInRange(ae,function(ze){var we=NodeFilter.FILTER_REJECT;return S(ze.parentNode)||x(ze.parentNode)||I(ze)?we=NodeFilter.FILTER_REJECT:ze.nodeType===Node.TEXT_NODE?(Me||K(ze))&&(we=NodeFilter.FILTER_ACCEPT):s(ze)?we=NodeFilter.FILTER_ACCEPT:(U(ze)||N(ze))&&(we=NodeFilter.FILTER_SKIP),we},NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT),fe||F(ae,je),je}function ie(ae,fe,Me){for(;ae;){if(Me(ae)){fe[0]!==ae&&fe.unshift(ae);break}if(I(ae))break;ae=ae.parentNode}}var ne=odf.Namespaces.textns,le=odf.Namespaces.drawns,ge=odf.Namespaces.xlinkns,Ee=core.DomUtils,Le=[odf.Namespaces.dbns,odf.Namespaces.dcns,odf.Namespaces.dr3dns,odf.Namespaces.drawns,odf.Namespaces.chartns,odf.Namespaces.formns,odf.Namespaces.numberns,odf.Namespaces.officens,odf.Namespaces.presentationns,odf.Namespaces.stylens,odf.Namespaces.svgns,odf.Namespaces.tablens,odf.Namespaces.textns],Qe=odf.OdfSchema;this.isImage=P,this.isCharacterFrame=X,this.isInlineRoot=I,this.isTextSpan=function(ae){return"span"===(ae&&ae.localName)&&ae.namespaceURI===ne},this.isHyperlink=y,this.getHyperlinkTarget=function(ae){return ae.getAttributeNS(ge,"href")||""},this.isParagraph=w,this.getParagraphElement=E,this.getParentAnnotation=R,this.isWithinAnnotation=function(ae,fe){return Boolean(R(ae,fe))},this.getAnnotationCreator=function(ae){return ae.getElementsByTagNameNS(odf.Namespaces.dcns,"creator")[0].textContent},this.isListItem=function(ae){return"list-item"===(ae&&ae.localName)&&ae.namespaceURI===ne},this.isLineBreak=function(ae){return"line-break"===(ae&&ae.localName)&&ae.namespaceURI===ne},this.isODFWhitespace=C,this.isGroupingElement=N,this.isFieldElement=x,this.isCharacterElement=S,this.isAnchoredAsCharacterElement=s,this.isSpaceElement=u,this.isODFNode=m,this.hasNoODFContent=function l(ae){if(S(ae)||x(ae))return!1;if(N(ae.parentNode)&&ae.nodeType===Node.TEXT_NODE)return 0===ae.textContent.length;for(ae=ae.firstChild;ae;){if(m(ae)||!l(ae))return!1;ae=ae.nextSibling}return!0},this.firstChild=M,this.lastChild=O,this.previousNode=q,this.nextNode=ee,this.scanLeftForNonSpace=G,this.lookLeftForCharacter=function(ae){var fe,Me=fe=0;return ae.nodeType===Node.TEXT_NODE&&(Me=ae.length),0<Me?fe=C((fe=ae.data).substr(Me-1,1))?1===Me?G(q(ae))?2:0:C(fe.substr(Me-2,1))?0:2:1:s(ae)&&(fe=1),fe},this.lookRightForCharacter=function(ae){var fe=!1,Me=0;return ae&&ae.nodeType===Node.TEXT_NODE&&(Me=ae.length),0<Me?fe=!C(ae.data.substr(0,1)):s(ae)&&(fe=!0),fe},this.scanLeftForAnyCharacter=function(ae){var fe=!1;for(ae=ae&&O(ae);ae;){if(0<(ae.nodeType===Node.TEXT_NODE?ae.length:0)&&!C(ae.data)){fe=!0;break}if(s(ae)){fe=!0;break}ae=q(ae)}return fe},this.scanRightForAnyCharacter=B,this.isTrailingWhitespace=A,this.isSignificantWhitespace=H,this.isDowngradableSpaceElement=function(ae){return!!u(ae)&&G(q(ae))&&B(ee(ae))},this.parseLength=$,this.parseNonNegativeLength=J,this.parseFoFontSize=function(ae){var fe;return(fe=(fe=$(ae))&&(0>=fe.value||"%"===fe.unit)?null:fe)||Q(ae)},this.parseFoLineHeight=function(ae){return J(ae)||Q(ae)},this.isTextContentContainingNode=U,this.getTextNodes=function(ae,fe){var Me;return Me=Ee.getNodesInRange(ae,function(je){var ze=NodeFilter.FILTER_REJECT;return je.nodeType===Node.TEXT_NODE?K(je)&&(ze=NodeFilter.FILTER_ACCEPT):U(je)&&(ze=NodeFilter.FILTER_SKIP),ze},NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT),fe||F(ae,Me),Me},this.getTextElements=L,this.getParagraphElements=function(ae){var fe;return fe=Ee.getNodesInRange(ae,function(Me){var je=NodeFilter.FILTER_REJECT;return w(Me)?je=NodeFilter.FILTER_ACCEPT:(U(Me)||N(Me))&&(je=NodeFilter.FILTER_SKIP),je},NodeFilter.SHOW_ELEMENT),ie(ae.startContainer,fe,w),fe},this.getImageElements=function(ae){var fe;return fe=Ee.getNodesInRange(ae,function(Me){var je=NodeFilter.FILTER_SKIP;return P(Me)&&(je=NodeFilter.FILTER_ACCEPT),je},NodeFilter.SHOW_ELEMENT),ie(ae.startContainer,fe,P),fe},this.getHyperlinkElements=function(ae){var fe=[],Me=ae.cloneRange();return ae.collapsed&&ae.endContainer.nodeType===Node.ELEMENT_NODE&&(ae=function Y(ae,fe){var Me=ae;if(fe<Me.childNodes.length-1)Me=Me.childNodes[fe+1];else{for(;!Me.nextSibling;)Me=Me.parentNode;Me=Me.nextSibling}for(;Me.firstChild;)Me=Me.firstChild;return Me}(ae.endContainer,ae.endOffset),ae.nodeType===Node.TEXT_NODE&&Me.setEnd(ae,1)),L(Me,!0,!1).forEach(function(je){for(je=je.parentNode;!w(je);){if(y(je)&&-1===fe.indexOf(je)){fe.push(je);break}je=je.parentNode}}),Me.detach(),fe},this.getNormalizedFontFamilyName=function(ae){return/^(["'])(?:.|[\n\r])*?\1$/.test(ae)||(ae=ae.replace(/^[ \t\r\n\f]*((?:.|[\n\r])*?)[ \t\r\n\f]*$/,"$1"),/[ \t\r\n\f]/.test(ae)&&(ae="'"+ae.replace(/[ \t\r\n\f]+/g," ")+"'")),ae}},odf.OdfUtils=new odf.OdfUtilsImpl,gui.OdfTextBodyNodeFilter=function(){var P=odf.OdfUtils,X=Node.TEXT_NODE,I=NodeFilter.FILTER_REJECT,y=NodeFilter.FILTER_ACCEPT,w=odf.Namespaces.textns;this.acceptNode=function(E){if(E.nodeType===X){if(!P.isGroupingElement(E.parentNode))return I}else if(E.namespaceURI===w&&"tracked-changes"===E.localName)return I;return y}},xmldom.LSSerializerFilter=function(){},xmldom.LSSerializerFilter.prototype.acceptNode=function(P){},odf.OdfNodeFilter=function(){this.acceptNode=function(P){return"http://www.w3.org/1999/xhtml"===P.namespaceURI?NodeFilter.FILTER_SKIP:P.namespaceURI&&P.namespaceURI.match(/^urn:webodf:/)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},xmldom.XPathIterator=function(){},xmldom.XPathIterator.prototype.next=function(){},xmldom.XPathIterator.prototype.reset=function(){},xmldom.XPath=createXPathSingleton(),odf.StyleInfo=function(){function P(U,K){var F,L,ie,Y,ne,le=0;for((F=J[U.localName])&&(ie=F[U.namespaceURI])&&(le=ie.length),F=0;F<le;F+=1)(L=U.getAttributeNS(Y=(L=ie[F]).ns,ne=L.localname))&&U.setAttributeNS(Y,H[Y]+ne,K+L);for(ie=U.firstElementChild;ie;)P(ie,K),ie=ie.nextElementSibling}function X(U,K){var F,L,ie,Y,ne,le=0;for((F=J[U.localName])&&(ie=F[U.namespaceURI])&&(le=ie.length),F=0;F<le;F+=1)(L=U.getAttributeNS(Y=(L=ie[F]).ns,ne=L.localname))&&(L=L.replace(K,""),U.setAttributeNS(Y,H[Y]+ne,L));for(ie=U.firstElementChild;ie;)X(ie,K),ie=ie.nextElementSibling}function I(U,K){var F,L,ie,Y,ne,le=0;for((F=J[U.localName])&&(ie=F[U.namespaceURI])&&(le=ie.length),F=0;F<le;F+=1)(L=U.getAttributeNS(L=(Y=ie[F]).ns,ne=Y.localname))&&((K=K||{}).hasOwnProperty(Y=Y.keyname)?K[Y][L]=1:((ne={})[L]=1,K[Y]=ne));return K}function y(U,K){var F;for(I(U,K),F=U.firstChild;F;)F.nodeType===Node.ELEMENT_NODE&&y(F,K),F=F.nextSibling}function w(U,K,F){this.key=U,this.name=K,this.family=F,this.requires={}}function E(U,K,F){var L=U+'"'+K,ie=F[L];return ie||(ie=F[L]=new w(L,U,K)),ie}function R(U,K,F){var L,ie,Y,ne,ge=0;if(L=U.getAttributeNS(G,"name"),ne=U.getAttributeNS(G,"family"),L&&ne&&(K=E(L,ne,F)),K)for((L=J[U.localName])&&(Y=L[U.namespaceURI])&&(ge=Y.length),L=0;L<ge;L+=1)(ie=U.getAttributeNS(ie=(ne=Y[L]).ns,ne.localname))&&(ne=E(ie,ne=ne.keyname,F),K.requires[ne.key]=ne);for(U=U.firstElementChild;U;)R(U,K,F),U=U.nextElementSibling;return F}function C(U,K){var F=K[U.family];F||(F=K[U.family]={}),F[U.name]=1,Object.keys(U.requires).forEach(function(L){C(U.requires[L],K)})}function N(U,K){var F=R(U,null,{});Object.keys(F).forEach(function(L){var ie=K[(L=F[L]).family];ie&&ie.hasOwnProperty(L.name)&&C(L,K)})}var J,s=odf.Namespaces.chartns,u=odf.Namespaces.dbns,m=odf.Namespaces.dr3dns,l=odf.Namespaces.drawns,M=odf.Namespaces.formns,O=odf.Namespaces.numberns,q=odf.Namespaces.officens,ee=odf.Namespaces.presentationns,G=odf.Namespaces.stylens,B=odf.Namespaces.tablens,A=odf.Namespaces.textns,H={"urn:oasis:names:tc:opendocument:xmlns:chart:1.0":"chart:","urn:oasis:names:tc:opendocument:xmlns:database:1.0":"db:","urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0":"dr3d:","urn:oasis:names:tc:opendocument:xmlns:drawing:1.0":"draw:","urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0":"fo:","urn:oasis:names:tc:opendocument:xmlns:form:1.0":"form:","urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":"number:","urn:oasis:names:tc:opendocument:xmlns:office:1.0":"office:","urn:oasis:names:tc:opendocument:xmlns:presentation:1.0":"presentation:","urn:oasis:names:tc:opendocument:xmlns:style:1.0":"style:","urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0":"svg:","urn:oasis:names:tc:opendocument:xmlns:table:1.0":"table:","urn:oasis:names:tc:opendocument:xmlns:text:1.0":"chart:","http://www.w3.org/XML/1998/namespace":"xml:"},$={text:[{ens:G,en:"tab-stop",ans:G,a:"leader-text-style"},{ens:G,en:"drop-cap",ans:G,a:"style-name"},{ens:A,en:"notes-configuration",ans:A,a:"citation-body-style-name"},{ens:A,en:"notes-configuration",ans:A,a:"citation-style-name"},{ens:A,en:"a",ans:A,a:"style-name"},{ens:A,en:"alphabetical-index",ans:A,a:"style-name"},{ens:A,en:"linenumbering-configuration",ans:A,a:"style-name"},{ens:A,en:"list-level-style-number",ans:A,a:"style-name"},{ens:A,en:"ruby-text",ans:A,a:"style-name"},{ens:A,en:"span",ans:A,a:"style-name"},{ens:A,en:"a",ans:A,a:"visited-style-name"},{ens:G,en:"text-properties",ans:G,a:"text-line-through-text-style"},{ens:A,en:"alphabetical-index-source",ans:A,a:"main-entry-style-name"},{ens:A,en:"index-entry-bibliography",ans:A,a:"style-name"},{ens:A,en:"index-entry-chapter",ans:A,a:"style-name"},{ens:A,en:"index-entry-link-end",ans:A,a:"style-name"},{ens:A,en:"index-entry-link-start",ans:A,a:"style-name"},{ens:A,en:"index-entry-page-number",ans:A,a:"style-name"},{ens:A,en:"index-entry-span",ans:A,a:"style-name"},{ens:A,en:"index-entry-tab-stop",ans:A,a:"style-name"},{ens:A,en:"index-entry-text",ans:A,a:"style-name"},{ens:A,en:"index-title-template",ans:A,a:"style-name"},{ens:A,en:"list-level-style-bullet",ans:A,a:"style-name"},{ens:A,en:"outline-level-style",ans:A,a:"style-name"}],paragraph:[{ens:l,en:"caption",ans:l,a:"text-style-name"},{ens:l,en:"circle",ans:l,a:"text-style-name"},{ens:l,en:"connector",ans:l,a:"text-style-name"},{ens:l,en:"control",ans:l,a:"text-style-name"},{ens:l,en:"custom-shape",ans:l,a:"text-style-name"},{ens:l,en:"ellipse",ans:l,a:"text-style-name"},{ens:l,en:"frame",ans:l,a:"text-style-name"},{ens:l,en:"line",ans:l,a:"text-style-name"},{ens:l,en:"measure",ans:l,a:"text-style-name"},{ens:l,en:"path",ans:l,a:"text-style-name"},{ens:l,en:"polygon",ans:l,a:"text-style-name"},{ens:l,en:"polyline",ans:l,a:"text-style-name"},{ens:l,en:"rect",ans:l,a:"text-style-name"},{ens:l,en:"regular-polygon",ans:l,a:"text-style-name"},{ens:q,en:"annotation",ans:l,a:"text-style-name"},{ens:M,en:"column",ans:M,a:"text-style-name"},{ens:G,en:"style",ans:G,a:"next-style-name"},{ens:B,en:"body",ans:B,a:"paragraph-style-name"},{ens:B,en:"even-columns",ans:B,a:"paragraph-style-name"},{ens:B,en:"even-rows",ans:B,a:"paragraph-style-name"},{ens:B,en:"first-column",ans:B,a:"paragraph-style-name"},{ens:B,en:"first-row",ans:B,a:"paragraph-style-name"},{ens:B,en:"last-column",ans:B,a:"paragraph-style-name"},{ens:B,en:"last-row",ans:B,a:"paragraph-style-name"},{ens:B,en:"odd-columns",ans:B,a:"paragraph-style-name"},{ens:B,en:"odd-rows",ans:B,a:"paragraph-style-name"},{ens:A,en:"notes-configuration",ans:A,a:"default-style-name"},{ens:A,en:"alphabetical-index-entry-template",ans:A,a:"style-name"},{ens:A,en:"bibliography-entry-template",ans:A,a:"style-name"},{ens:A,en:"h",ans:A,a:"style-name"},{ens:A,en:"illustration-index-entry-template",ans:A,a:"style-name"},{ens:A,en:"index-source-style",ans:A,a:"style-name"},{ens:A,en:"object-index-entry-template",ans:A,a:"style-name"},{ens:A,en:"p",ans:A,a:"style-name"},{ens:A,en:"table-index-entry-template",ans:A,a:"style-name"},{ens:A,en:"table-of-content-entry-template",ans:A,a:"style-name"},{ens:A,en:"table-index-entry-template",ans:A,a:"style-name"},{ens:A,en:"user-index-entry-template",ans:A,a:"style-name"},{ens:G,en:"page-layout-properties",ans:G,a:"register-truth-ref-style-name"}],chart:[{ens:s,en:"axis",ans:s,a:"style-name"},{ens:s,en:"chart",ans:s,a:"style-name"},{ens:s,en:"data-label",ans:s,a:"style-name"},{ens:s,en:"data-point",ans:s,a:"style-name"},{ens:s,en:"equation",ans:s,a:"style-name"},{ens:s,en:"error-indicator",ans:s,a:"style-name"},{ens:s,en:"floor",ans:s,a:"style-name"},{ens:s,en:"footer",ans:s,a:"style-name"},{ens:s,en:"grid",ans:s,a:"style-name"},{ens:s,en:"legend",ans:s,a:"style-name"},{ens:s,en:"mean-value",ans:s,a:"style-name"},{ens:s,en:"plot-area",ans:s,a:"style-name"},{ens:s,en:"regression-curve",ans:s,a:"style-name"},{ens:s,en:"series",ans:s,a:"style-name"},{ens:s,en:"stock-gain-marker",ans:s,a:"style-name"},{ens:s,en:"stock-loss-marker",ans:s,a:"style-name"},{ens:s,en:"stock-range-line",ans:s,a:"style-name"},{ens:s,en:"subtitle",ans:s,a:"style-name"},{ens:s,en:"title",ans:s,a:"style-name"},{ens:s,en:"wall",ans:s,a:"style-name"}],section:[{ens:A,en:"alphabetical-index",ans:A,a:"style-name"},{ens:A,en:"bibliography",ans:A,a:"style-name"},{ens:A,en:"illustration-index",ans:A,a:"style-name"},{ens:A,en:"index-title",ans:A,a:"style-name"},{ens:A,en:"object-index",ans:A,a:"style-name"},{ens:A,en:"section",ans:A,a:"style-name"},{ens:A,en:"table-of-content",ans:A,a:"style-name"},{ens:A,en:"table-index",ans:A,a:"style-name"},{ens:A,en:"user-index",ans:A,a:"style-name"}],ruby:[{ens:A,en:"ruby",ans:A,a:"style-name"}],table:[{ens:u,en:"query",ans:u,a:"style-name"},{ens:u,en:"table-representation",ans:u,a:"style-name"},{ens:B,en:"background",ans:B,a:"style-name"},{ens:B,en:"table",ans:B,a:"style-name"}],"table-column":[{ens:u,en:"column",ans:u,a:"style-name"},{ens:B,en:"table-column",ans:B,a:"style-name"}],"table-row":[{ens:u,en:"query",ans:u,a:"default-row-style-name"},{ens:u,en:"table-representation",ans:u,a:"default-row-style-name"},{ens:B,en:"table-row",ans:B,a:"style-name"}],"table-cell":[{ens:u,en:"column",ans:u,a:"default-cell-style-name"},{ens:B,en:"table-column",ans:B,a:"default-cell-style-name"},{ens:B,en:"table-row",ans:B,a:"default-cell-style-name"},{ens:B,en:"body",ans:B,a:"style-name"},{ens:B,en:"covered-table-cell",ans:B,a:"style-name"},{ens:B,en:"even-columns",ans:B,a:"style-name"},{ens:B,en:"covered-table-cell",ans:B,a:"style-name"},{ens:B,en:"even-columns",ans:B,a:"style-name"},{ens:B,en:"even-rows",ans:B,a:"style-name"},{ens:B,en:"first-column",ans:B,a:"style-name"},{ens:B,en:"first-row",ans:B,a:"style-name"},{ens:B,en:"last-column",ans:B,a:"style-name"},{ens:B,en:"last-row",ans:B,a:"style-name"},{ens:B,en:"odd-columns",ans:B,a:"style-name"},{ens:B,en:"odd-rows",ans:B,a:"style-name"},{ens:B,en:"table-cell",ans:B,a:"style-name"}],graphic:[{ens:m,en:"cube",ans:l,a:"style-name"},{ens:m,en:"extrude",ans:l,a:"style-name"},{ens:m,en:"rotate",ans:l,a:"style-name"},{ens:m,en:"scene",ans:l,a:"style-name"},{ens:m,en:"sphere",ans:l,a:"style-name"},{ens:l,en:"caption",ans:l,a:"style-name"},{ens:l,en:"circle",ans:l,a:"style-name"},{ens:l,en:"connector",ans:l,a:"style-name"},{ens:l,en:"control",ans:l,a:"style-name"},{ens:l,en:"custom-shape",ans:l,a:"style-name"},{ens:l,en:"ellipse",ans:l,a:"style-name"},{ens:l,en:"frame",ans:l,a:"style-name"},{ens:l,en:"g",ans:l,a:"style-name"},{ens:l,en:"line",ans:l,a:"style-name"},{ens:l,en:"measure",ans:l,a:"style-name"},{ens:l,en:"page-thumbnail",ans:l,a:"style-name"},{ens:l,en:"path",ans:l,a:"style-name"},{ens:l,en:"polygon",ans:l,a:"style-name"},{ens:l,en:"polyline",ans:l,a:"style-name"},{ens:l,en:"rect",ans:l,a:"style-name"},{ens:l,en:"regular-polygon",ans:l,a:"style-name"},{ens:q,en:"annotation",ans:l,a:"style-name"}],presentation:[{ens:m,en:"cube",ans:ee,a:"style-name"},{ens:m,en:"extrude",ans:ee,a:"style-name"},{ens:m,en:"rotate",ans:ee,a:"style-name"},{ens:m,en:"scene",ans:ee,a:"style-name"},{ens:m,en:"sphere",ans:ee,a:"style-name"},{ens:l,en:"caption",ans:ee,a:"style-name"},{ens:l,en:"circle",ans:ee,a:"style-name"},{ens:l,en:"connector",ans:ee,a:"style-name"},{ens:l,en:"control",ans:ee,a:"style-name"},{ens:l,en:"custom-shape",ans:ee,a:"style-name"},{ens:l,en:"ellipse",ans:ee,a:"style-name"},{ens:l,en:"frame",ans:ee,a:"style-name"},{ens:l,en:"g",ans:ee,a:"style-name"},{ens:l,en:"line",ans:ee,a:"style-name"},{ens:l,en:"measure",ans:ee,a:"style-name"},{ens:l,en:"page-thumbnail",ans:ee,a:"style-name"},{ens:l,en:"path",ans:ee,a:"style-name"},{ens:l,en:"polygon",ans:ee,a:"style-name"},{ens:l,en:"polyline",ans:ee,a:"style-name"},{ens:l,en:"rect",ans:ee,a:"style-name"},{ens:l,en:"regular-polygon",ans:ee,a:"style-name"},{ens:q,en:"annotation",ans:ee,a:"style-name"}],"drawing-page":[{ens:l,en:"page",ans:l,a:"style-name"},{ens:ee,en:"notes",ans:l,a:"style-name"},{ens:G,en:"handout-master",ans:l,a:"style-name"},{ens:G,en:"master-page",ans:l,a:"style-name"}],"list-style":[{ens:A,en:"list",ans:A,a:"style-name"},{ens:A,en:"numbered-paragraph",ans:A,a:"style-name"},{ens:A,en:"list-item",ans:A,a:"style-override"},{ens:G,en:"style",ans:G,a:"list-style-name"}],data:[{ens:G,en:"style",ans:G,a:"data-style-name"},{ens:G,en:"style",ans:G,a:"percentage-data-style-name"},{ens:ee,en:"date-time-decl",ans:G,a:"data-style-name"},{ens:A,en:"creation-date",ans:G,a:"data-style-name"},{ens:A,en:"creation-time",ans:G,a:"data-style-name"},{ens:A,en:"database-display",ans:G,a:"data-style-name"},{ens:A,en:"date",ans:G,a:"data-style-name"},{ens:A,en:"editing-duration",ans:G,a:"data-style-name"},{ens:A,en:"expression",ans:G,a:"data-style-name"},{ens:A,en:"meta-field",ans:G,a:"data-style-name"},{ens:A,en:"modification-date",ans:G,a:"data-style-name"},{ens:A,en:"modification-time",ans:G,a:"data-style-name"},{ens:A,en:"print-date",ans:G,a:"data-style-name"},{ens:A,en:"print-time",ans:G,a:"data-style-name"},{ens:A,en:"table-formula",ans:G,a:"data-style-name"},{ens:A,en:"time",ans:G,a:"data-style-name"},{ens:A,en:"user-defined",ans:G,a:"data-style-name"},{ens:A,en:"user-field-get",ans:G,a:"data-style-name"},{ens:A,en:"user-field-input",ans:G,a:"data-style-name"},{ens:A,en:"variable-get",ans:G,a:"data-style-name"},{ens:A,en:"variable-input",ans:G,a:"data-style-name"},{ens:A,en:"variable-set",ans:G,a:"data-style-name"}],"page-layout":[{ens:ee,en:"notes",ans:G,a:"page-layout-name"},{ens:G,en:"handout-master",ans:G,a:"page-layout-name"},{ens:G,en:"master-page",ans:G,a:"page-layout-name"}]},Q=xmldom.XPath;this.collectUsedFontFaces=function x(U,K){function F(ne){(ne=Y.getAttributeNS(G,ne))&&(U[ne]=!0)}var ie,Y,L=["font-name","font-name-asian","font-name-complex"];for(ie=K&&K.firstElementChild;ie;)Y=ie,L.forEach(F),x(U,Y),ie=ie.nextElementSibling},this.changeFontFaceNames=function S(U,K){function F(ne){var le=Y.getAttributeNS(G,ne);le&&K.hasOwnProperty(le)&&Y.setAttributeNS(G,"style:"+ne,K[le])}var ie,Y,L=["font-name","font-name-asian","font-name-complex"];for(ie=U&&U.firstElementChild;ie;)Y=ie,L.forEach(F),S(Y,K),ie=ie.nextElementSibling},this.UsedStyleList=function(U,K){var F={};this.uses=function(L){var ie=L.localName,Y=L.getAttributeNS(l,"name")||L.getAttributeNS(G,"name");return L="style"===ie?L.getAttributeNS(G,"family"):L.namespaceURI===O?"data":ie,!!(L=F[L])&&0<L[Y]},y(U,F),K&&N(K,F)},this.getStyleName=function(U,K){var F,L,ie=J[K.localName];if(ie&&(ie=ie[K.namespaceURI]))for(L=0;L<ie.length;L+=1)if(ie[L].keyname===U&&K.hasAttributeNS((ie=ie[L]).ns,ie.localname)){F=K.getAttributeNS(ie.ns,ie.localname);break}return F},this.hasDerivedStyles=function(U,K,F){var L=F.getAttributeNS(G,"name");return F=F.getAttributeNS(G,"family"),!!Q.getODFElementsWithXPath(U,'//style:*[@style:parent-style-name="'+L+'"][@style:family="'+F+'"]',K).length},this.prefixStyleNames=function(U,K,F){var L;if(U){for(L=U.firstChild;L;){if(L.nodeType===Node.ELEMENT_NODE){var ie=L,Y=K,ne=ie.getAttributeNS(l,"name"),le=void 0;ne?le=l:(ne=ie.getAttributeNS(G,"name"))&&(le=G),le&&ie.setAttributeNS(le,H[le]+"name",Y+ne)}L=L.nextSibling}P(U,K),F&&P(F,K)}},this.removePrefixFromStyleNames=function(U,K,F){var L=new RegExp("^"+K);if(U){for(K=U.firstChild;K;){if(K.nodeType===Node.ELEMENT_NODE){var ie=K,Y=L,ne=ie.getAttributeNS(l,"name"),le=void 0;ne?le=l:(ne=ie.getAttributeNS(G,"name"))&&(le=G),le&&(ne=ne.replace(Y,""),ie.setAttributeNS(le,H[le]+"name",ne))}K=K.nextSibling}X(U,L),F&&X(F,L)}},this.determineStylesForNode=I,J=function(){var U,K,F,L,ie,ne,le,ge,Ee,Y={};for(F in $)if($.hasOwnProperty(F))for(K=(L=$[F]).length,U=0;U<K;U+=1)Ee=(ie=L[U]).ens,Y.hasOwnProperty(ge=ie.en)?ne=Y[ge]:Y[ge]=ne={},ne.hasOwnProperty(Ee)?le=ne[Ee]:ne[Ee]=le=[],le.push({ns:ie.ans,localname:ie.a,keyname:F});return Y}()},"function"!=typeof Object.create&&(Object.create=function(P){var X=function(){};return X.prototype=P,new X}),xmldom.LSSerializer=function(){function P(w){var E=w||{},R=function(S){var u,s={};for(u in S)S.hasOwnProperty(u)&&(s[S[u]]=u);return s}(w),C=[E],N=[R],x=0;this.push=function(){E=C[x+=1]=Object.create(E),R=N[x]=Object.create(R)},this.pop=function(){C.pop(),N.pop(),--x,E=C[x],R=N[x]},this.getLocalNamespaceDefinitions=function(){return R},this.getQName=function(S){var m,s=S.namespaceURI,u=0;if(!s)return S.localName;if(m=R[s])return m+":"+S.localName;do{if(m||!S.prefix?(m="ns"+u,u+=1):m=S.prefix,E[m]===s)break;if(!E[m]){E[m]=s,R[s]=m;break}m=null}while(null===m);return m+":"+S.localName}}function X(w){return w.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")}function I(w,E){var N,R="",C=y.filter?y.filter.acceptNode(E):NodeFilter.FILTER_ACCEPT;if(C===NodeFilter.FILTER_ACCEPT&&E.nodeType===Node.ELEMENT_NODE){w.push(),N=w.getQName(E);var x,s,u,m,S=E.attributes,l="";for(x="<"+N,s=S.length,u=0;u<s;u+=1)"http://www.w3.org/2000/xmlns/"!==(m=S.item(u)).namespaceURI&&(y.filter?y.filter.acceptNode(m):NodeFilter.FILTER_ACCEPT)===NodeFilter.FILTER_ACCEPT&&(l+=" "+w.getQName(m)+'="'+(m="string"==typeof m.value?X(m.value):m.value)+'"');for(u in s=w.getLocalNamespaceDefinitions())s.hasOwnProperty(u)&&((S=s[u])?"xmlns"!==S&&(x+=" xmlns:"+s[u]+'="'+u+'"'):x+=' xmlns="'+u+'"');R+=x+(l+">")}if(C===NodeFilter.FILTER_ACCEPT||C===NodeFilter.FILTER_SKIP){for(C=E.firstChild;C;)R+=I(w,C),C=C.nextSibling;E.nodeValue&&(R+=X(E.nodeValue))}return N&&(R+="</"+N+">",w.pop()),R}var y=this;this.filter=null,this.writeToString=function(w,E){return w?I(new P(E),w):""}},function(){function P(S){var s,u=C.length;for(s=0;s<u;s+=1)if("urn:oasis:names:tc:opendocument:xmlns:office:1.0"===S.namespaceURI&&S.localName===C[s])return s;return-1}function X(S,s){var u=new w.UsedStyleList(S,s),m=new odf.OdfNodeFilter;this.acceptNode=function(l){var M=m.acceptNode(l);return M===NodeFilter.FILTER_ACCEPT&&l.parentNode===s&&l.nodeType===Node.ELEMENT_NODE&&(M=u.uses(l)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT),M}}function I(S,s){var u=new X(S,s);this.acceptNode=function(m){var l=u.acceptNode(m);return l!==NodeFilter.FILTER_ACCEPT||!m.parentNode||m.parentNode.namespaceURI!==odf.Namespaces.textns||"s"!==m.parentNode.localName&&"tab"!==m.parentNode.localName||(l=NodeFilter.FILTER_REJECT),l}}function y(S,s){if(s){var m,u=P(s),l=S.firstChild;if(-1!==u){for(;l&&!(-1!==(m=P(l))&&m>u);)l=l.nextSibling;S.insertBefore(s,l)}}}var w=new odf.StyleInfo,E=core.DomUtils,R=odf.Namespaces.stylens,C="meta settings scripts font-face-decls styles automatic-styles master-styles body".split(" "),N=Date.now()+"_webodf_",x=new core.Base64;odf.ODFElement=function(){},odf.ODFDocumentElement=function(){},odf.ODFDocumentElement.prototype=new odf.ODFElement,odf.ODFDocumentElement.prototype.constructor=odf.ODFDocumentElement,odf.ODFDocumentElement.prototype.fontFaceDecls=null,odf.ODFDocumentElement.prototype.manifest=null,odf.ODFDocumentElement.prototype.settings=null,odf.ODFDocumentElement.namespaceURI="urn:oasis:names:tc:opendocument:xmlns:office:1.0",odf.ODFDocumentElement.localName="document",odf.AnnotationElement=function(){},odf.OdfPart=function(S,s,u,m){var l=this;this.size=0,this.type=null,this.name=S,this.container=u,this.url=null,this.mimetype=s,this.onstatereadychange=this.document=null,this.EMPTY=0,this.LOADING=1,this.DONE=2,this.state=this.EMPTY,this.data="",this.load=function(){null!==m&&(this.mimetype=s,m.loadAsDataURL(S,s,function(M,O){M&&runtime.log(M),l.url=O,l.onchange&&l.onchange(l),l.onstatereadychange&&l.onstatereadychange(l)}))}},odf.OdfPart.prototype.load=function(){},odf.OdfPart.prototype.getUrl=function(){return this.data?"data:;base64,"+x.toBase64(this.data):null},odf.OdfContainer=function S(s,u){function m(ue){for(var pe,de=ue.firstChild;de;)pe=de.nextSibling,de.nodeType===Node.ELEMENT_NODE?m(de):de.nodeType===Node.PROCESSING_INSTRUCTION_NODE&&ue.removeChild(de),de=pe}function l(ue){var pe,xe,de={},Xe=ue.ownerDocument.createNodeIterator(ue,NodeFilter.SHOW_ELEMENT,null,!1);for(ue=Xe.nextNode();ue;)"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===ue.namespaceURI&&("annotation"===ue.localName?(pe=ue.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","name"))&&(de.hasOwnProperty(pe)?runtime.log("Warning: annotation name used more than once with <office:annotation/>: '"+pe+"'"):de[pe]=ue):"annotation-end"===ue.localName&&((pe=ue.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","name"))?de.hasOwnProperty(pe)?(xe=de[pe]).annotationEndElement?runtime.log("Warning: annotation name used more than once with <office:annotation-end/>: '"+pe+"'"):xe.annotationEndElement=ue:runtime.log("Warning: annotation end without an annotation start, name: '"+pe+"'"):runtime.log("Warning: annotation end without a name found"))),ue=Xe.nextNode()}function M(ue,de){for(var pe=ue&&ue.firstChild;pe;)pe.nodeType===Node.ELEMENT_NODE&&pe.setAttributeNS("urn:webodf:names:scope","scope",de),pe=pe.nextSibling}function O(ue,de){for(var pe=(pe=we.rootElement.meta)&&pe.firstChild;pe&&(pe.namespaceURI!==ue||pe.localName!==de);)pe=pe.nextSibling;for(pe=pe&&pe.firstChild;pe&&pe.nodeType!==Node.TEXT_NODE;)pe=pe.nextSibling;return pe?pe.data:null}function q(ue){var de={};for(ue=ue.firstChild;ue;)ue.nodeType===Node.ELEMENT_NODE&&ue.namespaceURI===R&&"font-face"===ue.localName&&(de[ue.getAttributeNS(R,"name")]=ue),ue=ue.nextSibling;return de}function ee(ue,de){var xe,Xe,rt,pe=null;if(ue)for(xe=(pe=ue.cloneNode(!0)).firstElementChild;xe;)Xe=xe.nextElementSibling,(rt=xe.getAttributeNS("urn:webodf:names:scope","scope"))&&rt!==de&&pe.removeChild(xe),xe=Xe;return pe}function G(ue,de){var pe,xe,Xe,rt=null,tt={};if(ue)for(de.forEach(function(Re){w.collectUsedFontFaces(tt,Re)}),pe=(rt=ue.cloneNode(!0)).firstElementChild;pe;)xe=pe.nextElementSibling,Xe=pe.getAttributeNS(R,"name"),tt[Xe]||rt.removeChild(pe),pe=xe;return rt}function B(ue){var pe,de=we.rootElement.ownerDocument;if(ue){m(ue.documentElement);try{pe=de.importNode(ue.documentElement,!0)}catch{}}return pe}function A(ue){we.state=ue,we.onchange&&we.onchange(we),we.onstatereadychange&&we.onstatereadychange(we)}function H(ue){$e=null,we.rootElement=ue,ue.fontFaceDecls=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),ue.styles=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),ue.automaticStyles=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),ue.masterStyles=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),ue.body=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","body"),ue.meta=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),ue.settings=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","settings"),ue.scripts=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","scripts"),l(ue)}function $(ue){var xe,de=B(ue),pe=we.rootElement;de&&"document-styles"===de.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===de.namespaceURI?(pe.fontFaceDecls=E.getDirectChild(de,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),y(pe,pe.fontFaceDecls),xe=E.getDirectChild(de,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),pe.styles=xe||ue.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),y(pe,pe.styles),xe=E.getDirectChild(de,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),pe.automaticStyles=xe||ue.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),M(pe.automaticStyles,"document-styles"),y(pe,pe.automaticStyles),de=E.getDirectChild(de,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),pe.masterStyles=de||ue.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),y(pe,pe.masterStyles),w.prefixStyleNames(pe.automaticStyles,N,pe.masterStyles)):A(S.INVALID)}function J(ue){var de,pe,xe,Xe;if((ue=B(ue))&&"document-content"===ue.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===ue.namespaceURI){if(de=we.rootElement,xe=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),de.fontFaceDecls&&xe){var rt,tt,Re,ot,pt={};for(pe=q(Xe=de.fontFaceDecls),ot=q(xe),xe=xe.firstElementChild;xe;){if(rt=xe.nextElementSibling,xe.namespaceURI===R&&"font-face"===xe.localName)if(tt=xe.getAttributeNS(R,"name"),pe.hasOwnProperty(tt)){if(!xe.isEqualNode(pe[tt])){var ct=pe,st=ot,Ze=0,it=void 0;for(it=Re=(Re=tt).replace(/\d+$/,"");ct.hasOwnProperty(it)||st.hasOwnProperty(it);)it=Re+(Ze+=1);xe.setAttributeNS(R,"style:name",Re=it),Xe.appendChild(xe),pe[Re]=xe,delete ot[tt],pt[tt]=Re}}else Xe.appendChild(xe),pe[tt]=xe,delete ot[tt];xe=rt}Xe=pt}else xe&&(de.fontFaceDecls=xe,y(de,xe));if(M(pe=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),"document-content"),Xe&&w.changeFontFaceNames(pe,Xe),de.automaticStyles&&pe)for(Xe=pe.firstChild;Xe;)de.automaticStyles.appendChild(Xe),Xe=pe.firstChild;else pe&&(de.automaticStyles=pe,y(de,pe));if(null===(ue=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","body")))throw"<office:body/> tag is mising.";de.body=ue,y(de,de.body)}else A(S.INVALID)}function Q(ue){var de;(ue=B(ue))&&"document-meta"===ue.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===ue.namespaceURI&&((de=we.rootElement).meta=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),y(de,de.meta))}function U(ue){var de;(ue=B(ue))&&"document-settings"===ue.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===ue.namespaceURI&&((de=we.rootElement).settings=E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","settings"),y(de,de.settings))}function K(ue){var de;if((ue=B(ue))&&"manifest"===ue.localName&&"urn:oasis:names:tc:opendocument:xmlns:manifest:1.0"===ue.namespaceURI)for((de=we.rootElement).manifest=ue,ue=de.manifest.firstElementChild;ue;)"file-entry"===ue.localName&&"urn:oasis:names:tc:opendocument:xmlns:manifest:1.0"===ue.namespaceURI&&(ye[ue.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","full-path")]=ue.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","media-type")),ue=ue.nextElementSibling}function F(ue,de,pe){var xe;for(ue=E.getElementsByTagName(ue,de),xe=0;xe<ue.length;xe+=1)pe.hasOwnProperty((de=ue[xe]).namespaceURI)||de.parentNode.removeChild(de)}function L(ue){F(ue,"script",{"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:office:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:table:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:text:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0":!0}),F(ue,"style",{"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:style:1.0":!0})}function ie(ue){var xe,Xe,rt,de=ue.firstElementChild,pe=[],tt=ue.attributes,Re=tt.length;for(xe=0;xe<Re;xe+=1)Xe=(rt=tt.item(xe)).localName.substr(0,2).toLowerCase(),null===rt.namespaceURI&&"on"===Xe&&pe.push(rt);for(Re=pe.length,xe=0;xe<Re;xe+=1)ue.removeAttributeNode(pe[xe]);for(;de;)ie(de),de=de.nextElementSibling}function Y(ue){var de=ue.shift();de?Ce.loadAsDOM(de.path,function(pe,xe){xe&&(L(xe),ie(xe.documentElement)),de.handler(xe),we.state===S.INVALID?runtime.log(pe?"ERROR: Unable to load "+de.path+" - "+pe:"ERROR: Unable to load "+de.path):(pe&&runtime.log("DEBUG: Unable to load "+de.path+" - "+pe),Y(ue))}):(l(we.rootElement),A(S.DONE))}function ne(ue){var de="";return odf.Namespaces.forEachPrefix(function(pe,xe){de+=" xmlns:"+pe+'="'+xe+'"'}),'<?xml version="1.0" encoding="UTF-8"?><office:'+ue+" "+de+' office:version="1.2">'}function ge(ue,de){var pe=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:file-entry");return pe.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:full-path",ue),pe.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:media-type",de),pe}function fe(ue,de){var pe,xe=(pe=we.rootElement).meta;xe||(pe.meta=xe=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),y(pe,xe)),pe=xe,ue&&E.mapKeyValObjOntoNode(pe,ue,odf.Namespaces.lookupNamespaceURI),de&&E.removeKeyElementsFromNode(pe,de,odf.Namespaces.lookupNamespaceURI)}function Me(ue,de){function pe(ot,pt){var ct;pt||(pt=ot),ct=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0",pt),tt[ot]=ct,tt.appendChild(ct)}var xe=new core.Zip("",null),Xe="application/vnd.oasis.opendocument."+ue+(!0===de?"-template":""),rt=runtime.byteArrayFromString(Xe,"utf8"),tt=we.rootElement,Re=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0",ue);return xe.save("mimetype",rt,!1,new Date),pe("meta"),pe("settings"),pe("scripts"),pe("fontFaceDecls","font-face-decls"),pe("styles"),pe("automaticStyles","automatic-styles"),pe("masterStyles","master-styles"),pe("body"),tt.body.appendChild(Re),ye["/"]=Xe,ye["settings.xml"]="text/xml",ye["meta.xml"]="text/xml",ye["styles.xml"]="text/xml",ye["content.xml"]="text/xml",A(S.DONE),xe}function je(){var ue,de=new Date,pe="";we.rootElement.settings&&we.rootElement.settings.firstElementChild&&(ue=new xmldom.LSSerializer,pe=ne("document-settings"),ue.filter=new odf.OdfNodeFilter,pe+=ue.writeToString(we.rootElement.settings,odf.Namespaces.namespaceMap),pe+="</office:document-settings>"),(ue=pe)?(ue=runtime.byteArrayFromString(ue,"utf8"),Ce.save("settings.xml",ue,!0,de)):Ce.remove("settings.xml"),pe=runtime.getWindow(),ue="WebODF/"+webodf.Version,pe&&(ue=ue+" "+pe.navigator.userAgent),fe({"meta:generator":ue},null),ue=runtime.byteArrayFromString(function le(){var ue=new xmldom.LSSerializer,de=ne("document-meta");return ue.filter=new odf.OdfNodeFilter,(de+=ue.writeToString(we.rootElement.meta,odf.Namespaces.namespaceMap))+"</office:document-meta>"}(),"utf8"),Ce.save("meta.xml",ue,!0,de),ue=runtime.byteArrayFromString(function Le(){var ue,de,pe,xe=odf.Namespaces.namespaceMap,Xe=new xmldom.LSSerializer,rt=ne("document-styles");return de=ee(we.rootElement.automaticStyles,"document-styles"),pe=we.rootElement.masterStyles.cloneNode(!0),ue=G(we.rootElement.fontFaceDecls,[pe,we.rootElement.styles,de]),w.removePrefixFromStyleNames(de,N,pe),Xe.filter=new X(pe,de),rt+=Xe.writeToString(ue,xe),rt+=Xe.writeToString(we.rootElement.styles,xe),rt+=Xe.writeToString(de,xe),(rt+=Xe.writeToString(pe,xe))+"</office:document-styles>"}(),"utf8"),Ce.save("styles.xml",ue,!0,de),ue=runtime.byteArrayFromString(function Qe(){var ue,de,pe=odf.Namespaces.namespaceMap,xe=new xmldom.LSSerializer,Xe=ne("document-content");return de=ee(we.rootElement.automaticStyles,"document-content"),ue=G(we.rootElement.fontFaceDecls,[de]),xe.filter=new I(we.rootElement.body,de),Xe+=xe.writeToString(ue,pe),Xe+=xe.writeToString(de,pe),(Xe+=xe.writeToString(we.rootElement.body,pe))+"</office:document-content>"}(),"utf8"),Ce.save("content.xml",ue,!0,de),ue=runtime.byteArrayFromString(function Ee(){var xe,ue=runtime.parseXML('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2"></manifest:manifest>'),de=ue.documentElement,pe=new xmldom.LSSerializer;for(xe in ye)ye.hasOwnProperty(xe)&&de.appendChild(ge(xe,ye[xe]));return pe.filter=new odf.OdfNodeFilter,'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n'+pe.writeToString(ue,odf.Namespaces.namespaceMap)}(),"utf8"),Ce.save("META-INF/manifest.xml",ue,!0,de)}function ze(ue,de){je(),Ce.writeAs(ue,function(pe){de(pe)})}var Ce,$e,we=this,ye={},qe="";this.onstatereadychange=u,this.state=this.onchange=null,this.getMetadata=O,this.setRootElement=H,this.getContentElement=function(){var ue;if($e||($e=E.getDirectChild(ue=we.rootElement.body,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","text")||E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","presentation")||E.getDirectChild(ue,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","spreadsheet")),!$e)throw"Could not find content element in <office:body/>.";return $e},this.getDocumentType=function(){var ue=we.getContentElement();return ue&&ue.localName},this.isTemplate=function(){return"-template"===ye["/"].substr(-9)},this.setIsTemplate=function(ue){var de=ye["/"];ue!==("-template"===de.substr(-9))&&(de=ue?de+"-template":de.substr(0,de.length-9),ye["/"]=de,ue=runtime.byteArrayFromString(de,"utf8"),Ce.save("mimetype",ue,!1,new Date))},this.getPart=function(ue){return new odf.OdfPart(ue,ye[ue],we,Ce)},this.getPartData=function(ue,de){Ce.load(ue,de)},this.setMetadata=fe,this.incrementEditingCycles=function(){var ue=(ue=O(odf.Namespaces.metans,"editing-cycles"))?parseInt(ue,10):0;return isNaN(ue)&&(ue=0),fe({"meta:editing-cycles":ue+1},null),ue+1},this.createByteArray=function(ue,de){je(),Ce.createByteArray(ue,de)},this.saveAs=ze,this.save=function(ue){ze(qe,ue)},this.getUrl=function(){return qe},this.setBlob=function(ue,de,pe){pe=x.convertBase64ToByteArray(pe),Ce.save(ue,pe,!1,new Date),ye.hasOwnProperty(ue)&&runtime.log(ue+" has been overwritten."),ye[ue]=de},this.removeBlob=function(ue){var de=Ce.remove(ue);runtime.assert(de,"file is not found: "+ue),delete ye[ue]},this.state=S.LOADING,this.rootElement=function(ue){var pe,de=document.createElementNS(ue.namespaceURI,ue.localName);for(pe in ue=new ue.Type)ue.hasOwnProperty(pe)&&(de[pe]=ue[pe]);return de}({Type:odf.ODFDocumentElement,namespaceURI:odf.ODFDocumentElement.namespaceURI,localName:odf.ODFDocumentElement.localName}),Ce=s===odf.OdfContainer.DocumentType.TEXT?Me("text"):s===odf.OdfContainer.DocumentType.TEXT_TEMPLATE?Me("text",!0):s===odf.OdfContainer.DocumentType.PRESENTATION?Me("presentation"):s===odf.OdfContainer.DocumentType.PRESENTATION_TEMPLATE?Me("presentation",!0):s===odf.OdfContainer.DocumentType.SPREADSHEET?Me("spreadsheet"):s===odf.OdfContainer.DocumentType.SPREADSHEET_TEMPLATE?Me("spreadsheet",!0):new core.Zip(qe=s,function(ue,de){Ce=de,ue?function ae(ue,de){runtime.loadXML(ue,function(pe,xe){if(pe)de(pe);else if(xe){L(xe),ie(xe.documentElement);var Xe=B(xe);Xe&&"document"===Xe.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===Xe.namespaceURI?(H(Xe),A(S.DONE)):A(S.INVALID)}else de("No DOM was loaded.")})}(qe,function(pe){ue&&(Ce.error=ue+"\n"+pe,A(S.INVALID))}):Y([{path:"styles.xml",handler:$},{path:"content.xml",handler:J},{path:"meta.xml",handler:Q},{path:"settings.xml",handler:U},{path:"META-INF/manifest.xml",handler:K}])})},odf.OdfContainer.EMPTY=0,odf.OdfContainer.LOADING=1,odf.OdfContainer.DONE=2,odf.OdfContainer.INVALID=3,odf.OdfContainer.SAVING=4,odf.OdfContainer.MODIFIED=5,odf.OdfContainer.getContainer=function(S){return new odf.OdfContainer(S,null)}}(),odf.OdfContainer.DocumentType={TEXT:1,TEXT_TEMPLATE:2,PRESENTATION:3,PRESENTATION_TEMPLATE:4,SPREADSHEET:5,SPREADSHEET_TEMPLATE:6},gui.AnnotatableCanvas=function(){},gui.AnnotatableCanvas.prototype.refreshSize=function(){},gui.AnnotatableCanvas.prototype.getZoomLevel=function(){},gui.AnnotatableCanvas.prototype.getSizer=function(){},gui.AnnotationViewManager=function(P,X,I,y){function w(m){var l=m.annotationEndElement,M=S.createRange(),O=m.getAttributeNS(odf.Namespaces.officens,"name");l&&(M.setStart(m,m.childNodes.length),M.setEnd(l,0),(m=s.getTextNodes(M,!1)).forEach(function(q){var ee;e:{for(ee=q.parentNode;ee.namespaceURI!==odf.Namespaces.officens||"body"!==ee.localName;){if("http://www.w3.org/1999/xhtml"===ee.namespaceURI&&"webodf-annotationHighlight"===ee.className&&ee.getAttribute("annotation")===O){ee=!0;break e}ee=ee.parentNode}ee=!1}ee||((ee=S.createElement("span")).className="webodf-annotationHighlight",ee.setAttribute("annotation",O),q.parentNode.replaceChild(ee,q),ee.appendChild(q))})),M.detach()}function E(m){var l=P.getSizer();m?(I.style.display="inline-block",l.style.paddingRight=u.getComputedStyle(I).width):(I.style.display="none",l.style.paddingRight=0),P.refreshSize()}function C(){var m;for(m=0;m<x.length;m+=1){var l=(O=x[m]).parentNode,M=(q=l.nextElementSibling).nextElementSibling,$=l.parentNode,ee=0,G=void(ee=x[x.indexOf(O)-1]),O=P.getZoomLevel();l.style.left=(I.getBoundingClientRect().left-$.getBoundingClientRect().left)/O+"px",l.style.width=I.getBoundingClientRect().width/O+"px",q.style.width=parseFloat(l.style.left)-30+"px",ee?(G=ee.parentNode.getBoundingClientRect(),l.style.top=20>=($.getBoundingClientRect().top-G.bottom)/O?Math.abs($.getBoundingClientRect().top-G.bottom)/O+20+"px":"0px"):l.style.top="0px",M.style.left=q.getBoundingClientRect().width/O+"px";var q=M.style,A=($=M.getBoundingClientRect().left/O,ee=M.getBoundingClientRect().top/O,0),H=0;A=(A=(G=l.getBoundingClientRect().left/O)-$)*A,H=(H=l.getBoundingClientRect().top/O-ee)*H,$=Math.sqrt(A+H),q.width=$+"px",ee=Math.asin((l.getBoundingClientRect().top-M.getBoundingClientRect().top)/(O*parseFloat(M.style.width))),M.style.transform="rotate("+ee+"rad)",M.style.MozTransform="rotate("+ee+"rad)",M.style.WebkitTransform="rotate("+ee+"rad)",M.style.msTransform="rotate("+ee+"rad)"}}function N(m){var l=x.indexOf(m);"div"===(M=m.parentNode.parentNode).localName&&(M.parentNode.insertBefore(m,M),M.parentNode.removeChild(M)),m=m.getAttributeNS(odf.Namespaces.officens,"name"),m=S.querySelectorAll('span.webodf-annotationHighlight[annotation="'+m+'"]');for(var O,M=0;M<m.length;M+=1){for(O=m.item(M);O.firstChild;)O.parentNode.insertBefore(O.firstChild,O);O.parentNode.removeChild(O)}-1!==l&&x.splice(l,1),0===x.length&&E(!1)}var x=[],S=X.ownerDocument,s=odf.OdfUtils,u=runtime.getWindow();runtime.assert(Boolean(u),"Expected to be run in an environment which has a global window, like a browser."),this.rerenderAnnotations=C,this.rehighlightAnnotations=function(){x.forEach(function(m){w(m)})},this.getMinimumHeightForAnnotationPane=function(){return"none"!==I.style.display&&0<x.length?(x[x.length-1].parentNode.getBoundingClientRect().bottom-I.getBoundingClientRect().top)/P.getZoomLevel()+"px":null},this.addAnnotations=function(m){0!==m.length&&(E(!0),m.forEach(function(l){x.push(l);var G,M=S.createElement("div"),O=S.createElement("div"),q=S.createElement("div"),ee=S.createElement("div");M.className="annotationWrapper",M.setAttribute("creator",s.getAnnotationCreator(l)),l.parentNode.insertBefore(M,l),O.className="annotationNote",O.appendChild(l),y&&((G=S.createElement("div")).className="annotationRemoveButton",O.appendChild(G)),q.className="annotationConnector horizontal",ee.className="annotationConnector angular",M.appendChild(O),M.appendChild(q),M.appendChild(ee),l.annotationEndElement&&w(l)}),function R(){x.sort(function(m,l){return 0!=(m.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_FOLLOWING)?-1:1})}(),C())},this.forgetAnnotation=N,this.forgetAnnotations=function(){for(;x.length;)N(x[0])}},gui.Viewport=function(){},gui.Viewport.prototype.scrollIntoView=function(P,X){},gui.SingleScrollViewport=function(P){this.scrollIntoView=function(X,I){var y,w,E,R;R=P.offsetHeight-P.clientHeight,E=P.offsetWidth-P.clientWidth;var C=P.getBoundingClientRect();X&&C&&(y=C.left+5,w=C.top+5,E=C.right-(E+5),R=C.bottom-(R+5),I||X.top<w?P.scrollTop-=w-X.top:(X.top>R||X.bottom>R)&&(P.scrollTop=X.bottom-X.top<=R-w?P.scrollTop+(X.bottom-R):P.scrollTop+(X.top-w)),X.left<y?P.scrollLeft-=y-X.left:X.right>E&&(P.scrollLeft=X.right-X.left<=E-y?P.scrollLeft+(X.right-E):P.scrollLeft-(y-X.left)))}},function(){function P(w,E,R,C,N){var x,s,S=0;for(s in w)if(w.hasOwnProperty(s)){if(S===R){x=s;break}S+=1}x?E.getPartData(w[x].href,function(u,m){if(u)runtime.log(u);else if(m){var l="@font-face { font-family: "+(w[x].family||x)+"; src: url(data:application/x-font-ttf;charset=binary;base64,"+y.convertUTF8ArrayToBase64(m)+') format("truetype"); }';try{C.insertRule(l,C.cssRules.length)}catch(M){runtime.log("Problem inserting rule in CSS: "+runtime.toJson(M)+"\nRule: "+l)}}else runtime.log("missing font data for "+w[x].href);P(w,E,R+1,C,N)}):N&&N()}var X=xmldom.XPath,I=odf.OdfUtils,y=new core.Base64;odf.FontLoader=function(){this.loadFonts=function(w,E){for(var R=w.rootElement.fontFaceDecls;E.cssRules.length;)E.deleteRule(E.cssRules.length-1);if(R){var N,x,S,s,C={};if(R)for(R=X.getODFElementsWithXPath(R,"style:font-face[svg:font-face-src]",odf.Namespaces.lookupNamespaceURI),N=0;N<R.length;N+=1)S=(x=R[N]).getAttributeNS(odf.Namespaces.stylens,"name"),s=I.getNormalizedFontFamilyName(x.getAttributeNS(odf.Namespaces.svgns,"font-family")),0<(x=X.getODFElementsWithXPath(x,"svg:font-face-src/svg:font-face-uri",odf.Namespaces.lookupNamespaceURI)).length&&(x=x[0].getAttributeNS(odf.Namespaces.xlinkns,"href"),C[S]={href:x,family:s});P(C,w,0,E)}}}}(),odf.Formatting=function(){function P($){return($=H[$])?B.mergeObjects({},$):{}}function X(){for(var J,Q,$={},U=(U=s.rootElement.fontFaceDecls)&&U.firstElementChild;U;)(J=U.getAttributeNS(l,"name"))&&((Q=U.getAttributeNS(m,"font-family"))||0<U.getElementsByTagNameNS(m,"font-face-uri").length)&&($[J]=Q),U=U.nextElementSibling;return $}function I($){for(var J=s.rootElement.styles.firstElementChild;J;){if(J.namespaceURI===l&&"default-style"===J.localName&&J.getAttributeNS(l,"family")===$)return J;J=J.nextElementSibling}return null}function y($,J,Q){var U,K,F;for(Q=Q||[s.rootElement.automaticStyles,s.rootElement.styles],F=0;F<Q.length;F+=1)for(U=(U=Q[F]).firstElementChild;U;){if(K=U.getAttributeNS(l,"name"),U.namespaceURI===l&&"style"===U.localName&&U.getAttributeNS(l,"family")===J&&K===$||"list-style"===J&&U.namespaceURI===M&&"list-style"===U.localName&&K===$||"data"===J&&U.namespaceURI===O&&K===$)return U;U=U.nextElementSibling}return null}function w($){for(var J,Q,U,K,F={},L=$.firstElementChild;L;){if(L.namespaceURI===l)for(U=F[L.nodeName]={},Q=L.attributes,J=0;J<Q.length;J+=1)U[(K=Q.item(J)).name]=K.value;L=L.nextElementSibling}for(Q=$.attributes,J=0;J<Q.length;J+=1)F[(K=Q.item(J)).name]=K.value;return F}function E($,J){for(var U,Q=s.rootElement.styles,K={},F=$.getAttributeNS(l,"family"),L=$;L;)U=w(L),K=B.mergeObjects(U,K),L=(U=L.getAttributeNS(l,"parent-style-name"))?y(U,F,[Q]):null;return(L=I(F))&&(U=w(L),K=B.mergeObjects(U,K)),!1!==J&&(U=P(F),K=B.mergeObjects(U,K)),K}function N($,J){var Q={},U=[];return J||(J={}),$.forEach(function(K){!function R($,J){for(var K,U=$.nodeType===Node.TEXT_NODE?$.parentNode:$,F=[],L="",ie=!1;U&&!ee.isInlineRoot(U)&&U.parentNode!==s.rootElement;)!ie&&ee.isGroupingElement(U)&&(ie=!0),(K=u.determineStylesForNode(U))&&F.push(K),U=U.parentNode;ie&&(F.forEach(function Q(Y){Object.keys(Y).forEach(function(ne){Object.keys(Y[ne]).forEach(function(le){L+="|"+ne+":"+le+"|"})})}),J&&(J[L]=F))}(K,Q)}),Object.keys(Q).forEach(function(K){J[K]||(J[K]=function C($){var J={orderedStyles:[],styleProperties:{}};return $.forEach(function(Q){Object.keys(Q).forEach(function(U){var L,K=Object.keys(Q[U])[0],F={name:K,family:U,displayName:void 0,isCommonStyle:!1};(L=y(K,U))?(U=E(L),J.styleProperties=B.mergeObjects(U,J.styleProperties),F.displayName=L.getAttributeNS(l,"display-name")||void 0,F.isCommonStyle=L.parentNode===s.rootElement.styles):runtime.log("No style element found for '"+K+"' of family '"+U+"'"),J.orderedStyles.push(F)})}),J}(Q[K])),U.push(J[K])}),U}function x($){for(var J=s.rootElement.masterStyles.firstElementChild;J&&(J.namespaceURI!==l||"master-page"!==J.localName||J.getAttributeNS(l,"name")!==$);)J=J.nextElementSibling;return J}function S($,J){var Q;return $&&(Q=A.convertMeasure($,"px")),void 0===Q&&J&&(Q=A.convertMeasure(J,"px")),Q}var s,u=new odf.StyleInfo,m=odf.Namespaces.svgns,l=odf.Namespaces.stylens,M=odf.Namespaces.textns,O=odf.Namespaces.numberns,q=odf.Namespaces.fons,ee=odf.OdfUtils,G=core.DomUtils,B=new core.Utils,A=new core.CSSUnits,H={paragraph:{"style:paragraph-properties":{"fo:text-align":"left"}}};this.getSystemDefaultStyleAttributes=P,this.setOdfContainer=function($){s=$},this.getFontMap=X,this.getAvailableParagraphStyles=function(){for(var $,J,Q=[],U=(U=s.rootElement.styles)&&U.firstElementChild;U;)"style"===U.localName&&U.namespaceURI===l&&"paragraph"===($=U.getAttributeNS(l,"family"))&&($=U.getAttributeNS(l,"name"),J=U.getAttributeNS(l,"display-name")||$,$&&J&&Q.push({name:$,displayName:J})),U=U.nextElementSibling;return Q},this.isStyleUsed=function($){var J,Q=s.rootElement;return J=u.hasDerivedStyles(Q,odf.Namespaces.lookupNamespaceURI,$),$=new u.UsedStyleList(Q.styles).uses($)||new u.UsedStyleList(Q.automaticStyles).uses($)||new u.UsedStyleList(Q.body).uses($),J||$},this.getDefaultStyleElement=I,this.getStyleElement=y,this.getStyleAttributes=w,this.getInheritedStyleAttributes=E,this.getFirstCommonParentStyleNameOrSelf=function($){var Q,J=s.rootElement.styles;return(Q=y($,"paragraph",[s.rootElement.automaticStyles]))&&!($=Q.getAttributeNS(l,"parent-style-name"))?null:(Q=y($,"paragraph",[J]))?$:null},this.hasParagraphStyle=function($){return Boolean(y($,"paragraph"))},this.getAppliedStyles=N,this.getAppliedStylesForElement=function($,J){return N([$],J)[0]},this.updateStyle=function($,J){var Q,U;G.mapObjOntoNode($,J,odf.Namespaces.lookupNamespaceURI),(Q=(Q=J["style:text-properties"])&&Q["style:font-name"])&&!X().hasOwnProperty(Q)&&((U=$.ownerDocument.createElementNS(l,"style:font-face")).setAttributeNS(l,"style:name",Q),U.setAttributeNS(m,"svg:font-family",Q),s.rootElement.fontFaceDecls.appendChild(U))},this.createDerivedStyleObject=function($,J,Q){var U=y($,J);return runtime.assert(Boolean(U),"No style element found for '"+$+"' of family '"+J+"'"),($=U.parentNode===s.rootElement.styles?{"style:parent-style-name":$}:w(U))["style:family"]=J,B.mergeObjects($,Q),$},this.getDefaultTabStopDistance=function(){for(var J,$=($=I("paragraph"))&&$.firstElementChild;$;)$.namespaceURI===l&&"paragraph-properties"===$.localName&&(J=$.getAttributeNS(l,"tab-stop-distance")),$=$.nextElementSibling;return J||(J="1.25cm"),ee.parseNonNegativeLength(J)},this.getMasterPageElement=x,this.getContentSize=function($,J){var Q,U,K,F,L,ie,Y,ne,le,ge;e:{if(U=y($,J),runtime.assert("paragraph"===J||"table"===J,"styleFamily must be either paragraph or table"),U&&((U=U.getAttributeNS(l,"master-page-name"))&&((Q=x(U))||runtime.log("WARN: No master page definition found for "+U)),Q||(Q=x("Standard")),Q||(Q=s.rootElement.masterStyles.getElementsByTagNameNS(l,"master-page")[0])||runtime.log("WARN: Document has no master pages defined"),Q))for(U=Q.getAttributeNS(l,"page-layout-name"),K=s.rootElement.automaticStyles.getElementsByTagNameNS(l,"page-layout"),F=0;F<K.length;F+=1)if((Q=K.item(F)).getAttributeNS(l,"name")===U)break e;Q=null}return Q||(Q=G.getDirectChild(s.rootElement.styles,l,"default-page-layout")),(Q=G.getDirectChild(Q,l,"page-layout-properties"))?("landscape"===Q.getAttributeNS(l,"print-orientation")?(U="29.7cm",K="21.001cm"):(U="21.001cm",K="29.7cm"),U=S(Q.getAttributeNS(q,"page-width"),U),K=S(Q.getAttributeNS(q,"page-height"),K),void 0===(F=S(Q.getAttributeNS(q,"margin")))?(F=S(Q.getAttributeNS(q,"margin-left"),"2cm"),L=S(Q.getAttributeNS(q,"margin-right"),"2cm"),ie=S(Q.getAttributeNS(q,"margin-top"),"2cm"),Y=S(Q.getAttributeNS(q,"margin-bottom"),"2cm")):F=L=ie=Y=F,void 0===(ne=S(Q.getAttributeNS(q,"padding")))?(ne=S(Q.getAttributeNS(q,"padding-left"),"0cm"),le=S(Q.getAttributeNS(q,"padding-right"),"0cm"),ge=S(Q.getAttributeNS(q,"padding-top"),"0cm"),Q=S(Q.getAttributeNS(q,"padding-bottom"),"0cm")):ne=le=ge=Q=ne):(U=S("21.001cm"),K=S("29.7cm"),F=L=ie=Y=F=S("2cm"),ne=le=ge=Q=ne=S("0cm")),{width:U-F-L-ne-le,height:K-ie-Y-ge-Q}}},function(){var P=odf.Namespaces.stylens,X=odf.Namespaces.textns,I={graphic:"draw","drawing-page":"draw",paragraph:"text",presentation:"presentation",ruby:"text",section:"text",table:"table","table-cell":"table","table-column":"table","table-row":"table",text:"text",list:"text",page:"office"};odf.StyleTreeNode=function(y){this.derivedStyles={},this.element=y},odf.StyleTree=function(y,w){function E(S){var s,u,m,l={};if(!S)return l;for(S=S.firstElementChild;S;)(u=S.namespaceURI!==P||"style"!==S.localName&&"default-style"!==S.localName?S.namespaceURI===X&&"list-style"===S.localName?"list":S.namespaceURI!==P||"page-layout"!==S.localName&&"default-page-layout"!==S.localName?void 0:"page":S.getAttributeNS(P,"family"))&&((s=S.getAttributeNS(P,"name"))||(s=""),l.hasOwnProperty(u)?m=l[u]:l[u]=m={},m[s]=S),S=S.nextElementSibling;return l}function R(S,s){if(S.hasOwnProperty(s))return S[s];var l,u=null,m=Object.keys(S);for(l=0;l<m.length&&!(u=R(S[m[l]].derivedStyles,s));l+=1);return u}function C(S,s,u){var m,l,M;return s.hasOwnProperty(S)?(M=null,(l=(m=new odf.StyleTreeNode(s[S])).element.getAttributeNS(P,"parent-style-name"))&&(M=R(u,l)||C(l,s,u)),M?M.derivedStyles[S]=m:u[S]=m,delete s[S],m):null}function N(S,s){S&&Object.keys(S).forEach(function(u){C(u,S,s)})}var S,s,u,x={};this.getStyleTree=function(){return x},s=E(y),u=E(w),Object.keys(I).forEach(function(m){S=x[m]={},N(s[m],S),N(u[m],S)})}}(),function(){function P(N,x){try{N.insertRule(x,N.cssRules.length)}catch(S){runtime.log("cannot load rule: "+x+" - "+S)}}function X(N,x){this.listCounterCount=0,this.contentRules=N,this.counterIdStack=[],this.continuedCounterIdStack=x}function I(N){function x(m,l,M,O){var ee=l.namespaceURI===E&&"list-item"===l.localName;if((q=l.namespaceURI===E&&"list"===l.localName)||ee){if(q){var G,B,A,q=M+=1;for(O.listCounterCount+=1,l.setAttributeNS("urn:webodf:names:helper","counter-id",ee=m+"-level"+q+"-"+O.listCounterCount),(G=O.continuedCounterIdStack.shift())||(s+=ee+" 1 ",B='text|list[webodfhelper|counter-id="'+ee+'"] > text|list-item:first-child > :not(text|list):first-child:before',B+="{",B+="counter-increment: "+(G=ee)+" 0;",P(N,B+="}"));O.counterIdStack.length>=q;)O.counterIdStack.pop();for(O.counterIdStack.push(G),A=O.contentRules[q.toString()]||"",B=1;B<=q;B+=1)A=A.replace(B+"webodf-listLevel",O.counterIdStack[B-1]);B='text|list[webodfhelper|counter-id="'+ee+'"] > text|list-item > :not(text|list):first-child:before',B+="{",B+=A,B+="counter-increment: "+G+";",P(N,B+="}")}for(l=l.firstElementChild;l;)x(m,l,M,O),l=l.nextElementSibling}else O.continuedCounterIdStack=[]}var S=0,s="",u={};this.createCounterRules=function(m,l,M){var O=l.getAttributeNS(R,"id"),q=[];M&&(M=M.getAttributeNS("urn:webodf:names:helper","counter-id"),q=u[M].slice(0)),m=new X(m,q),x(O=O?"Y"+O:"X"+(S+=1),l,0,m),u[O+"-level1-1"]=m.counterIdStack},this.initialiseCreatedCounters=function(){var m;m="office|document{counter-reset: "+s+";",P(N,m+="}")}}var y=odf.Namespaces.fons,w=odf.Namespaces.stylens,E=odf.Namespaces.textns,R=odf.Namespaces.xmlns,C={1:"decimal",a:"lower-latin",A:"upper-latin",i:"lower-roman",I:"upper-roman"};odf.ListStyleToCss=function(){function N(l){var M=m.parseLength(l);return M?u.convert(M.value,M.unit,"px"):(runtime.log("Could not parse value '"+l+"'."),0)}function x(l){return l.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function S(l,M){var O;return l&&(O=l.getAttributeNS(E,"style-name")),O===M}var u=new core.CSSUnits,m=odf.OdfUtils;this.applyListStyles=function(l,M,O){var q;(q=M.list)&&Object.keys(q).forEach(function(G){for(var B=q[G].element.firstElementChild;B;){if(B.namespaceURI===E){var A=l,H=B,$='text|list[text|style-name="'+G+'"]',J=H.getAttributeNS(E,"level"),le=void 0,Q=void 0,Y=Q=void 0,ne=void 0,U=void 0,K=le=void 0,F=void 0,L=void 0,ie=void 0;for(ne=void 0,Y=(Q=H.getElementsByTagNameNS(w,"list-level-properties")[0])&&Q.getAttributeNS(E,"list-level-position-and-space-mode"),ne=Q&&Q.getElementsByTagNameNS(w,"list-level-label-alignment")[0],le=J=J&&parseInt(J,10);1<le;)$+=" > text|list-item > text|list",--le;switch(le=Q&&Q.getAttributeNS(y,"text-align")||"left"){case"end":le="right";break;case"start":le="left"}"label-alignment"===Y?(U=ne&&ne.getAttributeNS(y,"margin-left")||"0px",L=ne&&ne.getAttributeNS(y,"text-indent")||"0px",ie=ne&&ne.getAttributeNS(E,"label-followed-by"),ne=N(U)):(U=Q&&Q.getAttributeNS(E,"space-before")||"0px",K=Q&&Q.getAttributeNS(E,"min-label-width")||"0px",F=Q&&Q.getAttributeNS(E,"min-label-distance")||"0px",ne=N(U)+N(K)),Q=$+" > text|list-item",Q+="{",Q+="margin-left: "+ne+"px;",P(A,Q+="}"),Q=$+" > text|list-item > text|list",Q+="{",Q+="margin-left: "+-ne+"px;",P(A,Q+="}"),Q=$+" > text|list-item > :not(text|list):first-child:before",Q+="{",Q+="text-align: "+le+";",Q+="display: inline-block;","label-alignment"===Y?(Q+="margin-left: "+L+";","listtab"===ie&&(Q+="padding-right: 0.2cm;")):(Q+="min-width: "+K+";",Q+="margin-left: "+(0===parseFloat(K)?"":"-")+K+";",Q+="padding-right: "+F+";"),P(A,Q+="}")}B=B.nextElementSibling}}),function s(l,M,O){M=M.getElementsByTagNameNS(E,"list"),l=new I(l);var q,ee,G,B,A,H,J,$={};for(J=0;J<M.length;J+=1)if(H=(q=M.item(J)).getAttributeNS(E,"style-name")){G=q.getAttributeNS(E,"continue-numbering"),B=q.getAttributeNS(E,"continue-list"),(A=q.getAttributeNS(R,"id"))&&($[A]=q),A=O[H].element.firstElementChild;for(var Q=void 0,U={};A;){Q=(Q=A.getAttributeNS(E,"level"))&&parseInt(Q,10);var K=A,F="",L=void 0,ie=void 0,Y=L=void 0;if("list-level-style-number"===K.localName){F=(ge=K).getAttributeNS(w,"num-format"),L=ge.getAttributeNS(w,"num-suffix")||"",ie=ge.getAttributeNS(w,"num-prefix")||"";var ne="",le=ge.getAttributeNS(E,"level"),ge=ge.getAttributeNS(E,"display-levels");if(ie&&(ne+='"'+x(ie)+'"\n'),C.hasOwnProperty(F))for(le=le?parseInt(le,10):1,ge=ge?parseInt(ge,10):1;0<ge;)ne+=" counter("+(le-ge+1)+"webodf-listLevel,"+C[F]+")",1<ge&&(ne+='"."'),--ge;else ne=F?ne+' "'+F+'"':ne+' ""';F="content:"+ne+' "'+x(L)+'"'}else"list-level-style-image"===K.localName?F="content: none":"list-level-style-bullet"===K.localName&&(F='content: "'+x(F=K.getAttributeNS(E,"bullet-char"))+'"');(L=K.getElementsByTagNameNS(w,"list-level-properties")[0])&&"label-alignment"===(ie=L.getAttributeNS(E,"list-level-position-and-space-mode"))&&((L=L.getElementsByTagNameNS(w,"list-level-label-alignment")[0])&&(Y=L.getAttributeNS(E,"label-followed-by")),"space"===Y&&(F+=' "\\a0"')),U[Q]="\n"+F+";\n",A=A.nextElementSibling}A=U,G&&!B&&S(ee,H)?l.createCounterRules(A,q,ee):B&&S($[B],H)?l.createCounterRules(A,q,$[B]):l.createCounterRules(A,q),ee=q}l.initialiseCreatedCounters()}(l,O,q)}}}(),odf.LazyStyleProperties=function(P,X){var I={};this.value=function(y){var w;return I.hasOwnProperty(y)?w=I[y]:(void 0===(w=X[y]())&&P&&(w=P.value(y)),I[y]=w),w},this.reset=function(y){P=y,I={}}},odf.StyleParseUtils=function(){function P(I){var y,w;return"px"===(w=(I=(I=/(-?[0-9]*[0-9][0-9]*(\.[0-9]*)?|0+\.[0-9]*[1-9][0-9]*|\.[0-9]*[1-9][0-9]*)((cm)|(mm)|(in)|(pt)|(pc)|(px))/.exec(I))?{value:parseFloat(I[1]),unit:I[3]}:null)&&I.unit)?y=I.value:"cm"===w?y=I.value/2.54*96:"mm"===w?y=I.value/25.4*96:"in"===w?y=96*I.value:"pt"===w?y=I.value/.75:"pc"===w&&(y=16*I.value),y}var X=odf.Namespaces.stylens;this.parseLength=P,this.parsePositiveLengthOrPercent=function(I,y,w){var E,R;return I&&(E=parseFloat(I.substr(0,I.indexOf("%"))),isNaN(E)&&(E=void 0)),void 0!==E?(w&&(R=w.value(y)),E=void 0===R?void 0:R/100*E):E=P(I),E},this.getPropertiesElement=function(I,y,w){for(y=w?w.nextElementSibling:y.firstElementChild;null!==y&&(y.localName!==I||y.namespaceURI!==X);)y=y.nextElementSibling;return y},this.parseAttributeList=function(I){return I&&(I=I.replace(/^\s*(.*?)\s*$/g,"$1")),I&&0<I.length?I.split(/\s+/):[]}},odf.Style2CSS=function(){function P(ae,fe,Me){var je=[];Me=Me.derivedStyles;var ze,Ce,we=q[ae];for(ze in void 0===we?fe=null:(Ce=fe?"["+we+'|style-name="'+fe+'"]':"","presentation"===we&&(we="draw",Ce=fe?'[presentation|style-name="'+fe+'"]':""),fe=we+"|"+ee[ae].join(Ce+","+we+"|")+Ce),null!==fe&&je.push(fe),Me)Me.hasOwnProperty(ze)&&(fe=P(ae,ze,Me[ze]),je=je.concat(fe));return je}function X(ae){var Me="",fe="";return Me=null,"default-style"===ae.localName?null:(Me=ae.getAttributeNS(S,"parent-style-name"),fe=ae.getAttributeNS(S,"family"),Me=Le.getODFElementsWithXPath(ge,Me?"//style:*[@style:name='"+Me+"'][@style:family='"+fe+"']":"//style:default-style[@style:family='"+fe+"']",odf.Namespaces.lookupNamespaceURI)[0])}function I(ae,fe){var je,ze,we,Me="";for(je=0;je<fe.length;je+=1)if(we=ae.getAttributeNS((ze=fe[je])[0],ze[1])){if(we=we.trim(),L.hasOwnProperty(ze[1])){var Ce=we,$e=void 0;we=void 0,-1!==(ye=Ce.indexOf(" "))?($e=Ce.substring(0,ye),we=Ce.substring(ye)):($e=Ce,we=""),($e=ne.parseLength($e))&&"pt"===$e.unit&&.75>$e.value&&(Ce="0.75pt"+we),we=Ce}else if(ie.hasOwnProperty(ze[1])){Ce=ae;var ye=ze[0],qe=($e=ze[1],ne.parseLength(we)),ue=void 0,de=void 0,xe=void 0,pe=void 0;if(xe=void 0,qe&&"%"===qe.unit){for(ue=qe.value/100,de=X(Ce.parentNode),pe="0";de;){if((xe=M.getDirectChild(de,S,"paragraph-properties"))&&(xe=ne.parseLength(xe.getAttributeNS(ye,$e)))){if("%"!==xe.unit){pe=xe.value*ue+xe.unit;break}ue*=xe.value/100}de=X(de)}we=pe}}ze[2]&&(Me+=ze[2]+":"+we+";")}return Me}function y(ae,fe,Me,je){return fe+fe+Me+Me+je+je}function w(ae,fe){var Me=[ae],je=fe.derivedStyles;return Object.keys(je).forEach(function(ze){ze=w(ze,je[ze]),Me=Me.concat(ze)}),Me}function E(ae,fe,Me,je){function ze($e,qe){var de,ue=[];$e.forEach(function(pe){we.forEach(function(xe){ue.push('draw|page[webodfhelper|page-style-name="'+xe+'"] draw|frame[presentation|class="'+pe+'"]')})}),0<ue.length&&(de=ue.join(",")+"{visibility:"+qe+";}",ae.insertRule(de,ae.cssRules.length))}var we=w(fe,je),Ce=[],ye=[];["page-number","date-time","header","footer"].forEach(function($e){var qe;"true"===(qe=Me.getAttributeNS(l,"display-"+$e))?Ce.push($e):"false"===qe&&ye.push($e)}),ze(Ce,"visible"),ze(ye,"hidden")}function R(ae,fe,Me,je){var ze,we;if("page"===fe){var $e,qe,ue,Ce=je.element,ye="";if(qe=$e="",Me=M.getDirectChild(Ce,S,"page-layout-properties"))if(ue=Ce.getAttributeNS(S,"name"),ye+=I(Me,K),($e=M.getDirectChild(Me,S,"background-image"))&&(qe=$e.getAttributeNS(m,"href"))&&(ye=ye+"background-image: url('odfkit:"+qe+"');"+I($e,B)),"presentation"===le)for(Ce=(Ce=M.getDirectChild(Ce.parentNode.parentNode,x,"master-styles"))&&Ce.firstElementChild;Ce;)Ce.namespaceURI===S&&"master-page"===Ce.localName&&Ce.getAttributeNS(S,"page-layout-name")===ue&&($e='draw|page[draw|master-page-name="'+(qe=Ce.getAttributeNS(S,"name"))+'"] {'+ye+"}",qe='office|body, draw|page[draw|master-page-name="'+qe+'"] {'+I(Me,F)+" }",ae.insertRule($e,ae.cssRules.length),ae.insertRule(qe,ae.cssRules.length)),Ce=Ce.nextElementSibling;else"text"===le&&($e="office|text {"+ye+"}",qe="office|body {width: "+Me.getAttributeNS(N,"page-width")+";}",ae.insertRule($e,ae.cssRules.length),ae.insertRule(qe,ae.cssRules.length))}else{if(ye=P(fe,Me,je).join(","),ue="",Ce=M.getDirectChild(je.element,S,"text-properties")){var de=Ce,pe=we="";switch($e="",qe=1,Ce=""+I(de,G),"solid"===(ze=de.getAttributeNS(S,"text-underline-style"))&&(we+=" underline"),"solid"===(ze=de.getAttributeNS(S,"text-line-through-style"))&&(we+=" line-through"),we.length&&(Ce=Ce+"text-decoration:"+we+";\ntext-decoration-line:"+we+";\n",Ce+="-moz-text-decoration-line:"+we+";\n"),ze=de.getAttributeNS(S,"text-line-through-type")){case"double":pe+=" double";break;case"single":pe+=" single"}if(pe&&(Ce+="text-decoration-style:"+pe+";\n",Ce+="-moz-text-decoration-style:"+pe+";\n"),(we=de.getAttributeNS(S,"font-name")||de.getAttributeNS(N,"font-family"))&&(Ce+="font-family: "+((ze=Y[we])||we)+";"),(ze=de.getAttributeNS(S,"text-position"))&&(Ce+="vertical-align: "+(ze=(we=O.parseAttributeList(ze))[0])+"\n; ",(we=we[1])&&(qe=parseFloat(we)/100)),de.hasAttributeNS(N,"font-size")||1!==qe){for(de=de.parentNode;de;){if(ze=(ze=M.getDirectChild(de,S,"text-properties"))?ne.parseFoFontSize(ze.getAttributeNS(N,"font-size")):null){if("%"!==ze.unit){$e="font-size: "+ze.value*qe+ze.unit+";";break}qe*=ze.value/100}de=X(de)}$e||($e="font-size: "+parseFloat(Ee)*qe+Qe.getUnits(Ee)+";")}ue+=Ce+=$e}(Ce=M.getDirectChild(je.element,S,"paragraph-properties"))&&(Ce=""+I($e=Ce,A),(qe=M.getDirectChild($e,S,"background-image"))&&(de=qe.getAttributeNS(m,"href"))&&(Ce=Ce+"background-image: url('odfkit:"+de+"');"+I(qe,B)),($e=$e.getAttributeNS(N,"line-height"))&&"normal"!==$e&&(Ce="%"!==($e=ne.parseFoLineHeight($e)).unit?Ce+"line-height: "+$e.value+$e.unit+";":Ce+"line-height: "+$e.value/100+";"),ue+=Ce),(Ce=M.getDirectChild(je.element,S,"graphic-properties"))&&(Ce=""+I(de=Ce,H),$e=de.getAttributeNS(C,"opacity"),qe=de.getAttributeNS(C,"fill"),de=de.getAttributeNS(C,"fill-color"),"solid"===qe||"hatch"===qe?de&&"none"!==de?($e=isNaN(parseFloat($e))?1:parseFloat($e)/100,qe=de.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,y),(de=(qe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(qe))?{r:parseInt(qe[1],16),g:parseInt(qe[2],16),b:parseInt(qe[3],16)}:null)&&(Ce+="background-color: rgba("+de.r+","+de.g+","+de.b+","+$e+");")):Ce+="background: none;":"none"===qe&&(Ce+="background: none;"),ue+=Ce),(Ce=M.getDirectChild(je.element,S,"drawing-page-properties"))&&(qe=""+I($e=Ce,H),"true"===$e.getAttributeNS(l,"background-visible")&&(qe+="background: none;"),ue+=qe,E(ae,Me,Ce,je)),(Ce=M.getDirectChild(je.element,S,"table-cell-properties"))&&(ue=(Me=ue)+(ue=""+I(Ce,$))),(Ce=M.getDirectChild(je.element,S,"table-row-properties"))&&(ue=(Me=ue)+(ue=""+I(Ce,Q))),(Ce=M.getDirectChild(je.element,S,"table-column-properties"))&&(ue=(Me=ue)+(ue=""+I(Ce,J))),(Ce=M.getDirectChild(je.element,S,"table-properties"))&&(Me=ue,ue=""+I(Ce,U),"collapsing"===(Ce=Ce.getAttributeNS(u,"border-model"))?ue+="border-collapse:collapse;":"separating"===Ce&&(ue+="border-collapse:separate;"),ue=Me+ue),0!==ue.length&&ae.insertRule(ye+"{"+ue+"}",ae.cssRules.length)}for(var xe in je.derivedStyles)je.derivedStyles.hasOwnProperty(xe)&&R(ae,fe,xe,je.derivedStyles[xe])}var le,ge,Ee,C=odf.Namespaces.drawns,N=odf.Namespaces.fons,x=odf.Namespaces.officens,S=odf.Namespaces.stylens,s=odf.Namespaces.svgns,u=odf.Namespaces.tablens,m=odf.Namespaces.xlinkns,l=odf.Namespaces.presentationns,M=core.DomUtils,O=new odf.StyleParseUtils,q={graphic:"draw","drawing-page":"draw",paragraph:"text",presentation:"presentation",ruby:"text",section:"text",table:"table","table-cell":"table","table-column":"table","table-row":"table",text:"text",list:"text",page:"office"},ee={graphic:"circle connected control custom-shape ellipse frame g line measure page page-thumbnail path polygon polyline rect regular-polygon".split(" "),paragraph:"alphabetical-index-entry-template h illustration-index-entry-template index-source-style object-index-entry-template p table-index-entry-template table-of-content-entry-template user-index-entry-template".split(" "),presentation:"caption circle connector control custom-shape ellipse frame g line measure page-thumbnail path polygon polyline rect regular-polygon".split(" "),"drawing-page":"caption circle connector control page custom-shape ellipse frame g line measure page-thumbnail path polygon polyline rect regular-polygon".split(" "),ruby:["ruby","ruby-text"],section:"alphabetical-index bibliography illustration-index index-title object-index section table-of-content table-index user-index".split(" "),table:["background","table"],"table-cell":"body covered-table-cell even-columns even-rows first-column first-row last-column last-row odd-columns odd-rows table-cell".split(" "),"table-column":["table-column"],"table-row":["table-row"],text:"a index-entry-chapter index-entry-link-end index-entry-link-start index-entry-page-number index-entry-span index-entry-tab-stop index-entry-text index-title-template linenumbering-configuration list-level-style-number list-level-style-bullet outline-level-style span".split(" "),list:["list-item"]},G=[[N,"color","color"],[N,"background-color","background-color"],[N,"font-weight","font-weight"],[N,"font-style","font-style"]],B=[[S,"repeat","background-repeat"]],A=[[N,"background-color","background-color"],[N,"text-align","text-align"],[N,"text-indent","text-indent"],[N,"padding","padding"],[N,"padding-left","padding-left"],[N,"padding-right","padding-right"],[N,"padding-top","padding-top"],[N,"padding-bottom","padding-bottom"],[N,"border-left","border-left"],[N,"border-right","border-right"],[N,"border-top","border-top"],[N,"border-bottom","border-bottom"],[N,"margin","margin"],[N,"margin-left","margin-left"],[N,"margin-right","margin-right"],[N,"margin-top","margin-top"],[N,"margin-bottom","margin-bottom"],[N,"border","border"]],H=[[N,"background-color","background-color"],[N,"min-height","min-height"],[C,"stroke","border"],[s,"stroke-color","border-color"],[s,"stroke-width","border-width"],[N,"border","border"],[N,"border-left","border-left"],[N,"border-right","border-right"],[N,"border-top","border-top"],[N,"border-bottom","border-bottom"]],$=[[N,"background-color","background-color"],[N,"border-left","border-left"],[N,"border-right","border-right"],[N,"border-top","border-top"],[N,"border-bottom","border-bottom"],[N,"border","border"]],J=[[S,"column-width","width"]],Q=[[S,"row-height","height"],[N,"keep-together",null]],U=[[S,"width","width"],[N,"margin-left","margin-left"],[N,"margin-right","margin-right"],[N,"margin-top","margin-top"],[N,"margin-bottom","margin-bottom"]],K=[[N,"background-color","background-color"],[N,"padding","padding"],[N,"padding-left","padding-left"],[N,"padding-right","padding-right"],[N,"padding-top","padding-top"],[N,"padding-bottom","padding-bottom"],[N,"border","border"],[N,"border-left","border-left"],[N,"border-right","border-right"],[N,"border-top","border-top"],[N,"border-bottom","border-bottom"],[N,"margin","margin"],[N,"margin-left","margin-left"],[N,"margin-right","margin-right"],[N,"margin-top","margin-top"],[N,"margin-bottom","margin-bottom"]],F=[[N,"page-width","width"],[N,"page-height","height"]],L={border:!0,"border-left":!0,"border-right":!0,"border-top":!0,"border-bottom":!0,"stroke-width":!0},ie={margin:!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"margin-bottom":!0},Y={},ne=odf.OdfUtils,Le=xmldom.XPath,Qe=new core.CSSUnits;this.style2css=function(ae,fe,Me,je,ze){function we(qe,ue){Ce="@namespace "+qe+" url("+ue+");";try{Me.insertRule(Ce,Me.cssRules.length)}catch{}}var Ce,ye,$e;for(ge=fe;Me.cssRules.length;)Me.deleteRule(Me.cssRules.length-1);for($e in odf.Namespaces.forEachPrefix(we),we("webodfhelper","urn:webodf:names:helper"),Y=je,le=ae,Ee=runtime.getWindow().getComputedStyle(document.body,null).getPropertyValue("font-size")||"12pt",q)if(q.hasOwnProperty($e))for(ye in ae=ze[$e])ae.hasOwnProperty(ye)&&R(Me,$e,ye,ae[ye])}},function(){function P(X,I){var y=this;this.getDistance=function(w){var E=y.x-w.x;return w=y.y-w.y,Math.sqrt(E*E+w*w)},this.getCenter=function(w){return new P((y.x+w.x)/2,(y.y+w.y)/2)},y.x=X,y.y=I}gui.ZoomHelper=function(){function X(Q,U,K,F){u.style.WebkitTransform=Q=F?"translate3d("+Q+"px, "+U+"px, 0) scale3d("+K+", "+K+", 1)":"translate("+Q+"px, "+U+"px) scale("+K+")",u.style.MozTransform=Q,u.style.msTransform=Q,u.style.OTransform=Q,u.style.transform=Q}function I(Q){Q?X(-m.x,-m.y,O,!0):(X(0,0,O,!0),X(0,0,O,!1))}function y(Q){if(ee&&$){var U=ee.style.overflow,K=ee.classList.contains("webodf-customScrollbars");Q&&K||!Q&&!K||(Q?(ee.classList.add("webodf-customScrollbars"),ee.style.overflow="hidden",runtime.requestAnimationFrame(function(){ee.style.overflow=U})):ee.classList.remove("webodf-customScrollbars"))}}function w(){X(-m.x,-m.y,O,!0),ee.scrollLeft=0,ee.scrollTop=0,J=G.style.overflow,G.style.overflow="visible",y(!1)}function E(){X(0,0,O,!0),ee.scrollLeft=m.x,ee.scrollTop=m.y,G.style.overflow=J||"",y(!0)}function R(Q){return new P(Q.pageX-u.offsetLeft,Q.pageY-u.offsetTop)}function C(Q){if(l){m.x-=Q.x-l.x,m.y-=Q.y-l.y;var U=m;m=new P(Math.min(Math.max(U.x,u.offsetLeft),(u.offsetLeft+u.offsetWidth)*O-ee.clientWidth),Math.min(Math.max(U.y,u.offsetTop),(u.offsetTop+u.offsetHeight)*O-ee.clientHeight))}l=Q}function N(Q){var U=Q.touches.length,K=0<U?R(Q.touches[0]):null;Q=1<U?R(Q.touches[1]):null,K&&Q?(M=K.getDistance(Q),q=O,l=K.getCenter(Q),w(),H=A.PINCH):K&&(l=K,H=A.SCROLL)}function x(Q){var U=0<(K=Q.touches.length)?R(Q.touches[0]):null,K=1<K?R(Q.touches[1]):null;if(U&&K)if(Q.preventDefault(),H===A.SCROLL)H=A.PINCH,w(),M=U.getDistance(K);else{Q=U.getCenter(K),U=U.getDistance(K)/M,C(Q),K=O;var F=Math.min(4,u.offsetParent.clientWidth/u.offsetWidth);O=q*U,O=Math.min(Math.max(O,F),4),m.x+=((U=O/K)-1)*(Q.x+m.x),m.y+=(U-1)*(Q.y+m.y),I(!0)}else U&&(H===A.PINCH?(H=A.SCROLL,E()):C(U))}function S(){H===A.PINCH&&(B.emit(gui.ZoomHelper.signalZoomChanged,O),E(),I(!1)),H=A.NONE}function s(){ee&&(ee.removeEventListener("touchstart",N,!1),ee.removeEventListener("touchmove",x,!1),ee.removeEventListener("touchend",S,!1))}var u,m,l,M,O,q,ee,G,B=new core.EventNotifier([gui.ZoomHelper.signalZoomChanged]),A={NONE:0,SCROLL:1,PINCH:2},H=A.NONE,$=runtime.getWindow().hasOwnProperty("ontouchstart"),J="";this.subscribe=function(Q,U){B.subscribe(Q,U)},this.unsubscribe=function(Q,U){B.unsubscribe(Q,U)},this.getZoomLevel=function(){return O},this.setZoomLevel=function(Q){u&&(O=Q,I(!1),B.emit(gui.ZoomHelper.signalZoomChanged,O))},this.destroy=function(Q){s(),y(!1),Q()},this.setZoomableElement=function(Q){s(),ee=(u=Q).offsetParent,G=u.parentNode,I(!1),ee&&(ee.addEventListener("touchstart",N,!1),ee.addEventListener("touchmove",x,!1),ee.addEventListener("touchend",S,!1)),y(!0)},q=O=1,m=new P(0,0)},gui.ZoomHelper.signalZoomChanged="zoomChanged"}(),ops.Canvas=function(){},ops.Canvas.prototype.getZoomLevel=function(){},ops.Canvas.prototype.getElement=function(){},ops.Canvas.prototype.getSizer=function(){},ops.Canvas.prototype.getZoomHelper=function(){},function(){function P(){function F(Y){ie=!0,runtime.setTimeout(function(){try{Y()}catch(ne){runtime.log(String(ne)+"\n"+ne.stack)}ie=!1,0<L.length&&F(L.pop())},10)}var L=[],ie=!1;this.clearQueue=function(){L.length=0},this.addToQueue=function(Y){if(0===L.length&&!ie)return F(Y);L.push(Y)}}function X(F){function L(){for(;0<ie.cssRules.length;)ie.deleteRule(0);ie.insertRule("#shadowContent draw|page {display:none;}",0),ie.insertRule("office|presentation draw|page {display:none;}",1),ie.insertRule("#shadowContent draw|page:nth-of-type("+Y+") {display:block;}",2),ie.insertRule("office|presentation draw|page:nth-of-type("+Y+") {display:block;}",3)}var ie=F.sheet,Y=1;this.showFirstPage=function(){Y=1,L()},this.showNextPage=function(){Y+=1,L()},this.showPreviousPage=function(){1<Y&&(--Y,L())},this.showPage=function(ne){0<ne&&(Y=ne,L())},this.css=F,this.destroy=function(ne){F.parentNode.removeChild(F),ne()}}function I(F){for(var L=(F=F.sheet).cssRules;L.length;)F.deleteRule(L.length-1)}function y(F,L,ie){var Y=new odf.Style2CSS,ne=new odf.ListStyleToCss;ie=ie.sheet;var le=new odf.StyleTree(F.rootElement.styles,F.rootElement.automaticStyles).getStyleTree();Y.style2css(F.getDocumentType(),F.rootElement,ie,L.getFontMap(),le),ne.applyListStyles(ie,le,F.rootElement.body)}function E(F,L,ie){var ne,Y=null;if(F=F.rootElement.body.getElementsByTagNameNS(Q,ie+"-decl"),(ie=L.getAttributeNS(Q,"use-"+ie+"-name"))&&0<F.length)for(L=0;L<F.length;L+=1)if((ne=F[L]).getAttributeNS(Q,"name")===ie){Y=ne.textContent;break}return Y}function R(F,L,ie,Y){var ne=F.ownerDocument;for(L=K.getElementsByTagNameNS(F,L,ie),F=0;F<L.length;F+=1)K.removeAllChildNodes(L[F]),Y&&(ie=L[F]).appendChild(ne.createTextNode(Y))}function C(F,L,ie){L.setAttributeNS("urn:webodf:names:helper","styleid",F);var Y,ne=L.getAttributeNS($,"anchor-type"),le=L.getAttributeNS(A,"x"),ge=L.getAttributeNS(A,"y"),Ee=L.getAttributeNS(A,"width"),Le=L.getAttributeNS(A,"height"),Qe=L.getAttributeNS(ee,"min-height"),ae=L.getAttributeNS(ee,"min-width");"as-char"===ne?Y="display: inline-block;":ne||le||ge?Y="position: absolute;":(Ee||Le||Qe||ae)&&(Y="display: block;"),le&&(Y+="left: "+le+";"),ge&&(Y+="top: "+ge+";"),Ee&&(Y+="width: "+Ee+";"),Le&&(Y+="height: "+Le+";"),Qe&&(Y+="min-height: "+Qe+";"),ae&&(Y+="min-width: "+ae+";"),Y&&ie.insertRule(Y="draw|"+L.localName+'[webodfhelper|styleid="'+F+'"] {'+Y+"}",ie.cssRules.length)}function N(F){for(F=F.firstChild;F;){if(F.namespaceURI===G&&"binary-data"===F.localName)return"data:image/png;base64,"+F.textContent.replace(/[\r\n\s]/g,"");F=F.nextSibling}return""}function x(F,L,ie,Y){function ne(Le){Le&&Y.insertRule(Le='draw|image[webodfhelper|styleid="'+F+'"] {background-image: url('+Le+");}",Y.cssRules.length)}ie.setAttributeNS("urn:webodf:names:helper","styleid",F);var Ee,ge=ie.getAttributeNS(J,"href");if(ge)try{(Ee=L.getPart(ge)).onchange=function le(Le){ne(Le.url)},Ee.load()}catch(Le){runtime.log("slight problem: "+String(Le))}else ne(ge=N(ie))}function O(F){var L=F.getElementsByTagName("head")[0],ie=F.createElementNS(L.namespaceURI,"style"),Y="";return ie.setAttribute("type","text/css"),ie.setAttribute("media","screen, print, handheld, projection"),odf.Namespaces.forEachPrefix(function(ne,le){Y+="@namespace "+ne+" url("+le+");\n"}),ie.appendChild(F.createTextNode(Y+="@namespace webodfhelper url(urn:webodf:names:helper);\n")),L.appendChild(ie),ie}var q=odf.Namespaces.drawns,ee=odf.Namespaces.fons,G=odf.Namespaces.officens,B=odf.Namespaces.stylens,A=odf.Namespaces.svgns,H=odf.Namespaces.tablens,$=odf.Namespaces.textns,J=odf.Namespaces.xlinkns,Q=odf.Namespaces.presentationns,U=xmldom.XPath,K=core.DomUtils;odf.OdfCanvas=function(F,L){function ne(){var Ze;Ze=ze.firstChild;var it=ct.getZoomLevel();Ze&&(ze.style.WebkitTransformOrigin="0% 0%",ze.style.MozTransformOrigin="0% 0%",ze.style.msTransformOrigin="0% 0%",ze.style.OTransformOrigin="0% 0%",ze.style.transformOrigin="0% 0%",$e&&((Ze=$e.getMinimumHeightForAnnotationPane())?ze.style.minHeight=Ze:ze.style.removeProperty("min-height")),F.style.width=Math.round(it*ze.offsetWidth)+"px",F.style.height=Math.round(it*ze.offsetHeight)+"px",F.style.display="inline-block")}function le(Ze,it){var vt=pe.sheet;K.removeAllChildNodes(F),(ze=ae.createElementNS(F.namespaceURI,"div")).style.display="inline-block",ze.style.background="white",ze.style.setProperty("float","left","important"),ze.appendChild(it),F.appendChild(ze),(we=ae.createElementNS(F.namespaceURI,"div")).id="annotationsPane",(xe=ae.createElementNS(F.namespaceURI,"div")).id="shadowContent",xe.style.position="absolute",xe.style.top=0,xe.style.left=0,Ze.getContentElement().appendChild(xe);var gt,et,nt=it.body,Ye=[];for(gt=nt.firstElementChild;gt&&gt!==nt;)if(gt.namespaceURI===q&&(Ye[Ye.length]=gt),gt.firstElementChild)gt=gt.firstElementChild;else{for(;gt&&gt!==nt&&!gt.nextElementSibling;)gt=gt.parentNode;gt&&gt.nextElementSibling&&(gt=gt.nextElementSibling)}for(et=0;et<Ye.length;et+=1)gt=Ye[et],C("frame"+String(et),gt,vt);for(Ye=U.getODFElementsWithXPath(nt,".//*[*[@text:anchor-type='paragraph']]",odf.Namespaces.lookupNamespaceURI),gt=0;gt<Ye.length;gt+=1)(nt=Ye[gt]).setAttributeNS&&nt.setAttributeNS("urn:webodf:names:helper","containsparagraphanchor",!0);nt=Me,gt=xe;var Et,Ct,Nt,Ie,Be,me=0;if(et=Ze.rootElement.ownerDocument,(Ye=it.body.firstElementChild)&&Ye.namespaceURI===G&&("presentation"===Ye.localName||"drawing"===Ye.localName))for(Ye=Ye.firstElementChild;Ye;){if(Et=(Et=Ye.getAttributeNS(q,"master-page-name"))?nt.getMasterPageElement(Et):null){for(Ct=Ye.getAttributeNS("urn:webodf:names:helper","styleid"),Nt=et.createElementNS(q,"draw:page"),Be=Et.firstElementChild,me=0;Be;)"true"!==Be.getAttributeNS(Q,"placeholder")&&(Ie=Be.cloneNode(!0),Nt.appendChild(Ie)),Be=Be.nextElementSibling,me+=1;Be=Ie=me=void 0;var se=K.getElementsByTagNameNS(Nt,q,"frame");for(me=0;me<se.length;me+=1)(Be=(Ie=se[me]).getAttributeNS(Q,"class"))&&!/^(date-time|footer|header|page-number)$/.test(Be)&&Ie.parentNode.removeChild(Ie);for(Ie=K.getElementsByTagNameNS(Nt,q,"*"),me=0;me<Ie.length;me+=1)C(Ct+"_"+me,Ie[me],vt);gt.appendChild(Nt),me=String(gt.getElementsByTagNameNS(q,"page").length),R(Nt,$,"page-number",me),R(Nt,Q,"header",E(Ze,Ye,"header")),R(Nt,Q,"footer",E(Ze,Ye,"footer")),C(Ct,Nt,vt),Nt.setAttributeNS("urn:webodf:names:helper","page-style-name",Ye.getAttributeNS(q,"style-name")),Nt.setAttributeNS(q,"draw:master-page-name",Et.getAttributeNS(B,"name"))}Ye=Ye.nextElementSibling}for(nt=F.namespaceURI,Ye=K.getElementsByTagNameNS(it.body,H,"table-cell"),gt=0;gt<Ye.length;gt+=1)(et=Ye[gt]).hasAttributeNS(H,"number-columns-spanned")&&et.setAttributeNS(nt,"colspan",et.getAttributeNS(H,"number-columns-spanned")),et.hasAttributeNS(H,"number-rows-spanned")&&et.setAttributeNS(nt,"rowspan",et.getAttributeNS(H,"number-rows-spanned"));(function S(F){var L=F.ownerDocument;K.getElementsByTagNameNS(F,$,"line-break").forEach(function(ie){ie.hasChildNodes()||ie.appendChild(L.createElement("br"))})})(it.body),function s(F){var L=F.ownerDocument;K.getElementsByTagNameNS(F,$,"s").forEach(function(ie){var Y,ne;if(K.removeAllChildNodes(ie),ie.appendChild(L.createTextNode(" ")),1<(ne=parseInt(ie.getAttributeNS($,"c"),10)))for(ie.removeAttributeNS($,"c"),Y=1;Y<ne;Y+=1)ie.parentNode.insertBefore(ie.cloneNode(!0),ie)})}(it.body),function u(F){K.getElementsByTagNameNS(F,$,"tab").forEach(function(L){L.textContent="\t"})}(it.body),function ie(Ze,it,vt){function nt(et,Et,Ct,Nt){pt.addToQueue(function(){x(et,Et,Ct,Nt)})}var gt,Ye;for(gt=it.getElementsByTagNameNS(q,"image"),it=0;it<gt.length;it+=1)Ye=gt.item(it),nt("image"+String(it),Ze,Ye,vt)}(Ze,it.body,vt),function Y(Ze,it){function vt(et,Et){pt.addToQueue(function(){!function m(F,L){function ie(Qe,ae){var fe=Ee.documentElement.namespaceURI;"video/"===ae.substr(0,6)?((ne=Ee.createElementNS(fe,"video")).setAttribute("controls","controls"),le=Ee.createElementNS(fe,"source"),Qe&&le.setAttribute("src",Qe),le.setAttribute("type",ae),ne.appendChild(le),L.parentNode.appendChild(ne)):L.innerHtml="Unrecognised Plugin"}var ne,le,ge,Le,Ee=L.ownerDocument;if(ge=L.getAttributeNS(J,"href"))try{(Le=F.getPart(ge)).onchange=function Y(Qe){ie(Qe.url,Qe.mimetype)},Le.load()}catch(Qe){runtime.log("slight problem: "+String(Qe))}else runtime.log("using MP4 data fallback"),ie(ge=N(L),"video/mp4")}(et,Et)})}var nt,gt;for(gt=it.getElementsByTagNameNS(q,"plugin"),nt=0;nt<gt.length;nt+=1)vt(Ze,gt.item(nt))}(Ze,it.body),ze.insertBefore(xe,ze.firstChild),ct.setZoomableElement(ze)}function ge(Ze){Ce?(we.parentNode||ze.appendChild(we),$e&&$e.forgetAnnotations(),$e=new gui.AnnotationViewManager(Qe,Ze.body,we,ye),Ze=K.getElementsByTagNameNS(Ze.body,G,"annotation"),$e.addAnnotations(Ze),ne()):we.parentNode&&(ze.removeChild(we),$e.forgetAnnotations(),ne())}function Ee(Ze){function it(){I(ue),I(de),I(pe),K.removeAllChildNodes(F),F.style.display="inline-block";var vt=fe.rootElement;F.ownerDocument.importNode(vt,!0),Me.setOdfContainer(fe),function w(F,L){(new odf.FontLoader).loadFonts(F,L.sheet)}(fe,ue),y(fe,Me,de),le(fe,vt),ge(vt),Ze||pt.addToQueue(function(){var nt=[fe];if(Xe.hasOwnProperty("statereadychange")){var Ye,gt=Xe.statereadychange;for(Ye=0;Ye<gt.length;Ye+=1)gt[Ye].apply(null,nt)}})}fe.state===odf.OdfContainer.DONE?it():(runtime.log("WARNING: refreshOdf called but ODF was not DONE."),rt=runtime.setTimeout(function vt(){fe.state===odf.OdfContainer.DONE?it():(runtime.log("will be back later..."),rt=runtime.setTimeout(vt,500))},100))}runtime.assert(null!=F,"odf.OdfCanvas constructor needs DOM element"),runtime.assert(null!=F.ownerDocument,"odf.OdfCanvas constructor needs DOM");var fe,je,qe,ue,de,pe,xe,rt,tt,Qe=this,ae=F.ownerDocument,Me=new odf.Formatting,ze=null,we=null,Ce=!1,ye=!1,$e=null,Xe={},Re=!1,ot=!1,pt=new P,ct=new gui.ZoomHelper,st=L||new gui.SingleScrollViewport(F.parentNode);this.refreshCSS=function(){Re=!0,tt.trigger()},this.refreshSize=function(){tt.trigger()},this.odfContainer=function(){return fe},this.setOdfContainer=function(Ze,it){fe=Ze,Ee(!0===it)},this.load=this.load=function Le(Ze){pt.clearQueue(),K.removeAllChildNodes(F),F.appendChild(F.ownerDocument.createTextNode(runtime.tr("Loading")+Ze+"...")),F.removeAttribute("style"),fe=new odf.OdfContainer(Ze,function(it){fe=it,Ee(!1)})},this.save=function(Ze){fe.save(Ze)},this.addListener=function(Ze,it){if("click"===Ze){var vt=Ze;F.addEventListener?F.addEventListener(vt,it,!1):F.attachEvent?F.attachEvent("on"+vt,it):F["on"+vt]=it}else vt=Xe.hasOwnProperty(Ze)?Xe[Ze]:Xe[Ze]=[],it&&-1===vt.indexOf(it)&&vt.push(it)},this.getFormatting=function(){return Me},this.getAnnotationViewManager=function(){return $e},this.refreshAnnotations=function(){ge(fe.rootElement)},this.rerenderAnnotations=function(){$e&&(ot=!0,tt.trigger())},this.getSizer=function(){return ze},this.enableAnnotations=function(Ze,it){Ze!==Ce&&(Ce=Ze,ye=it,fe&&ge(fe.rootElement))},this.addAnnotation=function(Ze){$e&&($e.addAnnotations([Ze]),ne())},this.forgetAnnotation=function(Ze){$e&&($e.forgetAnnotation(Ze),ne())},this.getZoomHelper=function(){return ct},this.setZoomLevel=function(Ze){ct.setZoomLevel(Ze)},this.getZoomLevel=function(){return ct.getZoomLevel()},this.fitToContainingElement=function(Ze,it){var nt=ct.getZoomLevel(),vt=F.offsetHeight/nt;it/vt<(nt=Ze/(F.offsetWidth/nt))&&(nt=it/vt),ct.setZoomLevel(nt)},this.fitToWidth=function(Ze){var it=F.offsetWidth/ct.getZoomLevel();ct.setZoomLevel(Ze/it)},this.fitSmart=function(Ze,it){var vt,nt;nt=ct.getZoomLevel(),vt=F.offsetWidth/nt,nt=F.offsetHeight/nt,vt=Ze/vt,void 0!==it&&it/nt<vt&&(vt=it/nt),ct.setZoomLevel(Math.min(1,vt))},this.fitToHeight=function(Ze){var it=F.offsetHeight/ct.getZoomLevel();ct.setZoomLevel(Ze/it)},this.showFirstPage=function(){je.showFirstPage()},this.showNextPage=function(){je.showNextPage()},this.showPreviousPage=function(){je.showPreviousPage()},this.showPage=function(Ze){je.showPage(Ze),ne()},this.getElement=function(){return F},this.getViewport=function(){return st},this.addCssForFrameWithImage=function(Ze){var it=Ze.getAttributeNS(q,"name"),vt=Ze.firstElementChild;C(it,Ze,pe.sheet),vt&&x(it+"img",fe,vt,pe.sheet)},this.destroy=function(Ze){var it=ae.getElementsByTagName("head")[0],vt=[je.destroy,tt.destroy];runtime.clearTimeout(rt),we&&we.parentNode&&we.parentNode.removeChild(we),ct.destroy(function(){ze&&(F.removeChild(ze),ze=null)}),function M(F){var L=parseInt(F.getAttribute("webodfcss"),10);1===L?F.parentNode.removeChild(F):F.setAttribute("count",L-1)}(qe),it.removeChild(ue),it.removeChild(de),it.removeChild(pe),core.Async.destroyAll(vt,Ze)},qe=function l(F){var ie,Y,L=F.getElementsByTagName("head")[0];for(ie=F.styleSheets.length,Y=L.firstElementChild;Y&&("style"!==Y.localName||!Y.hasAttribute("webodfcss"));)Y=Y.nextElementSibling;return Y?(ie=parseInt(Y.getAttribute("webodfcss"),10),Y.setAttribute("webodfcss",ie+1),Y):("string"===String(typeof webodf_css)?ie=webodf_css:(Y="webodf.css",runtime.currentDirectory&&(0<(Y=runtime.currentDirectory()).length&&"/"!==Y.substr(-1)&&(Y+="/"),Y+="../webodf.css"),ie=runtime.readFileSync(Y,"utf-8")),(Y=F.createElementNS(L.namespaceURI,"style")).setAttribute("media","screen, print, handheld, projection"),Y.setAttribute("type","text/css"),Y.setAttribute("webodfcss","1"),Y.appendChild(F.createTextNode(ie)),L.appendChild(Y),Y)}(ae),je=new X(O(ae)),ue=O(ae),de=O(ae),pe=O(ae),tt=core.Task.createRedrawTask(function(){Re&&(y(fe,Me,de),Re=!1),ot&&($e&&$e.rerenderAnnotations(),ot=!1),ne()}),ct.subscribe(gui.ZoomHelper.signalZoomChanged,ne)}}(),odf.StepUtils=function(){this.getContentBounds=function(P){var I,y,X=P.container();return runtime.assert(P.isStep(),"Step iterator must be on a step"),X.nodeType===Node.TEXT_NODE&&0<P.offset()?I=P.offset():(X=P.leftNode())&&X.nodeType===Node.TEXT_NODE&&(I=X.length),X&&(X.nodeType===Node.TEXT_NODE?(runtime.assert(0<I,"Empty text node found"),y={container:X,startOffset:I-1,endOffset:I}):y={container:X,startOffset:0,endOffset:X.childNodes.length}),y}},ops.MemberProperties=function(){},ops.Member=function(P,X){var I=new ops.MemberProperties;this.getMemberId=function(){return P},this.getProperties=function(){return I},this.setProperties=function(y){Object.keys(y).forEach(function(w){I[w]=y[w]})},this.removeProperties=function(y){Object.keys(y).forEach(function(w){"fullName"!==w&&"color"!==w&&"imageUrl"!==w&&I.hasOwnProperty(w)&&delete I[w]})},runtime.assert(Boolean(P),"No memberId was supplied!"),X.fullName||(X.fullName=runtime.tr("Unknown Author")),X.color||(X.color="black"),X.imageUrl||(X.imageUrl="avatar-joe.png"),I=X},ops.Document=function(){},ops.Document.prototype.getMemberIds=function(){},ops.Document.prototype.removeCursor=function(P){},ops.Document.prototype.getDocumentElement=function(){},ops.Document.prototype.getRootNode=function(){},ops.Document.prototype.getDOMDocument=function(){},ops.Document.prototype.cloneDocumentElement=function(){},ops.Document.prototype.setDocumentElement=function(P){},ops.Document.prototype.subscribe=function(P,X){},ops.Document.prototype.unsubscribe=function(P,X){},ops.Document.prototype.getCanvas=function(){},ops.Document.prototype.createRootFilter=function(P){},ops.Document.prototype.createPositionIterator=function(P){},ops.Document.prototype.hasCursor=function(P){},ops.Document.signalCursorAdded="cursor/added",ops.Document.signalCursorRemoved="cursor/removed",ops.Document.signalCursorMoved="cursor/moved",ops.Document.signalMemberAdded="member/added",ops.Document.signalMemberUpdated="member/updated",ops.Document.signalMemberRemoved="member/removed",ops.OdtCursor=function(P,X){var w,E,I=this,y={},R=new core.EventNotifier([ops.OdtCursor.signalCursorUpdated]);this.removeFromDocument=function(){E.remove()},this.subscribe=function(C,N){R.subscribe(C,N)},this.unsubscribe=function(C,N){R.unsubscribe(C,N)},this.getMemberId=function(){return P},this.getNode=function(){return E.getNode()},this.getAnchorNode=function(){return E.getAnchorNode()},this.getSelectedRange=function(){return E.getSelectedRange()},this.setSelectedRange=function(C,N){E.setSelectedRange(C,N),R.emit(ops.OdtCursor.signalCursorUpdated,I)},this.hasForwardSelection=function(){return E.hasForwardSelection()},this.getDocument=function(){return X},this.getSelectionType=function(){return w},this.setSelectionType=function(C){y.hasOwnProperty(C)?w=C:runtime.log("Invalid selection type: "+C)},this.resetSelectionType=function(){I.setSelectionType(ops.OdtCursor.RangeSelection)},E=new core.Cursor(X.getDOMDocument(),P),y[ops.OdtCursor.RangeSelection]=!0,y[ops.OdtCursor.RegionSelection]=!0,I.resetSelectionType()},ops.OdtCursor.RangeSelection="Range",ops.OdtCursor.RegionSelection="Region",ops.OdtCursor.signalCursorUpdated="cursorUpdated",function(){var P=0;ops.StepsCache=function(X,I,y){function w(B,A){var H=this;this.nodeId=B,this.steps=-1,this.node=A,this.previousBookmark=this.nextBookmark=null,this.setIteratorPosition=function($){$.setPositionBeforeElement(A),y(H.steps,$)}}function R(B,A){var H="["+B.nodeId;return A&&(H+=" => "+A.nodeId),H+"]"}function C(){if(!0===ops.StepsCache.ENABLE_CACHE_VERIFICATION){for(var A,H,$,B=O,J=new core.LoopWatchDog(0,1e5),Q={};B;)J.check(),(A=B.previousBookmark)?runtime.assert(A.nextBookmark===B,"Broken bookmark link to previous @"+R(A,B)):(runtime.assert(B===O,"Broken bookmark link @"+R(B)),runtime.assert(void 0===q||O==O||O.steps<=q,"Base point is damaged @"+R(B))),(H=B.nextBookmark)&&runtime.assert(H.previousBookmark===B,"Broken bookmark link to next @"+R(B,H)),(void 0===q||B===O||B.steps<=q)&&(runtime.assert(M.containsNode(X,B.node),"Disconnected node is being reported as undamaged @"+R(B)),A&&($=B.node.compareDocumentPosition(A.node),runtime.assert(0===$||0!=($&G),"Bookmark order with previous does not reflect DOM order @"+R(A,B))),H&&M.containsNode(X,H.node)&&($=B.node.compareDocumentPosition(H.node),runtime.assert(0===$||0!=($&ee),"Bookmark order with next does not reflect DOM order @"+R(B,H)))),B=B.nextBookmark;Object.keys(m).forEach(function(U){var K=m[U];(void 0===q||U<=q)&&runtime.assert(K.steps<=U,"Bookmark step of "+K.steps+" exceeds cached step lookup for "+U+" @"+R(K)),runtime.assert(!1===Q.hasOwnProperty(K.nodeId),"Bookmark "+R(K)+" appears twice in cached step lookup at steps "+Q[K.nodeId]+" and "+U),Q[K.nodeId]=U})}}function N(B){var A="";return B.nodeType===Node.ELEMENT_NODE&&(A=B.getAttributeNS("urn:webodf:names:steps","nodeId")||""),A}function x(B){var A=P.toString();return B.setAttributeNS("urn:webodf:names:steps","nodeId",A),P+=1,A}function S(B){var A,H,$=new core.LoopWatchDog(0,1e4);for(void 0!==q&&B>q&&(B=q),A=Math.floor(B/I)*I;!H&&0<=A;)H=m[A],A-=I;for(H=H||O;H.nextBookmark&&H.nextBookmark.steps<=B;)$.check(),H=H.nextBookmark;return runtime.assert(-1===B||H.steps<=B,"Bookmark @"+R(H)+" at step "+H.steps+" exceeds requested step of "+B),H}function s(B){B.previousBookmark&&(B.previousBookmark.nextBookmark=B.nextBookmark),B.nextBookmark&&(B.nextBookmark.previousBookmark=B.previousBookmark)}function u(B){for(var A,H=null;!H&&B&&B!==X;)(A=N(B))&&(H=l[A])&&H.node!==B&&(runtime.log("Cloned node detected. Creating new bookmark"),H=null,B.removeAttributeNS("urn:webodf:names:steps","nodeId")),B=B.parentNode;return H}var O,q,B,m={},l={},M=core.DomUtils,ee=Node.DOCUMENT_POSITION_FOLLOWING,G=Node.DOCUMENT_POSITION_PRECEDING;this.updateBookmark=function(B,A){var H,J,Q,U,$=Math.ceil(B/I)*I;if(void 0!==q&&q<B){for(Q=(J=S(q)).nextBookmark;Q&&Q.steps<=B;)H=Q.nextBookmark,U=Math.ceil(Q.steps/I)*I,m[U]===Q&&delete m[U],M.containsNode(X,Q.node)?Q.steps=B+1:(s(Q),delete l[Q.nodeId]),Q=H;q=B}else J=S(B);if(Q=N(A)||x(A),(H=l[Q])?H.node!==A&&(runtime.log("Cloned node detected. Creating new bookmark"),Q=x(A),H=l[Q]=new w(Q,A)):H=l[Q]=new w(Q,A),(Q=H).steps!==B&&((H=Math.ceil(Q.steps/I)*I)!==$&&m[H]===Q&&delete m[H],Q.steps=B),J!==Q&&J.nextBookmark!==Q){if(J.steps===Q.steps)for(;0!=(Q.node.compareDocumentPosition(J.node)&ee)&&J!==O;)J=J.previousBookmark;J!==Q&&J.nextBookmark!==Q&&(s(Q),H=J.nextBookmark,Q.nextBookmark=J.nextBookmark,Q.previousBookmark=J,J.nextBookmark=Q,H&&(H.previousBookmark=Q))}(!(J=m[$])||Q.steps>J.steps)&&(m[$]=Q),C()},this.setToClosestStep=function(B,A){var H;return C(),(H=S(B)).setIteratorPosition(A),H.steps},this.setToClosestDomPoint=function(B,A,H){var $,J;if(C(),B===X&&0===A)$=O;else if(B===X&&A===X.childNodes.length)for(J in $=O,m)m.hasOwnProperty(J)&&(B=m[J]).steps>$.steps&&($=B);else if(!($=u(B.childNodes.item(A)||B)))for(H.setUnfilteredPosition(B,A);!$&&H.previousNode();)$=u(H.getCurrentNode());return $=$||O,void 0!==q&&$.steps>q&&($=S(q)),$.setIteratorPosition(H),$.steps},this.damageCacheAfterStep=function(B){0>B&&(B=-1),(void 0===q||B<q)&&(q=B),C()},B=N(X)||x(X),O=new function E(B,A,H){var $=this;this.nodeId=B,this.steps=A,this.node=H,this.previousBookmark=this.nextBookmark=null,this.setIteratorPosition=function(J){J.setUnfilteredPosition(H,0),y($.steps,J)}}(B,0,X)},ops.StepsCache.ENABLE_CACHE_VERIFICATION=!1,ops.StepsCache.Bookmark=function(){},ops.StepsCache.Bookmark.prototype.setIteratorPosition=function(X){}}(),ops.OdtStepsTranslator=function(P,X,I,y){function w(u,m,l){var M=m.getCurrentNode();m.isBeforeNode()&&C.isParagraph(M)&&(l||(u+=1),R.updateBookmark(u,M))}var R,C=odf.OdfUtils,N=core.DomUtils,x=core.PositionFilter.FilterResult.FILTER_ACCEPT,S=core.StepDirection.PREVIOUS,s=core.StepDirection.NEXT;this.convertStepsToDomPoint=function(u){var m,l;if(isNaN(u))throw new TypeError("Requested steps is not numeric ("+u+")");if(0>u)throw new RangeError("Requested steps is negative ("+u+")");for(m=R.setToClosestStep(u,X);m<u&&X.nextPosition();)(l=I.acceptPosition(X)===x)&&(m+=1),w(m,X,l);if(m!==u)throw new RangeError("Requested steps ("+u+") exceeds available steps ("+m+")");return{node:X.container(),offset:X.unfilteredDomOffset()}},this.convertDomPointToSteps=function(u,m,l){var M;if(N.containsNode(P,u)||(m=0>N.comparePoints(P,0,u,m),u=P,m=m?0:P.childNodes.length),X.setUnfilteredPosition(u,m),function E(u,m){if(!m||I.acceptPosition(u)===x)return!0;for(;u.previousPosition();)if(I.acceptPosition(u)===x){if(m(S,u.container(),u.unfilteredDomOffset()))return!0;break}for(;u.nextPosition();)if(I.acceptPosition(u)===x){if(m(s,u.container(),u.unfilteredDomOffset()))return!0;break}return!1}(X,l)||X.setUnfilteredPosition(u,m),l=X.container(),m=X.unfilteredDomOffset(),u=R.setToClosestDomPoint(l,m,X),0>N.comparePoints(X.container(),X.unfilteredDomOffset(),l,m))return 0<u?u-1:u;for(;(X.container()!==l||X.unfilteredDomOffset()!==m)&&X.nextPosition();)(M=I.acceptPosition(X)===x)&&(u+=1),w(u,X,M);return u+0},this.prime=function(){var u,m;for(u=R.setToClosestStep(0,X);X.nextPosition();)(m=I.acceptPosition(X)===x)&&(u+=1),w(u,X,m)},this.handleStepsInserted=function(u){R.damageCacheAfterStep(u.position)},this.handleStepsRemoved=function(u){R.damageCacheAfterStep(u.position-1)},R=new ops.StepsCache(P,y,function(u,m){do{if(I.acceptPosition(m)===x){w(u,m,!0);break}w(u-1,m,!1)}while(m.nextPosition())})},ops.Operation=function(){},ops.Operation.prototype.init=function(P){},ops.Operation.prototype.execute=function(P){},ops.Operation.prototype.spec=function(){},ops.TextPositionFilter=function(){function X(C,N,x,S){var s;if(N){if(I.isInlineRoot(N)&&I.isGroupingElement(x))return R;if(1===(S=I.lookLeftForCharacter(N))||2===S&&(I.scanRightForAnyCharacter(x)||I.scanRightForAnyCharacter(I.nextNode(C))))return E}else if(I.isGroupingElement(C)&&I.isInlineRoot(function P(C,N){for(;C&&N(C)!==E;)C=C.previousSibling;return C}(C.previousSibling,S)))return E;return S=null===N&&I.isParagraph(C),s=I.lookRightForCharacter(x),S?s?E:I.scanRightForAnyCharacter(x)?R:E:s?(N=N||I.previousNode(C),I.scanLeftForAnyCharacter(N)?R:E):R}var I=odf.OdfUtils,y=Node.ELEMENT_NODE,w=Node.TEXT_NODE,E=core.PositionFilter.FilterResult.FILTER_ACCEPT,R=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(C){var S,s,u,N=C.container(),x=N.nodeType;if(x!==y&&x!==w)return R;if(x===w){if(x=C.unfilteredDomOffset(),runtime.assert(x!==(S=N.data).length,"Unexpected offset."),0<x){if(!I.isODFWhitespace(C=S[x-1]))return E;if(1<x)if(I.isODFWhitespace(C=S[x-2])){if(!I.isODFWhitespace(S.substr(0,x)))return R}else u=E;else s=I.previousNode(N),I.scanLeftForNonSpace(s)&&(u=E);return u===E?I.isTrailingWhitespace(N,x)?R:E:I.isODFWhitespace(C=S[x])||I.scanLeftForAnyCharacter(I.previousNode(N))?R:E}s=C.leftNode(),u=N,u=X(N=N.parentNode,s,u,C.getNodeFilter())}else u=I.isGroupingElement(N)?X(N,s=C.leftNode(),u=C.rightNode(),C.getNodeFilter()):R;return u}},ops.OdtDocument=function(P){function X(U){return new core.PositionIterator(U,H,Q,!1)}function I(){var U=P.odfContainer().getContentElement(),K=U&&U.localName;return runtime.assert("text"===K,"Unsupported content element type '"+K+"' for OdtDocument"),U}function y(){return s.getDocumentElement().ownerDocument}function w(U){for(;U&&!(U.namespaceURI===odf.Namespaces.officens&&"text"===U.localName||U.namespaceURI===odf.Namespaces.officens&&"annotation"===U.localName);)U=U.parentNode;return U}function E(U,K,F,L){var ie;return L=X(L),1===F.length?ie=F[0]:(ie=new core.PositionFilterChain,F.forEach(ie.addFilter)),(F=new core.StepIterator(ie,L)).setPosition(U,K),F}function R(U){var K=X(I());return U=B.convertStepsToDomPoint(U),K.setUnfilteredPosition(U.node,U.offset),K}function C(U){return U===ee}function x(U){var K,L,F=[],ie=2;runtime.assert(U.isStep(),"positionIterator is not at a step");do{if((K=u.getContentBounds(U))&&m.isDowngradableSpaceElement(K=K.container)){for(L=K.lastChild;K.firstChild;)F.push(K.firstChild),K.parentNode.insertBefore(K.firstChild,K);K.parentNode.removeChild(K),U.setPosition(L,L.nodeType===Node.TEXT_NODE?L.length:L.childNodes.length),U.roundToPreviousStep()}--ie}while(0<ie&&U.nextStep());F.forEach(l.normalizeTextNodes)}function S(U,K,F){return U=U.childNodes.item(K)||U,(U=m.getParagraphElement(U))&&l.containsNode(F,U)?U:F}var u,G,B,A,U,s=this,m=odf.OdfUtils,l=core.DomUtils,M={},O={},q=new core.EventNotifier([ops.Document.signalMemberAdded,ops.Document.signalMemberUpdated,ops.Document.signalMemberRemoved,ops.Document.signalCursorAdded,ops.Document.signalCursorRemoved,ops.Document.signalCursorMoved,ops.OdtDocument.signalParagraphChanged,ops.OdtDocument.signalParagraphStyleModified,ops.OdtDocument.signalCommonStyleCreated,ops.OdtDocument.signalCommonStyleDeleted,ops.OdtDocument.signalTableAdded,ops.OdtDocument.signalOperationStart,ops.OdtDocument.signalOperationEnd,ops.OdtDocument.signalProcessingBatchStart,ops.OdtDocument.signalProcessingBatchEnd,ops.OdtDocument.signalUndoStackChanged,ops.OdtDocument.signalStepsInserted,ops.OdtDocument.signalStepsRemoved,ops.OdtDocument.signalMetadataUpdated,ops.OdtDocument.signalAnnotationAdded]),ee=core.StepDirection.NEXT,H=NodeFilter.SHOW_ALL,$=new gui.BlacklistNamespaceNodeFilter(["urn:webodf:names:cursor","urn:webodf:names:editinfo"]),J=new gui.OdfTextBodyNodeFilter,Q=new core.NodeFilterChain([$,J]);this.createPositionIterator=X,this.getDocumentElement=function(){return P.odfContainer().rootElement},this.cloneDocumentElement=function(){var U=s.getDocumentElement(),K=P.getAnnotationViewManager();return K&&K.forgetAnnotations(),U=U.cloneNode(!0),P.refreshAnnotations(),s.fixCursorPositions(),U},this.setDocumentElement=function(U){var K=P.odfContainer();q.unsubscribe(ops.OdtDocument.signalStepsInserted,B.handleStepsInserted),q.unsubscribe(ops.OdtDocument.signalStepsRemoved,B.handleStepsRemoved),K.setRootElement(U),P.setOdfContainer(K,!0),P.refreshCSS(),U=I(),B=new ops.OdtStepsTranslator(U,X(U),G,500),q.subscribe(ops.OdtDocument.signalStepsInserted,B.handleStepsInserted),q.subscribe(ops.OdtDocument.signalStepsRemoved,B.handleStepsRemoved)},this.getDOMDocument=y,this.getRootElement=w,this.createStepIterator=E,this.getIteratorAtPosition=R,this.convertCursorStepToDomPoint=function(U){return B.convertStepsToDomPoint(U)},this.convertDomPointToCursorStep=function(U,K,F){var L;return F===ee&&(L=C),B.convertDomPointToSteps(U,K,L)},this.convertDomToCursorRange=function(U){var K;return{position:K=B.convertDomPointToSteps(U.anchorNode,U.anchorOffset),length:(U=U.anchorNode===U.focusNode&&U.anchorOffset===U.focusOffset?K:B.convertDomPointToSteps(U.focusNode,U.focusOffset))-K}},this.convertCursorToDomRange=function(U,K){var L,ie,F=y().createRange();return L=B.convertStepsToDomPoint(U),K?(ie=B.convertStepsToDomPoint(U+K),0<K?(F.setStart(L.node,L.offset),F.setEnd(ie.node,ie.offset)):(F.setStart(ie.node,ie.offset),F.setEnd(L.node,L.offset))):F.setStart(L.node,L.offset),F},this.upgradeWhitespacesAtPosition=function(U){var F,K=R(U),L=(K=new core.StepIterator(G,K),2);runtime.assert(K.isStep(),"positionIterator is not at a step (requested step: "+U+")");do{if((F=u.getContentBounds(K))&&(U=F.container,F=F.startOffset,U.nodeType===Node.TEXT_NODE&&m.isSignificantWhitespace(U,F))){runtime.assert(" "===U.data[F],"upgradeWhitespaceToElement: textNode.data[offset] should be a literal space");var ie=U.ownerDocument.createElementNS(odf.Namespaces.textns,"text:s"),Y=U.parentNode,ne=U;ie.appendChild(U.ownerDocument.createTextNode(" ")),1===U.length?Y.replaceChild(ie,U):(U.deleteData(F,1),0<F&&(F<U.length&&U.splitText(F),ne=U.nextSibling),Y.insertBefore(ie,ne)),K.setPosition(U=ie,U.childNodes.length),K.roundToPreviousStep()}--L}while(0<L&&K.nextStep())},this.downgradeWhitespaces=x,this.downgradeWhitespacesAtPosition=function(U){U=R(U),x(U=new core.StepIterator(G,U))},this.getTextNodeAtStep=function(U,K){var ie,F=R(U),L=F.container(),Y=0,ne=null;if(L.nodeType===Node.TEXT_NODE?(ie=L,Y=F.unfilteredDomOffset(),0<ie.length&&(0<Y&&(ie=ie.splitText(Y)),ie.parentNode.insertBefore(y().createTextNode(""),ie),ie=ie.previousSibling,Y=0)):(ie=y().createTextNode(""),Y=0,L.insertBefore(ie,F.rightNode())),K){if(M[K]&&s.getCursorPosition(K)===U){for(ne=M[K].getNode();ne.nextSibling&&"cursor"===ne.nextSibling.localName;)ne.parentNode.insertBefore(ne.nextSibling,ne);0<ie.length&&ie.nextSibling!==ne&&(ie=y().createTextNode(""),Y=0),ne.parentNode.insertBefore(ie,ne)}}else for(;ie.nextSibling&&"cursor"===ie.nextSibling.localName;)ie.parentNode.insertBefore(ie.nextSibling,ie);for(;ie.previousSibling&&ie.previousSibling.nodeType===Node.TEXT_NODE;)(F=ie.previousSibling).appendData(ie.data),Y=F.length,(ie=F).parentNode.removeChild(ie.nextSibling);for(;ie.nextSibling&&ie.nextSibling.nodeType===Node.TEXT_NODE;)ie.appendData((F=ie.nextSibling).data),ie.parentNode.removeChild(F);return{textNode:ie,offset:Y}},this.fixCursorPositions=function(){Object.keys(M).forEach(function(U){var ie,Y,ne,K=M[U],F=w(K.getNode()),L=s.createRootFilter(F),le=!1;ie=S((ne=K.getSelectedRange()).startContainer,ne.startOffset,F),Y=E(ne.startContainer,ne.startOffset,[G,L],ie),ne.collapsed?F=Y:(ie=S(ne.endContainer,ne.endOffset,F),F=E(ne.endContainer,ne.endOffset,[G,L],ie)),Y.isStep()&&F.isStep()?Y.container()!==F.container()||Y.offset()!==F.offset()||ne.collapsed&&K.getAnchorNode()===K.getNode()||(le=!0,ne.setStart(Y.container(),Y.offset()),ne.collapse(!0)):(le=!0,runtime.assert(Y.roundToClosestStep(),"No walkable step found for cursor owned by "+U),ne.setStart(Y.container(),Y.offset()),runtime.assert(F.roundToClosestStep(),"No walkable step found for cursor owned by "+U),ne.setEnd(F.container(),F.offset())),le&&(K.setSelectedRange(ne,K.hasForwardSelection()),s.emit(ops.Document.signalCursorMoved,K))})},this.getCursorPosition=function(U){return(U=M[U])?B.convertDomPointToSteps(U.getNode(),0):0},this.getCursorSelection=function(U){var K=0,F=0;return(U=M[U])&&(K=B.convertDomPointToSteps(U.getNode(),0),F=B.convertDomPointToSteps(U.getAnchorNode(),0)),{position:F,length:K-F}},this.getPositionFilter=function(){return G},this.getOdfCanvas=function(){return P},this.getCanvas=function(){return P},this.getRootNode=I,this.addMember=function(U){runtime.assert(void 0===O[U.getMemberId()],"This member already exists"),O[U.getMemberId()]=U},this.getMember=function(U){return O.hasOwnProperty(U)?O[U]:null},this.removeMember=function(U){delete O[U]},this.getCursor=function(U){return M[U]},this.hasCursor=function(U){return M.hasOwnProperty(U)},this.getMemberIds=function(){return Object.keys(O)},this.addCursor=function(U){runtime.assert(Boolean(U),"OdtDocument::addCursor without cursor");var K=U.getMemberId(),F=s.convertCursorToDomRange(0,0);runtime.assert("string"==typeof K,"OdtDocument::addCursor has cursor without memberid"),runtime.assert(!M[K],"OdtDocument::addCursor is adding a duplicate cursor with memberid "+K),U.setSelectedRange(F,!0),M[K]=U},this.removeCursor=function(U){var K=M[U];return!!K&&(K.removeFromDocument(),delete M[U],s.emit(ops.Document.signalCursorRemoved,U),!0)},this.moveCursor=function(U,K,F,L){U=M[U],K=s.convertCursorToDomRange(K,F),U&&(U.setSelectedRange(K,0<=F),U.setSelectionType(L||ops.OdtCursor.RangeSelection))},this.getFormatting=function(){return P.getFormatting()},this.emit=function(U,K){q.emit(U,K)},this.subscribe=function(U,K){q.subscribe(U,K)},this.unsubscribe=function(U,K){q.unsubscribe(U,K)},this.createRootFilter=function(U){return new RootFilter(U,M,w)},this.close=function(U){U()},this.destroy=function(U){U()},U=I(),G=new ops.TextPositionFilter,u=new odf.StepUtils,B=new ops.OdtStepsTranslator(U,X(U),G,500),q.subscribe(ops.OdtDocument.signalStepsInserted,B.handleStepsInserted),q.subscribe(ops.OdtDocument.signalStepsRemoved,B.handleStepsRemoved),q.subscribe(ops.OdtDocument.signalOperationEnd,function N(U){var K=(L=U.spec()).memberid,F=new Date(L.timestamp).toISOString(),L=P.odfContainer();U.isEdit&&(K=s.getMember(K).getProperties().fullName,L.setMetadata({"dc:creator":K,"dc:date":F},null),K={setProperties:{"dc:creator":K,"dc:date":F},removedProperties:[]},A||(K.setProperties["meta:editing-cycles"]=L.incrementEditingCycles(),L.setMetadata(null,["meta:editing-duration","meta:document-statistic"])),A=U,s.emit(ops.OdtDocument.signalMetadataUpdated,K))}),q.subscribe(ops.OdtDocument.signalProcessingBatchEnd,core.Task.processTasks)},ops.OdtDocument.signalParagraphChanged="paragraph/changed",ops.OdtDocument.signalTableAdded="table/added",ops.OdtDocument.signalCommonStyleCreated="style/created",ops.OdtDocument.signalCommonStyleDeleted="style/deleted",ops.OdtDocument.signalParagraphStyleModified="paragraphstyle/modified",ops.OdtDocument.signalOperationStart="operation/start",ops.OdtDocument.signalOperationEnd="operation/end",ops.OdtDocument.signalProcessingBatchStart="router/batchstart",ops.OdtDocument.signalProcessingBatchEnd="router/batchend",ops.OdtDocument.signalUndoStackChanged="undo/changed",ops.OdtDocument.signalStepsInserted="steps/inserted",ops.OdtDocument.signalStepsRemoved="steps/removed",ops.OdtDocument.signalMetadataUpdated="metadata/updated",ops.OdtDocument.signalAnnotationAdded="annotation/added",ops.OpAddAnnotation=function(){function P(C,N,x){var S=C.getTextNodeAtStep(x,X);S&&(x=(C=S.textNode).parentNode,S.offset!==C.length&&C.splitText(S.offset),x.insertBefore(N,C.nextSibling),0===C.length&&x.removeChild(C))}var X,I,y,w,E,R;this.init=function(C){X=C.memberid,I=parseInt(C.timestamp,10),y=parseInt(C.position,10),w=void 0!==C.length?parseInt(C.length,10)||0:void 0,E=C.name},this.isEdit=!0,this.group=void 0,this.execute=function(C){var x,S,N=C.getCursor(X);R=C.getDOMDocument();var u,m,l,s=new Date(I);return(u=R.createElementNS(odf.Namespaces.officens,"office:annotation")).setAttributeNS(odf.Namespaces.officens,"office:name",E),(x=R.createElementNS(odf.Namespaces.dcns,"dc:creator")).setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",X),x.textContent=C.getMember(X).getProperties().fullName,(S=R.createElementNS(odf.Namespaces.dcns,"dc:date")).appendChild(R.createTextNode(s.toISOString())),s=R.createElementNS(odf.Namespaces.textns,"text:list"),m=R.createElementNS(odf.Namespaces.textns,"text:list-item"),l=R.createElementNS(odf.Namespaces.textns,"text:p"),m.appendChild(l),s.appendChild(m),u.appendChild(x),u.appendChild(S),u.appendChild(s),void 0!==w&&((x=R.createElementNS(odf.Namespaces.officens,"office:annotation-end")).setAttributeNS(odf.Namespaces.officens,"office:name",E),u.annotationEndElement=x,P(C,x,y+w)),P(C,u,y),C.emit(ops.OdtDocument.signalStepsInserted,{position:y}),N&&(x=R.createRange(),S=u.getElementsByTagNameNS(odf.Namespaces.textns,"p")[0],x.selectNodeContents(S),N.setSelectedRange(x,!1),N.setSelectionType(ops.OdtCursor.RangeSelection),C.emit(ops.Document.signalCursorMoved,N)),C.getOdfCanvas().addAnnotation(u),C.fixCursorPositions(),C.emit(ops.OdtDocument.signalAnnotationAdded,{memberId:X,annotation:u}),!0},this.spec=function(){return{optype:"AddAnnotation",memberid:X,timestamp:I,position:y,length:w,name:E}}},ops.OpAddCursor=function(){var P,X;this.init=function(I){P=I.memberid,X=I.timestamp},this.isEdit=!1,this.group=void 0,this.execute=function(I){var y=I.getCursor(P);return!y&&(y=new ops.OdtCursor(P,I),I.addCursor(y),I.emit(ops.Document.signalCursorAdded,y),!0)},this.spec=function(){return{optype:"AddCursor",memberid:P,timestamp:X}}},ops.OpAddMember=function(){var P,X,I;this.init=function(y){P=y.memberid,X=parseInt(y.timestamp,10),I=y.setProperties},this.isEdit=!1,this.group=void 0,this.execute=function(y){var w;return!y.getMember(P)&&(w=new ops.Member(P,I),y.addMember(w),y.emit(ops.Document.signalMemberAdded,w),!0)},this.spec=function(){return{optype:"AddMember",memberid:P,timestamp:X,setProperties:I}}},ops.OpAddStyle=function(){var P,X,I,y,w,E,R=odf.Namespaces.stylens;this.init=function(C){P=C.memberid,X=C.timestamp,I=C.styleName,y=C.styleFamily,w="true"===C.isAutomaticStyle||!0===C.isAutomaticStyle,E=C.setProperties},this.isEdit=!0,this.group=void 0,this.execute=function(C){var N=C.getOdfCanvas().odfContainer(),x=C.getFormatting(),S=C.getDOMDocument().createElementNS(R,"style:style");return!!S&&(E&&x.updateStyle(S,E),S.setAttributeNS(R,"style:family",y),S.setAttributeNS(R,"style:name",I),w?N.rootElement.automaticStyles.appendChild(S):N.rootElement.styles.appendChild(S),C.getOdfCanvas().refreshCSS(),w||C.emit(ops.OdtDocument.signalCommonStyleCreated,{name:I,family:y}),!0)},this.spec=function(){return{optype:"AddStyle",memberid:P,timestamp:X,styleName:I,styleFamily:y,isAutomaticStyle:w,setProperties:E}}},odf.ObjectNameGenerator=function(P,X){function I(m,l){var M={};this.generateName=function(){var ee,O=l(),q=0;do{ee=m+q,q+=1}while(M[ee]||O[ee]);return M[ee]=!0,ee}}var w=odf.Namespaces.stylens,E=odf.Namespaces.drawns,R=odf.Namespaces.xlinkns,C=(new core.Utils).hashString(X),N=null,x=null,S=null,s={},u={};this.generateStyleName=function(){return null===N&&(N=new I("auto"+C+"_",function(){return function y(){var m={};return[P.rootElement.automaticStyles,P.rootElement.styles].forEach(function(l){for(l=l.firstElementChild;l;)l.namespaceURI===w&&"style"===l.localName&&(m[l.getAttributeNS(w,"name")]=!0),l=l.nextElementSibling}),m}()})),N.generateName()},this.generateFrameName=function(){var m,l,M;if(null===x){for(l=P.rootElement.body.getElementsByTagNameNS(E,"frame"),m=0;m<l.length;m+=1)M=l.item(m),s[M.getAttributeNS(E,"name")]=!0;x=new I("fr"+C+"_",function(){return s})}return x.generateName()},this.generateImageName=function(){var m,l,M;if(null===S){for(M=P.rootElement.body.getElementsByTagNameNS(E,"image"),m=0;m<M.length;m+=1)l=(l=(l=M.item(m)).getAttributeNS(R,"href")).substring(9,l.lastIndexOf(".")),u[l]=!0;S=new I("img"+C+"_",function(){return u})}return S.generateName()}},odf.TextStyleApplicator=function(P,X,I){function y(x){function S(u,m){return"object"==typeof u&&"object"==typeof m?Object.keys(u).every(function(l){return S(u[l],m[l])}):u===m}var s={};this.isStyleApplied=function(u){return u=X.getAppliedStylesForElement(u,s).styleProperties,S(x,u)}}function w(x){var S={};this.applyStyleToContainer=function(s){var u;u=s.getAttributeNS(C,"style-name");var m=s.ownerDocument;if(!S.hasOwnProperty(u=u||"")){var M,l=u;M=u?X.createDerivedStyleObject(u,"text",x):x,m=m.createElementNS(N,"style:style"),X.updateStyle(m,M),m.setAttributeNS(N,"style:name",P.generateStyleName()),m.setAttributeNS(N,"style:family","text"),m.setAttributeNS("urn:webodf:names:scope","scope","document-content"),I.appendChild(m),S[l]=m}u=S[u].getAttributeNS(N,"name"),s.setAttributeNS(C,"text:style-name",u)}}var R=core.DomUtils,C=odf.Namespaces.textns,N=odf.Namespaces.stylens;this.applyStyle=function(x,S,s){var l,M,O,u={};runtime.assert(s&&s.hasOwnProperty("style:text-properties"),"applyStyle without any text properties"),u["style:text-properties"]=s["style:text-properties"],M=new w(u),O=new y(u),x.forEach(function(q){!1===O.isStyleApplied(q)&&(l=function E(x,S){var m,l,M,s=x.ownerDocument,u=x.parentNode,O=new core.LoopWatchDog(1e4);for((l=[]).push(x),M=x.nextSibling;M&&R.rangeContainsNode(S,M);)O.check(),l.push(M),M=M.nextSibling;if("span"!==u.localName||u.namespaceURI!==C?(m=s.createElementNS(C,"text:span"),u.insertBefore(m,x),s=!1):(x.previousSibling&&!R.rangeContainsNode(S,u.firstChild)?(m=u.cloneNode(!1),u.parentNode.insertBefore(m,u.nextSibling)):m=u,s=!0),l.forEach(function(q){q.parentNode!==m&&m.appendChild(q)}),M&&s)for(l=m.cloneNode(!1),m.parentNode.insertBefore(l,m.nextSibling);M;)O.check(),s=M.nextSibling,l.appendChild(M),M=s;return m}(q,S),M.applyStyleToContainer(l))})}},ops.OpApplyDirectStyling=function(){var X,I,y,w,E,R=odf.OdfUtils,C=core.DomUtils;this.init=function(N){X=N.memberid,I=N.timestamp,y=parseInt(N.position,10),w=parseInt(N.length,10),E=N.setProperties},this.isEdit=!0,this.group=void 0,this.execute=function(N){var x=N.convertCursorToDomRange(y,w),S=R.getParagraphElements(x);return function P(N,x,S){var s=N.getOdfCanvas().odfContainer(),u=C.splitBoundaries(x),m=R.getTextNodes(x,!1);new odf.TextStyleApplicator(new odf.ObjectNameGenerator(s,X),N.getFormatting(),s.rootElement.automaticStyles).applyStyle(m,x,S),u.forEach(C.normalizeTextNodes)}(N,x,E),x.detach(),N.getOdfCanvas().refreshCSS(),N.fixCursorPositions(),S.forEach(function(s){N.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:s,memberId:X,timeStamp:I})}),N.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"ApplyDirectStyling",memberid:X,timestamp:I,position:y,length:w,setProperties:E}}},ops.OpApplyHyperlink=function(){var X,I,y,w,E,R=core.DomUtils,C=odf.OdfUtils;this.init=function(N){X=N.memberid,I=N.timestamp,y=N.position,w=N.length,E=N.hyperlink},this.isEdit=!0,this.group=void 0,this.execute=function(N){var x=N.getDOMDocument(),S=N.convertCursorToDomRange(y,w),s=R.splitBoundaries(S),u=[],m=C.getTextNodes(S,!1);return 0!==m.length&&(m.forEach(function(l){var M=C.getParagraphElement(l);runtime.assert(!1===function P(N){for(;N;){if(C.isHyperlink(N))return!0;N=N.parentNode}return!1}(l),"The given range should not contain any link.");var O=E,q=x.createElementNS(odf.Namespaces.textns,"text:a");q.setAttributeNS(odf.Namespaces.xlinkns,"xlink:type","simple"),q.setAttributeNS(odf.Namespaces.xlinkns,"xlink:href",O),l.parentNode.insertBefore(q,l),q.appendChild(l),-1===u.indexOf(M)&&u.push(M)}),s.forEach(R.normalizeTextNodes),S.detach(),N.fixCursorPositions(),N.getOdfCanvas().refreshSize(),N.getOdfCanvas().rerenderAnnotations(),u.forEach(function(l){N.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:l,memberId:X,timeStamp:I})}),!0)},this.spec=function(){return{optype:"ApplyHyperlink",memberid:X,timestamp:I,position:y,length:w,hyperlink:E}}},ops.OpInsertImage=function(){var P,X,I,y,w,E,R,C,N=odf.Namespaces.drawns,x=odf.Namespaces.svgns,S=odf.Namespaces.textns,s=odf.Namespaces.xlinkns,u=odf.OdfUtils;this.init=function(m){P=m.memberid,X=m.timestamp,I=m.position,y=m.filename,w=m.frameWidth,E=m.frameHeight,R=m.frameStyleName,C=m.frameName},this.isEdit=!0,this.group=void 0,this.execute=function(m){var M,O,l=m.getOdfCanvas();if(!(q=m.getTextNodeAtStep(I,P)))return!1;O=u.getParagraphElement(M=q.textNode);var q=q.offset!==M.length?M.splitText(q.offset):M.nextSibling,ee=(G=m.getDOMDocument()).createElementNS(N,"draw:image"),G=G.createElementNS(N,"draw:frame");return ee.setAttributeNS(s,"xlink:href",y),ee.setAttributeNS(s,"xlink:type","simple"),ee.setAttributeNS(s,"xlink:show","embed"),ee.setAttributeNS(s,"xlink:actuate","onLoad"),G.setAttributeNS(N,"draw:style-name",R),G.setAttributeNS(N,"draw:name",C),G.setAttributeNS(S,"text:anchor-type","as-char"),G.setAttributeNS(x,"svg:width",w),G.setAttributeNS(x,"svg:height",E),G.appendChild(ee),M.parentNode.insertBefore(G,q),m.emit(ops.OdtDocument.signalStepsInserted,{position:I}),0===M.length&&M.parentNode.removeChild(M),l.addCssForFrameWithImage(G),l.refreshCSS(),m.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:O,memberId:P,timeStamp:X}),l.rerenderAnnotations(),!0},this.spec=function(){return{optype:"InsertImage",memberid:P,timestamp:X,filename:y,position:I,frameWidth:w,frameHeight:E,frameStyleName:R,frameName:C}}},ops.OpInsertTable=function(){function P(s,u){var m;if(1===x.length)m=x[0];else if(3===x.length)switch(s){case 0:m=x[0];break;case y-1:m=x[2];break;default:m=x[1]}else m=x[s];if(1===m.length)return m[0];if(3===m.length)switch(u){case 0:return m[0];case w-1:return m[2];default:return m[1]}return m[u]}var X,I,y,w,E,R,C,N,x,S=odf.OdfUtils;this.init=function(s){X=s.memberid,I=s.timestamp,E=s.position,y=s.initialRows,w=s.initialColumns,R=s.tableName,C=s.tableStyleName,N=s.tableColumnStyleName,x=s.tableCellStyleMatrix},this.isEdit=!0,this.group=void 0,this.execute=function(s){var u=s.getTextNodeAtStep(E),m=s.getRootNode();if(u){var q,ee,G,B,l=s.getDOMDocument(),M=l.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table"),O=l.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-column");for(C&&M.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",C),R&&M.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:name",R),O.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:number-columns-repeated",w),N&&O.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",N),M.appendChild(O),G=0;G<y;G+=1){for(O=l.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-row"),B=0;B<w;B+=1)q=l.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-cell"),(ee=P(G,B))&&q.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",ee),ee=l.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:p"),q.appendChild(ee),O.appendChild(q);M.appendChild(O)}return u=S.getParagraphElement(u.textNode),m.insertBefore(M,u.nextSibling),s.emit(ops.OdtDocument.signalStepsInserted,{position:E}),s.getOdfCanvas().refreshSize(),s.emit(ops.OdtDocument.signalTableAdded,{tableElement:M,memberId:X,timeStamp:I}),s.getOdfCanvas().rerenderAnnotations(),!0}return!1},this.spec=function(){return{optype:"InsertTable",memberid:X,timestamp:I,position:E,initialRows:y,initialColumns:w,tableName:R,tableStyleName:C,tableColumnStyleName:N,tableCellStyleMatrix:x}}},ops.OpInsertText=function(){function P(C){return"\t"!==C&&R.isODFWhitespace(C)}var X,I,y,w,E,R=odf.OdfUtils;this.init=function(C){X=C.memberid,I=C.timestamp,y=C.position,E=C.text,w="true"===C.moveCursor||!0===C.moveCursor},this.isEdit=!0,this.group=void 0,this.execute=function(C){var N,x,S,m,M,q,s=null,u=C.getDOMDocument(),l=0,O=C.getCursor(X);if(C.upgradeWhitespacesAtPosition(y),N=C.getTextNodeAtStep(y)){for(s=(x=N.textNode).nextSibling,S=x.parentNode,m=R.getParagraphElement(x),q=0;q<E.length;q+=1){if(!(M="\t"===E[q])){var ee=q;M=P((M=E)[ee])&&(0===ee||ee===M.length-1||P(M[ee-1]))}M&&(0===l?(N.offset!==x.length&&(s=x.splitText(N.offset)),0<q&&x.appendData(E.substring(0,q))):l<q&&(l=E.substring(l,q),S.insertBefore(u.createTextNode(l),s)),l=q+1,"\t"===E[q]?(M=u.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:tab")).appendChild(u.createTextNode("\t")):(" "!==E[q]&&runtime.log("WARN: InsertText operation contains non-tab, non-space whitespace character (character code "+E.charCodeAt(q)+")"),(M=u.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:s")).appendChild(u.createTextNode(" "))),S.insertBefore(M,s))}return 0===l?x.insertData(N.offset,E):l<E.length&&(N=E.substring(l),S.insertBefore(u.createTextNode(N),s)),s=x.nextSibling,(S=x.parentNode).removeChild(x),S.insertBefore(x,s),0===x.length&&x.parentNode.removeChild(x),C.emit(ops.OdtDocument.signalStepsInserted,{position:y}),O&&w&&(C.moveCursor(X,y+E.length,0),C.emit(ops.Document.signalCursorMoved,O)),C.downgradeWhitespacesAtPosition(y),C.downgradeWhitespacesAtPosition(y+E.length),C.getOdfCanvas().refreshSize(),C.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:m,memberId:X,timeStamp:I}),C.getOdfCanvas().rerenderAnnotations(),!0}return!1},this.spec=function(){return{optype:"InsertText",memberid:X,timestamp:I,position:y,text:E,moveCursor:w}}},odf.CollapsingRules=function(P){function X(E){return y.isODFNode(E)||"br"===E.localName&&y.isLineBreak(E.parentNode)||E.nodeType===Node.TEXT_NODE&&y.isODFNode(E.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}var y=odf.OdfUtils,w=core.DomUtils;this.mergeChildrenIntoParent=function I(E){var R;return E.nodeType===Node.TEXT_NODE?(R=E.parentNode).removeChild(E):R=w.removeUnwantedNodes(E,X),(E=R)&&(E=!y.isParagraph(E=R)&&E!==P&&y.hasNoODFContent(E)),E?I(R):R}},ops.OpMergeParagraph=function(){function P(m){return odf.OdfUtils.isInlineRoot(m)?NodeFilter.FILTER_SKIP:S.isGroupingElement(m)&&S.hasNoODFContent(m)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}function X(m){if(m.nodeType===Node.TEXT_NODE){if(0===m.length)return runtime.log("WARN: Empty text node found during merge operation"),!0;if(S.isODFWhitespace(m.data)&&!1===S.isSignificantWhitespace(m,0))return!0;m="#text"}else m=(m.prefix?m.prefix+":":"")+m.localName;return runtime.log("WARN: Unexpected text element found near paragraph boundary ["+m+"]"),!1}function I(m){m.collapsed||(s.splitBoundaries(m),(m=S.getTextElements(m,!1,!0).filter(X)).forEach(function(l){l.parentNode.removeChild(l)}))}function y(m,l,M){m=m.convertCursorStepToDomPoint(l);var O=S.getParagraphElement(m.node,m.offset);return runtime.assert(Boolean(O),"Paragraph not found at step "+l),M&&M.setPosition(m.node,m.offset),O}var w,E,R,C,N,x,S=odf.OdfUtils,s=core.DomUtils,u=odf.Namespaces.textns;this.init=function(m){w=m.memberid,E=m.timestamp,R=m.moveCursor,C=m.paragraphStyleName,N=parseInt(m.sourceStartPosition,10),x=parseInt(m.destinationStartPosition,10)},this.isEdit=!0,this.group=void 0,this.execute=function(m){var l,M,O=m.getCursor(w);l=m.getRootNode();var G,q=new odf.CollapsingRules(l),ee=m.createStepIterator(l,0,[m.getPositionFilter()],l);runtime.assert(x<N,"Destination paragraph ("+x+") must be before source paragraph ("+N+")"),M=y(m,x),l=y(m,N,ee),ee.previousStep(),runtime.assert(s.containsNode(M,ee.container()),"Destination paragraph must be adjacent to the source paragraph"),G=M.ownerDocument.createRange(),ee.setPosition(M,M.childNodes.length),ee.roundToPreviousStep(),G.setStart(ee.container(),ee.offset()),G.setEnd(M,M.childNodes.length),I(G),G=M.childNodes.length;var B=l.ownerDocument.createRange();for(ee.setPosition(l,0),ee.roundToNextStep(),B.setStart(l,0),B.setEnd(ee.container(),ee.offset()),I(B),B=l.firstChild;B;)"editinfo"===B.localName?l.removeChild(B):(M.appendChild(B),s.removeUnwantedNodes(B,P)),B=l.firstChild;return runtime.assert(0===l.childNodes.length,"Source paragraph should be empty before it is removed"),q.mergeChildrenIntoParent(l),m.emit(ops.OdtDocument.signalStepsRemoved,{position:N-1}),ee.setPosition(M,G),ee.roundToClosestStep(),ee.previousStep()||ee.roundToNextStep(),m.downgradeWhitespaces(ee),C?M.setAttributeNS(u,"text:style-name",C):M.removeAttributeNS(u,"style-name"),O&&R&&(m.moveCursor(w,N-1,0),m.emit(ops.Document.signalCursorMoved,O)),m.fixCursorPositions(),m.getOdfCanvas().refreshSize(),m.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:M,memberId:w,timeStamp:E}),m.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"MergeParagraph",memberid:w,timestamp:E,moveCursor:R,paragraphStyleName:C,sourceStartPosition:N,destinationStartPosition:x}}},ops.OpMoveCursor=function(){var P,X,I,y,w;this.init=function(E){P=E.memberid,X=E.timestamp,I=E.position,y=E.length||0,w=E.selectionType||ops.OdtCursor.RangeSelection},this.isEdit=!1,this.group=void 0,this.execute=function(E){var C,R=E.getCursor(P);return!!R&&(C=E.convertCursorToDomRange(I,y),R.setSelectedRange(C,0<=y),R.setSelectionType(w),E.emit(ops.Document.signalCursorMoved,R),!0)},this.spec=function(){return{optype:"MoveCursor",memberid:P,timestamp:X,position:I,length:y,selectionType:w}}},ops.OpRemoveAnnotation=function(){var P,X,I,y,w=core.DomUtils;this.init=function(E){P=E.memberid,X=E.timestamp,I=parseInt(E.position,10),y=parseInt(E.length,10)},this.isEdit=!0,this.group=void 0,this.execute=function(E){function R(x){N.parentNode.insertBefore(x,N)}for(var N,C=E.getIteratorAtPosition(I).container();C.namespaceURI!==odf.Namespaces.officens||"annotation"!==C.localName;)C=C.parentNode;return null!==C&&(C=(N=C).annotationEndElement,E.getOdfCanvas().forgetAnnotation(N),w.getElementsByTagNameNS(N,"urn:webodf:names:cursor","cursor").forEach(R),w.getElementsByTagNameNS(N,"urn:webodf:names:cursor","anchor").forEach(R),N.parentNode.removeChild(N),C&&C.parentNode.removeChild(C),E.emit(ops.OdtDocument.signalStepsRemoved,{position:0<I?I-1:I}),E.getOdfCanvas().rerenderAnnotations(),E.fixCursorPositions(),!0)},this.spec=function(){return{optype:"RemoveAnnotation",memberid:P,timestamp:X,position:I,length:y}}},ops.OpRemoveBlob=function(){var P,X,I;this.init=function(y){P=y.memberid,X=y.timestamp,I=y.filename},this.isEdit=!0,this.group=void 0,this.execute=function(y){return y.getOdfCanvas().odfContainer().removeBlob(I),!0},this.spec=function(){return{optype:"RemoveBlob",memberid:P,timestamp:X,filename:I}}},ops.OpRemoveCursor=function(){var P,X;this.init=function(I){P=I.memberid,X=I.timestamp},this.isEdit=!1,this.group=void 0,this.execute=function(I){return!!I.removeCursor(P)},this.spec=function(){return{optype:"RemoveCursor",memberid:P,timestamp:X}}},ops.OpRemoveHyperlink=function(){var P,X,I,y,w=core.DomUtils,E=odf.OdfUtils;this.init=function(R){P=R.memberid,X=R.timestamp,I=R.position,y=R.length},this.isEdit=!0,this.group=void 0,this.execute=function(R){var C=R.convertCursorToDomRange(I,y),N=E.getHyperlinkElements(C);return runtime.assert(1===N.length,"The given range should only contain a single link."),N=w.mergeIntoParent(N[0]),C.detach(),R.fixCursorPositions(),R.getOdfCanvas().refreshSize(),R.getOdfCanvas().rerenderAnnotations(),R.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:E.getParagraphElement(N),memberId:P,timeStamp:X}),!0},this.spec=function(){return{optype:"RemoveHyperlink",memberid:P,timestamp:X,position:I,length:y}}},ops.OpRemoveMember=function(){var P,X;this.init=function(I){P=I.memberid,X=parseInt(I.timestamp,10)},this.isEdit=!1,this.group=void 0,this.execute=function(I){return!!I.getMember(P)&&(I.removeMember(P),I.emit(ops.Document.signalMemberRemoved,P),!0)},this.spec=function(){return{optype:"RemoveMember",memberid:P,timestamp:X}}},ops.OpRemoveStyle=function(){var P,X,I,y;this.init=function(w){P=w.memberid,X=w.timestamp,I=w.styleName,y=w.styleFamily},this.isEdit=!0,this.group=void 0,this.execute=function(w){var E=w.getFormatting().getStyleElement(I,y);return!!E&&(E.parentNode.removeChild(E),w.getOdfCanvas().refreshCSS(),w.emit(ops.OdtDocument.signalCommonStyleDeleted,{name:I,family:y}),!0)},this.spec=function(){return{optype:"RemoveStyle",memberid:P,timestamp:X,styleName:I,styleFamily:y}}},ops.OpRemoveText=function(){var P,X,I,y,w=odf.OdfUtils,E=core.DomUtils;this.init=function(R){runtime.assert(0<=R.length,"OpRemoveText only supports positive lengths"),P=R.memberid,X=R.timestamp,I=parseInt(R.position,10),y=parseInt(R.length,10)},this.isEdit=!0,this.group=void 0,this.execute=function(R){var C,N,x,S=R.getCursor(P),s=new odf.CollapsingRules(R.getRootNode());return R.upgradeWhitespacesAtPosition(I),R.upgradeWhitespacesAtPosition(I+y),C=R.convertCursorToDomRange(I,y),E.splitBoundaries(C),N=w.getTextElements(C,!1,!0),x=w.getParagraphElement(C.startContainer,C.startOffset),runtime.assert(void 0!==x,"Attempting to remove text outside a paragraph element"),C.detach(),N.forEach(function(u){u.parentNode?(runtime.assert(E.containsNode(x,u),"RemoveText only supports removing elements within the same paragraph"),s.mergeChildrenIntoParent(u)):runtime.log("WARN: text element has already been removed from it's container")}),R.emit(ops.OdtDocument.signalStepsRemoved,{position:I}),R.downgradeWhitespacesAtPosition(I),R.fixCursorPositions(),R.getOdfCanvas().refreshSize(),R.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:x,memberId:P,timeStamp:X}),S&&(S.resetSelectionType(),R.emit(ops.Document.signalCursorMoved,S)),R.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"RemoveText",memberid:P,timestamp:X,position:I,length:y}}},ops.OpSetBlob=function(){var P,X,I,y,w;this.init=function(E){P=E.memberid,X=E.timestamp,I=E.filename,y=E.mimetype,w=E.content},this.isEdit=!0,this.group=void 0,this.execute=function(E){return E.getOdfCanvas().odfContainer().setBlob(I,y,w),!0},this.spec=function(){return{optype:"SetBlob",memberid:P,timestamp:X,filename:I,mimetype:y,content:w}}},ops.OpSetParagraphStyle=function(){var X,I,y,w,E=odf.OdfUtils;this.init=function(R){X=R.memberid,I=R.timestamp,y=R.position,w=R.styleName},this.isEdit=!0,this.group=void 0,this.execute=function(R){var C,N;return C=R.getIteratorAtPosition(y),!!(N=E.getParagraphElement(C.container()))&&(runtime.assert(function P(R,C,N){var x=[R.getPositionFilter()],S=N.container();return N=N.unfilteredDomOffset(),!1===R.createStepIterator(S,N,x,C).previousStep()}(R,N,C),"SetParagraphStyle position should be the first position in the paragraph"),w?N.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:style-name",w):N.removeAttributeNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","style-name"),R.getOdfCanvas().refreshSize(),R.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:N,timeStamp:I,memberId:X}),R.getOdfCanvas().rerenderAnnotations(),!0)},this.spec=function(){return{optype:"SetParagraphStyle",memberid:X,timestamp:I,position:y,styleName:w}}},ops.OpSplitParagraph=function(){var P,X,I,y,w,E,R=odf.OdfUtils,C=odf.Namespaces.textns;this.init=function(N){P=N.memberid,X=N.timestamp,y=N.position,I=N.sourceParagraphPosition,E=N.paragraphStyleName,w="true"===N.moveCursor||!0===N.moveCursor},this.isEdit=!0,this.group=void 0,this.execute=function(N){var x,S,s,u,m,l,M,O=N.getCursor(P);if(N.upgradeWhitespacesAtPosition(y),!(x=N.getTextNodeAtStep(y))||!(S=R.getParagraphElement(x.textNode)))return!1;for(s=R.isListItem(S.parentNode)?S.parentNode:S,0===x.offset?(M=x.textNode.previousSibling,l=null):(M=x.textNode,l=x.offset>=x.textNode.length?null:x.textNode.splitText(x.offset)),u=x.textNode;u!==s;){if(m=(u=u.parentNode).cloneNode(!1),l&&m.appendChild(l),M)for(;M&&M.nextSibling;)m.appendChild(M.nextSibling);else for(;u.firstChild;)m.appendChild(u.firstChild);u.parentNode.insertBefore(m,u.nextSibling),M=u,l=m}return R.isListItem(l)&&(l=l.childNodes.item(0)),E?l.setAttributeNS(C,"text:style-name",E):l.removeAttributeNS(C,"style-name"),0===x.textNode.length&&x.textNode.parentNode.removeChild(x.textNode),N.emit(ops.OdtDocument.signalStepsInserted,{position:y}),O&&w&&(N.moveCursor(P,y+1,0),N.emit(ops.Document.signalCursorMoved,O)),N.fixCursorPositions(),N.getOdfCanvas().refreshSize(),N.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:S,memberId:P,timeStamp:X}),N.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:l,memberId:P,timeStamp:X}),N.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"SplitParagraph",memberid:P,timestamp:X,position:y,sourceParagraphPosition:I,paragraphStyleName:E,moveCursor:w}}},ops.OpUpdateMember=function(){var X,I,y,w;this.init=function(E){X=E.memberid,I=parseInt(E.timestamp,10),y=E.setProperties,w=E.removedProperties},this.isEdit=!1,this.group=void 0,this.execute=function(E){var R=E.getMember(X);return!!R&&(w&&R.removeProperties(w),y&&(R.setProperties(y),y.fullName&&function P(E){var R="//dc:creator[@editinfo:memberid='"+X+"']";for(E=xmldom.XPath.getODFElementsWithXPath(E.getRootNode(),R,function(C){return"editinfo"===C?"urn:webodf:names:editinfo":odf.Namespaces.lookupNamespaceURI(C)}),R=0;R<E.length;R+=1)E[R].textContent=y.fullName}(E)),E.emit(ops.Document.signalMemberUpdated,R),!0)},this.spec=function(){return{optype:"UpdateMember",memberid:X,timestamp:I,setProperties:y,removedProperties:w}}},ops.OpUpdateMetadata=function(){var P,X,I,y;this.init=function(w){P=w.memberid,X=parseInt(w.timestamp,10),I=w.setProperties,y=w.removedProperties},this.isEdit=!0,this.group=void 0,this.execute=function(w){var E=w.getOdfCanvas().odfContainer(),R=null;return y&&(R=y.attributes.split(",")),E.setMetadata(I,R),w.emit(ops.OdtDocument.signalMetadataUpdated,{setProperties:null!==I?I:{},removedProperties:null!==R?R:[]}),!0},this.spec=function(){return{optype:"UpdateMetadata",memberid:P,timestamp:X,setProperties:I,removedProperties:y}}},ops.OpUpdateParagraphStyle=function(){function P(C,N){var x,S,s=N?N.split(","):[];for(x=0;x<s.length;x+=1)S=s[x].split(":"),C.removeAttributeNS(odf.Namespaces.lookupNamespaceURI(S[0]),S[1])}var X,I,y,w,E,R=odf.Namespaces.stylens;this.init=function(C){X=C.memberid,I=C.timestamp,y=C.styleName,w=C.setProperties,E=C.removedProperties},this.isEdit=!0,this.group=void 0,this.execute=function(C){var x,S,s,N=C.getFormatting();return!!(x=""!==y?N.getStyleElement(y,"paragraph"):N.getDefaultStyleElement("paragraph"))&&(S=x.getElementsByTagNameNS(R,"paragraph-properties").item(0),s=x.getElementsByTagNameNS(R,"text-properties").item(0),w&&N.updateStyle(x,w),E&&(N=E["style:paragraph-properties"],S&&N&&(P(S,N.attributes),0===S.attributes.length&&x.removeChild(S)),N=E["style:text-properties"],s&&N&&(P(s,N.attributes),0===s.attributes.length&&x.removeChild(s)),P(x,E.attributes)),C.getOdfCanvas().refreshCSS(),C.emit(ops.OdtDocument.signalParagraphStyleModified,y),C.getOdfCanvas().rerenderAnnotations(),!0)},this.spec=function(){return{optype:"UpdateParagraphStyle",memberid:X,timestamp:I,styleName:y,setProperties:w,removedProperties:E}}},ops.OperationFactory=function(){function P(I){return function(y){return new I}}var X;this.register=function(I,y){X[I]=y},this.create=function(I){var y=null,w=X[I.optype];return w&&(y=w(I)).init(I),y},X={AddMember:P(ops.OpAddMember),UpdateMember:P(ops.OpUpdateMember),RemoveMember:P(ops.OpRemoveMember),AddCursor:P(ops.OpAddCursor),ApplyDirectStyling:P(ops.OpApplyDirectStyling),SetBlob:P(ops.OpSetBlob),RemoveBlob:P(ops.OpRemoveBlob),InsertImage:P(ops.OpInsertImage),InsertTable:P(ops.OpInsertTable),InsertText:P(ops.OpInsertText),RemoveText:P(ops.OpRemoveText),MergeParagraph:P(ops.OpMergeParagraph),SplitParagraph:P(ops.OpSplitParagraph),SetParagraphStyle:P(ops.OpSetParagraphStyle),UpdateParagraphStyle:P(ops.OpUpdateParagraphStyle),AddStyle:P(ops.OpAddStyle),RemoveStyle:P(ops.OpRemoveStyle),MoveCursor:P(ops.OpMoveCursor),RemoveCursor:P(ops.OpRemoveCursor),AddAnnotation:P(ops.OpAddAnnotation),RemoveAnnotation:P(ops.OpRemoveAnnotation),UpdateMetadata:P(ops.OpUpdateMetadata),ApplyHyperlink:P(ops.OpApplyHyperlink),RemoveHyperlink:P(ops.OpRemoveHyperlink)}},ops.OperationRouter=function(){},ops.OperationRouter.prototype.setOperationFactory=function(P){},ops.OperationRouter.prototype.setPlaybackFunction=function(P){},ops.OperationRouter.prototype.push=function(P){},ops.OperationRouter.prototype.close=function(P){},ops.OperationRouter.prototype.subscribe=function(P,X){},ops.OperationRouter.prototype.unsubscribe=function(P,X){},ops.OperationRouter.prototype.hasLocalUnsyncedOps=function(){},ops.OperationRouter.prototype.hasSessionHostConnection=function(){},ops.OperationRouter.signalProcessingBatchStart="router/batchstart",ops.OperationRouter.signalProcessingBatchEnd="router/batchend",ops.TrivialOperationRouter=function(){var X,I,P=new core.EventNotifier([ops.OperationRouter.signalProcessingBatchStart,ops.OperationRouter.signalProcessingBatchEnd]),y=0;this.setOperationFactory=function(w){X=w},this.setPlaybackFunction=function(w){I=w},this.push=function(w){y+=1,P.emit(ops.OperationRouter.signalProcessingBatchStart,{}),w.forEach(function(E){(E=E.spec()).timestamp=Date.now(),(E=X.create(E)).group="g"+y,I(E)}),P.emit(ops.OperationRouter.signalProcessingBatchEnd,{})},this.close=function(w){w()},this.subscribe=function(w,E){P.subscribe(w,E)},this.unsubscribe=function(w,E){P.unsubscribe(w,E)},this.hasLocalUnsyncedOps=function(){return!1},this.hasSessionHostConnection=function(){return!0}},ops.Session=function(P){function X(R){w.emit(ops.OdtDocument.signalProcessingBatchStart,R)}function I(R){w.emit(ops.OdtDocument.signalProcessingBatchEnd,R)}var y=new ops.OperationFactory,w=new ops.OdtDocument(P),E=null;this.setOperationFactory=function(R){y=R,E&&E.setOperationFactory(y)},this.setOperationRouter=function(R){E&&(E.unsubscribe(ops.OperationRouter.signalProcessingBatchStart,X),E.unsubscribe(ops.OperationRouter.signalProcessingBatchEnd,I)),(E=R).subscribe(ops.OperationRouter.signalProcessingBatchStart,X),E.subscribe(ops.OperationRouter.signalProcessingBatchEnd,I),R.setPlaybackFunction(function(C){return w.emit(ops.OdtDocument.signalOperationStart,C),!!C.execute(w)&&(w.emit(ops.OdtDocument.signalOperationEnd,C),!0)}),R.setOperationFactory(y)},this.getOperationFactory=function(){return y},this.getOdtDocument=function(){return w},this.enqueue=function(R){E.push(R)},this.close=function(R){E.close(function(C){C?R(C):w.close(R)})},this.destroy=function(R){w.destroy(R)},this.setOperationRouter(new ops.TrivialOperationRouter)},gui.AnnotationController=function(P,X,I){function y(){var u,m=!1;(u=(u=C.getCursor(I))&&u.getNode())&&(m=!S.isWithinAnnotation(u,C.getRootNode())),m!==N&&x.emit(gui.AnnotationController.annotatableChanged,N=m)}function w(u){u.getMemberId()===I&&y()}function E(u){u===I&&y()}function R(u){u.getMemberId()===I&&y()}var C=P.getOdtDocument(),N=!1,x=new core.EventNotifier([gui.AnnotationController.annotatableChanged]),S=odf.OdfUtils,s=core.StepDirection.NEXT;this.isAnnotatable=function(){return N},this.addAnnotation=function(){var u=new ops.OpAddAnnotation,m=(l=C.getCursorSelection(I)).length,l=l.position;N&&(0===m?m=void 0:(l=0<=m?l:l+m,m=Math.abs(m)),u.init({memberid:I,position:l,length:m,name:I+Date.now()}),P.enqueue([u]))},this.removeAnnotation=function(u){var m,l;m=C.getMember(I).getProperties().fullName,(!0!==X.getState(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN)||m===S.getAnnotationCreator(u))&&(m=C.convertDomPointToCursorStep(u,0,s),l=C.convertDomPointToCursorStep(u,u.childNodes.length),(u=new ops.OpRemoveAnnotation).init({memberid:I,position:m,length:l-m}),(l=new ops.OpMoveCursor).init({memberid:I,position:0<m?m-1:m,length:0}),P.enqueue([u,l]))},this.subscribe=function(u,m){x.subscribe(u,m)},this.unsubscribe=function(u,m){x.unsubscribe(u,m)},this.destroy=function(u){C.unsubscribe(ops.Document.signalCursorAdded,w),C.unsubscribe(ops.Document.signalCursorRemoved,E),C.unsubscribe(ops.Document.signalCursorMoved,R),u()},X.registerConstraint(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN),C.subscribe(ops.Document.signalCursorAdded,w),C.subscribe(ops.Document.signalCursorRemoved,E),C.subscribe(ops.Document.signalCursorMoved,R),y()},gui.AnnotationController.annotatableChanged="annotatable/changed",gui.Avatar=function(P,X){var y,w,E,R,I=this;this.setColor=function(R){w.style.borderColor=R},this.setImageUrl=function(R){I.isVisible()?w.src=R:E=R},this.isVisible=function(){return"block"===y.style.display},this.show=function(){E&&(w.src=E,E=void 0),y.style.display="block"},this.hide=function(){y.style.display="none"},this.markAsFocussed=function(R){R?y.classList.add("active"):y.classList.remove("active")},this.destroy=function(R){P.removeChild(y),R()},y=(R=P.ownerDocument).createElement("div"),w=R.createElement("img"),y.appendChild(w),y.style.display=X?"block":"none",y.className="handle",P.appendChild(y)},gui.StepInfo=function(){},gui.StepInfo.VisualDirection={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1},gui.StepInfo.prototype.container=function(){},gui.StepInfo.prototype.offset=function(){},gui.VisualStepScanner=function(){},gui.VisualStepScanner.prototype.process=function(P,X,I){},gui.GuiStepUtils=function(){function P(C){var N,x=null;return(C=I.getContentBounds(C))&&(C.container.nodeType===Node.TEXT_NODE?((N=C.container.ownerDocument.createRange()).setStart(C.container,C.startOffset),N.setEnd(C.container,C.endOffset),(x=0<N.getClientRects().length?N.getBoundingClientRect():null)&&" "===C.container.data.substring(C.startOffset,C.endOffset)&&1>=x.width&&(x=null),N.detach()):(X.isCharacterElement(C.container)||X.isCharacterFrame(C.container))&&(x=y.getBoundingClientRect(C.container))),x}var X=odf.OdfUtils,I=new odf.StepUtils,y=core.DomUtils,w=core.StepDirection.NEXT,E=gui.StepInfo.VisualDirection.LEFT_TO_RIGHT,R=gui.StepInfo.VisualDirection.RIGHT_TO_LEFT;this.getContentRect=P,this.moveToFilteredStep=function(C,N,x){function S(G,B){return B.process(ee,l,M)&&(G=!0,!O&&B.token&&(O=B.token)),G}var u,m,l,M,O,ee,s=N===w,q=C.snapshot();u=!1;do{u=P(C),ee={token:C.snapshot(),container:C.container,offset:C.offset,direction:N,visualDirection:N===w?E:R},m=C.nextStep()?P(C):null,C.restore(ee.token),s?(l=u,M=m):(l=m,M=u),u=x.reduce(S,!1)}while(!u&&C.advanceStep(N));return u||x.forEach(function(G){!O&&G.token&&(O=G.token)}),C.restore(O||q),Boolean(O)}},gui.Caret=function(P,X,I,y){function E(){return M.selectNodeContents(l),M.getBoundingClientRect()}function R(K){return U[K]!==Q[K]}function x(K){S.parentNode.removeChild(S),l.parentNode.removeChild(l),K()}var S,s,u,m,l,M,G,B,A,K,F,L,O=P.getDocument().getCanvas(),q=core.DomUtils,ee=new gui.GuiStepUtils,H=!1,$=!1,J=!1,Q={isFocused:!1,isShown:!0,visibility:"hidden"},U={isFocused:!Q.isFocused,isShown:!Q.isShown,visibility:"hidden"};this.handleUpdate=function(){J=!0,B.trigger()},this.refreshCursorBlinking=function(){H=!0,B.trigger()},this.setFocus=function(){Q.isFocused=!0,B.trigger()},this.removeFocus=function(){Q.isFocused=!1,B.trigger()},this.show=function(){Q.isShown=!0,B.trigger()},this.hide=function(){Q.isShown=!1,B.trigger()},this.setAvatarImageUrl=function(K){u.setImageUrl(K)},this.setColor=function(K){s.style.borderColor=K,u.setColor(K)},this.getCursor=function(){return P},this.getFocusElement=function(){return s},this.toggleHandleVisibility=function(){u.isVisible()?u.hide():u.show()},this.showHandle=function(){u.show()},this.hideHandle=function(){u.hide()},this.setOverlayElement=function(K){m=K,S.appendChild(K),J=!0,B.trigger()},this.ensureVisible=function(){$=!0,B.trigger()},this.getBoundingClientRect=function(){return q.getBoundingClientRect(S)},this.destroy=function(K){core.Async.destroyAll([B.destroy,A.destroy,u.destroy,x],K)},F=[(K=P.getDocument()).createRootFilter(P.getMemberId()),K.getPositionFilter()],L=K.getDOMDocument(),M=L.createRange(),(l=L.createElement("span")).className="webodf-caretSizer",l.textContent="|",P.getNode().appendChild(l),(S=L.createElement("div")).setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",P.getMemberId()),S.className="webodf-caretOverlay",(s=L.createElement("div")).className="caret",S.appendChild(s),u=new gui.Avatar(S,I),O.getSizer().appendChild(S),G=K.createStepIterator(P.getNode(),0,F,K.getRootNode()),B=core.Task.createRedrawTask(function N(){if(!1===Q.isShown||P.getSelectionType()!==ops.OdtCursor.RangeSelection||!y&&!P.getSelectedRange().collapsed?(Q.visibility="hidden",s.style.visibility="hidden",A.cancel()):(Q.visibility="visible",s.style.visibility="visible",!1===Q.isFocused?(s.style.opacity="1",A.cancel()):((H||R("visibility"))&&(s.style.opacity="1",A.cancel()),A.trigger())),J||$){var K;K=P.getNode();var F,L,ie=q.getBoundingClientRect(O.getSizer()),Y=!1,ne=0;if(K.removeAttributeNS("urn:webodf:names:cursor","caret-sizer-active"),0<K.getClientRects().length)ne=(L=E()).left-q.getBoundingClientRect(K).left,Y=!0;else if(G.setPosition(K,0),!(L=ee.getContentRect(G))&&G.nextStep()&&(F=ee.getContentRect(G))&&(L=F,Y=!0),L||(K.setAttributeNS("urn:webodf:names:cursor","caret-sizer-active","true"),L=E(),Y=!0),!L)for(runtime.log("WARN: No suitable client rectangle found for visual caret for "+P.getMemberId());K;){if(0<K.getClientRects().length){L=q.getBoundingClientRect(K),Y=!0;break}K=K.parentNode}8>(K={top:(L=q.translateRect(L,ie,O.getZoomLevel())).top,height:L.height,right:Y?L.left:L.right,width:q.adaptRangeDifferenceToZoomLevel(ne,O.getZoomLevel())}).height&&(K={top:K.top-(8-K.height)/2,height:8,right:K.right}),S.style.height=K.height+"px",S.style.top=K.top+"px",S.style.left=K.right-K.width+"px",S.style.width=K.width?K.width+"px":"",m&&((K=runtime.getWindow().getComputedStyle(P.getNode(),null)).font?m.style.font=K.font:(m.style.fontStyle=K.fontStyle,m.style.fontVariant=K.fontVariant,m.style.fontWeight=K.fontWeight,m.style.fontSize=K.fontSize,m.style.lineHeight=K.lineHeight,m.style.fontFamily=K.fontFamily))}Q.isShown&&$&&X.scrollIntoView(s.getBoundingClientRect()),R("isFocused")&&u.markAsFocussed(Q.isFocused),function C(){Object.keys(Q).forEach(function(K){U[K]=Q[K]})}(),J=$=H=!1}),A=core.Task.createTimeoutTask(function w(){s.style.opacity="0"===s.style.opacity?"1":"0",A.trigger()},500),B.triggerImmediate()},odf.TextSerializer=function(){function P(y){var C,w="",E=X.filter?X.filter.acceptNode(y):NodeFilter.FILTER_ACCEPT,R=y.nodeType;if((E===NodeFilter.FILTER_ACCEPT||E===NodeFilter.FILTER_SKIP)&&I.isTextContentContainingNode(y))for(C=y.firstChild;C;)w+=P(C),C=C.nextSibling;return E===NodeFilter.FILTER_ACCEPT&&(R===Node.ELEMENT_NODE&&I.isParagraph(y)?w+="\n":R===Node.TEXT_NODE&&y.textContent&&(w+=y.textContent)),w}var X=this,I=odf.OdfUtils;this.filter=null,this.writeToString=function(y){return y?("\n"===(y=P(y))[y.length-1]&&(y=y.substr(0,y.length-1)),y):""}},gui.MimeDataExporter=function(){var P;this.exportRangeToDataTransfer=function(X,I){var y;(y=I.startContainer.ownerDocument.createElement("span")).appendChild(I.cloneContents()),y=P.writeToString(y);try{X.setData("text/plain",y)}catch{X.setData("Text",y)}},(P=new odf.TextSerializer).filter=new odf.OdfNodeFilter},gui.Clipboard=function(P){this.setDataFromRange=function(X,I){var y,w=X.clipboardData;return y=runtime.getWindow(),!w&&y&&(w=y.clipboardData),w?(y=!0,P.exportRangeToDataTransfer(w,I),X.preventDefault()):y=!1,y}},gui.SessionContext=function(P,X){var I=P.getOdtDocument(),y=odf.OdfUtils;this.isLocalCursorWithinOwnAnnotation=function(){var E,w=I.getCursor(X);return!(!w||(E=w&&w.getNode(),w=I.getMember(X).getProperties().fullName,!(E=y.getParentAnnotation(E,I.getRootNode()))||y.getAnnotationCreator(E)!==w))}},gui.StyleSummary=function(P){function X(E,R){var N,C=E+"|"+R;return w.hasOwnProperty(C)||(N=[],P.forEach(function(x){x=(x=x.styleProperties[E])&&x[R],-1===N.indexOf(x)&&N.push(x)}),w[C]=N),w[C]}function I(E,R,C){return function(){var N=X(E,R);return C.length>=N.length&&N.every(function(x){return-1!==C.indexOf(x)})}}function y(E,R){var C=X(E,R);return 1===C.length?C[0]:void 0}var w={};this.getPropertyValues=X,this.getCommonValue=y,this.isBold=I("style:text-properties","fo:font-weight",["bold"]),this.isItalic=I("style:text-properties","fo:font-style",["italic"]),this.hasUnderline=I("style:text-properties","style:text-underline-style",["solid"]),this.hasStrikeThrough=I("style:text-properties","style:text-line-through-style",["solid"]),this.fontSize=function(){var E=y("style:text-properties","fo:font-size");return E&&parseFloat(E)},this.fontName=function(){return y("style:text-properties","style:font-name")},this.isAlignedLeft=I("style:paragraph-properties","fo:text-align",["left","start"]),this.isAlignedCenter=I("style:paragraph-properties","fo:text-align",["center"]),this.isAlignedRight=I("style:paragraph-properties","fo:text-align",["right","end"]),this.isAlignedJustified=I("style:paragraph-properties","fo:text-align",["justify"]),this.text={isBold:this.isBold,isItalic:this.isItalic,hasUnderline:this.hasUnderline,hasStrikeThrough:this.hasStrikeThrough,fontSize:this.fontSize,fontName:this.fontName},this.paragraph={isAlignedLeft:this.isAlignedLeft,isAlignedCenter:this.isAlignedCenter,isAlignedRight:this.isAlignedRight,isAlignedJustified:this.isAlignedJustified}},gui.DirectFormattingController=function(P,X,I,y,w,E,R){function C(){return ze.value().styleSummary}function N(){return ze.value().enabledFeatures}function x(we){var Ce;return we.collapsed?((Ce=we.startContainer).hasChildNodes()&&we.startOffset<Ce.childNodes.length&&(Ce=Ce.childNodes.item(we.startOffset)),we=[Ce]):we=Le.getTextElements(we,!0,!1),we}function s(we,Ce){var ye={};return Object.keys(we).forEach(function($e){var qe=we[$e](),ue=Ce[$e]();qe!==ue&&(ye[$e]=ue)}),ye}function u(){var we,Ce;Ce=je.styleSummary;var ye=ze.value(),$e=ye.styleSummary,qe=je.enabledFeatures,ue=ye.enabledFeatures;we=s(Ce.text,$e.text),Ce=s(Ce.paragraph,$e.paragraph),je=ye,(qe=!(ue.directTextStyling===qe.directTextStyling&&ue.directParagraphStyling===qe.directParagraphStyling))&&Qe.emit(gui.DirectFormattingController.enabledChanged,ue),0<Object.keys(we).length&&Qe.emit(gui.DirectFormattingController.textStylingChanged,we),0<Object.keys(Ce).length&&Qe.emit(gui.DirectFormattingController.paragraphStylingChanged,Ce)}function m(){ze.reset(),u()}function l(we){("string"==typeof we?we:we.getMemberId())===y&&ze.reset()}function M(){ze.reset()}function O(we){var Ce=ge.getCursor(y);we=we.paragraphElement,Ce&&Le.getParagraphElement(Ce.getNode())===we&&ze.reset()}function q(we,Ce){return Ce(!we()),!0}function ee(we){if(N().directTextStyling){var Ce=ge.getCursorSelection(y),ye={"style:text-properties":we};0!==Ce.length?((we=new ops.OpApplyDirectStyling).init({memberid:y,position:Ce.position,length:Ce.length,setProperties:ye}),P.enqueue([we])):(Me=Ee.mergeObjects(Me||{},ye),ze.reset())}}function G(we,Ce){var ye={};ye[we]=Ce,ee(ye)}function B(we){we=we.spec(),Me&&we.memberid===y&&"SplitParagraph"!==we.optype&&(Me=null,ze.reset())}function A(we){G("fo:font-weight",we?"bold":"normal")}function H(we){G("fo:font-style",we?"italic":"normal")}function $(we){G("style:text-underline-style",we?"solid":"none")}function J(we){G("style:text-line-through-style",we?"solid":"none")}function Q(we){if(N().directParagraphStyling){var ue,Ce=ge.getCursor(y).getSelectedRange(),ye=(Ce=Le.getParagraphElements(Ce),ge.getFormatting()),$e=[],qe={};Ce.forEach(function(de){var Xe,pe=ge.convertDomPointToCursorStep(de,0,fe),xe=de.getAttributeNS(odf.Namespaces.textns,"style-name");(de=xe?qe.hasOwnProperty(xe)?qe[xe]:void 0:ue)||(de=w.generateStyleName(),xe?(qe[xe]=de,Xe=ye.createDerivedStyleObject(xe,"paragraph",{})):(ue=de,Xe={}),Xe=we(Xe),(xe=new ops.OpAddStyle).init({memberid:y,styleName:de.toString(),styleFamily:"paragraph",isAutomaticStyle:!0,setProperties:Xe}),$e.push(xe)),(xe=new ops.OpSetParagraphStyle).init({memberid:y,styleName:de.toString(),position:pe}),$e.push(xe)}),P.enqueue($e)}}function K(we){!function U(we){Q(function(Ce){return Ee.mergeObjects(Ce,we)})}({"style:paragraph-properties":{"fo:text-align":we}})}function F(we,Ce){var qe,ye=ge.getFormatting().getDefaultTabStopDistance(),$e=Ce["style:paragraph-properties"];return $e&&(qe=Le.parseLength($e=$e["fo:margin-left"])),Ee.mergeObjects(Ce,{"style:paragraph-properties":{"fo:margin-left":qe&&qe.unit===ye.unit?qe.value+we*ye.value+qe.unit:we*ye.value+ye.unit}})}function ie(){}function Y(){return!1}function ne(){return!1}var je,ze,le=this,ge=P.getOdtDocument(),Ee=new core.Utils,Le=odf.OdfUtils,Qe=new core.EventNotifier([gui.DirectFormattingController.enabledChanged,gui.DirectFormattingController.textStylingChanged,gui.DirectFormattingController.paragraphStylingChanged]),ae=odf.Namespaces.textns,fe=core.StepDirection.NEXT,Me=null;this.enabledFeatures=N,this.formatTextSelection=ee,this.createCursorStyleOp=function(we,Ce,ye){var $e=null,qe=Me;return ye&&(qe=(ye=ze.value().appliedStyles[0])&&ye.styleProperties),qe&&qe["style:text-properties"]&&(($e=new ops.OpApplyDirectStyling).init({memberid:y,position:we,length:Ce,setProperties:{"style:text-properties":qe["style:text-properties"]}}),Me=null,ze.reset()),$e},this.setBold=A,this.setItalic=H,this.setHasUnderline=$,this.setHasStrikethrough=J,this.setFontSize=function(we){G("fo:font-size",we+"pt")},this.setFontName=function(we){G("style:font-name",we)},this.getAppliedStyles=function(){return ze.value().appliedStyles},this.toggleBold=q.bind(le,function(){return C().isBold()},A),this.toggleItalic=q.bind(le,function(){return C().isItalic()},H),this.toggleUnderline=q.bind(le,function(){return C().hasUnderline()},$),this.toggleStrikethrough=q.bind(le,function(){return C().hasStrikeThrough()},J),this.isBold=function(){return C().isBold()},this.isItalic=function(){return C().isItalic()},this.hasUnderline=function(){return C().hasUnderline()},this.hasStrikeThrough=function(){return C().hasStrikeThrough()},this.fontSize=function(){return C().fontSize()},this.fontName=function(){return C().fontName()},this.isAlignedLeft=function(){return C().isAlignedLeft()},this.isAlignedCenter=function(){return C().isAlignedCenter()},this.isAlignedRight=function(){return C().isAlignedRight()},this.isAlignedJustified=function(){return C().isAlignedJustified()},this.alignParagraphLeft=function(){return K("left"),!0},this.alignParagraphCenter=function(){return K("center"),!0},this.alignParagraphRight=function(){return K("right"),!0},this.alignParagraphJustified=function(){return K("justify"),!0},this.indent=function(){return Q(F.bind(null,1)),!0},this.outdent=function(){return Q(F.bind(null,-1)),!0},this.createParagraphStyleOps=function(we){if(!N().directParagraphStyling)return[];var qe,ue,Ce=ge.getCursor(y),ye=Ce.getSelectedRange(),$e=[];Ce.hasForwardSelection()?(qe=Ce.getAnchorNode(),ue=Ce.getNode()):(qe=Ce.getNode(),ue=Ce.getAnchorNode()),Ce=Le.getParagraphElement(ue),runtime.assert(Boolean(Ce),"DirectFormattingController: Cursor outside paragraph");var de=Ce,pe=[ge.getPositionFilter(),ge.createRootFilter(y)];return!1!==ge.createStepIterator(ye.endContainer,ye.endOffset,pe,de).nextStep()||(ue!==qe&&(Ce=Le.getParagraphElement(qe)),!Me&&!function L(we,Ce){var ye=0===(ye=x(we)).length?[we.startContainer]:ye,$e=0<(ye=ge.getFormatting().getAppliedStyles(ye)).length?ye[0].styleProperties:void 0,qe=ge.getFormatting().getAppliedStylesForElement(Ce).styleProperties;return!(!$e||"text"!==$e["style:family"]||!$e["style:text-properties"]||qe&&qe["style:text-properties"]&&($e=$e["style:text-properties"],qe=qe["style:text-properties"],Object.keys($e).every(function(ue){return $e[ue]===qe[ue]})))}(ye,Ce))||!(ye=(ye=ze.value().appliedStyles[0])&&ye.styleProperties)||((Ce=Ce.getAttributeNS(ae,"style-name"))&&(ye={"style:text-properties":ye["style:text-properties"]},ye=ge.getFormatting().createDerivedStyleObject(Ce,"paragraph",ye)),qe=w.generateStyleName(),(Ce=new ops.OpAddStyle).init({memberid:y,styleName:qe,styleFamily:"paragraph",isAutomaticStyle:!0,setProperties:ye}),$e.push(Ce),(Ce=new ops.OpSetParagraphStyle).init({memberid:y,styleName:qe,position:we}),$e.push(Ce)),$e},this.subscribe=function(we,Ce){Qe.subscribe(we,Ce)},this.unsubscribe=function(we,Ce){Qe.unsubscribe(we,Ce)},this.destroy=function(we){ge.unsubscribe(ops.Document.signalCursorAdded,l),ge.unsubscribe(ops.Document.signalCursorRemoved,l),ge.unsubscribe(ops.Document.signalCursorMoved,l),ge.unsubscribe(ops.OdtDocument.signalParagraphStyleModified,M),ge.unsubscribe(ops.OdtDocument.signalParagraphChanged,O),ge.unsubscribe(ops.OdtDocument.signalOperationEnd,B),ge.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,u),X.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,m),we()},ge.subscribe(ops.Document.signalCursorAdded,l),ge.subscribe(ops.Document.signalCursorRemoved,l),ge.subscribe(ops.Document.signalCursorMoved,l),ge.subscribe(ops.OdtDocument.signalParagraphStyleModified,M),ge.subscribe(ops.OdtDocument.signalParagraphChanged,O),ge.subscribe(ops.OdtDocument.signalOperationEnd,B),ge.subscribe(ops.OdtDocument.signalProcessingBatchEnd,u),X.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,m),ze=new core.LazyProperty(function S(){var we=ge.getCursor(y),Ce=we&&we.getSelectedRange(),ye=[],$e=(ye=[],!0),qe={directTextStyling:!0,directParagraphStyling:!0};return Ce&&(0===(ye=x(Ce)).length&&(ye=[Ce.startContainer,Ce.endContainer],$e=!1),ye=ge.getFormatting().getAppliedStyles(ye)),void 0!==ye[0]&&Me&&(ye[0].styleProperties=Ee.mergeObjects(ye[0].styleProperties,Me)),!0===X.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)&&(qe.directTextStyling=qe.directParagraphStyling=I.isLocalCursorWithinOwnAnnotation()),qe.directTextStyling&&(qe.directTextStyling=$e&&void 0!==we&&we.getSelectionType()===ops.OdtCursor.RangeSelection),{enabledFeatures:qe,appliedStyles:ye,styleSummary:new gui.StyleSummary(ye)}}),je=ze.value(),E||(le.formatTextSelection=ie,le.setBold=ie,le.setItalic=ie,le.setHasUnderline=ie,le.setHasStrikethrough=ie,le.setFontSize=ie,le.setFontName=ie,le.toggleBold=ne,le.toggleItalic=ne,le.toggleUnderline=ne,le.toggleStrikethrough=ne),R||(le.alignParagraphCenter=Y,le.alignParagraphJustified=Y,le.alignParagraphLeft=Y,le.alignParagraphRight=Y,le.createParagraphStyleOps=function(){return[]},le.indent=Y,le.outdent=Y)},gui.DirectFormattingController.enabledChanged="enabled/changed",gui.DirectFormattingController.textStylingChanged="textStyling/changed",gui.DirectFormattingController.paragraphStylingChanged="paragraphStyling/changed",gui.DirectFormattingController.SelectionInfo=function(){},gui.KeyboardHandler=function(){function P(w,E){switch(E||(E=X.None),w){case gui.KeyboardHandler.KeyCode.LeftMeta:case gui.KeyboardHandler.KeyCode.RightMeta:case gui.KeyboardHandler.KeyCode.MetaInMozilla:E|=X.Meta;break;case gui.KeyboardHandler.KeyCode.Ctrl:E|=X.Ctrl;break;case gui.KeyboardHandler.KeyCode.Alt:E|=X.Alt;break;case gui.KeyboardHandler.KeyCode.Shift:E|=X.Shift}return w+":"+E}var X=gui.KeyboardHandler.Modifier,I=null,y={};this.setDefault=function(w){I=w},this.bind=function(w,E,R,C){w=P(w,E),runtime.assert(C||!1===y.hasOwnProperty(w),"tried to overwrite the callback handler of key combo: "+w),y[w]=R},this.unbind=function(w,E){var R=P(w,E);delete y[R]},this.reset=function(){I=null,y={}},this.handleEvent=function(w){var E=w.keyCode,R=X.None;w.metaKey&&(R|=X.Meta),w.ctrlKey&&(R|=X.Ctrl),w.altKey&&(R|=X.Alt),w.shiftKey&&(R|=X.Shift),E=P(E,R),R=!1,(E=y[E])?R=E():null!==I&&(R=I(w)),R&&(w.preventDefault?w.preventDefault():w.returnValue=!1)}},gui.KeyboardHandler.Modifier={None:0,Meta:1,Ctrl:2,Alt:4,CtrlAlt:6,Shift:8,MetaShift:9,CtrlShift:10,AltShift:12},gui.KeyboardHandler.KeyCode={Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Ctrl:17,Alt:18,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Delete:46,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LeftMeta:91,RightMeta:93,MetaInMozilla:224},gui.HyperlinkClickHandler=function(P,X,I){function y(){var l=P();runtime.assert(Boolean(l.classList),"Document container has no classList element"),l.classList.remove("webodf-inactiveLinks")}function w(){var l=P();runtime.assert(Boolean(l.classList),"Document container has no classList element"),l.classList.add("webodf-inactiveLinks")}function E(){s.removeEventListener("focus",w,!1),m.forEach(function(l){X.unbind(l.keyCode,l.modifier),I.unbind(l.keyCode,l.modifier)}),m.length=0}var C=gui.KeyboardHandler.Modifier,N=gui.KeyboardHandler.KeyCode,x=xmldom.XPath,S=odf.OdfUtils,s=runtime.getWindow(),u=C.None,m=[];runtime.assert(null!==s,"Expected to be run in an environment which has a global window, like a browser."),this.handleClick=function(l){var O,q,M=l.target||l.srcElement;if(l.ctrlKey?O=C.Ctrl:l.metaKey&&(O=C.Meta),u===C.None||u===O){e:{for(;null!==M;){if(S.isHyperlink(M))break e;if(S.isParagraph(M))break;M=M.parentNode}M=null}M&&""!==(M=S.getHyperlinkTarget(M))&&("#"===M[0]?(M=M.substring(1),O=P(),0===(q=x.getODFElementsWithXPath(O,"//text:bookmark-start[@text:name='"+M+"']",odf.Namespaces.lookupNamespaceURI)).length&&(q=x.getODFElementsWithXPath(O,"//text:bookmark[@text:name='"+M+"']",odf.Namespaces.lookupNamespaceURI)),0<q.length&&q[0].scrollIntoView(!0)):/^\s*(javascript|data):/.test(M)?runtime.log("WARN:","potentially malicious URL ignored"):s.open(M),l.preventDefault?l.preventDefault():l.returnValue=!1)}},this.setModifier=function(l){u!==l&&(runtime.assert(l===C.None||l===C.Ctrl||l===C.Meta,"Unsupported KeyboardHandler.Modifier value: "+l),(u=l)!==C.None?w():y(),function R(l){if(E(),l!==C.None){switch(s.addEventListener("focus",w,!1),l){case C.Ctrl:m.push({keyCode:N.Ctrl,modifier:C.None});break;case C.Meta:m.push({keyCode:N.LeftMeta,modifier:C.None}),m.push({keyCode:N.RightMeta,modifier:C.None}),m.push({keyCode:N.MetaInMozilla,modifier:C.None})}m.forEach(function(M){X.bind(M.keyCode,M.modifier,y),I.bind(M.keyCode,M.modifier,w)})}}(u))},this.getModifier=function(){return u},this.destroy=function(l){w(),E(),l()}},gui.EventManager=function(P){function X(F){function L(Ee,Le,Qe){var ae,fe=!1;ae="on"+Le,Ee.attachEvent&&(Ee.attachEvent(ae,Qe),fe=!0),!fe&&Ee.addEventListener&&(Ee.addEventListener(Le,Qe,!1),fe=!0),fe&&!B[Le]||!Ee.hasOwnProperty(ae)||(Ee[ae]=Qe)}function ie(Ee,Le,Qe){var ae="on"+Le;Ee.detachEvent&&Ee.detachEvent(ae,Qe),Ee.removeEventListener&&Ee.removeEventListener(Le,Qe,!1),Ee[ae]===Qe&&(Ee[ae]=null)}function Y(Ee){if(-1===le.indexOf(Ee)){if(le.push(Ee),ne.filters.every(function(Le){return Le(Ee)}))try{ge.emit(F,Ee)}catch(Le){runtime.log("Error occurred while processing "+F+":\n"+Le.message+"\n"+Le.stack)}runtime.setTimeout(function(){le.splice(le.indexOf(Ee),1)},0)}}var ne=this,le=[],ge=new core.EventNotifier([F]);this.filters=[],this.subscribe=function(Ee){ge.subscribe(F,Ee)},this.unsubscribe=function(Ee){ge.unsubscribe(F,Ee)},this.destroy=function(){ie(G,F,Y),ie(J,F,Y),ie(Q,F,Y)},A[F]&&L(G,F,Y),L(J,F,Y),L(Q,F,Y)}function I(F,L,ie){function Y(ge){ie(ge,ne,function(Ee){Ee.type=F,le.emit(F,Ee)})}var ne={},le=new core.EventNotifier([F]);this.subscribe=function(ge){le.subscribe(F,ge)},this.unsubscribe=function(ge){le.unsubscribe(F,ge)},this.destroy=function(){L.forEach(function(ge){U.unsubscribe(ge,Y)})},L.forEach(function(ge){U.subscribe(ge,Y)})}function y(F){runtime.clearTimeout(F),delete K[F]}function N(){Q.classList.add("webodf-touchEnabled"),U.unsubscribe("touchstart",N)}function x(F){var L=F.scrollX,ie=F.scrollY;this.restore=function(){F.scrollX===L&&F.scrollY===ie||F.scrollTo(L,ie)}}function S(F){var L=F.scrollTop,ie=F.scrollLeft;this.restore=function(){(F.scrollTop!==L||F.scrollLeft!==ie)&&(F.scrollTop=L,F.scrollLeft=ie)}}function s(F,L){var ie=$[F]||H[F]||null;return!ie&&L&&(ie=$[F]=new X(F)),ie}function u(F,L){s(F,!0).subscribe(L)}function m(F,L){var ie=s(F,!1);ie&&ie.unsubscribe(L)}function l(){return P.getDOMDocument().activeElement===J}function M(){l()&&J.blur(),J.setAttribute("disabled","true")}function O(){J.removeAttribute("disabled")}function ee(){var F;l()||(F=function q(F){for(var L=[];F;)(F.scrollWidth>F.clientWidth||F.scrollHeight>F.clientHeight)&&L.push(new S(F)),F=F.parentNode;return L.push(new x(G)),L}(J),O(),J.focus(),F.forEach(function(L){L.restore()}))}var J,F,L,G=runtime.getWindow(),B={beforecut:!0,beforepaste:!0,longpress:!0,drag:!0,dragstop:!0},A={mousedown:!0,mouseup:!0,focus:!0},H={},$={},Q=P.getCanvas().getElement(),U=this,K={};this.addFilter=function(F,L){s(F,!0).filters.push(L)},this.removeFilter=function(F,L){var ie=s(F,!0),Y=ie.filters.indexOf(L);-1!==Y&&ie.filters.splice(Y,1)},this.subscribe=u,this.unsubscribe=m,this.hasFocus=l,this.focus=ee,this.getEventTrap=function(){return J},this.setEditing=function(F){var L=l();L&&J.blur(),F?J.removeAttribute("readOnly"):J.setAttribute("readOnly","true"),L&&ee()},this.destroy=function(F){m("touchstart",N),Object.keys(K).forEach(function(L){y(parseInt(L,10))}),K.length=0,Object.keys(H).forEach(function(L){H[L].destroy()}),H={},m("mousedown",M),m("mouseup",O),m("contextmenu",O),Object.keys($).forEach(function(L){$[L].destroy()}),$={},J.parentNode.removeChild(J),F()},L=(F=P.getOdfCanvas().getSizer()).ownerDocument,runtime.assert(Boolean(G),"EventManager requires a window object to operate correctly"),(J=L.createElement("textarea")).id="eventTrap",J.setAttribute("tabindex","-1"),J.setAttribute("readOnly","true"),J.setAttribute("rows","1"),F.appendChild(J),u("mousedown",M),u("mouseup",O),u("contextmenu",O),H.longpress=new I("longpress",["touchstart","touchmove","touchend"],function E(F,L,ie){var Y=F.touches.length,ne=F.touches[0],le=L.timer;"touchmove"===F.type||"touchend"===F.type?le&&y(le):"touchstart"===F.type&&(1!==Y?runtime.clearTimeout(le):le=function w(F,L){var ie=runtime.setTimeout(function(){F(),y(ie)},L);return K[ie]=!0,ie}(function(){ie({clientX:ne.clientX,clientY:ne.clientY,pageX:ne.pageX,pageY:ne.pageY,target:F.target||F.srcElement||null,detail:1})},400)),L.timer=le}),H.drag=new I("drag",["touchstart","touchmove","touchend"],function R(F,L,ie){var Y=F.touches[0],ne=F.target||F.srcElement||null,le=L.target;1!==F.touches.length||"touchend"===F.type?le=null:"touchstart"===F.type&&"webodf-draggable"===ne.getAttribute("class")?le=ne:"touchmove"===F.type&&le&&(F.preventDefault(),F.stopPropagation(),ie({clientX:Y.clientX,clientY:Y.clientY,pageX:Y.pageX,pageY:Y.pageY,target:le,detail:1})),L.target=le}),H.dragstop=new I("dragstop",["drag","touchend"],function C(F,L,ie){var Y=F.target||F.srcElement||null,ne=L.dragging;"drag"===F.type?ne=!0:"touchend"===F.type&&ne&&(ne=!1,ie({clientX:(F=F.changedTouches[0]).clientX,clientY:F.clientY,pageX:F.pageX,pageY:F.pageY,target:Y,detail:1})),L.dragging=ne}),u("touchstart",N)},gui.IOSSafariSupport=function(P){function X(){I.innerHeight!==I.outerHeight&&(y.style.display="none",runtime.requestAnimationFrame(function(){y.style.display="block"}))}var I=runtime.getWindow(),y=P.getEventTrap();this.destroy=function(w){P.unsubscribe("focus",X),y.removeAttribute("autocapitalize"),y.style.WebkitTransform="",w()},P.subscribe("focus",X),y.setAttribute("autocapitalize","off"),y.style.WebkitTransform="translateX(-10000px)"},gui.HyperlinkController=function(P,X,I,y){function w(){var S=!0;!0===X.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)&&(S=I.isLocalCursorWithinOwnAnnotation()),S!==x&&N.emit(gui.HyperlinkController.enabledChanged,x=S)}function E(S){S.getMemberId()===y&&w()}var R=odf.OdfUtils,C=P.getOdtDocument(),N=new core.EventNotifier([gui.HyperlinkController.enabledChanged]),x=!1;this.isEnabled=function(){return x},this.subscribe=function(S,s){N.subscribe(S,s)},this.unsubscribe=function(S,s){N.unsubscribe(S,s)},this.addHyperlink=function(S,s){if(x){var u=C.getCursorSelection(y),m=new ops.OpApplyHyperlink,l=[];(0===u.length||s)&&(s=s||S,(m=new ops.OpInsertText).init({memberid:y,position:u.position,text:s}),u.length=s.length,l.push(m)),(m=new ops.OpApplyHyperlink).init({memberid:y,position:u.position,length:u.length,hyperlink:S}),l.push(m),P.enqueue(l)}},this.removeHyperlinks=function(){if(x){var O,q,S=C.createPositionIterator(C.getRootNode()),s=C.getCursor(y).getSelectedRange(),u=R.getHyperlinkElements(s),m=s.collapsed&&1===u.length,l=C.getDOMDocument().createRange(),M=[];0!==u.length&&(u.forEach(function(ee){l.selectNodeContents(ee),O=C.convertDomToCursorRange({anchorNode:l.startContainer,anchorOffset:l.startOffset,focusNode:l.endContainer,focusOffset:l.endOffset}),(q=new ops.OpRemoveHyperlink).init({memberid:y,position:O.position,length:O.length}),M.push(q)}),m||(-1===s.comparePoint(m=u[0],0)&&(l.setStart(m,0),l.setEnd(s.startContainer,s.startOffset),0<(O=C.convertDomToCursorRange({anchorNode:l.startContainer,anchorOffset:l.startOffset,focusNode:l.endContainer,focusOffset:l.endOffset})).length&&((q=new ops.OpApplyHyperlink).init({memberid:y,position:O.position,length:O.length,hyperlink:R.getHyperlinkTarget(m)}),M.push(q))),S.moveToEndOfNode(u=u[u.length-1]),S=S.unfilteredDomOffset(),1===s.comparePoint(u,S)&&(l.setStart(s.endContainer,s.endOffset),l.setEnd(u,S),0<(O=C.convertDomToCursorRange({anchorNode:l.startContainer,anchorOffset:l.startOffset,focusNode:l.endContainer,focusOffset:l.endOffset})).length&&((q=new ops.OpApplyHyperlink).init({memberid:y,position:O.position,length:O.length,hyperlink:R.getHyperlinkTarget(u)}),M.push(q)))),P.enqueue(M),l.detach())}},this.destroy=function(S){C.unsubscribe(ops.Document.signalCursorMoved,E),X.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,w),S()},C.subscribe(ops.Document.signalCursorMoved,E),X.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,w),w()},gui.HyperlinkController.enabledChanged="enabled/changed",gui.ImageController=function(P,X,I,y,w){function E(){var l=!0;!0===X.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)&&(l=I.isLocalCursorWithinOwnAnnotation()),l!==m&&u.emit(gui.ImageController.enabledChanged,m=l)}function R(l){l.getMemberId()===y&&E()}var C={"image/gif":".gif","image/jpeg":".jpg","image/png":".png"},N=odf.Namespaces.textns,x=P.getOdtDocument(),S=odf.OdfUtils,s=x.getFormatting(),u=new core.EventNotifier([gui.HyperlinkController.enabledChanged]),m=!1;this.isEnabled=function(){return m},this.subscribe=function(l,M){u.subscribe(l,M)},this.unsubscribe=function(l,M){u.unsubscribe(l,M)},this.insertImage=function(l,M,O,q){if(m){var A,ee=new core.CSSUnits;if(runtime.assert(0<O&&0<q,"Both width and height of the image should be greater than 0px."),q={width:O,height:q},O=S.getParagraphElement(x.getCursor(y).getNode()).getAttributeNS(N,"style-name")){O=s.getContentSize(O,"paragraph");var B=1,G=1;q.width>O.width&&(B=O.width/q.width),q.height>O.height&&(G=O.height/q.height),O=Math.min(B,G),q={width:q.width*O,height:q.height*O}}O=ee.convert(q.width,"px","cm")+"cm",ee=ee.convert(q.height,"px","cm")+"cm",G=x.getOdfCanvas().odfContainer().rootElement.styles,q=l.toLowerCase(),B=C.hasOwnProperty(q)?C[q]:null,q=[],runtime.assert(null!==B,"Image type is not supported: "+l),B="Pictures/"+w.generateImageName()+B,(A=new ops.OpSetBlob).init({memberid:y,filename:B,mimetype:l,content:M}),q.push(A),s.getStyleElement("Graphics","graphic",[G])||((l=new ops.OpAddStyle).init({memberid:y,styleName:"Graphics",styleFamily:"graphic",isAutomaticStyle:!1,setProperties:{"style:graphic-properties":{"text:anchor-type":"paragraph","svg:x":"0cm","svg:y":"0cm","style:wrap":"dynamic","style:number-wrapped-paragraphs":"no-limit","style:wrap-contour":"false","style:vertical-pos":"top","style:vertical-rel":"paragraph","style:horizontal-pos":"center","style:horizontal-rel":"paragraph"}}}),q.push(l)),l=w.generateStyleName(),(M=new ops.OpAddStyle).init({memberid:y,styleName:l,styleFamily:"graphic",isAutomaticStyle:!0,setProperties:{"style:parent-style-name":"Graphics","style:graphic-properties":{"style:vertical-pos":"top","style:vertical-rel":"baseline","style:horizontal-pos":"center","style:horizontal-rel":"paragraph","fo:background-color":"transparent","style:background-transparency":"100%","style:shadow":"none","style:mirror":"none","fo:clip":"rect(0cm, 0cm, 0cm, 0cm)","draw:luminance":"0%","draw:contrast":"0%","draw:red":"0%","draw:green":"0%","draw:blue":"0%","draw:gamma":"100%","draw:color-inversion":"false","draw:image-opacity":"100%","draw:color-mode":"standard"}}}),q.push(M),(A=new ops.OpInsertImage).init({memberid:y,position:x.getCursorPosition(y),filename:B,frameWidth:O,frameHeight:ee,frameStyleName:l,frameName:w.generateFrameName()}),q.push(A),P.enqueue(q)}},this.destroy=function(l){x.unsubscribe(ops.Document.signalCursorMoved,R),X.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,E),l()},x.subscribe(ops.Document.signalCursorMoved,R),X.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,E),E()},gui.ImageController.enabledChanged="enabled/changed",gui.ImageSelector=function(P){var I=odf.Namespaces.svgns,y="topLeft topRight bottomRight bottomLeft topMiddle rightMiddle bottomMiddle leftMiddle".split(" "),w=P.getElement().ownerDocument,E=!1;this.select=function(R){var C,N,x=w.getElementById("imageSelector");x||(x=function X(){var R=P.getSizer(),C=w.createElement("div");return C.id="imageSelector",C.style.borderWidth="1px",R.appendChild(C),y.forEach(function(N){var x=w.createElement("div");x.className=N,C.appendChild(x)}),C}()),E=!0,C=x.parentNode,N=R.getBoundingClientRect();var S=C.getBoundingClientRect(),s=P.getZoomLevel();C=(N.left-S.left)/s-1,N=(N.top-S.top)/s-1,x.style.display="block",x.style.left=C+"px",x.style.top=N+"px",x.style.width=R.getAttributeNS(I,"width"),x.style.height=R.getAttributeNS(I,"height")},this.clearSelection=function(){var R;E&&(R=w.getElementById("imageSelector"))&&(R.style.display="none"),E=!1},this.isSelectorElement=function(R){var C=w.getElementById("imageSelector");return!!C&&(R===C||R.parentNode===C)}},function(){function P(X){function I(C){return R=C.which&&String.fromCharCode(C.which)===E,E=void 0,!1===R}function y(){R=!1}function w(C){E=C.data,R=!1}var E,R=!1;this.destroy=function(C){X.unsubscribe("textInput",y),X.unsubscribe("compositionend",w),X.removeFilter("keypress",I),C()},X.subscribe("textInput",y),X.subscribe("compositionend",w),X.addFilter("keypress",I)}gui.InputMethodEditor=function(X,I){function y(J){s&&(J?s.getNode().setAttributeNS("urn:webodf:names:cursor","composing","true"):(s.getNode().removeAttributeNS("urn:webodf:names:cursor","composing"),l.textContent=""))}function w(){O&&(O=!1,y(!1),ee.emit(gui.InputMethodEditor.signalCompositionEnd,{data:q}),q="")}function E(){$||($=!0,w(),u.value=s&&s.getSelectedRange().collapsed?"":B.writeToString(s.getSelectedRange().cloneContents()),u.setSelectionRange(0,u.value.length),$=!1)}function R(){I.hasFocus()&&M.trigger()}function C(){G=void 0,M.cancel(),y(!0),O||ee.emit(gui.InputMethodEditor.signalCompositionStart,{data:""})}function N(J){J=G=J.data,O=!0,q+=J,M.trigger()}function x(J){J.data!==G&&(O=!0,q+=J=J.data,M.trigger()),G=void 0}function S(){l.textContent=u.value}var l,M,G,B,H,s=null,u=I.getEventTrap(),m=u.ownerDocument,O=!1,q="",ee=new core.EventNotifier([gui.InputMethodEditor.signalCompositionStart,gui.InputMethodEditor.signalCompositionEnd]),A=[],$=!1;this.subscribe=ee.subscribe,this.unsubscribe=ee.unsubscribe,this.registerCursor=function(J){J.getMemberId()===X&&((s=J).getNode().appendChild(l),J.subscribe(ops.OdtCursor.signalCursorUpdated,R),I.subscribe("input",S),I.subscribe("compositionupdate",S))},this.removeCursor=function(J){s&&J===X&&(s.getNode().removeChild(l),s.unsubscribe(ops.OdtCursor.signalCursorUpdated,R),I.unsubscribe("input",S),I.unsubscribe("compositionupdate",S),s=null)},this.destroy=function(J){I.unsubscribe("compositionstart",C),I.unsubscribe("compositionend",N),I.unsubscribe("textInput",x),I.unsubscribe("keypress",w),I.unsubscribe("focus",E),core.Async.destroyAll(H,J)},(B=new odf.TextSerializer).filter=new odf.OdfNodeFilter,I.subscribe("compositionstart",C),I.subscribe("compositionend",N),I.subscribe("textInput",x),I.subscribe("keypress",w),I.subscribe("focus",E),A.push(new P(I)),H=A.map(function(J){return J.destroy}),(l=m.createElement("span")).setAttribute("id","composer"),M=core.Task.createTimeoutTask(E,1),H.push(M.destroy)},gui.InputMethodEditor.signalCompositionStart="input/compositionstart",gui.InputMethodEditor.signalCompositionEnd="input/compositionend"}(),gui.MetadataController=function(P,X){function I(C){E.emit(gui.MetadataController.signalMetadataChanged,C)}function y(C){var N=-1===R.indexOf(C);return N||runtime.log("Setting "+C+" is restricted."),N}var w=P.getOdtDocument(),E=new core.EventNotifier([gui.MetadataController.signalMetadataChanged]),R=["dc:creator","dc:date","meta:editing-cycles","meta:editing-duration","meta:document-statistic"];this.setMetadata=function(C,N){var s,x={},S="";C&&Object.keys(C).filter(y).forEach(function(u){x[u]=C[u]}),N&&(S=N.filter(y).join(",")),(0<S.length||0<Object.keys(x).length)&&((s=new ops.OpUpdateMetadata).init({memberid:X,setProperties:x,removedProperties:0<S.length?{attributes:S}:null}),P.enqueue([s]))},this.getMetadata=function(C){var N;return runtime.assert("string"==typeof C,"Property must be a string"),N=C.split(":"),runtime.assert(2===N.length,"Property must be a namespace-prefixed string"),C=odf.Namespaces.lookupNamespaceURI(N[0]),runtime.assert(Boolean(C),"Prefix must be for an ODF namespace."),w.getOdfCanvas().odfContainer().getMetadata(C,N[1])},this.subscribe=function(C,N){E.subscribe(C,N)},this.unsubscribe=function(C,N){E.unsubscribe(C,N)},this.destroy=function(C){w.unsubscribe(ops.OdtDocument.signalMetadataUpdated,I),C()},w.subscribe(ops.OdtDocument.signalMetadataUpdated,I)},gui.MetadataController.signalMetadataChanged="metadata/changed",gui.PasteController=function(P,X,I,y){function w(){C=!0!==X.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)||I.isLocalCursorWithinOwnAnnotation()}function E(s){s.getMemberId()===y&&w()}var R=P.getOdtDocument(),C=!1,N=odf.Namespaces.textns,x=core.StepDirection.NEXT,S=odf.OdfUtils;this.isEnabled=function(){return C},this.paste=function(s){if(C){var u=R.getCursorPosition(y),m=R.getCursor(y).getNode(),l=(m=S.getParagraphElement(m)).getAttributeNS(N,"style-name")||"",M=u,O=[],q=R.convertDomPointToCursorStep(m,0,x);s.replace(/\r/g,"").split("\n").forEach(function(ee){var G=new ops.OpInsertText,B=new ops.OpSplitParagraph;G.init({memberid:y,position:M,text:ee,moveCursor:!0}),O.push(G),B.init({memberid:y,position:M+=ee.length,paragraphStyleName:l,sourceParagraphPosition:q,moveCursor:!0}),O.push(B),q=M+=1}),O.pop(),P.enqueue(O)}},this.destroy=function(s){R.unsubscribe(ops.Document.signalCursorMoved,E),X.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,w),s()},R.subscribe(ops.Document.signalCursorMoved,E),X.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,w),w()},gui.ClosestXOffsetScanner=function(P){function X(R){return null!==R&&void 0!==w&&Math.abs(R-P)>w}function I(R){null!==R&&!1===X(R)&&(w=Math.abs(R-P))}var w,y=this,E=gui.StepInfo.VisualDirection.LEFT_TO_RIGHT;this.token=void 0,this.process=function(R,C,N){var x,S;return R.visualDirection===E?(x=C&&C.right,S=N&&N.left):(x=C&&C.left,S=N&&N.right),!(!X(x)&&!X(S)&&((C||N)&&(I(x),I(S),y.token=R.token),1))}},gui.LineBoundaryScanner=function(){var P=this,X=null;this.token=void 0,this.process=function(I,y,w){var E;if(E=w)if(X){var C=X;E=Math.min(C.bottom-C.top,w.bottom-w.top);var R=Math.max(C.top,w.top);C=Math.min(C.bottom,w.bottom)-R,E=.4>=(0<E?C/E:0)}else E=!1;return!y||w&&!E||(P.token=I.token),!!E||(X=(I=X)&&y?{left:Math.min(I.left,y.left),right:Math.max(I.right,y.right),top:Math.min(I.top,y.top),bottom:Math.min(I.bottom,y.bottom)}:I||y,!1)}},gui.ParagraphBoundaryScanner=function(){var I,P=this,X=!1,y=odf.OdfUtils;this.token=void 0,this.process=function(w){var E=y.getParagraphElement(w.container());return X||(I=E,X=!0),I!==E||(P.token=w.token,!1)}},odf.WordBoundaryFilter=function(P,X){function I(l,M,O){for(var G,q=null,ee=P.getRootNode();l!==ee&&null!==l&&null===q;)O(G=0>M?l.previousSibling:l.nextSibling)===NodeFilter.FILTER_ACCEPT&&(q=G),l=l.parentNode;return q}function y(l,M){var O;return null===l?m.NO_NEIGHBOUR:R.isCharacterElement(l)?m.SPACE_CHAR:l.nodeType===w||R.isTextSpan(l)||R.isHyperlink(l)?(O=l.textContent.charAt(M()),N.test(O)?m.SPACE_CHAR:C.test(O)?m.PUNCTUATION_CHAR:m.WORD_CHAR):m.OTHER}var w=Node.TEXT_NODE,E=Node.ELEMENT_NODE,R=odf.OdfUtils,C=/[!-#%-*,-\/:-;?-@\[-\]_{}\u00a1\u00ab\u00b7\u00bb\u00bf;\u00b7\u055a-\u055f\u0589-\u058a\u05be\u05c0\u05c3\u05c6\u05f3-\u05f4\u0609-\u060a\u060c-\u060d\u061b\u061e-\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0964-\u0965\u0970\u0df4\u0e4f\u0e5a-\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u104a-\u104f\u10fb\u1361-\u1368\u166d-\u166e\u169b-\u169c\u16eb-\u16ed\u1735-\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944-\u1945\u19de-\u19df\u1a1e-\u1a1f\u1b5a-\u1b60\u1c3b-\u1c3f\u1c7e-\u1c7f\u2000-\u206e\u207d-\u207e\u208d-\u208e\u3008-\u3009\u2768-\u2775\u27c5-\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc-\u29fd\u2cf9-\u2cfc\u2cfe-\u2cff\u2e00-\u2e7e\u3000-\u303f\u30a0\u30fb\ua60d-\ua60f\ua673\ua67e\ua874-\ua877\ua8ce-\ua8cf\ua92e-\ua92f\ua95f\uaa5c-\uaa5f\ufd3e-\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a-\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a-\uff1b\uff1f-\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]|\ud800[\udd00-\udd01\udf9f\udfd0]|\ud802[\udd1f\udd3f\ude50-\ude58]|\ud809[\udc00-\udc7e]/,N=/\s/,x=core.PositionFilter.FilterResult.FILTER_ACCEPT,S=core.PositionFilter.FilterResult.FILTER_REJECT,s=odf.WordBoundaryFilter.IncludeWhitespace.TRAILING,u=odf.WordBoundaryFilter.IncludeWhitespace.LEADING,m={NO_NEIGHBOUR:0,SPACE_CHAR:1,PUNCTUATION_CHAR:2,WORD_CHAR:3,OTHER:4};this.acceptPosition=function(l){var M=l.container(),O=l.leftNode(),q=l.rightNode(),ee=l.unfilteredDomOffset,G=function(){return l.unfilteredDomOffset()-1};return M.nodeType===E&&(null===q&&(q=I(M,1,l.getNodeFilter())),null===O&&(O=I(M,-1,l.getNodeFilter()))),M!==q&&(ee=function(){return 0}),M!==O&&null!==O&&(G=function(){return O.textContent.length-1}),M=y(O,G),q=y(q,ee),M===m.WORD_CHAR&&q===m.WORD_CHAR||M===m.PUNCTUATION_CHAR&&q===m.PUNCTUATION_CHAR||X===s&&M!==m.NO_NEIGHBOUR&&q===m.SPACE_CHAR||X===u&&M===m.SPACE_CHAR&&q!==m.NO_NEIGHBOUR?S:x}},odf.WordBoundaryFilter.IncludeWhitespace={None:0,TRAILING:1,LEADING:2},gui.SelectionController=function(P,X){function I(L){var ie=L.spec();(L.isEdit||ie.memberid===X)&&($=void 0,J.cancel())}function y(){var L=O.getCursor(X).getNode();return O.createStepIterator(L,0,[G,A],O.getRootElement(L))}function w(L,ie,Y){Y=new odf.WordBoundaryFilter(O,Y);var ne=O.getRootElement(L)||O.getRootNode(),le=O.createRootFilter(ne);return O.createStepIterator(L,ie,[G,le,Y],ne)}function E(L,ie){return ie?{anchorNode:L.startContainer,anchorOffset:L.startOffset,focusNode:L.endContainer,focusOffset:L.endOffset}:{anchorNode:L.endContainer,anchorOffset:L.endOffset,focusNode:L.startContainer,focusOffset:L.startOffset}}function R(L,ie,Y){var ne=new ops.OpMoveCursor;return ne.init({memberid:X,position:L,length:ie||0,selectionType:Y}),ne}function C(L,ie,Y){var ne;(ne=E((ne=O.getCursor(X)).getSelectedRange(),ne.hasForwardSelection())).focusNode=L,ne.focusOffset=ie,Y||(ne.anchorNode=ne.focusNode,ne.anchorOffset=ne.focusOffset),L=O.convertDomToCursorRange(ne),P.enqueue([R(L.position,L.length)])}function N(L){var ie;(ie=w(L.startContainer,L.startOffset,Q)).roundToPreviousStep()&&L.setStart(ie.container(),ie.offset()),(ie=w(L.endContainer,L.endOffset,U)).roundToNextStep()&&L.setEnd(ie.container(),ie.offset())}function x(L){var ie=(Y=ee.getParagraphElements(L))[0],Y=Y[Y.length-1];ie&&L.setStart(ie,0),Y&&(ee.isParagraph(L.endContainer)&&0===L.endOffset?L.setEndBefore(Y):L.setEnd(Y,Y.childNodes.length))}function S(L,ie,Y,ne){var le,ge;ne?(le=Y.startContainer,ge=Y.startOffset):(le=Y.endContainer,ge=Y.endOffset),q.containsNode(L,le)||(ge=0>q.comparePoints(L,0,le,ge)?0:L.childNodes.length,le=L),(L=O.createStepIterator(le,ge,ie,ee.getParagraphElement(le)||L)).roundToClosestStep()||runtime.assert(!1,"No step found in requested range"),ne?Y.setStart(L.container(),L.offset()):Y.setEnd(L.container(),L.offset())}function s(L,ie){var Y=y();Y.advanceStep(L)&&C(Y.container(),Y.offset(),ie)}function u(L,ie){var Y,ne=$,le=[new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner];void 0===ne&&H&&(ne=H()),isNaN(ne)||(Y=y(),B.moveToFilteredStep(Y,L,le)&&Y.advanceStep(L)&&(le=[new gui.ClosestXOffsetScanner(ne),new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner],B.moveToFilteredStep(Y,L,le)&&(C(Y.container(),Y.offset(),ie),$=ne,J.restart())))}function m(L,ie){var Y=y(),ne=[new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner];B.moveToFilteredStep(Y,L,ne)&&C(Y.container(),Y.offset(),ie)}function l(L,ie){var Y;(Y=w((Y=E((Y=O.getCursor(X)).getSelectedRange(),Y.hasForwardSelection())).focusNode,Y.focusOffset,Q)).advanceStep(L)&&C(Y.container(),Y.offset(),ie)}function M(L,ie,Y){var le=!1,ne=E((ne=O.getCursor(X)).getSelectedRange(),ne.hasForwardSelection());le=O.getRootElement(ne.focusNode),runtime.assert(Boolean(le),"SelectionController: Cursor outside root"),(ne=O.createStepIterator(ne.focusNode,ne.focusOffset,[G,A],le)).roundToClosestStep(),ne.advanceStep(L)&&(Y=Y(ne.container()))&&(L===K?(ne.setPosition(Y,0),le=ne.roundToNextStep()):(ne.setPosition(Y,Y.childNodes.length),le=ne.roundToPreviousStep()),le&&C(ne.container(),ne.offset(),ie))}var $,J,O=P.getOdtDocument(),q=core.DomUtils,ee=odf.OdfUtils,G=O.getPositionFilter(),B=new gui.GuiStepUtils,A=O.createRootFilter(X),H=null,Q=odf.WordBoundaryFilter.IncludeWhitespace.TRAILING,U=odf.WordBoundaryFilter.IncludeWhitespace.LEADING,K=core.StepDirection.PREVIOUS,F=core.StepDirection.NEXT;this.selectionToRange=function(L){var ie=0<=q.comparePoints(L.anchorNode,L.anchorOffset,L.focusNode,L.focusOffset),Y=L.focusNode.ownerDocument.createRange();return ie?(Y.setStart(L.anchorNode,L.anchorOffset),Y.setEnd(L.focusNode,L.focusOffset)):(Y.setStart(L.focusNode,L.focusOffset),Y.setEnd(L.anchorNode,L.anchorOffset)),{range:Y,hasForwardSelection:ie}},this.rangeToSelection=E,this.selectImage=function(L){var ne,Y=O.getRootElement(L),ie=O.createRootFilter(Y);(Y=O.createStepIterator(L,0,[ie,O.getPositionFilter()],Y)).roundToPreviousStep()||runtime.assert(!1,"No walkable position before frame"),ie=Y.container(),ne=Y.offset(),Y.setPosition(L,L.childNodes.length),Y.roundToNextStep()||runtime.assert(!1,"No walkable position after frame"),L=R((L=O.convertDomToCursorRange({anchorNode:ie,anchorOffset:ne,focusNode:Y.container(),focusOffset:Y.offset()})).position,L.length,ops.OdtCursor.RegionSelection),P.enqueue([L])},this.expandToWordBoundaries=N,this.expandToParagraphBoundaries=x,this.selectRange=function(L,ie,Y){var le,ne=O.getOdfCanvas().getElement(),ge=[G];le=q.containsNode(ne,L.startContainer),ne=q.containsNode(ne,L.endContainer),(le||ne)&&(le&&ne&&(2===Y?N(L):3<=Y&&x(L)),(Y=O.getRootElement(ie?L.startContainer:L.endContainer))||(Y=O.getRootNode()),ge.push(O.createRootFilter(Y)),S(Y,ge,L,!0),S(Y,ge,L,!1),L=E(L,ie),ie=O.convertDomToCursorRange(L),L=O.getCursorSelection(X),(ie.position!==L.position||ie.length!==L.length)&&(L=R(ie.position,ie.length,ops.OdtCursor.RangeSelection),P.enqueue([L])))},this.moveCursorToLeft=function(){return s(K,!1),!0},this.moveCursorToRight=function(){return s(F,!1),!0},this.extendSelectionToLeft=function(){return s(K,!0),!0},this.extendSelectionToRight=function(){return s(F,!0),!0},this.setCaretXPositionLocator=function(L){H=L},this.moveCursorUp=function(){return u(K,!1),!0},this.moveCursorDown=function(){return u(F,!1),!0},this.extendSelectionUp=function(){return u(K,!0),!0},this.extendSelectionDown=function(){return u(F,!0),!0},this.moveCursorBeforeWord=function(){return l(K,!1),!0},this.moveCursorPastWord=function(){return l(F,!1),!0},this.extendSelectionBeforeWord=function(){return l(K,!0),!0},this.extendSelectionPastWord=function(){return l(F,!0),!0},this.moveCursorToLineStart=function(){return m(K,!1),!0},this.moveCursorToLineEnd=function(){return m(F,!1),!0},this.extendSelectionToLineStart=function(){return m(K,!0),!0},this.extendSelectionToLineEnd=function(){return m(F,!0),!0},this.extendSelectionToParagraphStart=function(){return M(K,!0,ee.getParagraphElement),!0},this.extendSelectionToParagraphEnd=function(){return M(F,!0,ee.getParagraphElement),!0},this.moveCursorToParagraphStart=function(){return M(K,!1,ee.getParagraphElement),!0},this.moveCursorToParagraphEnd=function(){return M(F,!1,ee.getParagraphElement),!0},this.moveCursorToDocumentStart=function(){return M(K,!1,O.getRootElement),!0},this.moveCursorToDocumentEnd=function(){return M(F,!1,O.getRootElement),!0},this.extendSelectionToDocumentStart=function(){return M(K,!0,O.getRootElement),!0},this.extendSelectionToDocumentEnd=function(){return M(F,!0,O.getRootElement),!0},this.extendSelectionToEntireDocument=function(){var ie,Y,ne,L=O.getCursor(X);return L=O.getRootElement(L.getNode()),runtime.assert(Boolean(L),"SelectionController: Cursor outside root"),(ne=O.createStepIterator(L,0,[G,A],L)).roundToClosestStep(),ie=ne.container(),Y=ne.offset(),ne.setPosition(L,L.childNodes.length),ne.roundToClosestStep(),L=O.convertDomToCursorRange({anchorNode:ie,anchorOffset:Y,focusNode:ne.container(),focusOffset:ne.offset()}),P.enqueue([R(L.position,L.length)]),!0},this.destroy=function(L){O.unsubscribe(ops.OdtDocument.signalOperationStart,I),core.Async.destroyAll([J.destroy],L)},J=core.Task.createTimeoutTask(function(){$=void 0},2e3),O.subscribe(ops.OdtDocument.signalOperationStart,I)},gui.TextController=function(P,X,I,y,w,E){function R(){M=!0!==X.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)||I.isLocalCursorWithinOwnAnnotation()}function C(ee){ee.getMemberId()===y&&R()}function N(ee,G,B){var A=[u.getPositionFilter()];return B&&A.push(u.createRootFilter(ee.startContainer)),(B=u.createStepIterator(ee.startContainer,ee.startOffset,A,G)).roundToClosestStep()||runtime.assert(!1,"No walkable step found in paragraph element at range start"),G=u.convertDomPointToCursorStep(B.container(),B.offset()),ee.collapsed?ee=G:(B.setPosition(ee.endContainer,ee.endOffset),B.roundToClosestStep()||runtime.assert(!1,"No walkable step found in paragraph element at range end"),ee=u.convertDomPointToCursorStep(B.container(),B.offset())),{position:G,length:ee-G}}function x(ee){var G,B,A,H=m.getParagraphElements(ee),$=ee.cloneRange(),J=[];return G=H[0],1<H.length&&(m.hasNoODFContent(G)&&(G=H[H.length-1]),B=G.getAttributeNS(odf.Namespaces.textns,"style-name")||""),H.forEach(function(Q,U){var K,F;$.setStart(Q,0),$.collapse(!0),K=N($,Q,!1).position,0<U&&((F=new ops.OpMergeParagraph).init({memberid:y,paragraphStyleName:B,destinationStartPosition:A,sourceStartPosition:K,moveCursor:1===U}),J.unshift(F)),A=K,$.selectNodeContents(Q),(K=l.rangeIntersection($,ee))&&0<(K=N(K,Q,!0)).length&&((F=new ops.OpRemoveText).init({memberid:y,position:K.position,length:K.length}),J.unshift(F))}),J}function S(ee){return 0>ee.length&&(ee.position+=ee.length,ee.length=-ee.length),ee}function s(ee){if(!M)return!1;var G,H,B=u.getCursor(y).getSelectedRange().cloneRange(),A=S(u.getCursorSelection(y));if(0===A.length){A=void 0,G=u.getCursor(y).getNode(),H=u.getRootElement(G);var $=[u.getPositionFilter(),u.createRootFilter(H)];(H=u.createStepIterator(G,0,$,H)).roundToClosestStep()&&(ee?H.nextStep():H.previousStep())&&(A=S(u.convertDomToCursorRange({anchorNode:G,anchorOffset:0,focusNode:H.container(),focusOffset:H.offset()})),ee?(B.setStart(G,0),B.setEnd(H.container(),H.offset())):(B.setStart(H.container(),H.offset()),B.setEnd(G,0)))}return A&&P.enqueue(x(B)),void 0!==A}var u=P.getOdtDocument(),m=odf.OdfUtils,l=core.DomUtils,M=!1,O=odf.Namespaces.textns,q=core.StepDirection.NEXT;this.isEnabled=function(){return M},this.enqueueParagraphSplittingOps=function(){if(!M)return!1;var A,ee=(A=u.getCursor(y)).getSelectedRange(),G=S(u.getCursorSelection(y)),B=[],H=(A=m.getParagraphElement(A.getNode())).getAttributeNS(O,"style-name")||"";return 0<G.length&&(B=B.concat(x(ee))),(ee=new ops.OpSplitParagraph).init({memberid:y,position:G.position,paragraphStyleName:H,sourceParagraphPosition:u.convertDomPointToCursorStep(A,0,q),moveCursor:!0}),B.push(ee),E&&(G=E(G.position+1),B=B.concat(G)),P.enqueue(B),!0},this.removeTextByBackspaceKey=function(){return s(!1)},this.removeTextByDeleteKey=function(){return s(!0)},this.removeCurrentSelection=function(){if(!M)return!1;var ee=u.getCursor(y).getSelectedRange();return P.enqueue(x(ee)),!0},this.insertText=function(ee){if(M){var G=u.getCursor(y).getSelectedRange(),B=S(u.getCursorSelection(y)),A=[],H=!1;0<B.length&&(A=A.concat(x(G)),H=!0),(G=new ops.OpInsertText).init({memberid:y,position:B.position,text:ee,moveCursor:!0}),A.push(G),w&&(ee=w(B.position,ee.length,H))&&A.push(ee),P.enqueue(A)}},this.destroy=function(ee){u.unsubscribe(ops.Document.signalCursorMoved,C),X.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,R),ee()},u.subscribe(ops.Document.signalCursorMoved,C),X.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,R),R()},gui.UndoManager=function(){},gui.UndoManager.prototype.subscribe=function(P,X){},gui.UndoManager.prototype.unsubscribe=function(P,X){},gui.UndoManager.prototype.setDocument=function(P){},gui.UndoManager.prototype.setInitialState=function(){},gui.UndoManager.prototype.initialize=function(){},gui.UndoManager.prototype.purgeInitialState=function(){},gui.UndoManager.prototype.setPlaybackFunction=function(P){},gui.UndoManager.prototype.hasUndoStates=function(){},gui.UndoManager.prototype.hasRedoStates=function(){},gui.UndoManager.prototype.moveForward=function(P){},gui.UndoManager.prototype.moveBackward=function(P){},gui.UndoManager.prototype.onOperationExecuted=function(P){},gui.UndoManager.prototype.isDocumentModified=function(){},gui.UndoManager.prototype.setDocumentModified=function(P){},gui.UndoManager.signalUndoStackChanged="undoStackChanged",gui.UndoManager.signalUndoStateCreated="undoStateCreated",gui.UndoManager.signalUndoStateModified="undoStateModified",gui.UndoManager.signalDocumentModifiedChanged="documentModifiedChanged",gui.SessionControllerOptions=function(){this.annotationsEnabled=this.directParagraphStylingEnabled=this.directTextStylingEnabled=!1},function(){var P=core.PositionFilter.FilterResult.FILTER_ACCEPT;gui.SessionController=function(X,I,y,w){function E(Ie,me){var Be=ne.getDOMDocument(),se=null;return Be.caretRangeFromPoint?se={container:(Be=Be.caretRangeFromPoint(Ie,me)).startContainer,offset:Be.startOffset}:Be.caretPositionFromPoint&&(Be=Be.caretPositionFromPoint(Ie,me))&&Be.offsetNode&&(se={container:Be.offsetNode,offset:Be.offset}),se}function R(Ie){var me=ne.getCursor(I).getSelectedRange();me.collapsed?Ie.preventDefault():ae.setDataFromRange(Ie,me)?Xe.removeCurrentSelection():runtime.log("Cut operation failed")}function C(){return!1!==ne.getCursor(I).getSelectedRange().collapsed}function N(Ie){var me=ne.getCursor(I).getSelectedRange();me.collapsed?Ie.preventDefault():ae.setDataFromRange(Ie,me)||runtime.log("Copy operation failed")}function x(Ie){var me;Y.clipboardData&&Y.clipboardData.getData?me=Y.clipboardData.getData("Text"):Ie.clipboardData&&Ie.clipboardData.getData&&(me=Ie.clipboardData.getData("text/plain")),me&&(Xe.removeCurrentSelection(),ct.paste(me)),Ie.preventDefault?Ie.preventDefault():Ie.returnValue=!1}function S(){return!1}function s(Ie){qe&&qe.onOperationExecuted(Ie)}function u(Ie){ne.emit(ops.OdtDocument.signalUndoStackChanged,Ie)}function m(){var Ie;return!!qe&&(Ie=ue.hasFocus(),qe.moveBackward(1),Ie&&ue.focus(),!0)}function l(){var Ie;return!!qe&&(Ie=ue.hasFocus(),qe.moveForward(1),Ie&&ue.focus(),!0)}function M(Ie){var me=ne.getCursor(I).getSelectedRange(),Be=(Ie.target||Ie.srcElement||null).getAttribute("end");me&&Be&&(Ie=E(Ie.clientX,Ie.clientY))&&(Re.setUnfilteredPosition(Ie.container,Ie.offset),ye.acceptPosition(Re)===P&&(me=me.cloneRange(),"left"===Be?me.setStart(Re.container(),Re.unfilteredDomOffset()):me.setEnd(Re.container(),Re.unfilteredDomOffset()),y.setSelectedRange(me,"right"===Be),ne.emit(ops.Document.signalCursorMoved,y)))}function O(){nt.selectRange(y.getSelectedRange(),y.hasForwardSelection(),1)}function q(){var Ie=Y.getSelection(),me=0<Ie.rangeCount&&nt.selectionToRange(Ie);ze&&me&&(Ce=!0,tt.clearSelection(),Re.setUnfilteredPosition(Ie.focusNode,Ie.focusOffset),ye.acceptPosition(Re)===P&&(2===Ze?nt.expandToWordBoundaries(me.range):3<=Ze&&nt.expandToParagraphBoundaries(me.range),y.setSelectedRange(me.range,me.hasForwardSelection),ne.emit(ops.Document.signalCursorMoved,y)))}function ee(Ie){var me=Ie.target||Ie.srcElement||null,Be=ne.getCursor(I);(ze=null!==me&&Ee.containsNode(ne.getOdfCanvas().getElement(),me))&&(Ce=!1,me=ne.getRootElement(me)||ne.getRootNode(),ye=ne.createRootFilter(me),Ze=0===Ie.button?Ie.detail:0,Be&&Ie.shiftKey?Y.getSelection().collapse(Be.getAnchorNode(),0):(Ie=Y.getSelection(),me=Be.getSelectedRange(),Ie.extend?Be.hasForwardSelection()?(Ie.collapse(me.startContainer,me.startOffset),Ie.extend(me.endContainer,me.endOffset)):(Ie.collapse(me.endContainer,me.endOffset),Ie.extend(me.startContainer,me.startOffset)):(Ie.removeAllRanges(),Ie.addRange(me.cloneRange()))),1<Ze&&q())}function G(Ie){var Be=ne.getRootElement(Ie),me=ne.createRootFilter(Be);return(Be=ne.createStepIterator(Ie,0,[me,ne.getPositionFilter()],Be)).setPosition(Ie,Ie.childNodes.length),Be.roundToNextStep()?{container:Be.container(),offset:Be.offset()}:null}function B(Ie){var me;me=(me=Y.getSelection())?{anchorNode:me.anchorNode,anchorOffset:me.anchorOffset,focusNode:me.focusNode,focusOffset:me.focusOffset}:null;var se,De,Be=Y.getSelection().isCollapsed;me.anchorNode||me.focusNode||!(se=E(Ie.clientX,Ie.clientY))||(me.anchorNode=se.container,me.anchorOffset=se.offset,me.focusNode=me.anchorNode,me.focusOffset=me.anchorOffset),Le.isImage(me.focusNode)&&0===me.focusOffset&&Le.isCharacterFrame(me.focusNode.parentNode)?(se=(De=me.focusNode.parentNode).getBoundingClientRect(),Ie.clientX>se.left&&(se=G(De))&&(me.focusNode=se.container,me.focusOffset=se.offset,Be&&(me.anchorNode=me.focusNode,me.anchorOffset=me.focusOffset))):Le.isImage(me.focusNode.firstChild)&&1===me.focusOffset&&Le.isCharacterFrame(me.focusNode)&&(se=G(me.focusNode))&&(me.anchorNode=me.focusNode=se.container,me.anchorOffset=me.focusOffset=se.offset),me.anchorNode&&me.focusNode&&(me=nt.selectionToRange(me),nt.selectRange(me.range,me.hasForwardSelection,0===Ie.button?Ie.detail:0)),ue.focus()}function A(Ie){var me;(me=E(Ie.clientX,Ie.clientY))&&(Ie=nt.selectionToRange(Ie={anchorNode:Ie=me.container,anchorOffset:me=me.offset,focusNode:Ie,focusOffset:me}),nt.selectRange(Ie.range,Ie.hasForwardSelection,2),ue.focus())}function H(Ie){var Be,se,De,me=Ie.target||Ie.srcElement||null;ot.processRequests(),ze&&(Le.isImage(me)&&Le.isCharacterFrame(me.parentNode)&&Y.getSelection().isCollapsed?(nt.selectImage(me.parentNode),ue.focus()):tt.isSelectorElement(me)?ue.focus():Ce?(se=(me=y.getSelectedRange()).collapsed,Le.isImage(me.endContainer)&&0===me.endOffset&&Le.isCharacterFrame(me.endContainer.parentNode)&&(De=G(De=me.endContainer.parentNode))&&(me.setEnd(De.container,De.offset),se&&me.collapse(!1)),nt.selectRange(me,y.hasForwardSelection(),0===Ie.button?Ie.detail:0),ue.focus()):Ct?B(Ie):(Be=Ee.cloneEvent(Ie),$e=runtime.setTimeout(function(){B(Be)},0)),Ze=0,Ce=ze=!1)}function $(Ie){var me=ne.getCursor(I).getSelectedRange();me.collapsed||Qe.exportRangeToDataTransfer(Ie.dataTransfer,me)}function J(){ze&&ue.focus(),Ze=0,Ce=ze=!1}function Q(Ie){H(Ie)}function U(Ie){var me=Ie.target||Ie.srcElement||null,Be=null;"annotationRemoveButton"===me.className?(runtime.assert(de,"Remove buttons are displayed on annotations while annotation editing is disabled in the controller."),Be=me.parentNode.getElementsByTagNameNS(odf.Namespaces.officens,"annotation").item(0),pe.removeAnnotation(Be),ue.focus()):"webodf-draggable"!==me.getAttribute("class")&&H(Ie)}function K(Ie){(Ie=Ie.data)&&(-1===Ie.indexOf("\n")?Xe.insertText(Ie):ct.paste(Ie))}function L(Ie){return function(me){return ne.getCursor(I).getSelectionType()!==ops.OdtCursor.RangeSelection||Ie(me)}}function ie(Ie){ue.unsubscribe("keydown",fe.handleEvent),ue.unsubscribe("keypress",Me.handleEvent),ue.unsubscribe("keyup",je.handleEvent),ue.unsubscribe("copy",N),ue.unsubscribe("mousedown",ee),ue.unsubscribe("mousemove",ot.trigger),ue.unsubscribe("mouseup",U),ue.unsubscribe("contextmenu",Q),ue.unsubscribe("dragstart",$),ue.unsubscribe("dragend",J),ue.unsubscribe("click",it.handleClick),ue.unsubscribe("longpress",A),ue.unsubscribe("drag",M),ue.unsubscribe("dragstop",O),ne.unsubscribe(ops.OdtDocument.signalOperationEnd,pt.trigger),ne.unsubscribe(ops.Document.signalCursorAdded,st.registerCursor),ne.unsubscribe(ops.Document.signalCursorRemoved,st.removeCursor),ne.unsubscribe(ops.OdtDocument.signalOperationEnd,s),Ie()}var $e,ot,pt,Nt,Y=runtime.getWindow(),ne=X.getOdtDocument(),le=new gui.SessionConstraints,ge=new gui.SessionContext(X,I),Ee=core.DomUtils,Le=odf.OdfUtils,Qe=new gui.MimeDataExporter,ae=new gui.Clipboard(Qe),fe=new gui.KeyboardHandler,Me=new gui.KeyboardHandler,je=new gui.KeyboardHandler,ze=!1,we=new odf.ObjectNameGenerator(ne.getOdfCanvas().odfContainer(),I),Ce=!1,ye=null,qe=null,ue=new gui.EventManager(ne),de=w.annotationsEnabled,pe=new gui.AnnotationController(X,le,I),xe=new gui.DirectFormattingController(X,le,ge,I,we,w.directTextStylingEnabled,w.directParagraphStylingEnabled),Xe=new gui.TextController(X,le,ge,I,xe.createCursorStyleOp,xe.createParagraphStyleOps),rt=new gui.ImageController(X,le,ge,I,we),tt=new gui.ImageSelector(ne.getOdfCanvas()),Re=ne.createPositionIterator(ne.getRootNode()),ct=new gui.PasteController(X,le,ge,I),st=new gui.InputMethodEditor(I,ue),Ze=0,it=new gui.HyperlinkClickHandler(ne.getOdfCanvas().getElement,fe,je),vt=new gui.HyperlinkController(X,le,ge,I),nt=new gui.SelectionController(X,I),gt=new gui.MetadataController(X,I),Ye=gui.KeyboardHandler.Modifier,et=gui.KeyboardHandler.KeyCode,Et=-1!==Y.navigator.appVersion.toLowerCase().indexOf("mac"),Ct=-1!==["iPad","iPod","iPhone"].indexOf(Y.navigator.platform);runtime.assert(null!==Y,"Expected to be run in an environment which has a global window, like a browser."),this.undo=m,this.redo=l,this.insertLocalCursor=function(){runtime.assert(void 0===X.getOdtDocument().getCursor(I),"Inserting local cursor a second time.");var Ie=new ops.OpAddCursor;Ie.init({memberid:I}),X.enqueue([Ie]),ue.focus()},this.removeLocalCursor=function(){runtime.assert(void 0!==X.getOdtDocument().getCursor(I),"Removing local cursor without inserting before.");var Ie=new ops.OpRemoveCursor;Ie.init({memberid:I}),X.enqueue([Ie])},this.startEditing=function(){st.subscribe(gui.InputMethodEditor.signalCompositionStart,Xe.removeCurrentSelection),st.subscribe(gui.InputMethodEditor.signalCompositionEnd,K),ue.subscribe("beforecut",C),ue.subscribe("cut",R),ue.subscribe("beforepaste",S),ue.subscribe("paste",x),qe&&qe.initialize(),ue.setEditing(!0),it.setModifier(Et?Ye.Meta:Ye.Ctrl),fe.bind(et.Backspace,Ye.None,function F(Ie){return function(){return Ie(),!0}}(Xe.removeTextByBackspaceKey),!0),fe.bind(et.Delete,Ye.None,Xe.removeTextByDeleteKey),fe.bind(et.Tab,Ye.None,L(function(){return Xe.insertText("\t"),!0})),Et?(fe.bind(et.Clear,Ye.None,Xe.removeCurrentSelection),fe.bind(et.B,Ye.Meta,L(xe.toggleBold)),fe.bind(et.I,Ye.Meta,L(xe.toggleItalic)),fe.bind(et.U,Ye.Meta,L(xe.toggleUnderline)),fe.bind(et.L,Ye.MetaShift,L(xe.alignParagraphLeft)),fe.bind(et.E,Ye.MetaShift,L(xe.alignParagraphCenter)),fe.bind(et.R,Ye.MetaShift,L(xe.alignParagraphRight)),fe.bind(et.J,Ye.MetaShift,L(xe.alignParagraphJustified)),de&&fe.bind(et.C,Ye.MetaShift,pe.addAnnotation),fe.bind(et.Z,Ye.Meta,m),fe.bind(et.Z,Ye.MetaShift,l)):(fe.bind(et.B,Ye.Ctrl,L(xe.toggleBold)),fe.bind(et.I,Ye.Ctrl,L(xe.toggleItalic)),fe.bind(et.U,Ye.Ctrl,L(xe.toggleUnderline)),fe.bind(et.L,Ye.CtrlShift,L(xe.alignParagraphLeft)),fe.bind(et.E,Ye.CtrlShift,L(xe.alignParagraphCenter)),fe.bind(et.R,Ye.CtrlShift,L(xe.alignParagraphRight)),fe.bind(et.J,Ye.CtrlShift,L(xe.alignParagraphJustified)),de&&fe.bind(et.C,Ye.CtrlAlt,pe.addAnnotation),fe.bind(et.Z,Ye.Ctrl,m),fe.bind(et.Z,Ye.CtrlShift,l)),Me.setDefault(L(function(Ie){var me;return!(!(me=null==Ie.which?String.fromCharCode(Ie.keyCode):0!==Ie.which&&0!==Ie.charCode?String.fromCharCode(Ie.which):null)||Ie.altKey||Ie.ctrlKey||Ie.metaKey||(Xe.insertText(me),0))})),Me.bind(et.Enter,Ye.None,L(Xe.enqueueParagraphSplittingOps))},this.endEditing=function(){st.unsubscribe(gui.InputMethodEditor.signalCompositionStart,Xe.removeCurrentSelection),st.unsubscribe(gui.InputMethodEditor.signalCompositionEnd,K),ue.unsubscribe("cut",R),ue.unsubscribe("beforecut",C),ue.unsubscribe("paste",x),ue.unsubscribe("beforepaste",S),ue.setEditing(!1),it.setModifier(Ye.None),fe.bind(et.Backspace,Ye.None,function(){return!0},!0),fe.unbind(et.Delete,Ye.None),fe.unbind(et.Tab,Ye.None),Et?(fe.unbind(et.Clear,Ye.None),fe.unbind(et.B,Ye.Meta),fe.unbind(et.I,Ye.Meta),fe.unbind(et.U,Ye.Meta),fe.unbind(et.L,Ye.MetaShift),fe.unbind(et.E,Ye.MetaShift),fe.unbind(et.R,Ye.MetaShift),fe.unbind(et.J,Ye.MetaShift),de&&fe.unbind(et.C,Ye.MetaShift),fe.unbind(et.Z,Ye.Meta),fe.unbind(et.Z,Ye.MetaShift)):(fe.unbind(et.B,Ye.Ctrl),fe.unbind(et.I,Ye.Ctrl),fe.unbind(et.U,Ye.Ctrl),fe.unbind(et.L,Ye.CtrlShift),fe.unbind(et.E,Ye.CtrlShift),fe.unbind(et.R,Ye.CtrlShift),fe.unbind(et.J,Ye.CtrlShift),de&&fe.unbind(et.C,Ye.CtrlAlt),fe.unbind(et.Z,Ye.Ctrl),fe.unbind(et.Z,Ye.CtrlShift)),Me.setDefault(null),Me.unbind(et.Enter,Ye.None)},this.getInputMemberId=function(){return I},this.getSession=function(){return X},this.getSessionConstraints=function(){return le},this.setUndoManager=function(Ie){qe&&qe.unsubscribe(gui.UndoManager.signalUndoStackChanged,u),(qe=Ie)&&(qe.setDocument(ne),qe.setPlaybackFunction(X.enqueue),qe.subscribe(gui.UndoManager.signalUndoStackChanged,u))},this.getUndoManager=function(){return qe},this.getMetadataController=function(){return gt},this.getAnnotationController=function(){return pe},this.getDirectFormattingController=function(){return xe},this.getHyperlinkClickHandler=function(){return it},this.getHyperlinkController=function(){return vt},this.getImageController=function(){return rt},this.getSelectionController=function(){return nt},this.getTextController=function(){return Xe},this.getEventManager=function(){return ue},this.getKeyboardHandlers=function(){return{keydown:fe,keypress:Me}},this.destroy=function(Ie){var me=[ot.destroy,pt.destroy,xe.destroy,st.destroy,ue.destroy,it.destroy,vt.destroy,gt.destroy,nt.destroy,Xe.destroy,ie];Nt&&me.unshift(Nt.destroy),runtime.clearTimeout($e),core.Async.destroyAll(me,Ie)},ot=core.Task.createRedrawTask(q),pt=core.Task.createRedrawTask(function(){var Ie=ne.getCursor(I);Ie&&Ie.getSelectionType()===ops.OdtCursor.RegionSelection&&(Ie=Le.getImageElements(Ie.getSelectedRange())[0])?tt.select(Ie.parentNode):tt.clearSelection()}),fe.bind(et.Left,Ye.None,L(nt.moveCursorToLeft)),fe.bind(et.Right,Ye.None,L(nt.moveCursorToRight)),fe.bind(et.Up,Ye.None,L(nt.moveCursorUp)),fe.bind(et.Down,Ye.None,L(nt.moveCursorDown)),fe.bind(et.Left,Ye.Shift,L(nt.extendSelectionToLeft)),fe.bind(et.Right,Ye.Shift,L(nt.extendSelectionToRight)),fe.bind(et.Up,Ye.Shift,L(nt.extendSelectionUp)),fe.bind(et.Down,Ye.Shift,L(nt.extendSelectionDown)),fe.bind(et.Home,Ye.None,L(nt.moveCursorToLineStart)),fe.bind(et.End,Ye.None,L(nt.moveCursorToLineEnd)),fe.bind(et.Home,Ye.Ctrl,L(nt.moveCursorToDocumentStart)),fe.bind(et.End,Ye.Ctrl,L(nt.moveCursorToDocumentEnd)),fe.bind(et.Home,Ye.Shift,L(nt.extendSelectionToLineStart)),fe.bind(et.End,Ye.Shift,L(nt.extendSelectionToLineEnd)),fe.bind(et.Up,Ye.CtrlShift,L(nt.extendSelectionToParagraphStart)),fe.bind(et.Down,Ye.CtrlShift,L(nt.extendSelectionToParagraphEnd)),fe.bind(et.Home,Ye.CtrlShift,L(nt.extendSelectionToDocumentStart)),fe.bind(et.End,Ye.CtrlShift,L(nt.extendSelectionToDocumentEnd)),Et?(fe.bind(et.Left,Ye.Alt,L(nt.moveCursorBeforeWord)),fe.bind(et.Right,Ye.Alt,L(nt.moveCursorPastWord)),fe.bind(et.Left,Ye.Meta,L(nt.moveCursorToLineStart)),fe.bind(et.Right,Ye.Meta,L(nt.moveCursorToLineEnd)),fe.bind(et.Home,Ye.Meta,L(nt.moveCursorToDocumentStart)),fe.bind(et.End,Ye.Meta,L(nt.moveCursorToDocumentEnd)),fe.bind(et.Left,Ye.AltShift,L(nt.extendSelectionBeforeWord)),fe.bind(et.Right,Ye.AltShift,L(nt.extendSelectionPastWord)),fe.bind(et.Left,Ye.MetaShift,L(nt.extendSelectionToLineStart)),fe.bind(et.Right,Ye.MetaShift,L(nt.extendSelectionToLineEnd)),fe.bind(et.Up,Ye.AltShift,L(nt.extendSelectionToParagraphStart)),fe.bind(et.Down,Ye.AltShift,L(nt.extendSelectionToParagraphEnd)),fe.bind(et.Up,Ye.MetaShift,L(nt.extendSelectionToDocumentStart)),fe.bind(et.Down,Ye.MetaShift,L(nt.extendSelectionToDocumentEnd)),fe.bind(et.A,Ye.Meta,L(nt.extendSelectionToEntireDocument))):(fe.bind(et.Left,Ye.Ctrl,L(nt.moveCursorBeforeWord)),fe.bind(et.Right,Ye.Ctrl,L(nt.moveCursorPastWord)),fe.bind(et.Left,Ye.CtrlShift,L(nt.extendSelectionBeforeWord)),fe.bind(et.Right,Ye.CtrlShift,L(nt.extendSelectionPastWord)),fe.bind(et.A,Ye.Ctrl,L(nt.extendSelectionToEntireDocument))),Ct&&(Nt=new gui.IOSSafariSupport(ue)),ue.subscribe("keydown",fe.handleEvent),ue.subscribe("keypress",Me.handleEvent),ue.subscribe("keyup",je.handleEvent),ue.subscribe("copy",N),ue.subscribe("mousedown",ee),ue.subscribe("mousemove",ot.trigger),ue.subscribe("mouseup",U),ue.subscribe("contextmenu",Q),ue.subscribe("dragstart",$),ue.subscribe("dragend",J),ue.subscribe("click",it.handleClick),ue.subscribe("longpress",A),ue.subscribe("drag",M),ue.subscribe("dragstop",O),ne.subscribe(ops.OdtDocument.signalOperationEnd,pt.trigger),ne.subscribe(ops.Document.signalCursorAdded,st.registerCursor),ne.subscribe(ops.Document.signalCursorRemoved,st.removeCursor),ne.subscribe(ops.OdtDocument.signalOperationEnd,s)}}(),gui.CaretManager=function(P,X){function I(x){return E.hasOwnProperty(x)?E[x]:null}function y(){return Object.keys(E).map(function(x){return E[x]})}function w(x){var S=E[x];S&&(delete E[x],x===P.getInputMemberId()?(C.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,S.ensureVisible),C.unsubscribe(ops.Document.signalCursorMoved,S.refreshCursorBlinking),N.unsubscribe("compositionupdate",S.handleUpdate),N.unsubscribe("compositionend",S.handleUpdate),N.unsubscribe("focus",S.setFocus),N.unsubscribe("blur",S.removeFocus),R.removeEventListener("focus",S.show,!1),R.removeEventListener("blur",S.hide,!1)):C.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,S.handleUpdate),S.destroy(function(){}))}var E={},R=runtime.getWindow(),C=P.getSession().getOdtDocument(),N=P.getEventManager();this.registerCursor=function(x,S,s){var u=x.getMemberId();return x=new gui.Caret(x,X,S,s),E[u]=x,u===P.getInputMemberId()?(runtime.log("Starting to track input on new cursor of "+u),C.subscribe(ops.OdtDocument.signalProcessingBatchEnd,x.ensureVisible),C.subscribe(ops.Document.signalCursorMoved,x.refreshCursorBlinking),N.subscribe("compositionupdate",x.handleUpdate),N.subscribe("compositionend",x.handleUpdate),N.subscribe("focus",x.setFocus),N.subscribe("blur",x.removeFocus),R.addEventListener("focus",x.show,!1),R.addEventListener("blur",x.hide,!1),x.setOverlayElement(N.getEventTrap())):C.subscribe(ops.OdtDocument.signalProcessingBatchEnd,x.handleUpdate),x},this.getCaret=I,this.getCarets=y,this.destroy=function(x){var S=y().map(function(s){return s.destroy});P.getSelectionController().setCaretXPositionLocator(null),C.unsubscribe(ops.Document.signalCursorRemoved,w),E={},core.Async.destroyAll(S,x)},P.getSelectionController().setCaretXPositionLocator(function(){var S,x=I(P.getInputMemberId());return x&&(S=x.getBoundingClientRect()),S?S.right:void 0}),C.subscribe(ops.Document.signalCursorRemoved,w)},gui.EditInfoHandle=function(P){var I,X=[],y=P.ownerDocument,w=y.documentElement.namespaceURI;this.setEdits=function(E){var R,C,N,x;for(X=E,core.DomUtils.removeAllChildNodes(I),E=0;E<X.length;E+=1)(R=y.createElementNS(w,"div")).className="editInfo",(C=y.createElementNS(w,"span")).className="editInfoColor",C.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",X[E].memberid),(N=y.createElementNS(w,"span")).className="editInfoAuthor",N.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",X[E].memberid),(x=y.createElementNS(w,"span")).className="editInfoTime",x.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",X[E].memberid),x.appendChild(y.createTextNode(X[E].time.toString())),R.appendChild(C),R.appendChild(N),R.appendChild(x),I.appendChild(R)},this.show=function(){I.style.display="block"},this.hide=function(){I.style.display="none"},this.destroy=function(E){P.removeChild(I),E()},(I=y.createElementNS(w,"div")).setAttribute("class","editInfoHandle"),I.style.display="none",P.appendChild(I)},ops.EditInfo=function(P,X){var y,w={};this.getNode=function(){return y},this.getOdtDocument=function(){return X},this.getEdits=function(){return w},this.getSortedEdits=function(){return function I(){var R,E=[];for(R in w)w.hasOwnProperty(R)&&E.push({memberid:R,time:w[R].time});return E.sort(function(C,N){return C.time-N.time}),E}()},this.addEdit=function(E,R){w[E]={time:R}},this.clearEdits=function(){w={}},this.destroy=function(E){P.parentNode&&P.removeChild(y),E()},y=X.getDOMDocument().createElementNS("urn:webodf:names:editinfo","editinfo"),P.insertBefore(y,P.firstChild)},gui.EditInfoMarker=function(P,X){function I(S,s){return runtime.setTimeout(function(){R.style.opacity=S},s)}var w,E,R,C,N,x,S,y=this;this.addEdit=function(S,s){var u=Date.now()-s;P.addEdit(S,s),E.setEdits(P.getSortedEdits()),R.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",S),runtime.clearTimeout(N),runtime.clearTimeout(x),1e4>u?(C=I(1,0),N=I(.5,1e4-u),x=I(.2,2e4-u)):1e4<=u&&2e4>u?(C=I(.5,0),x=I(.2,2e4-u)):C=I(.2,0)},this.getEdits=function(){return P.getEdits()},this.clearEdits=function(){P.clearEdits(),E.setEdits([]),R.hasAttributeNS("urn:webodf:names:editinfo","editinfo:memberid")&&R.removeAttributeNS("urn:webodf:names:editinfo","editinfo:memberid")},this.getEditInfo=function(){return P},this.show=function(){R.style.display="block"},this.hide=function(){y.hideHandle(),R.style.display="none"},this.showHandle=function(){E.show()},this.hideHandle=function(){E.hide()},this.destroy=function(S){runtime.clearTimeout(C),runtime.clearTimeout(N),runtime.clearTimeout(x),w.removeChild(R),E.destroy(function(s){s?S(s):P.destroy(S)})},S=P.getOdtDocument().getDOMDocument(),(R=S.createElementNS(S.documentElement.namespaceURI,"div")).setAttribute("class","editInfoMarker"),R.onmouseover=function(){y.showHandle()},R.onmouseout=function(){y.hideHandle()},(w=P.getNode()).appendChild(R),E=new gui.EditInfoHandle(w),X||y.hide()},gui.HyperlinkTooltipView=function(P,X){var E,R,C,N,I=core.DomUtils,y=odf.OdfUtils,w=runtime.getWindow();runtime.assert(null!==w,"Expected to be run in an environment which has a global window, like a browser."),this.showTooltip=function(N){var u,x=N.target||N.srcElement,S=P.getSizer(),s=P.getZoomLevel();e:{for(;x;){if(y.isHyperlink(x))break e;if(y.isParagraph(x)||y.isInlineRoot(x))break;x=x.parentNode}x=null}if(x){var m;switch(I.containsNode(S,C)||S.appendChild(C),u=R,X()){case gui.KeyboardHandler.Modifier.Ctrl:m=runtime.tr("Ctrl-click to follow link");break;case gui.KeyboardHandler.Modifier.Meta:m=runtime.tr("\u2318-click to follow link");break;default:m=""}u.textContent=m,E.textContent=y.getHyperlinkTarget(x),C.style.display="block",x=N.clientX>(u=w.innerWidth-C.offsetWidth-15)?u:N.clientX+15,N=((N=N.clientY>(u=w.innerHeight-C.offsetHeight-10)?u:N.clientY+10)-(S=S.getBoundingClientRect()).top)/s,C.style.left=(x=(x-S.left)/s)+"px",C.style.top=N+"px"}},this.hideTooltip=function(){C.style.display="none"},this.destroy=function(N){C.parentNode&&C.parentNode.removeChild(C),N()},N=P.getElement().ownerDocument,E=N.createElement("span"),R=N.createElement("span"),E.className="webodf-hyperlinkTooltipLink",R.className="webodf-hyperlinkTooltipText",(C=N.createElement("div")).className="webodf-hyperlinkTooltip",C.appendChild(E),C.appendChild(R),P.getElement().appendChild(C)},gui.OdfFieldView=function(P){var I,w,E,R,y=P.getElement().ownerDocument;this.showFieldHighlight=function(){I.appendChild(y.createTextNode(function X(){var E;return(E=odf.OdfSchema.getFields().map(function(R){return R.replace(":","|")})).join(",\n")+"\n{ background-color: #D0D0D0; }\n\n"+E.map(function(R){return R+":empty::after"}).join(",\n")+"\n{ content:' '; white-space: pre; }\n"}()))},this.hideFieldHighlight=function(){for(var w=I.sheet,E=w.cssRules;E.length;)w.deleteRule(E.length-1)},this.destroy=function(w){I.parentNode&&I.parentNode.removeChild(I),w()},w=y.getElementsByTagName("head").item(0),E=y.createElement("style"),R="",E.type="text/css",E.media="screen, print, handheld, projection",odf.Namespaces.forEachPrefix(function(C,N){R+="@namespace "+C+" url("+N+");\n"}),E.appendChild(y.createTextNode(R)),w.appendChild(E),I=E},gui.ShadowCursor=function(P){var X=P.getDOMDocument().createRange(),I=!0;this.removeFromDocument=function(){},this.getMemberId=function(){return gui.ShadowCursor.ShadowCursorMemberId},this.getSelectedRange=function(){return X},this.setSelectedRange=function(y,w){X=y,I=!1!==w},this.hasForwardSelection=function(){return I},this.getDocument=function(){return P},this.getSelectionType=function(){return ops.OdtCursor.RangeSelection},X.setStart(P.getRootNode(),0)},gui.ShadowCursor.ShadowCursorMemberId="",gui.SelectionView=function(P){},gui.SelectionView.prototype.rerender=function(){},gui.SelectionView.prototype.show=function(){},gui.SelectionView.prototype.hide=function(){},gui.SelectionView.prototype.destroy=function(P){},gui.SelectionViewManager=function(P){function X(){return Object.keys(I).map(function(y){return I[y]})}var I={};this.getSelectionView=function(y){return I.hasOwnProperty(y)?I[y]:null},this.getSelectionViews=X,this.removeSelectionView=function(y){I.hasOwnProperty(y)&&(I[y].destroy(function(){}),delete I[y])},this.hideSelectionView=function(y){I.hasOwnProperty(y)&&I[y].hide()},this.showSelectionView=function(y){I.hasOwnProperty(y)&&I[y].show()},this.rerenderSelectionViews=function(){Object.keys(I).forEach(function(y){I[y].rerender()})},this.registerCursor=function(y,w){var E=y.getMemberId(),R=new P(y);return w?R.show():R.hide(),I[E]=R},this.destroy=function(y){var E=X();!function w(R,C){C?y(C):R<E.length?E[R].destroy(function(N){w(R+1,N)}):y()}(0,void 0)}},gui.SessionViewOptions=function(){this.caretBlinksOnRangeSelect=this.caretAvatarsInitiallyVisible=this.editInfoMarkersInitiallyVisible=!0},function(){function P(X,I){return void 0!==X?Boolean(X):I}gui.SessionView=function(X,I,y,w,E,R){function C(F){F.memberId===I&&$.getViewport().scrollIntoView(F.annotation.getBoundingClientRect())}function N(){var F=document.getElementsByTagName("head").item(0),L=document.createElement("style");return L.type="text/css",L.media="screen, print, handheld, projection",F.appendChild(L),L}function S(F){var L,ie;for(ie in A)A.hasOwnProperty(ie)&&(L=A[ie],F?L.show():L.hide())}function s(F){E.getCarets().forEach(function(L){F?L.showHandle():L.hideHandle()})}function u(F){!function x(F,L,ie){function Y(ne,le,ge){le=ne+'[editinfo|memberid="'+F+'"]'+ge+le;e:{var Ee=G.firstChild;for(ne=ne+'[editinfo|memberid="'+F+'"]'+ge+"{";Ee;){if(Ee.nodeType===Node.TEXT_NODE&&0===Ee.data.indexOf(ne)){ne=Ee;break e}Ee=Ee.nextSibling}ne=null}ne?ne.data=le:G.appendChild(document.createTextNode(le))}Y("div.editInfoMarker","{ background-color: "+ie+"; }",""),Y("span.editInfoColor","{ background-color: "+ie+"; }",""),Y("span.editInfoAuthor",'{ content: "'+L+'"; }',":before"),Y("dc|creator","{ background-color: "+ie+"; }",""),Y(".webodf-selectionOverlay","{ fill: "+ie+"; stroke: "+ie+";}",""),F===I&&(Y(".webodf-touchEnabled .webodf-selectionOverlay","{ display: block; }"," > .webodf-draggable"),F=gui.ShadowCursor.ShadowCursorMemberId,Y(".webodf-selectionOverlay","{ fill: "+ie+"; stroke: "+ie+";}",""),Y(".webodf-touchEnabled .webodf-selectionOverlay","{ display: block; }"," > .webodf-draggable"))}(F.getMemberId(),(F=F.getProperties()).fullName,F.color)}function m(F){var L=F.getMemberId(),ie=y.getOdtDocument().getMember(L).getProperties();E.registerCursor(F,U,K),R.registerCursor(F,!0),(F=E.getCaret(L))&&(F.setAvatarImageUrl(ie.imageUrl),F.setColor(ie.color)),runtime.log("+++ View here +++ eagerly created an Caret for '"+L+"'! +++")}function l(F){F=F.getMemberId();var L=R.getSelectionView(I),ie=R.getSelectionView(gui.ShadowCursor.ShadowCursorMemberId),Y=E.getCaret(I);F===I?(ie.hide(),L&&L.show(),Y&&Y.show()):F===gui.ShadowCursor.ShadowCursorMemberId&&(ie.show(),L&&L.hide(),Y&&Y.hide())}function M(F){R.removeSelectionView(F)}function O(F){var L=F.paragraphElement,ie=F.memberId;F=F.timeStamp;var Y,ne="",le=L.getElementsByTagNameNS("urn:webodf:names:editinfo","editinfo").item(0);le?(ne=le.getAttributeNS("urn:webodf:names:editinfo","id"),Y=A[ne]):(ne=Math.random().toString(),Y=new ops.EditInfo(L,y.getOdtDocument()),Y=new gui.EditInfoMarker(Y,Q),(le=L.getElementsByTagNameNS("urn:webodf:names:editinfo","editinfo").item(0)).setAttributeNS("urn:webodf:names:editinfo","id",ne),A[ne]=Y),Y.addEdit(ie,new Date(F)),J.trigger()}function q(){var F;B.hasChildNodes()&&core.DomUtils.removeAllChildNodes(B),!0===w.getState(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN)&&(F=y.getOdtDocument().getMember(I))&&(F=F.getProperties().fullName,B.appendChild(document.createTextNode(".annotationWrapper:not([creator = '"+F+"']) .annotationRemoveButton { display: none; }")))}function ee(F){var L=Object.keys(A).map(function(ie){return A[ie]});H.unsubscribe(ops.Document.signalMemberAdded,u),H.unsubscribe(ops.Document.signalMemberUpdated,u),H.unsubscribe(ops.Document.signalCursorAdded,m),H.unsubscribe(ops.Document.signalCursorRemoved,M),H.unsubscribe(ops.OdtDocument.signalParagraphChanged,O),H.unsubscribe(ops.Document.signalCursorMoved,l),H.unsubscribe(ops.OdtDocument.signalParagraphChanged,R.rerenderSelectionViews),H.unsubscribe(ops.OdtDocument.signalTableAdded,R.rerenderSelectionViews),H.unsubscribe(ops.OdtDocument.signalParagraphStyleModified,R.rerenderSelectionViews),w.unsubscribe(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN,q),H.unsubscribe(ops.Document.signalMemberAdded,q),H.unsubscribe(ops.Document.signalMemberUpdated,q),G.parentNode.removeChild(G),B.parentNode.removeChild(B),function ie(Y,ne){ne?F(ne):Y<L.length?L[Y].destroy(function(le){ie(Y+1,le)}):F()}(0,void 0)}var G,B,H,$,J,A={},Q=P(X.editInfoMarkersInitiallyVisible,!0),U=P(X.caretAvatarsInitiallyVisible,!0),K=P(X.caretBlinksOnRangeSelect,!0);this.showEditInfoMarkers=function(){Q||S(Q=!0)},this.hideEditInfoMarkers=function(){Q&&S(Q=!1)},this.showCaretAvatars=function(){U||s(U=!0)},this.hideCaretAvatars=function(){U&&s(U=!1)},this.getSession=function(){return y},this.getCaret=function(F){return E.getCaret(F)},this.destroy=function(F){var L=[J.destroy,ee];H.unsubscribe(ops.OdtDocument.signalAnnotationAdded,C),core.Async.destroyAll(L,F)},H=y.getOdtDocument(),$=H.getOdfCanvas(),H.subscribe(ops.OdtDocument.signalAnnotationAdded,C),H.subscribe(ops.Document.signalMemberAdded,u),H.subscribe(ops.Document.signalMemberUpdated,u),H.subscribe(ops.Document.signalCursorAdded,m),H.subscribe(ops.Document.signalCursorRemoved,M),H.subscribe(ops.OdtDocument.signalParagraphChanged,O),H.subscribe(ops.Document.signalCursorMoved,l),H.subscribe(ops.OdtDocument.signalParagraphChanged,R.rerenderSelectionViews),H.subscribe(ops.OdtDocument.signalTableAdded,R.rerenderSelectionViews),H.subscribe(ops.OdtDocument.signalParagraphStyleModified,R.rerenderSelectionViews),w.subscribe(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN,q),H.subscribe(ops.Document.signalMemberAdded,q),H.subscribe(ops.Document.signalMemberUpdated,q),(G=N()).appendChild(document.createTextNode("@namespace editinfo url(urn:webodf:names:editinfo);")),G.appendChild(document.createTextNode("@namespace dc url(http://purl.org/dc/elements/1.1/);")),B=N(),q(),J=core.Task.createRedrawTask(function(){var F=$.getAnnotationViewManager();F&&(F.rehighlightAnnotations(),H.fixCursorPositions())})}}(),gui.SvgSelectionView=function(P){function X(){var F=u.getRootNode();m!==F&&(m=F,(l=u.getCanvas().getSizer()).appendChild(O),O.setAttribute("class","webodf-selectionOverlay"),ee.setAttribute("class","webodf-draggable"),G.setAttribute("class","webodf-draggable"),ee.setAttribute("end","left"),G.setAttribute("end","right"),ee.setAttribute("r",8),G.setAttribute("r",8),O.appendChild(q),O.appendChild(ee),O.appendChild(G))}function I(F){return F=F.getBoundingClientRect(),Boolean(F&&0!==F.height)}function w(F,L){var ie={};return ie.top=Math.min(F.top,L.top),ie.left=Math.min(F.left,L.left),ie.right=Math.max(F.right,L.right),ie.bottom=Math.max(F.bottom,L.bottom),ie.width=ie.right-ie.left,ie.height=ie.bottom-ie.top,ie}function E(F,L){return L&&0<L.width&&0<L.height&&(F=F?w(F,L):L),F}function C(F,L){var ie=F.getBoundingClientRect(),Y={width:0};return Y.top=ie.top,Y.bottom=ie.bottom,Y.height=ie.height,Y.left=Y.right=L?ie.right:ie.left,Y}function x(F){$&&F===P&&K.trigger()}function S(F){ee.setAttribute("r",F=8/F),G.setAttribute("r",F)}function s(F){l.removeChild(O),l.classList.remove("webodf-virtualSelections"),P.getDocument().unsubscribe(ops.Document.signalCursorMoved,x),H.unsubscribe(gui.ZoomHelper.signalZoomChanged,S),F()}var m,l,K,F,u=P.getDocument(),M=u.getDOMDocument(),O=M.createElementNS("http://www.w3.org/2000/svg","svg"),q=M.createElementNS("http://www.w3.org/2000/svg","polygon"),ee=M.createElementNS("http://www.w3.org/2000/svg","circle"),G=M.createElementNS("http://www.w3.org/2000/svg","circle"),B=odf.OdfUtils,A=core.DomUtils,H=u.getCanvas().getZoomHelper(),$=!0,J=P.getDocument().createPositionIterator(u.getRootNode()),Q=NodeFilter.FILTER_ACCEPT,U=NodeFilter.FILTER_REJECT;this.rerender=function(){$&&K.trigger()},this.show=function(){$=!0,K.trigger()},this.hide=function(){$=!1,K.trigger()},this.destroy=function(F){core.Async.destroyAll([K.destroy,s],F)},F=P.getMemberId(),K=core.Task.createRedrawTask(function N(){var L,F=P.getSelectedRange();if(L=$&&P.getSelectionType()===ops.OdtCursor.RangeSelection&&!F.collapsed){X();var ne,le,ge,Ee,Le,Qe,ie=A.getBoundingClientRect(l),Y=H.getZoomLevel();if(F=function y(F){var ne,L=B.getTextElements(F,!0,!1),ie=F.cloneRange(),Y=F.cloneRange();if(F=F.cloneRange(),!L.length)return null;e:{var le=L[ne=0],ge=ie.startContainer===le?ie.startOffset:0,Ee=ge;for(ie.setStart(le,ge),ie.setEnd(le,Ee);!I(ie);){if(le.nodeType===Node.ELEMENT_NODE&&Ee<le.childNodes.length)Ee=le.childNodes.length;else if(le.nodeType===Node.TEXT_NODE&&Ee<le.length)Ee+=1;else{if(!L[ne]){ne=!1;break e}le=L[ne],ne+=1,ge=Ee=0}ie.setStart(le,ge),ie.setEnd(le,Ee)}ne=!0}if(!ne)return null;e:{for(Ee=ge=Y.endContainer===(le=L[ne=L.length-1])?Y.endOffset:le.nodeType===Node.TEXT_NODE?le.length:le.childNodes.length,Y.setStart(le,ge),Y.setEnd(le,Ee);!I(Y);){if(le.nodeType===Node.ELEMENT_NODE&&0<ge)ge=0;else if(le.nodeType===Node.TEXT_NODE&&0<ge)--ge;else{if(!L[ne]){L=!1;break e}le=L[ne],--ne,ge=Ee=le.length||le.childNodes.length}Y.setStart(le,ge),Y.setEnd(le,Ee)}L=!0}return L?(F.setStart(ie.startContainer,ie.startOffset),F.setEnd(Y.endContainer,Y.endOffset),{firstRange:ie,lastRange:Y,fillerRange:F}):null}(F),F){var ae;for(ne=F.lastRange,le=F.fillerRange,ge=A.translateRect(C(L=F.firstRange,!1),ie,Y),Le=A.translateRect(C(ne,!0),ie,Y),Ee=(Ee=function R(F){function L(Ce){return J.setUnfilteredPosition(Ce,0),ze.acceptNode(Ce)===Q&&je.acceptPosition(J)===Q?Q:U}var Le,Qe,je,we,Ce,ye,Y=F.commonAncestorContainer,ne=F.startContainer,le=F.endContainer,ge=F.startOffset,Ee=F.endOffset,ae=null,Me=M.createRange(),ze=new odf.OdfNodeFilter;if(ne===Y||le===Y)return ae=(Me=F.cloneRange()).getBoundingClientRect(),Me.detach(),ae;for(F=ne;F.parentNode!==Y;)F=F.parentNode;for(Qe=le;Qe.parentNode!==Y;)Qe=Qe.parentNode;for(je=u.createRootFilter(ne),Y=F.nextSibling;Y&&Y!==Qe;)ye=void 0,ye=null,L(Ce=Y)===Q&&(ye=A.getBoundingClientRect(Ce)),ae=E(ae,ye),Y=Y.nextSibling;if(B.isParagraph(F))ae=E(ae,A.getBoundingClientRect(F));else if(F.nodeType===Node.TEXT_NODE)Me.setStart(Y=F,ge),Me.setEnd(Y,Y===Qe?Ee:Y.length),ae=E(ae,Me.getBoundingClientRect());else for(Y=(we=M.createTreeWalker(F,NodeFilter.SHOW_TEXT,L,!1)).currentNode=ne;Y&&Y!==le;)Me.setStart(Y,ge),Me.setEnd(Y,Y.length),ae=E(ae,Me.getBoundingClientRect()),Le=Y,ge=0,Y=we.nextNode();if(Le||(Le=ne),B.isParagraph(Qe))ae=E(ae,A.getBoundingClientRect(Qe));else if(Qe.nodeType===Node.TEXT_NODE)Me.setStart(Y=Qe,Y===F?ge:0),Me.setEnd(Y,Ee),ae=E(ae,Me.getBoundingClientRect());else for(Y=(we=M.createTreeWalker(Qe,NodeFilter.SHOW_TEXT,L,!1)).currentNode=le;Y&&Y!==Le;)Me.setStart(Y,0),Me.setEnd(Y,Ee),ae=E(ae,Me.getBoundingClientRect()),(Y=we.previousNode())&&(Ee=Y.length);return ae}(le))?A.translateRect(Ee,ie,Y):w(ge,Le),Qe=Ee.left,Ee=ge.left+Math.max(0,Ee.width-(ge.left-Ee.left)),ie=Math.min(ge.top,Le.top),Qe=[{x:ge.left,y:ie+ge.height},{x:ge.left,y:ie},{x:Ee,y:ie},{x:Ee,y:(Y=Le.top+Le.height)-Le.height},{x:Le.right,y:Y-Le.height},{x:Le.right,y:Y},{x:Qe,y:Y},{x:Qe,y:ie+ge.height},{x:ge.left,y:ie+ge.height}],Ee="",ae=0;ae<Qe.length;ae+=1)Ee+=Qe[ae].x+","+Qe[ae].y+" ";q.setAttribute("points",Ee),ee.setAttribute("cx",ge.left),ee.setAttribute("cy",ie+ge.height/2),G.setAttribute("cx",Le.right),G.setAttribute("cy",Y-Le.height/2),L.detach(),ne.detach(),le.detach()}L=Boolean(F)}O.style.display=L?"block":"none"}),X(),O.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",F),l.classList.add("webodf-virtualSelections"),P.getDocument().subscribe(ops.Document.signalCursorMoved,x),H.subscribe(gui.ZoomHelper.signalZoomChanged,S),S(H.getZoomLevel())},gui.UndoStateRules=function(){function P(w,E){var R=w.length;this.previous=function(){for(--R;0<=R;--R)if(E(w[R]))return w[R];return null}}function X(w){var E;return(w=w.spec()).hasOwnProperty("position")&&(E=w.position),E}function I(w){return w.isEdit}function y(w,E,R){return R?(w=X(w))-(E=X(E))==E-(R=X(R)):0==(R=X(w)-X(E))||1===Math.abs(R)}this.isEditOperation=I,this.isPartOfOperationSet=function(w,E){var C,R=void 0!==w.group;if(!w.isEdit||0===E.length||(C=E[E.length-1],R&&w.group===C.group))return!0;e:switch(w.spec().optype){case"RemoveText":case"InsertText":C=!0;break e;default:C=!1}if(C&&E.some(I)){if(R){var N;R=w.spec().optype;var s,u,x=(C=new P(E,I)).previous(),S=null;for(runtime.assert(Boolean(x),"No edit operations found in state"),runtime.assert(void 0!==(u=x.group),"Operation has no group"),s=1;x&&x.group===u;){if(R===x.spec().optype){N=x;break}x=C.previous()}if(N){for(x=C.previous();x;){if(x.group!==u){if(2===s)break;u=x.group,s+=1}if(R===x.spec().optype){S=x;break}x=C.previous()}N=y(w,N,S)}else N=!1;return N}return N=w.spec().optype,C=(R=new P(E,I)).previous(),runtime.assert(Boolean(C),"No edit operations found in state"),N===C.spec().optype&&y(w,C,R.previous())}return!1}},function(){function P(y,w){this.mainId=void 0!==y?y:-1,this.subId=void 0!==w?w:-1}function X(y,w,E){var C,N,x;this.addOperation=function(S){y.isEditOperation(S)&&(x+=1),N.push(S)},this.isNextStateId=function(S){return S.mainId===C&&S.subId===x},this.getNextStateId=function(){return new P(C,x)},this.getOperations=function(){return N},C=I+=1,N=w||[],x=w&&E?w.reduce(function R(S,s){return S+(y.isEditOperation(s)?1:0)},0):0}var I=0;gui.TrivialUndoManager=function(y){function w(){return!0!==B.isNextStateId(G)}function E(U){0<(U=U.getOperations()).length&&(Q=!0,q(U),Q=!1)}function R(){$.emit(gui.UndoManager.signalUndoStackChanged,{undoAvailable:m.hasUndoStates(),redoAvailable:m.hasRedoStates()})}function C(U){var K=w();U!==K&&$.emit(gui.UndoManager.signalDocumentModifiedChanged,K)}function N(){B!==O&&B!==A[A.length-1]&&A.push(B)}function x(U){var K=U.previousSibling||U.nextSibling;U.parentNode.removeChild(U),l.normalizeTextNodes(K)}function S(U){return Object.keys(U).map(function(K){return U[K]})}function u(){var U=w(),K=M=ee.cloneDocumentElement();l.getElementsByTagNameNS(K,"urn:webodf:names:cursor","cursor").forEach(x),l.getElementsByTagNameNS(K,"urn:webodf:names:cursor","anchor").forEach(x),N(),B=O=function s(U){function K(le){var ge=le.spec();if(ie[ge.memberid])switch(ge.optype){case"AddCursor":F[ge.memberid]||(F[ge.memberid]=le,delete ie[ge.memberid],--Y);break;case"MoveCursor":L[ge.memberid]||(L[ge.memberid]=le)}}var Y,ne,F={},L={},ie={};for(ne=U.pop(),ee.getMemberIds().forEach(function(le){ie[le]=!0}),Y=Object.keys(ie).length;ne&&0<Y;)(ne=ne.getOperations()).reverse(),ne.forEach(K),ne=U.pop();return new X(J,S(F).concat(S(L)))}([O].concat(A)),A.length=0,H.length=0,U||(G=B.getNextStateId()),R(),C(U)}var M,O,q,ee,G,B,m=this,l=core.DomUtils,A=[],H=[],$=new core.EventNotifier([gui.UndoManager.signalUndoStackChanged,gui.UndoManager.signalUndoStateCreated,gui.UndoManager.signalUndoStateModified,gui.UndoManager.signalDocumentModifiedChanged,gui.TrivialUndoManager.signalDocumentRootReplaced]),J=y||new gui.UndoStateRules,Q=!1;this.subscribe=function(U,K){$.subscribe(U,K)},this.unsubscribe=function(U,K){$.unsubscribe(U,K)},this.isDocumentModified=w,this.setDocumentModified=function(U){w()!==U&&(G=U?new P:B.getNextStateId(),$.emit(gui.UndoManager.signalDocumentModifiedChanged,U))},this.hasUndoStates=function(){return 0<A.length},this.hasRedoStates=function(){return 0<H.length},this.setDocument=function(U){ee=U},this.purgeInitialState=function(){var U=w();A.length=0,H.length=0,B=O=new X(J),G=B.getNextStateId(),M=null,R(),C(U)},this.setInitialState=u,this.initialize=function(){M||u()},this.setPlaybackFunction=function(U){q=U},this.onOperationExecuted=function(U){if(!Q){var K=w();J.isEditOperation(U)&&(B===O||0<H.length)||!J.isPartOfOperationSet(U,B.getOperations())?(H.length=0,N(),B=new X(J,[U],!0),A.push(B),$.emit(gui.UndoManager.signalUndoStateCreated,{operations:B.getOperations()}),R()):(B.addOperation(U),$.emit(gui.UndoManager.signalUndoStateModified,{operations:B.getOperations()})),C(K)}},this.moveForward=function(U){for(var L,K=0,F=w();U&&H.length;)L=H.pop(),A.push(L),E(L),--U,K+=1;return K&&(B=A[A.length-1],R(),C(F)),K},this.moveBackward=function(U){for(var K=0,F=w();U&&A.length;)H.push(A.pop()),--U,K+=1;return K&&(ee.getMemberIds().forEach(function(L){ee.hasCursor(L)&&ee.removeCursor(L)}),ee.setDocumentElement(M.cloneNode(!0)),$.emit(gui.TrivialUndoManager.signalDocumentRootReplaced,{}),E(O),A.forEach(E),B=A[A.length-1]||O,R(),C(F)),K},B=O=new X(J),G=B.getNextStateId()},gui.TrivialUndoManager.signalDocumentRootReplaced="documentRootReplaced"}(),odf.GraphicProperties=function(P,X,I){var y=this,w=odf.Namespaces.stylens,E=odf.Namespaces.svgns;this.verticalPos=function(){return y.data.value("verticalPos")},this.verticalRel=function(){return y.data.value("verticalRel")},this.horizontalPos=function(){return y.data.value("horizontalPos")},this.horizontalRel=function(){return y.data.value("horizontalRel")},this.strokeWidth=function(){return y.data.value("strokeWidth")},y.data=new odf.LazyStyleProperties(void 0===I?void 0:I.data,{verticalPos:function(){var R=P.getAttributeNS(w,"vertical-pos");return""===R?void 0:R},verticalRel:function(){var R=P.getAttributeNS(w,"vertical-rel");return""===R?void 0:R},horizontalPos:function(){var R=P.getAttributeNS(w,"horizontal-pos");return""===R?void 0:R},horizontalRel:function(){var R=P.getAttributeNS(w,"horizontal-rel");return""===R?void 0:R},strokeWidth:function(){var R=P.getAttributeNS(E,"stroke-width");return X.parseLength(R)}})},odf.ComputedGraphicProperties=function(){var P;this.setGraphicProperties=function(X){P=X},this.verticalPos=function(){return P&&P.verticalPos()||"from-top"},this.verticalRel=function(){return P&&P.verticalRel()||"page"},this.horizontalPos=function(){return P&&P.horizontalPos()||"from-left"},this.horizontalRel=function(){return P&&P.horizontalRel()||"page"}},odf.PageLayoutProperties=function(P,X,I){var y=this,w=odf.Namespaces.fons;this.pageHeight=function(){return y.data.value("pageHeight")||1123},this.pageWidth=function(){return y.data.value("pageWidth")||794},y.data=new odf.LazyStyleProperties(void 0===I?void 0:I.data,{pageHeight:function(){var E;return P&&(E=P.getAttributeNS(w,"page-height"),E=X.parseLength(E)),E},pageWidth:function(){var E;return P&&(E=P.getAttributeNS(w,"page-width"),E=X.parseLength(E)),E}})},odf.PageLayout=function(P,X,I){var y=null;P&&(y=X.getPropertiesElement("page-layout-properties",P)),this.pageLayout=new odf.PageLayoutProperties(y,X,I&&I.pageLayout)},odf.PageLayoutCache=function(){},odf.PageLayoutCache.prototype.getPageLayout=function(P){},odf.PageLayoutCache.prototype.getDefaultPageLayout=function(){},odf.ParagraphProperties=function(P,X,I){var y=this,w=odf.Namespaces.fons;this.marginTop=function(){return y.data.value("marginTop")},y.data=new odf.LazyStyleProperties(void 0===I?void 0:I.data,{marginTop:function(){var E=P.getAttributeNS(w,"margin-top");return X.parsePositiveLengthOrPercent(E,"marginTop",I&&I.data)}})},odf.ComputedParagraphProperties=function(){var P={},X=[];this.setStyleChain=function(I){X=I,P={}},this.marginTop=function(){var I,y;if(P.hasOwnProperty("marginTop"))I=P.marginTop;else{for(y=0;void 0===I&&y<X.length;y+=1)I=X[y].marginTop();P.marginTop=I}return I||0}},odf.TextProperties=function(P,X,I){var y=this,w=odf.Namespaces.fons;this.fontSize=function(){return y.data.value("fontSize")},y.data=new odf.LazyStyleProperties(void 0===I?void 0:I.data,{fontSize:function(){var E=P.getAttributeNS(w,"font-size");return X.parsePositiveLengthOrPercent(E,"fontSize",I&&I.data)}})},odf.ComputedTextProperties=function(){var P={},X=[];this.setStyleChain=function(I){X=I,P={}},this.fontSize=function(){var I,y;if(P.hasOwnProperty("fontSize"))I=P.fontSize;else{for(y=0;void 0===I&&y<X.length;y+=1)I=X[y].fontSize();P.fontSize=I}return I||12}},odf.MasterPage=function(P,X){var I;P?(I=P.getAttributeNS(odf.Namespaces.stylens,"page-layout-name"),this.pageLayout=X.getPageLayout(I)):this.pageLayout=X.getDefaultPageLayout()},odf.MasterPageCache=function(){},odf.MasterPageCache.prototype.getMasterPage=function(P){},odf.StylePileEntry=function(P,X,I,y){var w,E,R;this.masterPage=function(){var w=P.getAttributeNS(odf.Namespaces.stylens,"master-page-name"),E=null;return w&&(E=I.getMasterPage(w)),E},w=this,R=null,("graphic"===(E=P.getAttributeNS(odf.Namespaces.stylens,"family"))||"chart"===E)&&(w.graphic=void 0===y?void 0:y.graphic,null!==(R=X.getPropertiesElement("graphic-properties",P,R))&&(w.graphic=new odf.GraphicProperties(R,X,w.graphic))),("paragraph"===E||"table-cell"===E||"graphic"===E||"presentation"===E||"chart"===E)&&(w.paragraph=void 0===y?void 0:y.paragraph,null!==(R=X.getPropertiesElement("paragraph-properties",P,R))&&(w.paragraph=new odf.ParagraphProperties(R,X,w.paragraph))),("text"===E||"paragraph"===E||"table-cell"===E||"graphic"===E||"presentation"===E||"chart"===E)&&(w.text=void 0===y?void 0:y.text,null!==(R=X.getPropertiesElement("text-properties",P,R))&&(w.text=new odf.TextProperties(R,X,w.text)))},odf.StylePile=function(P,X){function I(S,s){var u,m;return S.hasAttributeNS(y,"parent-style-name")&&(m=S.getAttributeNS(y,"parent-style-name"),-1===s.indexOf(m)&&(u=x(m,s))),new odf.StylePileEntry(S,P,X,u)}var R,x,y=odf.Namespaces.stylens,w={},E={},C={},N={};x=function(S,s){var m,u=C[S];return!u&&(m=w[S])&&(s.push(S),u=I(m,s),C[S]=u),u},this.getStyle=function(S){var u,s=N[S]||C[S],m=[];return s||((u=E[S])||(u=w[S])&&m.push(S),u&&(s=I(u,m))),s},this.addCommonStyle=function(S){var s;S.hasAttributeNS(y,"name")&&(s=S.getAttributeNS(y,"name"),w.hasOwnProperty(s)||(w[s]=S))},this.addAutomaticStyle=function(S){var s;S.hasAttributeNS(y,"name")&&(s=S.getAttributeNS(y,"name"),E.hasOwnProperty(s)||(E[s]=S))},this.setDefaultStyle=function(S){void 0===R&&(R=I(S,[]))},this.getDefaultStyle=function(){return R}},odf.ComputedGraphicStyle=function(){this.text=new odf.ComputedTextProperties,this.paragraph=new odf.ComputedParagraphProperties,this.graphic=new odf.ComputedGraphicProperties},odf.ComputedParagraphStyle=function(){this.text=new odf.ComputedTextProperties,this.paragraph=new odf.ComputedParagraphProperties},odf.ComputedTextStyle=function(){this.text=new odf.ComputedTextProperties},odf.StyleCache=function(P){function X(J,Q,U,K){var F;if(Q=U.getAttributeNS(Q,"class-names"))for(Q=Q.split(" "),F=0;F<Q.length;F+=1)(U=Q[F])&&(K.push(J),K.push(U))}function I(J,Q){var U=O.getStyleName("paragraph",J);return void 0!==U&&(Q.push("paragraph"),Q.push(U)),J.namespaceURI!==l||"h"!==J.localName&&"p"!==J.localName||X("paragraph",l,J,Q),Q}function y(J,Q,U){var F,L,Y,K=[];for(F=0;F<J.length;F+=2)void 0!==(Y=C[J[F]].getStyle(Y=J[F+1]))&&void 0!==(Y=Y[Q])&&Y!==L&&(K.push(Y),L=Y);return(Y=C[U].getDefaultStyle())&&void 0!==(Y=Y[Q])&&Y!==L&&K.push(Y),K}function w(J,Q){var U=O.getStyleName("text",J),K=J.parentNode;return void 0!==U&&(Q.push("text"),Q.push(U)),"span"===J.localName&&J.namespaceURI===l&&X("text",l,J,Q),!K||K===P||(K.namespaceURI!==l||"p"!==K.localName&&"h"!==K.localName?w(K,Q):I(K,Q)),Q}function E(J){return J=J.getAttributeNS(M,"family"),C[J]}var C,N,x,S,s,u,m,ee,G,B,A,H,$,R=this,l=odf.Namespaces.textns,M=odf.Namespaces.stylens,O=new odf.StyleInfo,q=new odf.StyleParseUtils;this.getComputedGraphicStyle=function(J){var Q=[];void 0!==(J=O.getStyleName("graphic",J))&&(Q.push("graphic"),Q.push(J)),J=Q.join("/");var U=S[J];return runtime.assert(Q.length%2==0,"Invalid style chain."),void 0===U&&((U=new odf.ComputedGraphicStyle).graphic.setGraphicProperties(y(Q,"graphic","graphic")[0]),U.text.setStyleChain(y(Q,"text","graphic")),U.paragraph.setStyleChain(y(Q,"paragraph","graphic")),S[J]=U),U},this.getComputedParagraphStyle=function(J){var Q=(J=I(J,[])).join("/"),U=x[Q];return runtime.assert(J.length%2==0,"Invalid style chain."),void 0===U&&((U=new odf.ComputedParagraphStyle).text.setStyleChain(y(J,"text","paragraph")),U.paragraph.setStyleChain(y(J,"paragraph","paragraph")),x[Q]=U),U},this.getComputedTextStyle=function(J){var Q=(J=w(J,[])).join("/"),U=N[Q];return runtime.assert(J.length%2==0,"Invalid style chain."),void 0===U&&((U=new odf.ComputedTextStyle).text.setStyleChain(y(J,"text","text")),N[Q]=U),U},this.getPageLayout=function(J){var Q=$[J];return Q||((Q=H[J])?(Q=new odf.PageLayout(Q,q,A),$[J]=Q):Q=A),Q},this.getDefaultPageLayout=function(){return A},this.getMasterPage=function(J){var Q=G[J];return void 0===Q&&((Q=ee[J])?(Q=new odf.MasterPage(Q,R),G[J]=Q):Q=null),Q},this.getDefaultMasterPage=function(){return B},this.update=function(){var J,Q,U=null,K=null;for(N={},x={},S={},ee={},G={},$={},H={},s=new odf.StylePile(q,R),u=new odf.StylePile(q,R),m=new odf.StylePile(q,R),C={text:s,paragraph:u,graphic:m},J=P.styles.firstElementChild;J;)J.namespaceURI===M&&((Q=E(J))?"style"===J.localName?Q.addCommonStyle(J):"default-style"===J.localName&&Q.setDefaultStyle(J):"default-page-layout"===J.localName&&(U=J)),J=J.nextElementSibling;for(A=new odf.PageLayout(U,q),J=P.automaticStyles.firstElementChild;J;)J.namespaceURI===M&&((Q=E(J))&&"style"===J.localName?Q.addAutomaticStyle(J):"page-layout"===J.localName&&(H[J.getAttributeNS(M,"name")]=J)),J=J.nextElementSibling;for(J=P.masterStyles.firstElementChild;J;)J.namespaceURI===M&&"master-page"===J.localName&&(K=K||J,0<(U=(Q=J).getAttributeNS(M,"name")).length&&!ee.hasOwnProperty(U)&&(ee[U]=Q)),J=J.nextElementSibling;B=new odf.MasterPage(K,R)}},ops.OperationTransformMatrix=function(){function P(s){s.position+=s.length,s.length*=-1}function X(s){var u=0>s.length;return u&&P(s),u}function I(s,u){var l=[];return s&&["style:parent-style-name","style:next-style-name"].forEach(function m(M){s[M]===u&&l.push(M)}),l}function y(s,u){s&&["style:parent-style-name","style:next-style-name"].forEach(function m(l){s[l]===u&&delete s[l]})}function w(s){var u={};return Object.keys(s).forEach(function(m){u[m]="object"==typeof s[m]?w(s[m]):s[m]}),u}function E(s,u,m,l){var M,ee,O=!1,q=!1,G=[];if(l&&l.attributes&&(G=l.attributes.split(",")),s&&(m||0<G.length)&&Object.keys(s).forEach(function(B){var H,A=s[B];"object"!=typeof A&&(m&&(H=m[B]),void 0!==H?(delete s[B],q=!0,H===A&&(delete m[B],O=!0)):-1!==G.indexOf(B)&&(delete s[B],q=!0))}),u&&u.attributes&&(m||0<G.length)){for(ee=u.attributes.split(","),l=0;l<ee.length;l+=1)M=ee[l],(m&&void 0!==m[M]||G&&-1!==G.indexOf(M))&&(ee.splice(l,1),--l,q=!0);0<ee.length?u.attributes=ee.join(","):delete u.attributes}return{majorChanged:O,minorChanged:q}}function R(s){for(var u in s)if(s.hasOwnProperty(u))return!0;return!1}function C(s){for(var u in s)if(s.hasOwnProperty(u)&&("attributes"!==u||0<s.attributes.length))return!0;return!1}function N(s,u,m,l,M){var B,O=s?s[M]:null,q=u?u[M]:null,ee=m?m[M]:null,G=l?l[M]:null;return B=E(O,q,ee,G),O&&!R(O)&&delete s[M],q&&!C(q)&&delete u[M],ee&&!R(ee)&&delete m[M],G&&!C(G)&&delete l[M],B}function x(s,u){return{opSpecsA:[s],opSpecsB:[u]}}var S;S={AddAnnotation:{AddAnnotation:function(s,u,m){var l;return s.position<u.position?(l=s,m=u):u.position<s.position?(l=u,m=s):(l=m?s:u,m=m?u:s),m.position<l.position+l.length&&(l.length+=2),m.position+=2,{opSpecsA:[s],opSpecsB:[u]}},AddCursor:x,AddMember:x,AddStyle:x,ApplyDirectStyling:function(s,u){return s.position<=u.position?u.position+=2:s.position<=u.position+u.length&&(u.length+=2),{opSpecsA:[s],opSpecsB:[u]}},InsertText:function(s,u){return u.position<=s.position?s.position+=u.text.length:(void 0!==s.length&&u.position<=s.position+s.length&&(s.length+=u.text.length),u.position+=2),{opSpecsA:[s],opSpecsB:[u]}},MergeParagraph:function(s,u){return u.sourceStartPosition<=s.position?--s.position:(void 0!==s.length&&u.sourceStartPosition<=s.position+s.length&&--s.length,u.sourceStartPosition+=2,s.position<u.destinationStartPosition&&(u.destinationStartPosition+=2)),{opSpecsA:[s],opSpecsB:[u]}},MoveCursor:function(s,u){var m=X(u);return s.position<u.position?u.position+=2:s.position<u.position+u.length&&(u.length+=2),m&&P(u),{opSpecsA:[s],opSpecsB:[u]}},RemoveAnnotation:function(s,u){return s.position<u.position?(u.position<s.position+s.length&&(s.length-=u.length+2),u.position+=2):s.position-=u.length+2,{opSpecsA:[s],opSpecsB:[u]}},RemoveCursor:x,RemoveMember:x,RemoveStyle:x,RemoveText:function(s,u){var M,m=u.position,l=u.position+u.length,O=[s],q=[u];return s.position<=u.position?u.position+=2:s.position<l&&(u.length=s.position-u.position,q.unshift(M={optype:"RemoveText",memberid:u.memberid,timestamp:u.timestamp,position:s.position+2,length:l-s.position})),u.position+u.length<=s.position?(s.position-=u.length,void 0!==s.length&&M&&(s.length=M.length>=s.length?0:s.length-M.length)):void 0!==s.length&&(l<=(M=s.position+s.length)?s.length-=u.length:m<M&&(s.length=m-s.position)),{opSpecsA:O,opSpecsB:q}},SetParagraphStyle:function(s,u){return s.position<u.position&&(u.position+=2),{opSpecsA:[s],opSpecsB:[u]}},SplitParagraph:function(s,u){return s.position<u.sourceParagraphPosition&&(u.sourceParagraphPosition+=2),u.position<=s.position?s.position+=1:(void 0!==s.length&&u.position<=s.position+s.length&&(s.length+=1),u.position+=2),{opSpecsA:[s],opSpecsB:[u]}},UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},AddCursor:{AddCursor:x,AddMember:x,AddStyle:x,ApplyDirectStyling:x,InsertText:x,MergeParagraph:x,MoveCursor:x,RemoveAnnotation:x,RemoveCursor:x,RemoveMember:x,RemoveStyle:x,RemoveText:x,SetParagraphStyle:x,SplitParagraph:x,UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},AddMember:{AddStyle:x,ApplyDirectStyling:x,InsertText:x,MergeParagraph:x,MoveCursor:x,RemoveAnnotation:x,RemoveCursor:x,RemoveStyle:x,RemoveText:x,SetParagraphStyle:x,SplitParagraph:x,UpdateMetadata:x,UpdateParagraphStyle:x},AddStyle:{AddStyle:x,ApplyDirectStyling:x,InsertText:x,MergeParagraph:x,MoveCursor:x,RemoveAnnotation:x,RemoveCursor:x,RemoveMember:x,RemoveStyle:function(s,u){var m,l=[s],M=[u];return s.styleFamily===u.styleFamily&&(0<(m=I(s.setProperties,u.styleName)).length&&(m={optype:"UpdateParagraphStyle",memberid:u.memberid,timestamp:u.timestamp,styleName:s.styleName,removedProperties:{attributes:m.join(",")}},M.unshift(m)),y(s.setProperties,u.styleName)),{opSpecsA:l,opSpecsB:M}},RemoveText:x,SetParagraphStyle:x,SplitParagraph:x,UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},ApplyDirectStyling:{ApplyDirectStyling:function(s,u,m){var l,M,O,q,ee,G,B,A;return q=[s],O=[u],s.position+s.length<=u.position||s.position>=u.position+u.length||(l=m?s:u,M=m?u:s,(s.position!==u.position||s.length!==u.length)&&(G=w(l),B=w(M)),((u=N(M.setProperties,null,l.setProperties,null,"style:text-properties")).majorChanged||u.minorChanged)&&(O=[],s=[],q=l.position+l.length,ee=M.position+M.length,M.position<l.position?u.minorChanged&&((A=w(B)).length=l.position-M.position,s.push(A),M.position=l.position,M.length=ee-M.position):l.position<M.position&&u.majorChanged&&((A=w(G)).length=M.position-l.position,O.push(A),l.position=M.position,l.length=q-l.position),ee>q?u.minorChanged&&((G=B).position=q,G.length=ee-q,s.push(G),M.length=q-M.position):q>ee&&u.majorChanged&&(G.position=ee,G.length=q-ee,O.push(G),l.length=ee-l.position),l.setProperties&&R(l.setProperties)&&O.push(l),M.setProperties&&R(M.setProperties)&&s.push(M),m?(q=O,O=s):q=s)),{opSpecsA:q,opSpecsB:O}},InsertText:function(s,u){return u.position<=s.position?s.position+=u.text.length:u.position<=s.position+s.length&&(s.length+=u.text.length),{opSpecsA:[s],opSpecsB:[u]}},MergeParagraph:function(s,u){var m=s.position,l=s.position+s.length;return m>=u.sourceStartPosition&&--m,l>=u.sourceStartPosition&&--l,s.position=m,s.length=l-m,{opSpecsA:[s],opSpecsB:[u]}},MoveCursor:x,RemoveAnnotation:function(s,u){var m=s.position,l=s.position+s.length,M=u.position+u.length,O=[s],q=[u];return u.position<=m&&l<=M?O=[]:(M<m&&(m-=u.length+2),M<l&&(l-=u.length+2),s.position=m,s.length=l-m),{opSpecsA:O,opSpecsB:q}},RemoveCursor:x,RemoveMember:x,RemoveStyle:x,RemoveText:function(s,u){var m=s.position+s.length,l=u.position+u.length,M=[s],O=[u];return l<=s.position?s.position-=u.length:u.position<m&&(s.position<u.position?s.length=l<m?s.length-u.length:u.position-s.position:(s.position=u.position,l<m?s.length=m-l:M=[])),{opSpecsA:M,opSpecsB:O}},SetParagraphStyle:x,SplitParagraph:function(s,u){return u.position<s.position?s.position+=1:u.position<s.position+s.length&&(s.length+=1),{opSpecsA:[s],opSpecsB:[u]}},UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},InsertText:{InsertText:function(s,u,m){return s.position<u.position?u.position+=s.text.length:s.position>u.position?s.position+=u.text.length:m?u.position+=s.text.length:s.position+=u.text.length,{opSpecsA:[s],opSpecsB:[u]}},MergeParagraph:function(s,u){return s.position>=u.sourceStartPosition?--s.position:(s.position<u.sourceStartPosition&&(u.sourceStartPosition+=s.text.length),s.position<u.destinationStartPosition&&(u.destinationStartPosition+=s.text.length)),{opSpecsA:[s],opSpecsB:[u]}},MoveCursor:function(s,u){var m=X(u);return s.position<u.position?u.position+=s.text.length:s.position<u.position+u.length&&(u.length+=s.text.length),m&&P(u),{opSpecsA:[s],opSpecsB:[u]}},RemoveAnnotation:function(s,u){var m=s.position,l=u.position+u.length,M=[s],O=[u];return u.position<=m&&m<=l?(M=[],u.length+=s.text.length):l<s.position?s.position-=u.length+2:u.position+=s.text.length,{opSpecsA:M,opSpecsB:O}},RemoveCursor:x,RemoveMember:x,RemoveStyle:x,RemoveText:function(s,u){var m,l=[s],M=[u];return(m=u.position+u.length)<=s.position?s.position-=u.length:s.position<=u.position?u.position+=s.text.length:(u.length=s.position-u.position,M.unshift(m={optype:"RemoveText",memberid:u.memberid,timestamp:u.timestamp,position:s.position+s.text.length,length:m-s.position}),s.position=u.position),{opSpecsA:l,opSpecsB:M}},SetParagraphStyle:function(s,u){return u.position>s.position&&(u.position+=s.text.length),{opSpecsA:[s],opSpecsB:[u]}},SplitParagraph:function(s,u){return s.position<u.sourceParagraphPosition&&(u.sourceParagraphPosition+=s.text.length),s.position<=u.position?u.position+=s.text.length:s.position+=1,{opSpecsA:[s],opSpecsB:[u]}},UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},MergeParagraph:{MergeParagraph:function(s,u,m){var l=[s],M=[u];return s.destinationStartPosition===u.destinationStartPosition?(l=[],M=[],s.moveCursor&&l.push({optype:"MoveCursor",memberid:s.memberid,timestamp:s.timestamp,position:s.sourceStartPosition-1}),u.moveCursor&&M.push({optype:"MoveCursor",memberid:u.memberid,timestamp:u.timestamp,position:u.sourceStartPosition-1}),s={optype:"SetParagraphStyle",memberid:(s=m?s:u).memberid,timestamp:s.timestamp,position:s.destinationStartPosition,styleName:s.paragraphStyleName},m?l.push(s):M.push(s)):u.sourceStartPosition===s.destinationStartPosition?(s.destinationStartPosition=u.destinationStartPosition,--s.sourceStartPosition,s.paragraphStyleName=u.paragraphStyleName):s.sourceStartPosition===u.destinationStartPosition?(u.destinationStartPosition=s.destinationStartPosition,--u.sourceStartPosition,u.paragraphStyleName=s.paragraphStyleName):s.destinationStartPosition<u.destinationStartPosition?(--u.destinationStartPosition,--u.sourceStartPosition):(--s.destinationStartPosition,--s.sourceStartPosition),{opSpecsA:l,opSpecsB:M}},MoveCursor:function(s,u){var M=u.position,m=u.position+u.length,l=Math.min(M,m);return M=Math.max(M,m),l>=s.sourceStartPosition&&--l,M>=s.sourceStartPosition&&--M,0<=u.length?(u.position=l,u.length=M-l):(u.position=M,u.length=l-M),{opSpecsA:[s],opSpecsB:[u]}},RemoveAnnotation:function(s,u){var m=u.position+u.length,l=[s],M=[u];return u.position<=s.destinationStartPosition&&s.sourceStartPosition<=m?(l=[],--u.length):s.sourceStartPosition<u.position?--u.position:(m<s.destinationStartPosition&&(s.destinationStartPosition-=u.length+2),m<s.sourceStartPosition&&(s.sourceStartPosition-=u.length+2)),{opSpecsA:l,opSpecsB:M}},RemoveCursor:x,RemoveMember:x,RemoveStyle:x,RemoveText:function(s,u){return u.position>=s.sourceStartPosition?--u.position:(u.position<s.destinationStartPosition&&(s.destinationStartPosition-=u.length),u.position<s.sourceStartPosition&&(s.sourceStartPosition-=u.length)),{opSpecsA:[s],opSpecsB:[u]}},SetParagraphStyle:function(s,u){var m=[s],l=[u];return u.position>s.sourceStartPosition?--u.position:(u.position===s.destinationStartPosition||u.position===s.sourceStartPosition)&&(u.position=s.destinationStartPosition,s.paragraphStyleName=u.styleName),{opSpecsA:m,opSpecsB:l}},SplitParagraph:function(s,u){var l=[s],M=[u];return u.position<s.destinationStartPosition?(s.destinationStartPosition+=1,s.sourceStartPosition+=1):u.position>=s.destinationStartPosition&&u.position<s.sourceStartPosition?(u.paragraphStyleName=s.paragraphStyleName,l.push({optype:"SetParagraphStyle",memberid:s.memberid,timestamp:s.timestamp,position:s.destinationStartPosition,styleName:s.paragraphStyleName}),u.position===s.sourceStartPosition-1&&s.moveCursor&&l.push({optype:"MoveCursor",memberid:s.memberid,timestamp:s.timestamp,position:u.position,length:0}),s.destinationStartPosition=u.position+1,s.sourceStartPosition+=1):u.position>=s.sourceStartPosition&&(--u.position,--u.sourceParagraphPosition),{opSpecsA:l,opSpecsB:M}},UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},MoveCursor:{MoveCursor:x,RemoveAnnotation:function(s,u){var m=X(s),l=s.position+s.length,M=u.position+u.length;return u.position<=s.position&&l<=M?(s.position=u.position-1,s.length=0):(M<s.position?s.position-=u.length+2:M<l&&(s.length-=u.length+2),m&&P(s)),{opSpecsA:[s],opSpecsB:[u]}},RemoveCursor:function(s,u){return{opSpecsA:s.memberid===u.memberid?[]:[s],opSpecsB:[u]}},RemoveMember:x,RemoveStyle:x,RemoveText:function(s,u){var m=X(s),l=s.position+s.length,M=u.position+u.length;return M<=s.position?s.position-=u.length:u.position<l&&(s.position<u.position?s.length=M<l?s.length-u.length:u.position-s.position:(s.position=u.position,s.length=M<l?l-M:0)),m&&P(s),{opSpecsA:[s],opSpecsB:[u]}},SetParagraphStyle:x,SplitParagraph:function(s,u){var m=X(s);return u.position<s.position?s.position+=1:u.position<s.position+s.length&&(s.length+=1),m&&P(s),{opSpecsA:[s],opSpecsB:[u]}},UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},RemoveAnnotation:{RemoveAnnotation:function(s,u){var m=[s],l=[u];return s.position===u.position&&s.length===u.length?(m=[],l=[]):s.position<u.position?u.position-=s.length+2:s.position-=u.length+2,{opSpecsA:m,opSpecsB:l}},RemoveCursor:x,RemoveMember:x,RemoveStyle:x,RemoveText:function(s,u){var l=u.position+u.length,M=[s],O=[u];return s.position<=u.position&&l<=s.position+s.length?(O=[],s.length-=u.length):l<s.position?s.position-=u.length:u.position<s.position?(s.position=u.position+1,u.length-=s.length+2):u.position-=s.length+2,{opSpecsA:M,opSpecsB:O}},SetParagraphStyle:function(s,u){var m=u.position,l=s.position+s.length,M=[s],O=[u];return s.position<=m&&m<=l?O=[]:l<m&&(u.position-=s.length+2),{opSpecsA:M,opSpecsB:O}},SplitParagraph:function(s,u){var m=u.position,l=s.position+s.length,M=[s],O=[u];return s.position<=m&&m<=l?(O=[],s.length+=1):(l<u.sourceParagraphPosition&&(u.sourceParagraphPosition-=s.length+2),l<m?u.position-=s.length+2:s.position+=1),{opSpecsA:M,opSpecsB:O}},UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},RemoveCursor:{RemoveCursor:function(s,u){var m=s.memberid===u.memberid;return{opSpecsA:m?[]:[s],opSpecsB:m?[]:[u]}},RemoveMember:x,RemoveStyle:x,RemoveText:x,SetParagraphStyle:x,SplitParagraph:x,UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},RemoveMember:{RemoveStyle:x,RemoveText:x,SetParagraphStyle:x,SplitParagraph:x,UpdateMetadata:x,UpdateParagraphStyle:x},RemoveStyle:{RemoveStyle:function(s,u){var m=s.styleName===u.styleName&&s.styleFamily===u.styleFamily;return{opSpecsA:m?[]:[s],opSpecsB:m?[]:[u]}},RemoveText:x,SetParagraphStyle:function(s,u){var l=[s],M=[u];return"paragraph"===s.styleFamily&&s.styleName===u.styleName&&(l.unshift({optype:"SetParagraphStyle",memberid:s.memberid,timestamp:s.timestamp,position:u.position,styleName:""}),u.styleName=""),{opSpecsA:l,opSpecsB:M}},SplitParagraph:x,UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:function(s,u){var m,l=[s],M=[u];return"paragraph"===s.styleFamily&&(0<(m=I(u.setProperties,s.styleName)).length&&(m={optype:"UpdateParagraphStyle",memberid:s.memberid,timestamp:s.timestamp,styleName:u.styleName,removedProperties:{attributes:m.join(",")}},l.unshift(m)),s.styleName===u.styleName?M=[]:y(u.setProperties,s.styleName)),{opSpecsA:l,opSpecsB:M}}},RemoveText:{RemoveText:function(s,u){var m=s.position+s.length,l=u.position+u.length,M=[s],O=[u];return l<=s.position?s.position-=u.length:m<=u.position?u.position-=s.length:u.position<m&&(s.position<u.position?(s.length=l<m?s.length-u.length:u.position-s.position,m<l?(u.position=s.position,u.length=l-m):O=[]):(m<l?u.length-=s.length:u.position<s.position?u.length=s.position-u.position:O=[],l<m?(s.position=u.position,s.length=m-l):M=[])),{opSpecsA:M,opSpecsB:O}},SetParagraphStyle:function(s,u){return s.position<u.position&&(u.position-=s.length),{opSpecsA:[s],opSpecsB:[u]}},SplitParagraph:function(s,u){var m=s.position+s.length,l=[s],M=[u];return u.position<=s.position?s.position+=1:u.position<m&&(s.length=u.position-s.position,l.unshift(m={optype:"RemoveText",memberid:s.memberid,timestamp:s.timestamp,position:u.position+1,length:m-u.position})),s.position+s.length<=u.position?u.position-=s.length:s.position<u.position&&(u.position=s.position),s.position+s.length<u.sourceParagraphPosition&&(u.sourceParagraphPosition-=s.length),{opSpecsA:l,opSpecsB:M}},UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},SetParagraphStyle:{SetParagraphStyle:function(s,u,m){return s.position===u.position&&(m?u.styleName=s.styleName:s.styleName=u.styleName),{opSpecsA:[s],opSpecsB:[u]}},SplitParagraph:function(s,u){var M,m=[s],l=[u];return s.position>u.position?s.position+=1:s.position===u.sourceParagraphPosition&&(u.paragraphStyleName=s.styleName,(M=w(s)).position=u.position+1,m.push(M)),{opSpecsA:m,opSpecsB:l}},UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},SplitParagraph:{SplitParagraph:function(s,u,m){var l,M;return s.position<u.position?l=!0:u.position<s.position?M=!0:s.position===u.position&&(m?l=!0:M=!0),l?(u.position+=1,u.sourceParagraphPosition=s.position<u.sourceParagraphPosition?u.sourceParagraphPosition+1:s.position+1):M&&(s.position+=1,s.sourceParagraphPosition=u.position<u.sourceParagraphPosition?s.sourceParagraphPosition+1:u.position+1),{opSpecsA:[s],opSpecsB:[u]}},UpdateMember:x,UpdateMetadata:x,UpdateParagraphStyle:x},UpdateMember:{UpdateMetadata:x,UpdateParagraphStyle:x},UpdateMetadata:{UpdateMetadata:function(s,u,m){var l,M=[s],O=[u];return l=m?s:u,E((s=m?u:s).setProperties||null,s.removedProperties||null,l.setProperties||null,l.removedProperties||null),l.setProperties&&R(l.setProperties)||l.removedProperties&&C(l.removedProperties)||(m?M=[]:O=[]),s.setProperties&&R(s.setProperties)||s.removedProperties&&C(s.removedProperties)||(m?O=[]:M=[]),{opSpecsA:M,opSpecsB:O}},UpdateParagraphStyle:x},UpdateParagraphStyle:{UpdateParagraphStyle:function(s,u,m){var l,M=[s],O=[u];return s.styleName===u.styleName&&(l=m?s:u,N((s=m?u:s).setProperties,s.removedProperties,l.setProperties,l.removedProperties,"style:paragraph-properties"),N(s.setProperties,s.removedProperties,l.setProperties,l.removedProperties,"style:text-properties"),E(s.setProperties||null,s.removedProperties||null,l.setProperties||null,l.removedProperties||null),l.setProperties&&R(l.setProperties)||l.removedProperties&&C(l.removedProperties)||(m?M=[]:O=[]),s.setProperties&&R(s.setProperties)||s.removedProperties&&C(s.removedProperties)||(m?O=[]:M=[])),{opSpecsA:M,opSpecsB:O}}}},this.passUnchanged=x,this.extendTransformations=function(s){Object.keys(s).forEach(function(u){var l,m=s[u],M=S.hasOwnProperty(u);runtime.log((M?"Extending":"Adding")+" map for optypeA: "+u),M||(S[u]={}),l=S[u],Object.keys(m).forEach(function(O){var q=l.hasOwnProperty(O);runtime.assert(u<=O,"Wrong order:"+u+", "+O),runtime.log("  "+(q?"Overwriting":"Adding")+" entry for optypeB: "+O),l[O]=m[O]})})},this.transformOpspecVsOpspec=function(s,u){var l,m=s.optype<=u.optype;return runtime.log("Crosstransforming:"),runtime.log(runtime.toJson(s)),runtime.log(runtime.toJson(u)),m||(l=s,s=u,u=l),(l=(l=S[s.optype])&&l[u.optype])?(l=l(s,u,!m),m||null===l||(l={opSpecsA:l.opSpecsB,opSpecsB:l.opSpecsA})):l=null,runtime.log("result:"),l?(runtime.log(runtime.toJson(l.opSpecsA)),runtime.log(runtime.toJson(l.opSpecsB))):runtime.log("null"),l}},ops.OperationTransformer=function(){function P(I,y){for(var w,E,R=[],C=[];0<I.length&&y;){if(w=I.shift(),!(w=X.transformOpspecVsOpspec(w,y)))return null;if(R=R.concat(w.opSpecsA),0===w.opSpecsB.length){R=R.concat(I),y=null;break}for(;1<w.opSpecsB.length;){if(!(E=P(I,w.opSpecsB.shift())))return null;C=C.concat(E.opSpecsB),I=E.opSpecsA}y=w.opSpecsB.pop()}return y&&C.push(y),{opSpecsA:R,opSpecsB:C}}var X=new ops.OperationTransformMatrix;this.getOperationTransformMatrix=function(){return X},this.transform=function(I,y){for(var w,E=[];0<y.length;){if(!(w=P(I,y.shift())))return null;I=w.opSpecsA,E=E.concat(w.opSpecsB)}return{opSpecsA:I,opSpecsB:E}}};var webodf_css='@namespace draw url(urn:oasis:names:tc:opendocument:xmlns:drawing:1.0);@namespace fo url(urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0);@namespace office url(urn:oasis:names:tc:opendocument:xmlns:office:1.0);@namespace presentation url(urn:oasis:names:tc:opendocument:xmlns:presentation:1.0);@namespace style url(urn:oasis:names:tc:opendocument:xmlns:style:1.0);@namespace svg url(urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0);@namespace table url(urn:oasis:names:tc:opendocument:xmlns:table:1.0);@namespace text url(urn:oasis:names:tc:opendocument:xmlns:text:1.0);@namespace webodfhelper url(urn:webodf:names:helper);@namespace cursor url(urn:webodf:names:cursor);@namespace editinfo url(urn:webodf:names:editinfo);@namespace annotation url(urn:webodf:names:annotation);@namespace dc url(http://purl.org/dc/elements/1.1/);@namespace svgns url(http://www.w3.org/2000/svg);office|document > *, office|document-content > * {display: none;}office|body, office|document {display: inline-block;position: relative;}text|p, text|h {display: block;padding: 0;margin: 0;line-height: normal;position: relative;}text|p::after, text|h::after {content: "\\200B";white-space: pre;}*[webodfhelper|containsparagraphanchor] {position: relative;}text|s {white-space: pre;}text|tab {display: inline;white-space: pre;}text|tracked-changes {display: none;}office|binary-data {display: none;}office|text {display: block;text-align: left;overflow: visible;word-wrap: break-word;}office|text::selection {background: transparent;}.webodf-virtualSelections *::selection {background: transparent;}.webodf-virtualSelections *::-moz-selection {background: transparent;}office|text * draw|text-box {display: block;border: 1px solid #d3d3d3;}office|text draw|frame {z-index: 1;}office|spreadsheet {display: block;border-collapse: collapse;empty-cells: show;font-family: sans-serif;font-size: 10pt;text-align: left;page-break-inside: avoid;overflow: hidden;}office|presentation {display: inline-block;text-align: left;}#shadowContent {display: inline-block;text-align: left;}draw|page {display: block;position: relative;overflow: hidden;}presentation|notes, presentation|footer-decl, presentation|date-time-decl {display: none;}@media print {draw|page {border: 1pt solid black;page-break-inside: avoid;}presentation|notes {}}office|spreadsheet text|p {border: 0px;padding: 1px;margin: 0px;}office|spreadsheet table|table {margin: 3px;}office|spreadsheet table|table:after {}office|spreadsheet table|table-row {counter-increment: row;}office|spreadsheet table|table-row:before {width: 3em;background: #cccccc;border: 1px solid black;text-align: center;content: counter(row);display: table-cell;}office|spreadsheet table|table-cell {border: 1px solid #cccccc;}table|table {display: table;}draw|frame table|table {width: 100%;height: 100%;background: white;}table|table-header-rows {display: table-header-group;}table|table-row {display: table-row;}table|table-column {display: table-column;}table|table-cell {width: 0.889in;display: table-cell;word-break: break-all;}draw|frame {display: block;}draw|image {display: block;width: 100%;height: 100%;top: 0px;left: 0px;background-repeat: no-repeat;background-size: 100% 100%;-moz-background-size: 100% 100%;}draw|frame > draw|image:nth-of-type(n+2) {display: none;}text|list:before {display: none;content:"";}text|list {display: block;}text|list-item {display: block;}text|number {display:none;}text|a {color: blue;text-decoration: underline;cursor: pointer;}.webodf-inactiveLinks text|a {cursor: text;}text|note-citation {vertical-align: super;font-size: smaller;}text|note-body {display: none;}text|note:hover text|note-citation {background: #dddddd;}text|note:hover text|note-body {display: block;left:1em;max-width: 80%;position: absolute;background: #ffffaa;}text|bibliography-source {display: none;}svg|title, svg|desc {display: none;}video {width: 100%;height: 100%}cursor|anchor {display: none;}cursor|cursor {display: none;}.webodf-caretOverlay {position: absolute;top: 5%;height: 1em;z-index: 10;padding-left: 1px;pointer-events: none;}.webodf-caretOverlay .caret {position: absolute;border-left: 2px solid black;top: 0;bottom: 0;right: 0;}.webodf-caretOverlay .handle {position: absolute;margin-top: 5px;padding-top: 3px;margin-left: auto;margin-right: auto;width: 64px;height: 68px;border-radius: 5px;opacity: 0.3;text-align: center;background-color: black;box-shadow: 0px 0px 5px rgb(90, 90, 90);border: 1px solid black;top: -85px;right: -32px;}.webodf-caretOverlay .handle > img {box-shadow: 0px 0px 5px rgb(90, 90, 90) inset;background-color: rgb(200, 200, 200);border-radius: 5px;border: 2px solid;height: 60px;width: 60px;display: block;margin: auto;}.webodf-caretOverlay .handle.active {opacity: 0.8;}.webodf-caretOverlay .handle:after {content: " ";position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: black transparent transparent transparent;top: 100%;left: 43%;}.webodf-caretSizer {display: inline-block;width: 0;visibility: hidden;}#eventTrap {display: block;position: absolute;bottom: 0;left: 0;outline: none;opacity: 0;color: rgba(255, 255, 255, 0);pointer-events: none;white-space: pre;overflow: hidden;}cursor|cursor > #composer {text-decoration: underline;}cursor|cursor[cursor|caret-sizer-active="true"],cursor|cursor[cursor|composing="true"] {display: inline;}editinfo|editinfo {display: inline-block;}.editInfoMarker {position: absolute;width: 10px;height: 100%;left: -20px;opacity: 0.8;top: 0;border-radius: 5px;background-color: transparent;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);}.editInfoMarker:hover {box-shadow: 0px 0px 8px rgba(0, 0, 0, 1);}.editInfoHandle {position: absolute;background-color: black;padding: 5px;border-radius: 5px;opacity: 0.8;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);bottom: 100%;margin-bottom: 10px;z-index: 3;left: -25px;}.editInfoHandle:after {content: " ";position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: black transparent transparent transparent;top: 100%;left: 5px;}.editInfo {font-family: sans-serif;font-weight: normal;font-style: normal;text-decoration: none;color: white;width: 100%;height: 12pt;}.editInfoColor {float: left;width: 10pt;height: 10pt;border: 1px solid white;}.editInfoAuthor {float: left;margin-left: 5pt;font-size: 10pt;text-align: left;height: 12pt;line-height: 12pt;}.editInfoTime {float: right;margin-left: 30pt;font-size: 8pt;font-style: italic;color: yellow;height: 12pt;line-height: 12pt;}.annotationWrapper {display: inline;position: relative;}.annotationRemoveButton:before {content: "\xd7";color: white;padding: 5px;line-height: 1em;}.annotationRemoveButton {width: 20px;height: 20px;border-radius: 10px;background-color: black;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);position: absolute;top: -10px;left: -10px;z-index: 3;text-align: center;font-family: sans-serif;font-style: normal;font-weight: normal;text-decoration: none;font-size: 15px;}.annotationRemoveButton:hover {cursor: pointer;box-shadow: 0px 0px 5px rgba(0, 0, 0, 1);}.annotationNote {width: 4cm;position: absolute;display: inline;z-index: 10;top: 0;}.annotationNote > office|annotation {display: block;text-align: left;}.annotationConnector {position: absolute;display: inline;top: 0;z-index: 2;border-top: 1px dashed brown;}.annotationConnector.angular {-moz-transform-origin: left top;-webkit-transform-origin: left top;-ms-transform-origin: left top;transform-origin: left top;}.annotationConnector.horizontal {left: 0;}.annotationConnector.horizontal:before {content: "";display: inline;position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: brown transparent transparent transparent;top: -1px;left: -5px;}office|annotation {width: 100%;height: 100%;display: none;background: rgb(198, 238, 184);background: -moz-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -webkit-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -o-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -ms-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: linear-gradient(180deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);box-shadow: 0 3px 4px -3px #ccc;}office|annotation > dc|creator {display: block;font-size: 10pt;font-weight: normal;font-style: normal;font-family: sans-serif;color: white;background-color: brown;padding: 4px;}office|annotation > dc|date {display: block;font-size: 10pt;font-weight: normal;font-style: normal;font-family: sans-serif;border: 4px solid transparent;color: black;}office|annotation > text|list {display: block;padding: 5px;}office|annotation text|p {font-size: 10pt;color: black;font-weight: normal;font-style: normal;text-decoration: none;font-family: sans-serif;}#annotationsPane {background-color: #EAEAEA;width: 4cm;height: 100%;display: none;position: absolute;outline: 1px solid #ccc;}.webodf-annotationHighlight {background-color: yellow;position: relative;}.webodf-selectionOverlay {position: absolute;pointer-events: none;top: 0;left: 0;top: 0;left: 0;width: 100%;height: 100%;z-index: 15;}.webodf-selectionOverlay > polygon {fill-opacity: 0.3;stroke-opacity: 0.8;stroke-width: 1;fill-rule: evenodd;}.webodf-selectionOverlay > .webodf-draggable {fill-opacity: 0.8;stroke-opacity: 0;stroke-width: 8;pointer-events: all;display: none;-moz-transform-origin: center center;-webkit-transform-origin: center center;-ms-transform-origin: center center;transform-origin: center center;}#imageSelector {display: none;position: absolute;border-style: solid;border-color: black;}#imageSelector > div {width: 5px;height: 5px;display: block;position: absolute;border: 1px solid black;background-color: #ffffff;}#imageSelector > .topLeft {top: -4px;left: -4px;}#imageSelector > .topRight {top: -4px;right: -4px;}#imageSelector > .bottomRight {right: -4px;bottom: -4px;}#imageSelector > .bottomLeft {bottom: -4px;left: -4px;}#imageSelector > .topMiddle {top: -4px;left: 50%;margin-left: -2.5px;}#imageSelector > .rightMiddle {top: 50%;right: -4px;margin-top: -2.5px;}#imageSelector > .bottomMiddle {bottom: -4px;left: 50%;margin-left: -2.5px;}#imageSelector > .leftMiddle {top: 50%;left: -4px;margin-top: -2.5px;}div.webodf-customScrollbars::-webkit-scrollbar{width: 8px;height: 8px;background-color: transparent;}div.webodf-customScrollbars::-webkit-scrollbar-track{background-color: transparent;}div.webodf-customScrollbars::-webkit-scrollbar-thumb{background-color: #444;border-radius: 4px;}.webodf-hyperlinkTooltip {display: none;color: white;background-color: black;border-radius: 5px;box-shadow: 2px 2px 5px gray;padding: 3px;position: absolute;max-width: 210px;text-align: left;word-break: break-all;z-index: 16;}.webodf-hyperlinkTooltipText {display: block;font-weight: bold;}';!function(P){var X=typeof window<"u"?window:typeof global<"u"?global:{};(X.externs||(X.externs={})).JSZip=function y(w,E,R){function C(S,s){if(!E[S]){if(!w[S]){var u="function"==typeof require&&require;if(!s&&u)return u(S,!0);if(N)return N(S,!0);throw new Error("Cannot find module '"+S+"'")}var m=E[S]={exports:{}};w[S][0].call(m.exports,function(l){return C(w[S][1][l]||l)},m,m.exports,y,w,E,R)}return E[S].exports}for(var N="function"==typeof require&&require,x=0;x<R.length;x++)C(R[x]);return C}({1:[function(y,w,E){var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";E.encode=function(C,N){for(var S,s,u,m,l,M,O,x="",q=0;q<C.length;)m=(S=C.charCodeAt(q++))>>2,l=(3&S)<<4|(s=C.charCodeAt(q++))>>4,M=(15&s)<<2|(u=C.charCodeAt(q++))>>6,O=63&u,isNaN(s)?M=O=64:isNaN(u)&&(O=64),x=x+R.charAt(m)+R.charAt(l)+R.charAt(M)+R.charAt(O);return x},E.decode=function(C,N){var s,u,m,l,M,O,x="",q=0;for(C=C.replace(/[^A-Za-z0-9\+\/\=]/g,"");q<C.length;)m=R.indexOf(C.charAt(q++)),s=(15&(l=R.indexOf(C.charAt(q++))))<<4|(M=R.indexOf(C.charAt(q++)))>>2,u=(3&M)<<6|(O=R.indexOf(C.charAt(q++))),x+=String.fromCharCode(m<<2|l>>4),64!=M&&(x+=String.fromCharCode(s)),64!=O&&(x+=String.fromCharCode(u));return x}},{}],2:[function(y,w,E){function R(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}R.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},w.exports=R},{}],3:[function(y,w,E){E.STORE={magic:"\0\0",compress:function(R){return R},uncompress:function(R){return R},compressInputType:null,uncompressInputType:null},E.DEFLATE=y("./flate")},{"./flate":8}],4:[function(y,w,E){var R=y("./utils"),C=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];w.exports=function(x,S){if(typeof x>"u"||!x.length)return 0;var s="string"!==R.getTypeOf(x);typeof S>"u"&&(S=0);var l=0;S^=-1;for(var M=0,O=x.length;M<O;M++)l=s?x[M]:x.charCodeAt(M),S=S>>>8^C[255&(S^l)];return-1^S}},{"./utils":21}],5:[function(y,w,E){var R=y("./utils");function C(N){this.data=null,this.length=0,this.index=0}C.prototype={checkOffset:function(N){this.checkIndex(this.index+N)},checkIndex:function(N){if(this.length<N||N<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+N+"). Corrupted zip ?")},setIndex:function(N){this.checkIndex(N),this.index=N},skip:function(N){this.setIndex(this.index+N)},byteAt:function(N){},readInt:function(N){var S,x=0;for(this.checkOffset(N),S=this.index+N-1;S>=this.index;S--)x=(x<<8)+this.byteAt(S);return this.index+=N,x},readString:function(N){return R.transformTo("string",this.readData(N))},readData:function(N){},lastIndexOfSignature:function(N){},readDate:function(){var N=this.readInt(4);return new Date(1980+(N>>25&127),(N>>21&15)-1,N>>16&31,N>>11&31,N>>5&63,(31&N)<<1)}},w.exports=C},{"./utils":21}],6:[function(y,w,E){E.base64=!1,E.binary=!1,E.dir=!1,E.createFolders=!1,E.date=null,E.compression=null,E.comment=null},{}],7:[function(y,w,E){var R=y("./utils");E.string2binary=function(C){return R.string2binary(C)},E.string2Uint8Array=function(C){return R.transformTo("uint8array",C)},E.uint8Array2String=function(C){return R.transformTo("string",C)},E.string2Blob=function(C){var N=R.transformTo("arraybuffer",C);return R.arrayBuffer2Blob(N)},E.arrayBuffer2Blob=function(C){return R.arrayBuffer2Blob(C)},E.transformTo=function(C,N){return R.transformTo(C,N)},E.getTypeOf=function(C){return R.getTypeOf(C)},E.checkSupport=function(C){return R.checkSupport(C)},E.MAX_VALUE_16BITS=R.MAX_VALUE_16BITS,E.MAX_VALUE_32BITS=R.MAX_VALUE_32BITS,E.pretty=function(C){return R.pretty(C)},E.findCompression=function(C){return R.findCompression(C)},E.isRegExp=function(C){return R.isRegExp(C)}},{"./utils":21}],8:[function(y,w,E){var R=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",C=y("pako");E.uncompressInputType=R?"uint8array":"array",E.compressInputType=R?"uint8array":"array",E.magic="\b\0",E.compress=function(N){return C.deflateRaw(N)},E.uncompress=function(N){return C.inflateRaw(N)}},{pako:24}],9:[function(y,w,E){var R=y("./base64");function C(N,x){if(!(this instanceof C))return new C(N,x);this.files={},this.comment=null,this.root="",N&&this.load(N,x),this.clone=function(){var S=new C;for(var s in this)"function"!=typeof this[s]&&(S[s]=this[s]);return S}}(C.prototype=y("./object")).load=y("./load"),C.support=y("./support"),C.defaults=y("./defaults"),C.utils=y("./deprecatedPublicUtils"),C.base64={encode:function(N){return R.encode(N)},decode:function(N){return R.decode(N)}},C.compressions=y("./compressions"),w.exports=C},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(y,w,E){var R=y("./base64"),C=y("./zipEntries");w.exports=function(N,x){var S,s,u,m;for((x=x||{}).base64&&(N=R.decode(N)),S=(s=new C(N,x)).files,u=0;u<S.length;u++)this.file((m=S[u]).fileName,m.decompressed,{binary:!0,optimizedBinaryString:!0,date:m.date,dir:m.dir,comment:m.fileComment.length?m.fileComment:null,createFolders:x.createFolders});return s.zipComment.length&&(this.comment=s.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(y,w,E){(function(R){w.exports=function(C,N){return new R(C,N)},w.exports.test=function(C){return R.isBuffer(C)}}).call(this,typeof Buffer<"u"?Buffer:void 0)},{}],12:[function(y,w,E){var R=y("./uint8ArrayReader");function C(N){this.data=N,this.length=this.data.length,this.index=0}(C.prototype=new R).readData=function(N){this.checkOffset(N);var x=this.data.slice(this.index,this.index+N);return this.index+=N,x},w.exports=C},{"./uint8ArrayReader":18}],13:[function(y,w,E){var R=y("./support"),C=y("./utils"),N=y("./crc32"),x=y("./signature"),S=y("./defaults"),s=y("./base64"),u=y("./compressions"),m=y("./compressedObject"),l=y("./nodeBuffer"),M=y("./utf8"),O=y("./stringWriter"),q=y("./uint8ArrayWriter"),ee=function(Y){if(Y._data instanceof m&&(Y._data=Y._data.getContent(),Y.options.binary=!0,Y.options.base64=!1,"uint8array"===C.getTypeOf(Y._data))){var ne=Y._data;Y._data=new Uint8Array(ne.length),0!==ne.length&&Y._data.set(ne,0)}return Y._data},G=function(Y){var ne=ee(Y);return"string"===C.getTypeOf(ne)?!Y.options.binary&&R.nodebuffer?l(ne,"utf-8"):Y.asBinary():ne},B=function(Y){var ne=ee(this);return null===ne||typeof ne>"u"?"":(this.options.base64&&(ne=s.decode(ne)),ne=Y&&this.options.binary?ie.utf8decode(ne):C.transformTo("string",ne),!Y&&!this.options.binary&&(ne=C.transformTo("string",ie.utf8encode(ne))),ne)},A=function(Y,ne,le){this.name=Y,this.dir=le.dir,this.date=le.date,this.comment=le.comment,this._data=ne,this.options=le,this._initialMetadata={dir:le.dir,date:le.date}};A.prototype={asText:function(){return B.call(this,!0)},asBinary:function(){return B.call(this,!1)},asNodeBuffer:function(){var Y=G(this);return C.transformTo("nodebuffer",Y)},asUint8Array:function(){var Y=G(this);return C.transformTo("uint8array",Y)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var H=function(Y,ne){var ge,le="";for(ge=0;ge<ne;ge++)le+=String.fromCharCode(255&Y),Y>>>=8;return le},$=function(){var ne,le,Y={};for(ne=0;ne<arguments.length;ne++)for(le in arguments[ne])arguments[ne].hasOwnProperty(le)&&typeof Y[le]>"u"&&(Y[le]=arguments[ne][le]);return Y},Q=function(Y,ne,le){var Ee,ge=C.getTypeOf(ne);if((le=function(Y){return!0===(Y=Y||{}).base64&&null==Y.binary&&(Y.binary=!0),(Y=$(Y,S)).date=Y.date||new Date,null!==Y.compression&&(Y.compression=Y.compression.toUpperCase()),Y}(le)).createFolders&&(Ee=U(Y))&&K.call(this,Ee,!0),le.dir||null===ne||typeof ne>"u")le.base64=!1,le.binary=!1,ne=null;else if("string"===ge)le.binary&&!le.base64&&!0!==le.optimizedBinaryString&&(ne=C.string2binary(ne));else{if(le.base64=!1,le.binary=!0,!(ge||ne instanceof m))throw new Error("The data of '"+Y+"' is in an unsupported format !");"arraybuffer"===ge&&(ne=C.transformTo("uint8array",ne))}var Le=new A(Y,ne,le);return this.files[Y]=Le,Le},U=function(Y){"/"==Y.slice(-1)&&(Y=Y.substring(0,Y.length-1));var ne=Y.lastIndexOf("/");return ne>0?Y.substring(0,ne):""},K=function(Y,ne){return"/"!=Y.slice(-1)&&(Y+="/"),ne=typeof ne<"u"&&ne,this.files[Y]||Q.call(this,Y,null,{dir:!0,createFolders:ne}),this.files[Y]},F=function(Y,ne){var ge,le=new m;return Y._data instanceof m?(le.uncompressedSize=Y._data.uncompressedSize,le.crc32=Y._data.crc32,0===le.uncompressedSize||Y.dir?(ne=u.STORE,le.compressedContent="",le.crc32=0):Y._data.compressionMethod===ne.magic?le.compressedContent=Y._data.getCompressedContent():(ge=Y._data.getContent(),le.compressedContent=ne.compress(C.transformTo(ne.compressInputType,ge)))):((!(ge=G(Y))||0===ge.length||Y.dir)&&(ne=u.STORE,ge=""),le.uncompressedSize=ge.length,le.crc32=N(ge),le.compressedContent=ne.compress(C.transformTo(ne.compressInputType,ge))),le.compressedSize=le.compressedContent.length,le.compressionMethod=ne.magic,le},L=function(Y,ne,le,ge){var ze,we,qe,ue,Le=C.transformTo("string",M.utf8encode(ne.name)),Qe=ne.comment||"",ae=C.transformTo("string",M.utf8encode(Qe)),fe=Le.length!==ne.name.length,Me=ae.length!==Qe.length,je=ne.options,Ce="",ye="",$e="";qe=ne._initialMetadata.dir!==ne.dir?ne.dir:je.dir,ze=(ue=ne._initialMetadata.date!==ne.date?ne.date:je.date).getHours(),ze<<=6,ze|=ue.getMinutes(),ze<<=5,ze|=ue.getSeconds()/2,we=ue.getFullYear()-1980,we<<=4,we|=ue.getMonth()+1,we<<=5,we|=ue.getDate(),fe&&(ye=H(1,1)+H(N(Le),4)+Le,Ce+="up"+H(ye.length,2)+ye),Me&&($e=H(1,1)+H(this.crc32(ae),4)+ae,Ce+="uc"+H($e.length,2)+$e);var de="";return de+="\n\0",de+=fe||Me?"\0\b":"\0\0",de+=le.compressionMethod,de+=H(ze,2),de+=H(we,2),de+=H(le.crc32,4),de+=H(le.compressedSize,4),de+=H(le.uncompressedSize,4),de+=H(Le.length,2),de+=H(Ce.length,2),{fileRecord:x.LOCAL_FILE_HEADER+de+Le+Ce,dirRecord:x.CENTRAL_FILE_HEADER+"\x14\0"+de+H(ae.length,2)+"\0\0\0\0"+(!0===qe?"\x10\0\0\0":"\0\0\0\0")+H(ge,4)+Le+Ce+ae,compressedObject:le}},ie={load:function(Y,ne){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(Y){var le,ge,Ee,Le,ne=[];for(le in this.files)!this.files.hasOwnProperty(le)||(Le=new A((Ee=this.files[le]).name,Ee._data,$(Ee.options)),ge=le.slice(this.root.length,le.length),le.slice(0,this.root.length)===this.root&&Y(ge,Le)&&ne.push(Le));return ne},file:function(Y,ne,le){if(1===arguments.length){if(C.isRegExp(Y)){var ge=Y;return this.filter(function(Ee,Le){return!Le.dir&&ge.test(Ee)})}return this.filter(function(Ee,Le){return!Le.dir&&Ee===Y})[0]||null}return Q.call(this,Y=this.root+Y,ne,le),this},folder:function(Y){if(!Y)return this;if(C.isRegExp(Y))return this.filter(function(Ee,Le){return Le.dir&&Y.test(Ee)});var le=K.call(this,this.root+Y),ge=this.clone();return ge.root=le.name,ge},remove:function(Y){var ne=this.files[Y=this.root+Y];if(ne||("/"!=Y.slice(-1)&&(Y+="/"),ne=this.files[Y]),ne&&!ne.dir)delete this.files[Y];else for(var le=this.filter(function(Ee,Le){return Le.name.slice(0,Y.length)===Y}),ge=0;ge<le.length;ge++)delete this.files[le[ge].name];return this},generate:function(Y){Y=$(Y||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),C.checkSupport(Y.type);var Ee,Le,ne=[],le=0,ge=0,Qe=C.transformTo("string",this.utf8encode(Y.comment||this.comment||""));for(var ae in this.files)if(this.files.hasOwnProperty(ae)){var fe=this.files[ae],Me=fe.options.compression||Y.compression.toUpperCase(),je=u[Me];if(!je)throw new Error(Me+" is not a valid compression method !");var ze=F.call(this,fe,je),we=L.call(this,ae,fe,ze,le);le+=we.fileRecord.length+ze.compressedSize,ge+=we.dirRecord.length,ne.push(we)}var Ce;Ce=x.CENTRAL_DIRECTORY_END+"\0\0\0\0"+H(ne.length,2)+H(ne.length,2)+H(ge,4)+H(le,4)+H(Qe.length,2)+Qe;var ye=Y.type.toLowerCase();for(Ee="uint8array"===ye||"arraybuffer"===ye||"blob"===ye||"nodebuffer"===ye?new q(le+ge+Ce.length):new O(le+ge+Ce.length),Le=0;Le<ne.length;Le++)Ee.append(ne[Le].fileRecord),Ee.append(ne[Le].compressedObject.compressedContent);for(Le=0;Le<ne.length;Le++)Ee.append(ne[Le].dirRecord);Ee.append(Ce);var $e=Ee.finalize();switch(Y.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return C.transformTo(Y.type.toLowerCase(),$e);case"blob":return C.arrayBuffer2Blob(C.transformTo("arraybuffer",$e));case"base64":return Y.base64?s.encode($e):$e;default:return $e}},crc32:function(Y,ne){return N(Y,ne)},utf8encode:function(Y){return C.transformTo("string",M.utf8encode(Y))},utf8decode:function(Y){return M.utf8decode(Y)}};w.exports=ie},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(y,w,E){E.LOCAL_FILE_HEADER="PK\x03\x04",E.CENTRAL_FILE_HEADER="PK\x01\x02",E.CENTRAL_DIRECTORY_END="PK\x05\x06",E.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",E.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",E.DATA_DESCRIPTOR="PK\x07\b"},{}],15:[function(y,w,E){var R=y("./dataReader"),C=y("./utils");function N(x,S){this.data=x,S||(this.data=C.string2binary(this.data)),this.length=this.data.length,this.index=0}(N.prototype=new R).byteAt=function(x){return this.data.charCodeAt(x)},N.prototype.lastIndexOfSignature=function(x){return this.data.lastIndexOf(x)},N.prototype.readData=function(x){this.checkOffset(x);var S=this.data.slice(this.index,this.index+x);return this.index+=x,S},w.exports=N},{"./dataReader":5,"./utils":21}],16:[function(y,w,E){var R=y("./utils"),C=function(){this.data=[]};C.prototype={append:function(N){N=R.transformTo("string",N),this.data.push(N)},finalize:function(){return this.data.join("")}},w.exports=C},{"./utils":21}],17:[function(y,w,E){(function(R){if(E.base64=!0,E.array=!0,E.string=!0,E.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",E.nodebuffer=typeof R<"u",E.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")E.blob=!1;else{var C=new ArrayBuffer(0);try{E.blob=0===new Blob([C],{type:"application/zip"}).size}catch{try{var x=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);x.append(C),E.blob=0===x.getBlob("application/zip").size}catch{E.blob=!1}}}}).call(this,typeof Buffer<"u"?Buffer:void 0)},{}],18:[function(y,w,E){var R=y("./dataReader");function C(N){N&&(this.data=N,this.length=this.data.length,this.index=0)}(C.prototype=new R).byteAt=function(N){return this.data[N]},C.prototype.lastIndexOfSignature=function(N){for(var x=N.charCodeAt(0),S=N.charCodeAt(1),s=N.charCodeAt(2),u=N.charCodeAt(3),m=this.length-4;m>=0;--m)if(this.data[m]===x&&this.data[m+1]===S&&this.data[m+2]===s&&this.data[m+3]===u)return m;return-1},C.prototype.readData=function(N){if(this.checkOffset(N),0===N)return new Uint8Array(0);var x=this.data.subarray(this.index,this.index+N);return this.index+=N,x},w.exports=C},{"./dataReader":5}],19:[function(y,w,E){var R=y("./utils"),C=function(N){this.data=new Uint8Array(N),this.index=0};C.prototype={append:function(N){0!==N.length&&(N=R.transformTo("uint8array",N),this.data.set(N,this.index),this.index+=N.length)},finalize:function(){return this.data}},w.exports=C},{"./utils":21}],20:[function(y,w,E){for(var R=y("./utils"),C=y("./support"),N=y("./nodeBuffer"),x=new Array(256),S=0;S<256;S++)x[S]=S>=252?6:S>=248?5:S>=240?4:S>=224?3:S>=192?2:1;x[254]=x[254]=1;var u=function(l,M){var O;for((M=M||l.length)>l.length&&(M=l.length),O=M-1;O>=0&&128==(192&l[O]);)O--;return O<0||0===O?M:O+x[l[O]]>M?O:M},m=function(l){var O,q,ee,G,B=l.length,A=new Array(2*B);for(q=0,O=0;O<B;)if((ee=l[O++])<128)A[q++]=ee;else if((G=x[ee])>4)A[q++]=65533,O+=G-1;else{for(ee&=2===G?31:3===G?15:7;G>1&&O<B;)ee=ee<<6|63&l[O++],G--;G>1?A[q++]=65533:ee<65536?A[q++]=ee:(A[q++]=55296|(ee-=65536)>>10&1023,A[q++]=56320|1023&ee)}return A.length!==q&&(A.subarray?A=A.subarray(0,q):A.length=q),R.applyFromCharCode(A)};E.utf8encode=function(M){return C.nodebuffer?N(M,"utf-8"):function(l){var M,O,q,ee,G,B=l.length,A=0;for(ee=0;ee<B;ee++)55296==(64512&(O=l.charCodeAt(ee)))&&ee+1<B&&56320==(64512&(q=l.charCodeAt(ee+1)))&&(O=65536+(O-55296<<10)+(q-56320),ee++),A+=O<128?1:O<2048?2:O<65536?3:4;for(M=C.uint8array?new Uint8Array(A):new Array(A),G=0,ee=0;G<A;ee++)55296==(64512&(O=l.charCodeAt(ee)))&&ee+1<B&&56320==(64512&(q=l.charCodeAt(ee+1)))&&(O=65536+(O-55296<<10)+(q-56320),ee++),O<128?M[G++]=O:O<2048?(M[G++]=192|O>>>6,M[G++]=128|63&O):O<65536?(M[G++]=224|O>>>12,M[G++]=128|O>>>6&63,M[G++]=128|63&O):(M[G++]=240|O>>>18,M[G++]=128|O>>>12&63,M[G++]=128|O>>>6&63,M[G++]=128|63&O);return M}(M)},E.utf8decode=function(M){if(C.nodebuffer)return R.transformTo("nodebuffer",M).toString("utf-8");for(var O=[],q=0,ee=(M=R.transformTo(C.uint8array?"uint8array":"array",M)).length;q<ee;){var B=u(M,Math.min(q+65536,ee));O.push(m(C.uint8array?M.subarray(q,B):M.slice(q,B))),q=B}return O.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(y,w,E){var R=y("./support"),C=y("./compressions"),N=y("./nodeBuffer");function x(l){return l}function S(l,M){for(var O=0;O<l.length;++O)M[O]=255&l.charCodeAt(O);return M}function s(l){var M=65536,O=[],q=l.length,ee=E.getTypeOf(l),G=0,B=!0;try{switch(ee){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,N(0))}}catch{B=!1}if(!B){for(var A="",H=0;H<l.length;H++)A+=String.fromCharCode(l[H]);return A}for(;G<q&&M>1;)try{O.push(String.fromCharCode.apply(null,"array"===ee||"nodebuffer"===ee?l.slice(G,Math.min(G+M,q)):l.subarray(G,Math.min(G+M,q)))),G+=M}catch{M=Math.floor(M/2)}return O.join("")}function u(l,M){for(var O=0;O<l.length;O++)M[O]=l[O];return M}E.string2binary=function(l){for(var M="",O=0;O<l.length;O++)M+=String.fromCharCode(255&l.charCodeAt(O));return M},E.arrayBuffer2Blob=function(l){E.checkSupport("blob");try{return new Blob([l],{type:"application/zip"})}catch{try{var O=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return O.append(l),O.getBlob("application/zip")}catch{throw new Error("Bug : can't construct the Blob.")}}},E.applyFromCharCode=s;var m={};m.string={string:x,array:function(l){return S(l,new Array(l.length))},arraybuffer:function(l){return m.string.uint8array(l).buffer},uint8array:function(l){return S(l,new Uint8Array(l.length))},nodebuffer:function(l){return S(l,N(l.length))}},m.array={string:s,array:x,arraybuffer:function(l){return new Uint8Array(l).buffer},uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return N(l)}},m.arraybuffer={string:function(l){return s(new Uint8Array(l))},array:function(l){return u(new Uint8Array(l),new Array(l.byteLength))},arraybuffer:x,uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return N(new Uint8Array(l))}},m.uint8array={string:s,array:function(l){return u(l,new Array(l.length))},arraybuffer:function(l){return l.buffer},uint8array:x,nodebuffer:function(l){return N(l)}},m.nodebuffer={string:s,array:function(l){return u(l,new Array(l.length))},arraybuffer:function(l){return m.nodebuffer.uint8array(l).buffer},uint8array:function(l){return u(l,new Uint8Array(l.length))},nodebuffer:x},E.transformTo=function(l,M){if(M||(M=""),!l)return M;E.checkSupport(l);var O=E.getTypeOf(M);return m[O][l](M)},E.getTypeOf=function(l){return"string"==typeof l?"string":"[object Array]"===Object.prototype.toString.call(l)?"array":R.nodebuffer&&N.test(l)?"nodebuffer":R.uint8array&&l instanceof Uint8Array?"uint8array":R.arraybuffer&&l instanceof ArrayBuffer?"arraybuffer":void 0},E.checkSupport=function(l){if(!R[l.toLowerCase()])throw new Error(l+" is not supported by this browser")},E.MAX_VALUE_16BITS=65535,E.MAX_VALUE_32BITS=-1,E.pretty=function(l){var O,q,M="";for(q=0;q<(l||"").length;q++)M+="\\x"+((O=l.charCodeAt(q))<16?"0":"")+O.toString(16).toUpperCase();return M},E.findCompression=function(l){for(var M in C)if(C.hasOwnProperty(M)&&C[M].magic===l)return C[M];return null},E.isRegExp=function(l){return"[object RegExp]"===Object.prototype.toString.call(l)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(y,w,E){var R=y("./stringReader"),C=y("./nodeBufferReader"),N=y("./uint8ArrayReader"),x=y("./utils"),S=y("./signature"),s=y("./zipEntry"),u=y("./support"),m=y("./object");function l(M,O){this.files=[],this.loadOptions=O,M&&this.load(M)}l.prototype={checkSignature:function(M){var O=this.reader.readString(4);if(O!==M)throw new Error("Corrupted zip or bug : unexpected signature ("+x.pretty(O)+", expected "+x.pretty(M)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=m.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var q,ee,G,M=this.zip64EndOfCentralSize-44;0<M;)q=this.reader.readInt(2),ee=this.reader.readInt(4),G=this.reader.readString(ee),this.zip64ExtensibleData[q]={id:q,length:ee,value:G}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var M,O;for(M=0;M<this.files.length;M++)this.reader.setIndex((O=this.files[M]).localHeaderOffset),this.checkSignature(S.LOCAL_FILE_HEADER),O.readLocalPart(this.reader),O.handleUTF8()},readCentralDir:function(){var M;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===S.CENTRAL_FILE_HEADER;)(M=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(M)},readEndOfCentral:function(){var M=this.reader.lastIndexOfSignature(S.CENTRAL_DIRECTORY_END);if(-1===M)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(M),this.checkSignature(S.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===x.MAX_VALUE_16BITS||this.diskWithCentralDirStart===x.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===x.MAX_VALUE_16BITS||this.centralDirRecords===x.MAX_VALUE_16BITS||this.centralDirSize===x.MAX_VALUE_32BITS||this.centralDirOffset===x.MAX_VALUE_32BITS){if(this.zip64=!0,-1===(M=this.reader.lastIndexOfSignature(S.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(M),this.checkSignature(S.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(S.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(M){var O=x.getTypeOf(M);this.reader="string"!==O||u.uint8array?"nodebuffer"===O?new C(M):new N(x.transformTo("uint8array",M)):new R(M,this.loadOptions.optimizedBinaryString)},load:function(M){this.prepareReader(M),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},w.exports=l},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(y,w,E){var R=y("./stringReader"),C=y("./utils"),N=y("./compressedObject"),x=y("./object");function S(s,u){this.options=s,this.loadOptions=u}S.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(s,u,m){return function(){var l=s.index;s.setIndex(u);var M=s.readData(m);return s.setIndex(l),M}},prepareContent:function(s,u,m,l,M){return function(){var O=C.transformTo(l.uncompressInputType,this.getCompressedContent()),q=l.uncompress(O);if(q.length!==M)throw new Error("Bug : uncompressed data size mismatch");return q}},readLocalPart:function(s){var u,m;if(s.skip(22),this.fileNameLength=s.readInt(2),m=s.readInt(2),this.fileName=s.readString(this.fileNameLength),s.skip(m),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(u=C.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+C.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new N,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(s,s.index,this.compressedSize,u),this.decompressed.getContent=this.prepareContent(s,s.index,this.compressedSize,u,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=C.transformTo("string",this.decompressed.getContent()),x.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(s){if(this.versionMadeBy=s.readString(2),this.versionNeeded=s.readInt(2),this.bitFlag=s.readInt(2),this.compressionMethod=s.readString(2),this.date=s.readDate(),this.crc32=s.readInt(4),this.compressedSize=s.readInt(4),this.uncompressedSize=s.readInt(4),this.fileNameLength=s.readInt(2),this.extraFieldsLength=s.readInt(2),this.fileCommentLength=s.readInt(2),this.diskNumberStart=s.readInt(2),this.internalFileAttributes=s.readInt(2),this.externalFileAttributes=s.readInt(4),this.localHeaderOffset=s.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=s.readString(this.fileNameLength),this.readExtraFields(s),this.parseZIP64ExtraField(s),this.fileComment=s.readString(this.fileCommentLength),this.dir=!!(16&this.externalFileAttributes)},parseZIP64ExtraField:function(s){if(this.extraFields[1]){var u=new R(this.extraFields[1].value);this.uncompressedSize===C.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===C.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===C.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===C.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(s){var m,l,M,u=s.index;for(this.extraFields=this.extraFields||{};s.index<u+this.extraFieldsLength;)m=s.readInt(2),l=s.readInt(2),M=s.readString(l),this.extraFields[m]={id:m,length:l,value:M}},handleUTF8:function(){if(this.useUTF8())this.fileName=x.utf8decode(this.fileName),this.fileComment=x.utf8decode(this.fileComment);else{var s=this.findExtraFieldUnicodePath();null!==s&&(this.fileName=s);var u=this.findExtraFieldUnicodeComment();null!==u&&(this.fileComment=u)}},findExtraFieldUnicodePath:function(){var s=this.extraFields[28789];if(s){var u=new R(s.value);return 1!==u.readInt(1)||x.crc32(this.fileName)!==u.readInt(4)?null:x.utf8decode(u.readString(s.length-5))}return null},findExtraFieldUnicodeComment:function(){var s=this.extraFields[25461];if(s){var u=new R(s.value);return 1!==u.readInt(1)||x.crc32(this.fileComment)!==u.readInt(4)?null:x.utf8decode(u.readString(s.length-5))}return null}},w.exports=S},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(y,w,E){var S={};(0,y("./lib/utils/common").assign)(S,y("./lib/deflate"),y("./lib/inflate"),y("./lib/zlib/constants")),w.exports=S},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(y,w,E){var R=y("./zlib/deflate.js"),C=y("./utils/common"),N=y("./utils/strings"),x=y("./zlib/messages"),S=y("./zlib/zstream"),ee=function(H){this.options=C.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},H||{});var $=this.options;$.raw&&$.windowBits>0?$.windowBits=-$.windowBits:$.gzip&&$.windowBits>0&&$.windowBits<16&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var J=R.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(0!==J)throw new Error(x[J]);$.header&&R.deflateSetHeader(this.strm,$.header)};function G(H,$){var J=new ee($);if(J.push(H,!0),J.err)throw J.msg;return J.result}ee.prototype.push=function(H,$){var U,K,J=this.strm,Q=this.options.chunkSize;if(this.ended)return!1;K=$===~~$?$:!0===$?4:0,J.input="string"==typeof H?N.string2buf(H):H,J.next_in=0,J.avail_in=J.input.length;do{if(0===J.avail_out&&(J.output=new C.Buf8(Q),J.next_out=0,J.avail_out=Q),1!==(U=R.deflate(J,K))&&0!==U)return this.onEnd(U),this.ended=!0,!1;(0===J.avail_out||0===J.avail_in&&4===K)&&this.onData("string"===this.options.to?N.buf2binstring(C.shrinkBuf(J.output,J.next_out)):C.shrinkBuf(J.output,J.next_out))}while((J.avail_in>0||0===J.avail_out)&&1!==U);return 4!==K||(U=R.deflateEnd(this.strm),this.onEnd(U),this.ended=!0,0===U)},ee.prototype.onData=function(H){this.chunks.push(H)},ee.prototype.onEnd=function(H){0===H&&(this.result="string"===this.options.to?this.chunks.join(""):C.flattenChunks(this.chunks)),this.chunks=[],this.err=H,this.msg=this.strm.msg},E.Deflate=ee,E.deflate=G,E.deflateRaw=function B(H,$){return($=$||{}).raw=!0,G(H,$)},E.gzip=function A(H,$){return($=$||{}).gzip=!0,G(H,$)}},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(y,w,E){var R=y("./zlib/inflate.js"),C=y("./utils/common"),N=y("./utils/strings"),x=y("./zlib/constants"),S=y("./zlib/messages"),s=y("./zlib/zstream"),u=y("./zlib/gzheader"),m=function(O){this.options=C.assign({chunkSize:16384,windowBits:0,to:""},O||{});var q=this.options;q.raw&&q.windowBits>=0&&q.windowBits<16&&(q.windowBits=-q.windowBits,0===q.windowBits&&(q.windowBits=-15)),q.windowBits>=0&&q.windowBits<16&&!(O&&O.windowBits)&&(q.windowBits+=32),q.windowBits>15&&q.windowBits<48&&0==(15&q.windowBits)&&(q.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var ee=R.inflateInit2(this.strm,q.windowBits);if(ee!==x.Z_OK)throw new Error(S[ee]);this.header=new u,R.inflateGetHeader(this.strm,this.header)};function l(O,q){var ee=new m(q);if(ee.push(O,!0),ee.err)throw ee.msg;return ee.result}m.prototype.push=function(O,q){var B,A,H,$,J,ee=this.strm,G=this.options.chunkSize;if(this.ended)return!1;A=q===~~q?q:!0===q?x.Z_FINISH:x.Z_NO_FLUSH,ee.input="string"==typeof O?N.binstring2buf(O):O,ee.next_in=0,ee.avail_in=ee.input.length;do{if(0===ee.avail_out&&(ee.output=new C.Buf8(G),ee.next_out=0,ee.avail_out=G),(B=R.inflate(ee,x.Z_NO_FLUSH))!==x.Z_STREAM_END&&B!==x.Z_OK)return this.onEnd(B),this.ended=!0,!1;ee.next_out&&(0===ee.avail_out||B===x.Z_STREAM_END||0===ee.avail_in&&A===x.Z_FINISH)&&("string"===this.options.to?(H=N.utf8border(ee.output,ee.next_out),$=ee.next_out-H,J=N.buf2string(ee.output,H),ee.next_out=$,ee.avail_out=G-$,$&&C.arraySet(ee.output,ee.output,H,$,0),this.onData(J)):this.onData(C.shrinkBuf(ee.output,ee.next_out)))}while(ee.avail_in>0&&B!==x.Z_STREAM_END);return B===x.Z_STREAM_END&&(A=x.Z_FINISH),A!==x.Z_FINISH||(B=R.inflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===x.Z_OK)},m.prototype.onData=function(O){this.chunks.push(O)},m.prototype.onEnd=function(O){O===x.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):C.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},E.Inflate=m,E.inflate=l,E.inflateRaw=function M(O,q){return(q=q||{}).raw=!0,l(O,q)},E.ungzip=l},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(y,w,E){var R=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";E.assign=function(x){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var s=S.shift();if(s){if("object"!=typeof s)throw new TypeError(s+"must be non-object");for(var u in s)s.hasOwnProperty(u)&&(x[u]=s[u])}}return x},E.shrinkBuf=function(x,S){return x.length===S?x:x.subarray?x.subarray(0,S):(x.length=S,x)};var C={arraySet:function(x,S,s,u,m){if(S.subarray&&x.subarray)x.set(S.subarray(s,s+u),m);else for(var l=0;l<u;l++)x[m+l]=S[s+l]},flattenChunks:function(x){var S,s,u,m,l,M;for(u=0,S=0,s=x.length;S<s;S++)u+=x[S].length;for(M=new Uint8Array(u),m=0,S=0,s=x.length;S<s;S++)M.set(l=x[S],m),m+=l.length;return M}},N={arraySet:function(x,S,s,u,m){for(var l=0;l<u;l++)x[m+l]=S[s+l]},flattenChunks:function(x){return[].concat.apply([],x)}};E.setTyped=function(x){x?(E.Buf8=Uint8Array,E.Buf16=Uint16Array,E.Buf32=Int32Array,E.assign(E,C)):(E.Buf8=Array,E.Buf16=Array,E.Buf32=Array,E.assign(E,N))},E.setTyped(R)},{}],28:[function(y,w,E){var R=y("./common"),C=!0,N=!0;try{String.fromCharCode.apply(null,[0])}catch{C=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{N=!1}for(var x=new R.Buf8(256),S=0;S<256;S++)x[S]=S>=252?6:S>=248?5:S>=240?4:S>=224?3:S>=192?2:1;function s(u,m){if(m<65537&&(u.subarray&&N||!u.subarray&&C))return String.fromCharCode.apply(null,R.shrinkBuf(u,m));for(var l="",M=0;M<m;M++)l+=String.fromCharCode(u[M]);return l}x[254]=x[254]=1,E.string2buf=function(u){var m,l,M,O,q,ee=u.length,G=0;for(O=0;O<ee;O++)55296==(64512&(l=u.charCodeAt(O)))&&O+1<ee&&56320==(64512&(M=u.charCodeAt(O+1)))&&(l=65536+(l-55296<<10)+(M-56320),O++),G+=l<128?1:l<2048?2:l<65536?3:4;for(m=new R.Buf8(G),q=0,O=0;q<G;O++)55296==(64512&(l=u.charCodeAt(O)))&&O+1<ee&&56320==(64512&(M=u.charCodeAt(O+1)))&&(l=65536+(l-55296<<10)+(M-56320),O++),l<128?m[q++]=l:l<2048?(m[q++]=192|l>>>6,m[q++]=128|63&l):l<65536?(m[q++]=224|l>>>12,m[q++]=128|l>>>6&63,m[q++]=128|63&l):(m[q++]=240|l>>>18,m[q++]=128|l>>>12&63,m[q++]=128|l>>>6&63,m[q++]=128|63&l);return m},E.buf2binstring=function(u){return s(u,u.length)},E.binstring2buf=function(u){for(var m=new R.Buf8(u.length),l=0,M=m.length;l<M;l++)m[l]=u.charCodeAt(l);return m},E.buf2string=function(u,m){var l,M,O,q,ee=m||u.length,G=new Array(2*ee);for(M=0,l=0;l<ee;)if((O=u[l++])<128)G[M++]=O;else if((q=x[O])>4)G[M++]=65533,l+=q-1;else{for(O&=2===q?31:3===q?15:7;q>1&&l<ee;)O=O<<6|63&u[l++],q--;q>1?G[M++]=65533:O<65536?G[M++]=O:(G[M++]=55296|(O-=65536)>>10&1023,G[M++]=56320|1023&O)}return s(G,M)},E.utf8border=function(u,m){var l;for((m=m||u.length)>u.length&&(m=u.length),l=m-1;l>=0&&128==(192&u[l]);)l--;return l<0||0===l?m:l+x[u[l]]>m?l:m}},{"./common":27}],29:[function(y,w,E){w.exports=function R(C,N,x,S){for(var s=65535&C|0,u=C>>>16&65535|0,m=0;0!==x;){x-=m=x>2e3?2e3:x;do{u=u+(s=s+N[S++]|0)|0}while(--m);s%=65521,u%=65521}return s|u<<16|0}},{}],30:[function(y,w,E){w.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(y,w,E){var C=function R(){for(var x,S=[],s=0;s<256;s++){x=s;for(var u=0;u<8;u++)x=1&x?3988292384^x>>>1:x>>>1;S[s]=x}return S}();w.exports=function N(x,S,s,u){var m=C,l=u+s;x^=-1;for(var M=u;M<l;M++)x=x>>>8^m[255&(x^S[M])];return-1^x}},{}],32:[function(y,w,E){var R=y("../utils/common"),C=y("./trees"),N=y("./adler32"),x=y("./crc32"),S=y("./messages"),Me=258,je=262;function Re(te,Ue){return te.msg=S[Ue],Ue}function ot(te){return(te<<1)-(te>4?9:0)}function pt(te){for(var Ue=te.length;--Ue>=0;)te[Ue]=0}function ct(te){var Ue=te.state,Ke=Ue.pending;Ke>te.avail_out&&(Ke=te.avail_out),0!==Ke&&(R.arraySet(te.output,Ue.pending_buf,Ue.pending_out,Ke,te.next_out),te.next_out+=Ke,Ue.pending_out+=Ke,te.total_out+=Ke,te.avail_out-=Ke,Ue.pending-=Ke,0===Ue.pending&&(Ue.pending_out=0))}function st(te,Ue){C._tr_flush_block(te,te.block_start>=0?te.block_start:-1,te.strstart-te.block_start,Ue),te.block_start=te.strstart,ct(te.strm)}function Ze(te,Ue){te.pending_buf[te.pending++]=Ue}function it(te,Ue){te.pending_buf[te.pending++]=Ue>>>8&255,te.pending_buf[te.pending++]=255&Ue}function vt(te,Ue,Ke,ve){var Te=te.avail_in;return Te>ve&&(Te=ve),0===Te?0:(te.avail_in-=Te,R.arraySet(Ue,te.input,te.next_in,Te,Ke),1===te.state.wrap?te.adler=N(te.adler,Ue,Te,Ke):2===te.state.wrap&&(te.adler=x(te.adler,Ue,Te,Ke)),te.next_in+=Te,te.total_in+=Te,Te)}function nt(te,Ue){var Te,Je,Ke=te.max_chain_length,ve=te.strstart,bt=te.prev_length,ut=te.nice_match,_t=te.strstart>te.w_size-je?te.strstart-(te.w_size-je):0,kt=te.window,It=te.w_mask,Tt=te.prev,St=te.strstart+Me,At=kt[ve+bt-1],Ot=kt[ve+bt];te.prev_length>=te.good_match&&(Ke>>=2),ut>te.lookahead&&(ut=te.lookahead);do{if(kt[(Te=Ue)+bt]===Ot&&kt[Te+bt-1]===At&&kt[Te]===kt[ve]&&kt[++Te]===kt[ve+1]){ve+=2,Te++;do{}while(kt[++ve]===kt[++Te]&&kt[++ve]===kt[++Te]&&kt[++ve]===kt[++Te]&&kt[++ve]===kt[++Te]&&kt[++ve]===kt[++Te]&&kt[++ve]===kt[++Te]&&kt[++ve]===kt[++Te]&&kt[++ve]===kt[++Te]&&ve<St);if(Je=Me-(St-ve),ve=St-Me,Je>bt){if(te.match_start=Ue,bt=Je,Je>=ut)break;At=kt[ve+bt-1],Ot=kt[ve+bt]}}}while((Ue=Tt[Ue&It])>_t&&0!=--Ke);return bt<=te.lookahead?bt:te.lookahead}function gt(te){var Ke,ve,Te,Je,bt,Ue=te.w_size;do{if(Je=te.window_size-te.lookahead-te.strstart,te.strstart>=Ue+(Ue-je)){R.arraySet(te.window,te.window,Ue,Ue,0),te.match_start-=Ue,te.strstart-=Ue,te.block_start-=Ue,Ke=ve=te.hash_size;do{Te=te.head[--Ke],te.head[Ke]=Te>=Ue?Te-Ue:0}while(--ve);Ke=ve=Ue;do{Te=te.prev[--Ke],te.prev[Ke]=Te>=Ue?Te-Ue:0}while(--ve);Je+=Ue}if(0===te.strm.avail_in)break;if(ve=vt(te.strm,te.window,te.strstart+te.lookahead,Je),te.lookahead+=ve,te.lookahead+te.insert>=3)for(te.ins_h=te.window[bt=te.strstart-te.insert],te.ins_h=(te.ins_h<<te.hash_shift^te.window[bt+1])&te.hash_mask;te.insert&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[bt+3-1])&te.hash_mask,te.prev[bt&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=bt,bt++,te.insert--,!(te.lookahead+te.insert<3)););}while(te.lookahead<je&&0!==te.strm.avail_in)}function et(te,Ue){for(var Ke,ve;;){if(te.lookahead<je){if(gt(te),te.lookahead<je&&0===Ue)return 1;if(0===te.lookahead)break}if(Ke=0,te.lookahead>=3&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+3-1])&te.hash_mask,Ke=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart),0!==Ke&&te.strstart-Ke<=te.w_size-je&&(te.match_length=nt(te,Ke)),te.match_length>=3)if(ve=C._tr_tally(te,te.strstart-te.match_start,te.match_length-3),te.lookahead-=te.match_length,te.match_length<=te.max_lazy_match&&te.lookahead>=3){te.match_length--;do{te.strstart++,te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+3-1])&te.hash_mask,Ke=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart}while(0!=--te.match_length);te.strstart++}else te.strstart+=te.match_length,te.match_length=0,te.ins_h=te.window[te.strstart],te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+1])&te.hash_mask;else ve=C._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++;if(ve&&(st(te,!1),0===te.strm.avail_out))return 1}return te.insert=te.strstart<2?te.strstart:2,4===Ue?(st(te,!0),0===te.strm.avail_out?3:4):te.last_lit&&(st(te,!1),0===te.strm.avail_out)?1:2}function Et(te,Ue){for(var Ke,ve,Te;;){if(te.lookahead<je){if(gt(te),te.lookahead<je&&0===Ue)return 1;if(0===te.lookahead)break}if(Ke=0,te.lookahead>=3&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+3-1])&te.hash_mask,Ke=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart),te.prev_length=te.match_length,te.prev_match=te.match_start,te.match_length=2,0!==Ke&&te.prev_length<te.max_lazy_match&&te.strstart-Ke<=te.w_size-je&&(te.match_length=nt(te,Ke),te.match_length<=5&&(1===te.strategy||3===te.match_length&&te.strstart-te.match_start>4096)&&(te.match_length=2)),te.prev_length>=3&&te.match_length<=te.prev_length){Te=te.strstart+te.lookahead-3,ve=C._tr_tally(te,te.strstart-1-te.prev_match,te.prev_length-3),te.lookahead-=te.prev_length-1,te.prev_length-=2;do{++te.strstart<=Te&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+3-1])&te.hash_mask,Ke=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart)}while(0!=--te.prev_length);if(te.match_available=0,te.match_length=2,te.strstart++,ve&&(st(te,!1),0===te.strm.avail_out))return 1}else if(te.match_available){if((ve=C._tr_tally(te,0,te.window[te.strstart-1]))&&st(te,!1),te.strstart++,te.lookahead--,0===te.strm.avail_out)return 1}else te.match_available=1,te.strstart++,te.lookahead--}return te.match_available&&(ve=C._tr_tally(te,0,te.window[te.strstart-1]),te.match_available=0),te.insert=te.strstart<2?te.strstart:2,4===Ue?(st(te,!0),0===te.strm.avail_out?3:4):te.last_lit&&(st(te,!1),0===te.strm.avail_out)?1:2}var me,Ie=function(te,Ue,Ke,ve,Te){this.good_length=te,this.max_lazy=Ue,this.nice_length=Ke,this.max_chain=ve,this.func=Te};function se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new R.Buf16(1146),this.dyn_dtree=new R.Buf16(122),this.bl_tree=new R.Buf16(78),pt(this.dyn_ltree),pt(this.dyn_dtree),pt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new R.Buf16(16),this.heap=new R.Buf16(573),pt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new R.Buf16(573),pt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function De(te){var Ue;return te&&te.state?(te.total_in=te.total_out=0,te.data_type=2,(Ue=te.state).pending=0,Ue.pending_out=0,Ue.wrap<0&&(Ue.wrap=-Ue.wrap),Ue.status=Ue.wrap?42:113,te.adler=2===Ue.wrap?0:1,Ue.last_flush=0,C._tr_init(Ue),0):Re(te,-2)}function We(te){var Ue=De(te);return 0===Ue&&function Be(te){te.window_size=2*te.w_size,pt(te.head),te.max_lazy_match=me[te.level].max_lazy,te.good_match=me[te.level].good_length,te.nice_match=me[te.level].nice_length,te.max_chain_length=me[te.level].max_chain,te.strstart=0,te.block_start=0,te.lookahead=0,te.insert=0,te.match_length=te.prev_length=2,te.match_available=0,te.ins_h=0}(te.state),Ue}function Pe(te,Ue,Ke,ve,Te,Je){if(!te)return-2;var bt=1;if(-1===Ue&&(Ue=6),ve<0?(bt=0,ve=-ve):ve>15&&(bt=2,ve-=16),Te<1||Te>9||8!==Ke||ve<8||ve>15||Ue<0||Ue>9||Je<0||Je>4)return Re(te,-2);8===ve&&(ve=9);var ut=new se;return te.state=ut,ut.strm=te,ut.wrap=bt,ut.gzhead=null,ut.w_bits=ve,ut.w_size=1<<ut.w_bits,ut.w_mask=ut.w_size-1,ut.hash_bits=Te+7,ut.hash_size=1<<ut.hash_bits,ut.hash_mask=ut.hash_size-1,ut.hash_shift=~~((ut.hash_bits+3-1)/3),ut.window=new R.Buf8(2*ut.w_size),ut.head=new R.Buf16(ut.hash_size),ut.prev=new R.Buf16(ut.w_size),ut.lit_bufsize=1<<Te+6,ut.pending_buf_size=4*ut.lit_bufsize,ut.pending_buf=new R.Buf8(ut.pending_buf_size),ut.d_buf=ut.lit_bufsize>>1,ut.l_buf=3*ut.lit_bufsize,ut.level=Ue,ut.strategy=Je,ut.method=Ke,We(te)}me=[new Ie(0,0,0,0,function Ye(te,Ue){var Ke=65535;for(Ke>te.pending_buf_size-5&&(Ke=te.pending_buf_size-5);;){if(te.lookahead<=1){if(gt(te),0===te.lookahead&&0===Ue)return 1;if(0===te.lookahead)break}te.strstart+=te.lookahead,te.lookahead=0;var ve=te.block_start+Ke;if((0===te.strstart||te.strstart>=ve)&&(te.lookahead=te.strstart-ve,te.strstart=ve,st(te,!1),0===te.strm.avail_out)||te.strstart-te.block_start>=te.w_size-je&&(st(te,!1),0===te.strm.avail_out))return 1}return te.insert=0,4===Ue?(st(te,!0),0===te.strm.avail_out?3:4):(te.strstart>te.block_start&&st(te,!1),1)}),new Ie(4,4,8,4,et),new Ie(4,5,16,8,et),new Ie(4,6,32,32,et),new Ie(4,4,16,16,Et),new Ie(8,16,32,32,Et),new Ie(8,16,128,128,Et),new Ie(8,32,128,256,Et),new Ie(32,128,258,1024,Et),new Ie(32,258,258,4096,Et)],E.deflateInit=function ce(te,Ue){return Pe(te,Ue,8,15,8,0)},E.deflateInit2=Pe,E.deflateReset=We,E.deflateResetKeep=De,E.deflateSetHeader=function ke(te,Ue){return te&&te.state&&2===te.state.wrap?(te.state.gzhead=Ue,0):-2},E.deflate=function Ge(te,Ue){var Ke,ve,Te,Je;if(!te||!te.state||Ue>5||Ue<0)return te?Re(te,-2):-2;if(ve=te.state,!te.output||!te.input&&0!==te.avail_in||666===ve.status&&4!==Ue)return Re(te,0===te.avail_out?-5:-2);if(ve.strm=te,Ke=ve.last_flush,ve.last_flush=Ue,42===ve.status)if(2===ve.wrap)te.adler=0,Ze(ve,31),Ze(ve,139),Ze(ve,8),ve.gzhead?(Ze(ve,(ve.gzhead.text?1:0)+(ve.gzhead.hcrc?2:0)+(ve.gzhead.extra?4:0)+(ve.gzhead.name?8:0)+(ve.gzhead.comment?16:0)),Ze(ve,255&ve.gzhead.time),Ze(ve,ve.gzhead.time>>8&255),Ze(ve,ve.gzhead.time>>16&255),Ze(ve,ve.gzhead.time>>24&255),Ze(ve,9===ve.level?2:ve.strategy>=2||ve.level<2?4:0),Ze(ve,255&ve.gzhead.os),ve.gzhead.extra&&ve.gzhead.extra.length&&(Ze(ve,255&ve.gzhead.extra.length),Ze(ve,ve.gzhead.extra.length>>8&255)),ve.gzhead.hcrc&&(te.adler=x(te.adler,ve.pending_buf,ve.pending,0)),ve.gzindex=0,ve.status=69):(Ze(ve,0),Ze(ve,0),Ze(ve,0),Ze(ve,0),Ze(ve,0),Ze(ve,9===ve.level?2:ve.strategy>=2||ve.level<2?4:0),Ze(ve,3),ve.status=113);else{var bt=8+(ve.w_bits-8<<4)<<8;bt|=(ve.strategy>=2||ve.level<2?0:ve.level<6?1:6===ve.level?2:3)<<6,0!==ve.strstart&&(bt|=32),bt+=31-bt%31,ve.status=113,it(ve,bt),0!==ve.strstart&&(it(ve,te.adler>>>16),it(ve,65535&te.adler)),te.adler=1}if(69===ve.status)if(ve.gzhead.extra){for(Te=ve.pending;ve.gzindex<(65535&ve.gzhead.extra.length)&&(ve.pending!==ve.pending_buf_size||(ve.gzhead.hcrc&&ve.pending>Te&&(te.adler=x(te.adler,ve.pending_buf,ve.pending-Te,Te)),ct(te),Te=ve.pending,ve.pending!==ve.pending_buf_size));)Ze(ve,255&ve.gzhead.extra[ve.gzindex]),ve.gzindex++;ve.gzhead.hcrc&&ve.pending>Te&&(te.adler=x(te.adler,ve.pending_buf,ve.pending-Te,Te)),ve.gzindex===ve.gzhead.extra.length&&(ve.gzindex=0,ve.status=73)}else ve.status=73;if(73===ve.status)if(ve.gzhead.name){Te=ve.pending;do{if(ve.pending===ve.pending_buf_size&&(ve.gzhead.hcrc&&ve.pending>Te&&(te.adler=x(te.adler,ve.pending_buf,ve.pending-Te,Te)),ct(te),Te=ve.pending,ve.pending===ve.pending_buf_size)){Je=1;break}Je=ve.gzindex<ve.gzhead.name.length?255&ve.gzhead.name.charCodeAt(ve.gzindex++):0,Ze(ve,Je)}while(0!==Je);ve.gzhead.hcrc&&ve.pending>Te&&(te.adler=x(te.adler,ve.pending_buf,ve.pending-Te,Te)),0===Je&&(ve.gzindex=0,ve.status=91)}else ve.status=91;if(91===ve.status)if(ve.gzhead.comment){Te=ve.pending;do{if(ve.pending===ve.pending_buf_size&&(ve.gzhead.hcrc&&ve.pending>Te&&(te.adler=x(te.adler,ve.pending_buf,ve.pending-Te,Te)),ct(te),Te=ve.pending,ve.pending===ve.pending_buf_size)){Je=1;break}Je=ve.gzindex<ve.gzhead.comment.length?255&ve.gzhead.comment.charCodeAt(ve.gzindex++):0,Ze(ve,Je)}while(0!==Je);ve.gzhead.hcrc&&ve.pending>Te&&(te.adler=x(te.adler,ve.pending_buf,ve.pending-Te,Te)),0===Je&&(ve.status=103)}else ve.status=103;if(103===ve.status&&(ve.gzhead.hcrc?(ve.pending+2>ve.pending_buf_size&&ct(te),ve.pending+2<=ve.pending_buf_size&&(Ze(ve,255&te.adler),Ze(ve,te.adler>>8&255),te.adler=0,ve.status=113)):ve.status=113),0!==ve.pending){if(ct(te),0===te.avail_out)return ve.last_flush=-1,0}else if(0===te.avail_in&&ot(Ue)<=ot(Ke)&&4!==Ue)return Re(te,-5);if(666===ve.status&&0!==te.avail_in)return Re(te,-5);if(0!==te.avail_in||0!==ve.lookahead||0!==Ue&&666!==ve.status){var _t=2===ve.strategy?function Nt(te,Ue){for(var Ke;;){if(0===te.lookahead&&(gt(te),0===te.lookahead)){if(0===Ue)return 1;break}if(te.match_length=0,Ke=C._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++,Ke&&(st(te,!1),0===te.strm.avail_out))return 1}return te.insert=0,4===Ue?(st(te,!0),0===te.strm.avail_out?3:4):te.last_lit&&(st(te,!1),0===te.strm.avail_out)?1:2}(ve,Ue):3===ve.strategy?function Ct(te,Ue){for(var Ke,ve,Te,Je,bt=te.window;;){if(te.lookahead<=Me){if(gt(te),te.lookahead<=Me&&0===Ue)return 1;if(0===te.lookahead)break}if(te.match_length=0,te.lookahead>=3&&te.strstart>0&&(ve=bt[Te=te.strstart-1])===bt[++Te]&&ve===bt[++Te]&&ve===bt[++Te]){Je=te.strstart+Me;do{}while(ve===bt[++Te]&&ve===bt[++Te]&&ve===bt[++Te]&&ve===bt[++Te]&&ve===bt[++Te]&&ve===bt[++Te]&&ve===bt[++Te]&&ve===bt[++Te]&&Te<Je);te.match_length=Me-(Je-Te),te.match_length>te.lookahead&&(te.match_length=te.lookahead)}if(te.match_length>=3?(Ke=C._tr_tally(te,1,te.match_length-3),te.lookahead-=te.match_length,te.strstart+=te.match_length,te.match_length=0):(Ke=C._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++),Ke&&(st(te,!1),0===te.strm.avail_out))return 1}return te.insert=0,4===Ue?(st(te,!0),0===te.strm.avail_out?3:4):te.last_lit&&(st(te,!1),0===te.strm.avail_out)?1:2}(ve,Ue):me[ve.level].func(ve,Ue);if((3===_t||4===_t)&&(ve.status=666),1===_t||3===_t)return 0===te.avail_out&&(ve.last_flush=-1),0;if(2===_t&&(1===Ue?C._tr_align(ve):5!==Ue&&(C._tr_stored_block(ve,0,0,!1),3===Ue&&(pt(ve.head),0===ve.lookahead&&(ve.strstart=0,ve.block_start=0,ve.insert=0))),ct(te),0===te.avail_out))return ve.last_flush=-1,0}return 4!==Ue?0:ve.wrap<=0?1:(2===ve.wrap?(Ze(ve,255&te.adler),Ze(ve,te.adler>>8&255),Ze(ve,te.adler>>16&255),Ze(ve,te.adler>>24&255),Ze(ve,255&te.total_in),Ze(ve,te.total_in>>8&255),Ze(ve,te.total_in>>16&255),Ze(ve,te.total_in>>24&255)):(it(ve,te.adler>>>16),it(ve,65535&te.adler)),ct(te),ve.wrap>0&&(ve.wrap=-ve.wrap),0!==ve.pending?0:1)},E.deflateEnd=function dt(te){var Ue;return te&&te.state?42!==(Ue=te.state.status)&&69!==Ue&&73!==Ue&&91!==Ue&&103!==Ue&&113!==Ue&&666!==Ue?Re(te,-2):(te.state=null,113===Ue?Re(te,-3):0):-2},E.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(y,w,E){w.exports=function R(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],34:[function(y,w,E){w.exports=function(x,S){var s,u,m,l,M,O,q,ee,G,B,A,H,$,J,Q,U,K,F,L,ie,Y,ne,le,ge,Ee;ge=x.input,m=(u=x.next_in)+(x.avail_in-5),Ee=x.output,M=(l=x.next_out)-(S-x.avail_out),O=l+(x.avail_out-257),q=(s=x.state).dmax,ee=s.wsize,G=s.whave,B=s.wnext,A=s.window,H=s.hold,$=s.bits,J=s.lencode,Q=s.distcode,U=(1<<s.lenbits)-1,K=(1<<s.distbits)-1;e:do{$<15&&(H+=ge[u++]<<$,H+=ge[u++]<<($+=8),$+=8),F=J[H&U];t:for(;;){if(H>>>=L=F>>>24,$-=L,0==(L=F>>>16&255))Ee[l++]=65535&F;else{if(!(16&L)){if(0==(64&L)){F=J[(65535&F)+(H&(1<<L)-1)];continue t}if(32&L){s.mode=12;break e}x.msg="invalid literal/length code",s.mode=30;break e}ie=65535&F,(L&=15)&&($<L&&(H+=ge[u++]<<$,$+=8),ie+=H&(1<<L)-1,H>>>=L,$-=L),$<15&&(H+=ge[u++]<<$,H+=ge[u++]<<($+=8),$+=8),F=Q[H&K];n:for(;;){if(H>>>=L=F>>>24,$-=L,!(16&(L=F>>>16&255))){if(0==(64&L)){F=Q[(65535&F)+(H&(1<<L)-1)];continue n}x.msg="invalid distance code",s.mode=30;break e}if(Y=65535&F,$<(L&=15)&&(H+=ge[u++]<<$,($+=8)<L&&(H+=ge[u++]<<$,$+=8)),(Y+=H&(1<<L)-1)>q){x.msg="invalid distance too far back",s.mode=30;break e}if(H>>>=L,$-=L,Y>(L=l-M)){if((L=Y-L)>G&&s.sane){x.msg="invalid distance too far back",s.mode=30;break e}if(ne=0,le=A,0===B){if(ne+=ee-L,L<ie){ie-=L;do{Ee[l++]=A[ne++]}while(--L);ne=l-Y,le=Ee}}else if(B<L){if(ne+=ee+B-L,(L-=B)<ie){ie-=L;do{Ee[l++]=A[ne++]}while(--L);if(ne=0,B<ie){ie-=L=B;do{Ee[l++]=A[ne++]}while(--L);ne=l-Y,le=Ee}}}else if(ne+=B-L,L<ie){ie-=L;do{Ee[l++]=A[ne++]}while(--L);ne=l-Y,le=Ee}for(;ie>2;)Ee[l++]=le[ne++],Ee[l++]=le[ne++],Ee[l++]=le[ne++],ie-=3;ie&&(Ee[l++]=le[ne++],ie>1&&(Ee[l++]=le[ne++]))}else{ne=l-Y;do{Ee[l++]=Ee[ne++],Ee[l++]=Ee[ne++],Ee[l++]=Ee[ne++],ie-=3}while(ie>2);ie&&(Ee[l++]=Ee[ne++],ie>1&&(Ee[l++]=Ee[ne++]))}break}}break}}while(u<m&&l<O);H&=(1<<($-=(ie=$>>3)<<3))-1,x.next_in=u-=ie,x.next_out=l,x.avail_in=u<m?m-u+5:5-(u-m),x.avail_out=l<O?O-l+257:257-(l-O),s.hold=H,s.bits=$}},{}],35:[function(y,w,E){var R=y("../utils/common"),C=y("./adler32"),N=y("./crc32"),x=y("./inffast"),S=y("./inftrees"),B=-2;function it(ke){return(ke>>>24&255)+(ke>>>8&65280)+((65280&ke)<<8)+((255&ke)<<24)}function vt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new R.Buf16(320),this.work=new R.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function nt(ke){var Pe;return ke&&ke.state?(ke.total_in=ke.total_out=(Pe=ke.state).total=0,ke.msg="",Pe.wrap&&(ke.adler=1&Pe.wrap),Pe.mode=1,Pe.last=0,Pe.havedict=0,Pe.dmax=32768,Pe.head=null,Pe.hold=0,Pe.bits=0,Pe.lencode=Pe.lendyn=new R.Buf32(852),Pe.distcode=Pe.distdyn=new R.Buf32(592),Pe.sane=1,Pe.back=-1,0):B}function gt(ke){var Pe;return ke&&ke.state?((Pe=ke.state).wsize=0,Pe.whave=0,Pe.wnext=0,nt(ke)):B}function Ye(ke,Pe){var ce,Ge;return!ke||!ke.state||(Ge=ke.state,Pe<0?(ce=0,Pe=-Pe):(ce=1+(Pe>>4),Pe<48&&(Pe&=15)),Pe&&(Pe<8||Pe>15))?B:(null!==Ge.window&&Ge.wbits!==Pe&&(Ge.window=null),Ge.wrap=ce,Ge.wbits=Pe,gt(ke))}function et(ke,Pe){var ce,Ge;return ke?(Ge=new vt,ke.state=Ge,Ge.window=null,0!==(ce=Ye(ke,Pe))&&(ke.state=null),ce):B}var Nt,Ie,Ct=!0;function me(ke){if(Ct){var Pe;for(Nt=new R.Buf32(512),Ie=new R.Buf32(32),Pe=0;Pe<144;)ke.lens[Pe++]=8;for(;Pe<256;)ke.lens[Pe++]=9;for(;Pe<280;)ke.lens[Pe++]=7;for(;Pe<288;)ke.lens[Pe++]=8;for(S(1,ke.lens,0,288,Nt,0,ke.work,{bits:9}),Pe=0;Pe<32;)ke.lens[Pe++]=5;S(2,ke.lens,0,32,Ie,0,ke.work,{bits:5}),Ct=!1}ke.lencode=Nt,ke.lenbits=9,ke.distcode=Ie,ke.distbits=5}E.inflateReset=gt,E.inflateReset2=Ye,E.inflateResetKeep=nt,E.inflateInit=function Et(ke){return et(ke,15)},E.inflateInit2=et,E.inflate=function se(ke,Pe){var ce,Ge,dt,te,Ue,Ke,ve,Te,Je,bt,ut,_t,kt,It,St,At,Ot,Mt,t,j,a,v,i,o,Tt=0,_=new R.Buf8(4),c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ke||!ke.state||!ke.output||!ke.input&&0!==ke.avail_in)return B;12===(ce=ke.state).mode&&(ce.mode=13),Ue=ke.next_out,dt=ke.output,te=ke.next_in,Ge=ke.input,Te=ce.hold,Je=ce.bits,bt=Ke=ke.avail_in,ut=ve=ke.avail_out,v=0;e:for(;;)switch(ce.mode){case 1:if(0===ce.wrap){ce.mode=13;break}for(;Je<16;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}if(2&ce.wrap&&35615===Te){ce.check=0,_[0]=255&Te,_[1]=Te>>>8&255,ce.check=N(ce.check,_,2,0),Te=0,Je=0,ce.mode=2;break}if(ce.flags=0,ce.head&&(ce.head.done=!1),!(1&ce.wrap)||(((255&Te)<<8)+(Te>>8))%31){ke.msg="incorrect header check",ce.mode=30;break}if(8!=(15&Te)){ke.msg="unknown compression method",ce.mode=30;break}if(Je-=4,a=8+(15&(Te>>>=4)),0===ce.wbits)ce.wbits=a;else if(a>ce.wbits){ke.msg="invalid window size",ce.mode=30;break}ce.dmax=1<<a,ke.adler=ce.check=1,ce.mode=512&Te?10:12,Te=0,Je=0;break;case 2:for(;Je<16;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}if(ce.flags=Te,8!=(255&ce.flags)){ke.msg="unknown compression method",ce.mode=30;break}if(57344&ce.flags){ke.msg="unknown header flags set",ce.mode=30;break}ce.head&&(ce.head.text=Te>>8&1),512&ce.flags&&(_[0]=255&Te,_[1]=Te>>>8&255,ce.check=N(ce.check,_,2,0)),Te=0,Je=0,ce.mode=3;case 3:for(;Je<32;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}ce.head&&(ce.head.time=Te),512&ce.flags&&(_[0]=255&Te,_[1]=Te>>>8&255,_[2]=Te>>>16&255,_[3]=Te>>>24&255,ce.check=N(ce.check,_,4,0)),Te=0,Je=0,ce.mode=4;case 4:for(;Je<16;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}ce.head&&(ce.head.xflags=255&Te,ce.head.os=Te>>8),512&ce.flags&&(_[0]=255&Te,_[1]=Te>>>8&255,ce.check=N(ce.check,_,2,0)),Te=0,Je=0,ce.mode=5;case 5:if(1024&ce.flags){for(;Je<16;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}ce.length=Te,ce.head&&(ce.head.extra_len=Te),512&ce.flags&&(_[0]=255&Te,_[1]=Te>>>8&255,ce.check=N(ce.check,_,2,0)),Te=0,Je=0}else ce.head&&(ce.head.extra=null);ce.mode=6;case 6:if(1024&ce.flags&&((_t=ce.length)>Ke&&(_t=Ke),_t&&(ce.head&&(a=ce.head.extra_len-ce.length,ce.head.extra||(ce.head.extra=new Array(ce.head.extra_len)),R.arraySet(ce.head.extra,Ge,te,_t,a)),512&ce.flags&&(ce.check=N(ce.check,Ge,_t,te)),Ke-=_t,te+=_t,ce.length-=_t),ce.length))break e;ce.length=0,ce.mode=7;case 7:if(2048&ce.flags){if(0===Ke)break e;_t=0;do{a=Ge[te+_t++],ce.head&&a&&ce.length<65536&&(ce.head.name+=String.fromCharCode(a))}while(a&&_t<Ke);if(512&ce.flags&&(ce.check=N(ce.check,Ge,_t,te)),Ke-=_t,te+=_t,a)break e}else ce.head&&(ce.head.name=null);ce.length=0,ce.mode=8;case 8:if(4096&ce.flags){if(0===Ke)break e;_t=0;do{a=Ge[te+_t++],ce.head&&a&&ce.length<65536&&(ce.head.comment+=String.fromCharCode(a))}while(a&&_t<Ke);if(512&ce.flags&&(ce.check=N(ce.check,Ge,_t,te)),Ke-=_t,te+=_t,a)break e}else ce.head&&(ce.head.comment=null);ce.mode=9;case 9:if(512&ce.flags){for(;Je<16;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}if(Te!==(65535&ce.check)){ke.msg="header crc mismatch",ce.mode=30;break}Te=0,Je=0}ce.head&&(ce.head.hcrc=ce.flags>>9&1,ce.head.done=!0),ke.adler=ce.check=0,ce.mode=12;break;case 10:for(;Je<32;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}ke.adler=ce.check=it(Te),Te=0,Je=0,ce.mode=11;case 11:if(0===ce.havedict)return ke.next_out=Ue,ke.avail_out=ve,ke.next_in=te,ke.avail_in=Ke,ce.hold=Te,ce.bits=Je,2;ke.adler=ce.check=1,ce.mode=12;case 12:if(5===Pe||6===Pe)break e;case 13:if(ce.last){Te>>>=7&Je,Je-=7&Je,ce.mode=27;break}for(;Je<3;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}switch(ce.last=1&Te,Je-=1,3&(Te>>>=1)){case 0:ce.mode=14;break;case 1:if(me(ce),ce.mode=20,6===Pe){Te>>>=2,Je-=2;break e}break;case 2:ce.mode=17;break;case 3:ke.msg="invalid block type",ce.mode=30}Te>>>=2,Je-=2;break;case 14:for(Te>>>=7&Je,Je-=7&Je;Je<32;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}if((65535&Te)!=(Te>>>16^65535)){ke.msg="invalid stored block lengths",ce.mode=30;break}if(ce.length=65535&Te,Te=0,Je=0,ce.mode=15,6===Pe)break e;case 15:ce.mode=16;case 16:if(_t=ce.length){if(_t>Ke&&(_t=Ke),_t>ve&&(_t=ve),0===_t)break e;R.arraySet(dt,Ge,te,_t,Ue),Ke-=_t,te+=_t,ve-=_t,Ue+=_t,ce.length-=_t;break}ce.mode=12;break;case 17:for(;Je<14;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}if(ce.nlen=257+(31&Te),Je-=5,ce.ndist=1+(31&(Te>>>=5)),Je-=5,ce.ncode=4+(15&(Te>>>=5)),Te>>>=4,Je-=4,ce.nlen>286||ce.ndist>30){ke.msg="too many length or distance symbols",ce.mode=30;break}ce.have=0,ce.mode=18;case 18:for(;ce.have<ce.ncode;){for(;Je<3;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}ce.lens[c[ce.have++]]=7&Te,Te>>>=3,Je-=3}for(;ce.have<19;)ce.lens[c[ce.have++]]=0;if(ce.lencode=ce.lendyn,ce.lenbits=7,v=S(0,ce.lens,0,19,ce.lencode,0,ce.work,i={bits:ce.lenbits}),ce.lenbits=i.bits,v){ke.msg="invalid code lengths set",ce.mode=30;break}ce.have=0,ce.mode=19;case 19:for(;ce.have<ce.nlen+ce.ndist;){for(;At=(Tt=ce.lencode[Te&(1<<ce.lenbits)-1])>>>16&255,Ot=65535&Tt,!((St=Tt>>>24)<=Je);){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}if(Ot<16)Te>>>=St,Je-=St,ce.lens[ce.have++]=Ot;else{if(16===Ot){for(o=St+2;Je<o;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}if(Te>>>=St,Je-=St,0===ce.have){ke.msg="invalid bit length repeat",ce.mode=30;break}a=ce.lens[ce.have-1],_t=3+(3&Te),Te>>>=2,Je-=2}else if(17===Ot){for(o=St+3;Je<o;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}Je-=St,a=0,_t=3+(7&(Te>>>=St)),Te>>>=3,Je-=3}else{for(o=St+7;Je<o;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}Je-=St,a=0,_t=11+(127&(Te>>>=St)),Te>>>=7,Je-=7}if(ce.have+_t>ce.nlen+ce.ndist){ke.msg="invalid bit length repeat",ce.mode=30;break}for(;_t--;)ce.lens[ce.have++]=a}}if(30===ce.mode)break;if(0===ce.lens[256]){ke.msg="invalid code -- missing end-of-block",ce.mode=30;break}if(ce.lenbits=9,v=S(1,ce.lens,0,ce.nlen,ce.lencode,0,ce.work,i={bits:ce.lenbits}),ce.lenbits=i.bits,v){ke.msg="invalid literal/lengths set",ce.mode=30;break}if(ce.distbits=6,ce.distcode=ce.distdyn,v=S(2,ce.lens,ce.nlen,ce.ndist,ce.distcode,0,ce.work,i={bits:ce.distbits}),ce.distbits=i.bits,v){ke.msg="invalid distances set",ce.mode=30;break}if(ce.mode=20,6===Pe)break e;case 20:ce.mode=21;case 21:if(Ke>=6&&ve>=258){ke.next_out=Ue,ke.avail_out=ve,ke.next_in=te,ke.avail_in=Ke,ce.hold=Te,ce.bits=Je,x(ke,ut),Ue=ke.next_out,dt=ke.output,ve=ke.avail_out,te=ke.next_in,Ge=ke.input,Ke=ke.avail_in,Te=ce.hold,Je=ce.bits,12===ce.mode&&(ce.back=-1);break}for(ce.back=0;At=(Tt=ce.lencode[Te&(1<<ce.lenbits)-1])>>>16&255,Ot=65535&Tt,!((St=Tt>>>24)<=Je);){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}if(At&&0==(240&At)){for(Mt=St,t=At,j=Ot;At=(Tt=ce.lencode[j+((Te&(1<<Mt+t)-1)>>Mt)])>>>16&255,Ot=65535&Tt,!(Mt+(St=Tt>>>24)<=Je);){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}Te>>>=Mt,Je-=Mt,ce.back+=Mt}if(Te>>>=St,Je-=St,ce.back+=St,ce.length=Ot,0===At){ce.mode=26;break}if(32&At){ce.back=-1,ce.mode=12;break}if(64&At){ke.msg="invalid literal/length code",ce.mode=30;break}ce.extra=15&At,ce.mode=22;case 22:if(ce.extra){for(o=ce.extra;Je<o;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}ce.length+=Te&(1<<ce.extra)-1,Te>>>=ce.extra,Je-=ce.extra,ce.back+=ce.extra}ce.was=ce.length,ce.mode=23;case 23:for(;At=(Tt=ce.distcode[Te&(1<<ce.distbits)-1])>>>16&255,Ot=65535&Tt,!((St=Tt>>>24)<=Je);){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}if(0==(240&At)){for(Mt=St,t=At,j=Ot;At=(Tt=ce.distcode[j+((Te&(1<<Mt+t)-1)>>Mt)])>>>16&255,Ot=65535&Tt,!(Mt+(St=Tt>>>24)<=Je);){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}Te>>>=Mt,Je-=Mt,ce.back+=Mt}if(Te>>>=St,Je-=St,ce.back+=St,64&At){ke.msg="invalid distance code",ce.mode=30;break}ce.offset=Ot,ce.extra=15&At,ce.mode=24;case 24:if(ce.extra){for(o=ce.extra;Je<o;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}ce.offset+=Te&(1<<ce.extra)-1,Te>>>=ce.extra,Je-=ce.extra,ce.back+=ce.extra}if(ce.offset>ce.dmax){ke.msg="invalid distance too far back",ce.mode=30;break}ce.mode=25;case 25:if(0===ve)break e;if(ce.offset>(_t=ut-ve)){if((_t=ce.offset-_t)>ce.whave&&ce.sane){ke.msg="invalid distance too far back",ce.mode=30;break}kt=_t>ce.wnext?ce.wsize-(_t-=ce.wnext):ce.wnext-_t,_t>ce.length&&(_t=ce.length),It=ce.window}else It=dt,kt=Ue-ce.offset,_t=ce.length;_t>ve&&(_t=ve),ve-=_t,ce.length-=_t;do{dt[Ue++]=It[kt++]}while(--_t);0===ce.length&&(ce.mode=21);break;case 26:if(0===ve)break e;dt[Ue++]=ce.length,ve--,ce.mode=21;break;case 27:if(ce.wrap){for(;Je<32;){if(0===Ke)break e;Ke--,Te|=Ge[te++]<<Je,Je+=8}if(ke.total_out+=ut-=ve,ce.total+=ut,ut&&(ke.adler=ce.check=ce.flags?N(ce.check,dt,ut,Ue-ut):C(ce.check,dt,ut,Ue-ut)),ut=ve,(ce.flags?Te:it(Te))!==ce.check){ke.msg="incorrect data check",ce.mode=30;break}Te=0,Je=0}ce.mode=28;case 28:if(ce.wrap&&ce.flags){for(;Je<32;){if(0===Ke)break e;Ke--,Te+=Ge[te++]<<Je,Je+=8}if(Te!==(4294967295&ce.total)){ke.msg="incorrect length check",ce.mode=30;break}Te=0,Je=0}ce.mode=29;case 29:v=1;break e;case 30:v=-3;break e;case 31:return-4;default:return B}return ke.next_out=Ue,ke.avail_out=ve,ke.next_in=te,ke.avail_in=Ke,ce.hold=Te,ce.bits=Je,(ce.wsize||ut!==ke.avail_out&&ce.mode<30&&(ce.mode<27||4!==Pe))&&function Be(ke,Pe,ce,Ge){var dt,te=ke.state;return null===te.window&&(te.wsize=1<<te.wbits,te.wnext=0,te.whave=0,te.window=new R.Buf8(te.wsize)),Ge>=te.wsize?(R.arraySet(te.window,Pe,ce-te.wsize,te.wsize,0),te.wnext=0,te.whave=te.wsize):((dt=te.wsize-te.wnext)>Ge&&(dt=Ge),R.arraySet(te.window,Pe,ce-Ge,dt,te.wnext),(Ge-=dt)?(R.arraySet(te.window,Pe,ce-Ge,Ge,0),te.wnext=Ge,te.whave=te.wsize):(te.wnext+=dt,te.wnext===te.wsize&&(te.wnext=0),te.whave<te.wsize&&(te.whave+=dt))),0}(ke,ke.output,ke.next_out,ut-ke.avail_out)?(ce.mode=31,-4):(ut-=ke.avail_out,ke.total_in+=bt-=ke.avail_in,ke.total_out+=ut,ce.total+=ut,ce.wrap&&ut&&(ke.adler=ce.check=ce.flags?N(ce.check,dt,ut,ke.next_out-ut):C(ce.check,dt,ut,ke.next_out-ut)),ke.data_type=ce.bits+(ce.last?64:0)+(12===ce.mode?128:0)+(20===ce.mode||15===ce.mode?256:0),(0===bt&&0===ut||4===Pe)&&0===v&&(v=-5),v)},E.inflateEnd=function De(ke){if(!ke||!ke.state)return B;var Pe=ke.state;return Pe.window&&(Pe.window=null),ke.state=null,0},E.inflateGetHeader=function We(ke,Pe){var ce;return ke&&ke.state&&0!=(2&(ce=ke.state).wrap)?(ce.head=Pe,Pe.done=!1,0):B},E.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(y,w,E){var R=y("../utils/common"),C=15,m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],M=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],O=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];w.exports=function(ee,G,B,A,H,$,J,Q){var Qe,ae,fe,Me,je,Ce,de,pe,xe,U=Q.bits,K=0,F=0,L=0,ie=0,Y=0,ne=0,le=0,ge=0,Ee=0,Le=0,ze=null,we=0,ye=new R.Buf16(16),$e=new R.Buf16(16),qe=null,ue=0;for(K=0;K<=C;K++)ye[K]=0;for(F=0;F<A;F++)ye[G[B+F]]++;for(Y=U,ie=C;ie>=1&&0===ye[ie];ie--);if(Y>ie&&(Y=ie),0===ie)return H[$++]=20971520,H[$++]=20971520,Q.bits=1,0;for(L=1;L<ie&&0===ye[L];L++);for(Y<L&&(Y=L),ge=1,K=1;K<=C;K++)if(ge<<=1,(ge-=ye[K])<0)return-1;if(ge>0&&(0===ee||1!==ie))return-1;for($e[1]=0,K=1;K<C;K++)$e[K+1]=$e[K]+ye[K];for(F=0;F<A;F++)0!==G[B+F]&&(J[$e[G[B+F]]++]=F);if(0===ee?(ze=qe=J,Ce=19):1===ee?(ze=m,we-=257,qe=l,ue-=257,Ce=256):(ze=M,qe=O,Ce=-1),Le=0,F=0,K=L,je=$,ne=Y,le=0,fe=-1,Me=(Ee=1<<Y)-1,1===ee&&Ee>852||2===ee&&Ee>592)return 1;for(;;){de=K-le,J[F]<Ce?(pe=0,xe=J[F]):J[F]>Ce?(pe=qe[ue+J[F]],xe=ze[we+J[F]]):(pe=96,xe=0),Qe=1<<K-le,L=ae=1<<ne;do{H[je+(Le>>le)+(ae-=Qe)]=de<<24|pe<<16|xe|0}while(0!==ae);for(Qe=1<<K-1;Le&Qe;)Qe>>=1;if(0!==Qe?(Le&=Qe-1,Le+=Qe):Le=0,F++,0==--ye[K]){if(K===ie)break;K=G[B+J[F]]}if(K>Y&&(Le&Me)!==fe){for(0===le&&(le=Y),je+=L,ge=1<<(ne=K-le);ne+le<ie&&!((ge-=ye[ne+le])<=0);)ne++,ge<<=1;if(Ee+=1<<ne,1===ee&&Ee>852||2===ee&&Ee>592)return 1;H[fe=Le&Me]=Y<<24|ne<<16|je-$|0}}return 0!==Le&&(H[je+Le]=K-le<<24|64<<16|0),Q.bits=Y,0}},{"../utils/common":27}],37:[function(y,w,E){w.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(y,w,E){var R=y("../utils/common");function s(se){for(var De=se.length;--De>=0;)se[De]=0}var G=286,B=30,$=15,ie=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ee=new Array(576);s(Ee);var Le=new Array(60);s(Le);var Qe=new Array(512);s(Qe);var ae=new Array(256);s(ae);var fe=new Array(29);s(fe);var Me=new Array(B);s(Me);var ze,we,Ce,je=function(se,De,We,ke,Pe){this.static_tree=se,this.extra_bits=De,this.extra_base=We,this.elems=ke,this.max_length=Pe,this.has_stree=se&&se.length},ye=function(se,De){this.dyn_tree=se,this.max_code=0,this.stat_desc=De};function $e(se){return se<256?Qe[se]:Qe[256+(se>>>7)]}function qe(se,De){se.pending_buf[se.pending++]=255&De,se.pending_buf[se.pending++]=De>>>8&255}function ue(se,De,We){se.bi_valid>16-We?(se.bi_buf|=De<<se.bi_valid&65535,qe(se,se.bi_buf),se.bi_buf=De>>16-se.bi_valid,se.bi_valid+=We-16):(se.bi_buf|=De<<se.bi_valid&65535,se.bi_valid+=We)}function de(se,De,We){ue(se,We[2*De],We[2*De+1])}function pe(se,De){var We=0;do{We|=1&se,se>>>=1,We<<=1}while(--De>0);return We>>>1}function rt(se,De,We){var ce,Ge,ke=new Array(16),Pe=0;for(ce=1;ce<=$;ce++)ke[ce]=Pe=Pe+We[ce-1]<<1;for(Ge=0;Ge<=De;Ge++){var dt=se[2*Ge+1];0!==dt&&(se[2*Ge]=pe(ke[dt]++,dt))}}function Re(se){var De;for(De=0;De<G;De++)se.dyn_ltree[2*De]=0;for(De=0;De<B;De++)se.dyn_dtree[2*De]=0;for(De=0;De<19;De++)se.bl_tree[2*De]=0;se.dyn_ltree[512]=1,se.opt_len=se.static_len=0,se.last_lit=se.matches=0}function ot(se){se.bi_valid>8?qe(se,se.bi_buf):se.bi_valid>0&&(se.pending_buf[se.pending++]=se.bi_buf),se.bi_buf=0,se.bi_valid=0}function ct(se,De,We,ke){var Pe=2*De,ce=2*We;return se[Pe]<se[ce]||se[Pe]===se[ce]&&ke[De]<=ke[We]}function st(se,De,We){for(var ke=se.heap[We],Pe=We<<1;Pe<=se.heap_len&&(Pe<se.heap_len&&ct(De,se.heap[Pe+1],se.heap[Pe],se.depth)&&Pe++,!ct(De,ke,se.heap[Pe],se.depth));)se.heap[We]=se.heap[Pe],We=Pe,Pe<<=1;se.heap[We]=ke}function Ze(se,De,We){var ke,Pe,Ge,dt,ce=0;if(0!==se.last_lit)do{ke=se.pending_buf[se.d_buf+2*ce]<<8|se.pending_buf[se.d_buf+2*ce+1],Pe=se.pending_buf[se.l_buf+ce],ce++,0===ke?de(se,Pe,De):(de(se,(Ge=ae[Pe])+256+1,De),0!==(dt=ie[Ge])&&ue(se,Pe-=fe[Ge],dt),de(se,Ge=$e(--ke),We),0!==(dt=Y[Ge])&&ue(se,ke-=Me[Ge],dt))}while(ce<se.last_lit);de(se,256,De)}function it(se,De){var Ge,dt,Ue,We=De.dyn_tree,ke=De.stat_desc.static_tree,Pe=De.stat_desc.has_stree,ce=De.stat_desc.elems,te=-1;for(se.heap_len=0,se.heap_max=573,Ge=0;Ge<ce;Ge++)0!==We[2*Ge]?(se.heap[++se.heap_len]=te=Ge,se.depth[Ge]=0):We[2*Ge+1]=0;for(;se.heap_len<2;)We[2*(Ue=se.heap[++se.heap_len]=te<2?++te:0)]=1,se.depth[Ue]=0,se.opt_len--,Pe&&(se.static_len-=ke[2*Ue+1]);for(De.max_code=te,Ge=se.heap_len>>1;Ge>=1;Ge--)st(se,We,Ge);Ue=ce;do{Ge=se.heap[1],se.heap[1]=se.heap[se.heap_len--],st(se,We,1),dt=se.heap[1],se.heap[--se.heap_max]=Ge,se.heap[--se.heap_max]=dt,We[2*Ue]=We[2*Ge]+We[2*dt],se.depth[Ue]=(se.depth[Ge]>=se.depth[dt]?se.depth[Ge]:se.depth[dt])+1,We[2*Ge+1]=We[2*dt+1]=Ue,se.heap[1]=Ue++,st(se,We,1)}while(se.heap_len>=2);se.heap[--se.heap_max]=se.heap[1],function Xe(se,De){var Ue,Ke,ve,Te,Je,bt,We=De.dyn_tree,ke=De.max_code,Pe=De.stat_desc.static_tree,ce=De.stat_desc.has_stree,Ge=De.stat_desc.extra_bits,dt=De.stat_desc.extra_base,te=De.stat_desc.max_length,ut=0;for(Te=0;Te<=$;Te++)se.bl_count[Te]=0;for(We[2*se.heap[se.heap_max]+1]=0,Ue=se.heap_max+1;Ue<573;Ue++)(Te=We[2*We[2*(Ke=se.heap[Ue])+1]+1]+1)>te&&(Te=te,ut++),We[2*Ke+1]=Te,!(Ke>ke)&&(se.bl_count[Te]++,Je=0,Ke>=dt&&(Je=Ge[Ke-dt]),se.opt_len+=(bt=We[2*Ke])*(Te+Je),ce&&(se.static_len+=bt*(Pe[2*Ke+1]+Je)));if(0!==ut){do{for(Te=te-1;0===se.bl_count[Te];)Te--;se.bl_count[Te]--,se.bl_count[Te+1]+=2,se.bl_count[te]--,ut-=2}while(ut>0);for(Te=te;0!==Te;Te--)for(Ke=se.bl_count[Te];0!==Ke;)!((ve=se.heap[--Ue])>ke)&&(We[2*ve+1]!==Te&&(se.opt_len+=(Te-We[2*ve+1])*We[2*ve],We[2*ve+1]=Te),Ke--)}}(se,De),rt(We,te,se.bl_count)}function vt(se,De,We){var ke,ce,Pe=-1,Ge=De[1],dt=0,te=7,Ue=4;for(0===Ge&&(te=138,Ue=3),De[2*(We+1)+1]=65535,ke=0;ke<=We;ke++)ce=Ge,Ge=De[2*(ke+1)+1],!(++dt<te&&ce===Ge)&&(dt<Ue?se.bl_tree[2*ce]+=dt:0!==ce?(ce!==Pe&&se.bl_tree[2*ce]++,se.bl_tree[32]++):dt<=10?se.bl_tree[34]++:se.bl_tree[36]++,dt=0,Pe=ce,0===Ge?(te=138,Ue=3):ce===Ge?(te=6,Ue=3):(te=7,Ue=4))}function nt(se,De,We){var ke,ce,Pe=-1,Ge=De[1],dt=0,te=7,Ue=4;for(0===Ge&&(te=138,Ue=3),ke=0;ke<=We;ke++)if(ce=Ge,Ge=De[2*(ke+1)+1],!(++dt<te&&ce===Ge)){if(dt<Ue)do{de(se,ce,se.bl_tree)}while(0!=--dt);else 0!==ce?(ce!==Pe&&(de(se,ce,se.bl_tree),dt--),de(se,16,se.bl_tree),ue(se,dt-3,2)):dt<=10?(de(se,17,se.bl_tree),ue(se,dt-3,3)):(de(se,18,se.bl_tree),ue(se,dt-11,7));dt=0,Pe=ce,0===Ge?(te=138,Ue=3):ce===Ge?(te=6,Ue=3):(te=7,Ue=4)}}var Et=!1;function Nt(se,De,We,ke){ue(se,0+(ke?1:0),3),function pt(se,De,We,ke){ot(se),ke&&(qe(se,We),qe(se,~We)),R.arraySet(se.pending_buf,se.window,De,We,se.pending),se.pending+=We}(se,De,We,!0)}E._tr_init=function Ct(se){Et||(function tt(){var se,De,We,ke,Pe,ce=new Array(16);for(We=0,ke=0;ke<28;ke++)for(fe[ke]=We,se=0;se<1<<ie[ke];se++)ae[We++]=ke;for(ae[We-1]=ke,Pe=0,ke=0;ke<16;ke++)for(Me[ke]=Pe,se=0;se<1<<Y[ke];se++)Qe[Pe++]=ke;for(Pe>>=7;ke<B;ke++)for(Me[ke]=Pe<<7,se=0;se<1<<Y[ke]-7;se++)Qe[256+Pe++]=ke;for(De=0;De<=$;De++)ce[De]=0;for(se=0;se<=143;)Ee[2*se+1]=8,se++,ce[8]++;for(;se<=255;)Ee[2*se+1]=9,se++,ce[9]++;for(;se<=279;)Ee[2*se+1]=7,se++,ce[7]++;for(;se<=287;)Ee[2*se+1]=8,se++,ce[8]++;for(rt(Ee,287,ce),se=0;se<B;se++)Le[2*se+1]=5,Le[2*se]=pe(se,5);ze=new je(Ee,ie,257,G,$),we=new je(Le,Y,0,B,$),Ce=new je(new Array(0),ne,0,19,7)}(),Et=!0),se.l_desc=new ye(se.dyn_ltree,ze),se.d_desc=new ye(se.dyn_dtree,we),se.bl_desc=new ye(se.bl_tree,Ce),se.bi_buf=0,se.bi_valid=0,Re(se)},E._tr_stored_block=Nt,E._tr_flush_block=function me(se,De,We,ke){var Pe,ce,Ge=0;se.level>0?(2===se.strm.data_type&&(se.strm.data_type=function et(se){var We,De=4093624447;for(We=0;We<=31;We++,De>>>=1)if(1&De&&0!==se.dyn_ltree[2*We])return 0;if(0!==se.dyn_ltree[18]||0!==se.dyn_ltree[20]||0!==se.dyn_ltree[26])return 1;for(We=32;We<256;We++)if(0!==se.dyn_ltree[2*We])return 1;return 0}(se)),it(se,se.l_desc),it(se,se.d_desc),Ge=function gt(se){var De;for(vt(se,se.dyn_ltree,se.l_desc.max_code),vt(se,se.dyn_dtree,se.d_desc.max_code),it(se,se.bl_desc),De=18;De>=3&&0===se.bl_tree[2*le[De]+1];De--);return se.opt_len+=3*(De+1)+5+5+4,De}(se),(ce=se.static_len+3+7>>>3)<=(Pe=se.opt_len+3+7>>>3)&&(Pe=ce)):Pe=ce=We+5,We+4<=Pe&&-1!==De?Nt(se,De,We,ke):4===se.strategy||ce===Pe?(ue(se,2+(ke?1:0),3),Ze(se,Ee,Le)):(ue(se,4+(ke?1:0),3),function Ye(se,De,We,ke){var Pe;for(ue(se,De-257,5),ue(se,We-1,5),ue(se,ke-4,4),Pe=0;Pe<ke;Pe++)ue(se,se.bl_tree[2*le[Pe]+1],3);nt(se,se.dyn_ltree,De-1),nt(se,se.dyn_dtree,We-1)}(se,se.l_desc.max_code+1,se.d_desc.max_code+1,Ge+1),Ze(se,se.dyn_ltree,se.dyn_dtree)),Re(se),ke&&ot(se)},E._tr_tally=function Be(se,De,We){return se.pending_buf[se.d_buf+2*se.last_lit]=De>>>8&255,se.pending_buf[se.d_buf+2*se.last_lit+1]=255&De,se.pending_buf[se.l_buf+se.last_lit]=255&We,se.last_lit++,0===De?se.dyn_ltree[2*We]++:(se.matches++,De--,se.dyn_ltree[2*(ae[We]+256+1)]++,se.dyn_dtree[2*$e(De)]++),se.last_lit===se.lit_bufsize-1},E._tr_align=function Ie(se){ue(se,2,3),de(se,256,Ee),function xe(se){16===se.bi_valid?(qe(se,se.bi_buf),se.bi_buf=0,se.bi_valid=0):se.bi_valid>=8&&(se.pending_buf[se.pending++]=255&se.bi_buf,se.bi_buf>>=8,se.bi_valid-=8)}(se)}},{"../utils/common":27}],39:[function(y,w,E){w.exports=function R(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[9])(9)}();